"use strict";var SU=Object.create;var Bp=Object.defineProperty;var BI=Object.getOwnPropertyDescriptor;var IU=Object.getOwnPropertyNames;var xU=Object.getPrototypeOf,CU=Object.prototype.hasOwnProperty;var Ru=(r,e)=>()=>(r&&(e=r(r=0)),e);var b=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),PU=(r,e)=>{for(var t in e)Bp(r,t,{get:e[t],enumerable:!0})},TU=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of IU(e))!CU.call(r,i)&&i!==t&&Bp(r,i,{get:()=>e[i],enumerable:!(n=BI(e,i))||n.enumerable});return r};var S=(r,e,t)=>(t=r!=null?SU(xU(r)):{},TU(e||!r||!r.__esModule?Bp(t,"default",{value:r,enumerable:!0}):t,r));var C=(r,e,t,n)=>{for(var i=n>1?void 0:n?BI(e,t):e,o=r.length-1,s;o>=0;o--)(s=r[o])&&(i=(n?s(e,t,i):s(i))||i);return n&&i&&Bp(e,t,i),i},g=(r,e)=>(t,n)=>e(t,n,r);var Ge=b(($X,WI)=>{"use strict";var Sy=Object.defineProperty,EU=Object.getOwnPropertyDescriptor,RU=Object.getOwnPropertyNames,AU=Object.prototype.hasOwnProperty,kU=(r,e)=>{for(var t in e)Sy(r,t,{get:e[t],enumerable:!0})},DU=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of RU(e))!AU.call(r,i)&&i!==t&&Sy(r,i,{get:()=>e[i],enumerable:!(n=EU(e,i))||n.enumerable});return r},OU=r=>DU(Sy({},"__esModule",{value:!0}),r),jI={};kU(jI,{config:()=>BU,t:()=>qI});WI.exports=OU(jI);var MU=require("fs"),LU=require("fs/promises");async function NU(r){if(r.protocol==="file:")return await(0,LU.readFile)(r,"utf8");if(r.protocol==="http:"||r.protocol==="https:"){let e=await fetch(r.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let n=`Unexpected ${e.status} response while trying to read ${r}`;try{n+=`: ${await e.text()}`}catch{}throw new Error(n)}return await e.text()}throw new Error("Unsupported protocol")}function FU(r){return(0,MU.readFileSync)(r,"utf8")}var Au;function BU(r){if("contents"in r){typeof r.contents=="string"?Au=JSON.parse(r.contents):Au=r.contents;return}if("fsPath"in r){let e=FU(r.fsPath),t=JSON.parse(e);Au=UI(t)?t.contents.bundle:t;return}if(r.uri){let e=r.uri;return typeof r.uri=="string"&&(e=new URL(r.uri)),new Promise((t,n)=>{NU(e).then(i=>{try{let o=JSON.parse(i);Au=UI(o)?o.contents.bundle:o,t()}catch(o){n(o)}}).catch(i=>{n(i)})})}}function qI(...r){let e=r[0],t,n,i;if(typeof e=="string")t=e,n=e,r.splice(0,1),i=!r||typeof r[0]!="object"?r:r[0];else if(e instanceof Array){let s=r.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let c=1;c<e.length;c++)a+=`{${c-1}}`+e[c];return qI(a,...s)}else n=e.message,t=n,e.comment&&e.comment.length>0&&(t+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{};let o=Au?.[t];return o?typeof o=="string"?Up(o,i):o.comment?Up(o.message,i):Up(n,i):Up(n,i)}var UU=/{([^}]+)}/g;function Up(r,e){return Object.keys(e).length===0?r:r.replace(UU,(t,n)=>e[n]??t)}function UI(r){return typeof r?.contents?.bundle=="object"&&typeof r?.version=="string"}});var Iy=b(()=>{var VI;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:a(),n=i(r);typeof t.Reflect<"u"&&(n=i(t.Reflect,n)),e(n,t),typeof t.Reflect>"u"&&(t.Reflect=r);function i(c,u){return function(l,p){Object.defineProperty(c,l,{configurable:!0,writable:!0,value:p}),u&&u(l,p)}}function o(){try{return Function("return this;")()}catch{}}function s(){try{return(0,eval)("(function() { return this; })()")}catch{}}function a(){return o()||s()}})(function(e,t){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",o=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",c={__proto__:[]}instanceof Array,u=!a&&!c,l={create:a?function(){return wy(Object.create(null))}:c?function(){return wy({__proto__:null})}:function(){return wy({})},has:u?function(_,I){return n.call(_,I)}:function(_,I){return I in _},get:u?function(_,I){return n.call(_,I)?_[I]:void 0}:function(_,I){return _[I]}},p=Object.getPrototypeOf(Function),d=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:yU(),f=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:bU(),h=typeof WeakMap=="function"?WeakMap:vU(),m=i?Symbol.for("@reflect-metadata:registry"):void 0,y=hU(),w=mU(y);function k(_,I,E,M){if(ee(E)){if(!N(_))throw new TypeError;if(!Re(I))throw new TypeError;return Ie(_,I)}else{if(!N(_))throw new TypeError;if(!xe(I))throw new TypeError;if(!xe(M)&&!ee(M)&&!$i(M))throw new TypeError;return $i(M)&&(M=void 0),E=ce(E),_e(_,I,E,M)}}e("decorate",k);function D(_,I){function E(M,X){if(!xe(M))throw new TypeError;if(!ee(X)&&!It(X))throw new TypeError;pe(_,I,M,X)}return E}e("metadata",D);function Q(_,I,E,M){if(!xe(E))throw new TypeError;return ee(M)||(M=ce(M)),pe(_,I,E,M)}e("defineMetadata",Q);function F(_,I,E){if(!xe(I))throw new TypeError;return ee(E)||(E=ce(E)),en(_,I,E)}e("hasMetadata",F);function te(_,I,E){if(!xe(I))throw new TypeError;return ee(E)||(E=ce(E)),P(_,I,E)}e("hasOwnMetadata",te);function H(_,I,E){if(!xe(I))throw new TypeError;return ee(E)||(E=ce(E)),T(_,I,E)}e("getMetadata",H);function B(_,I,E){if(!xe(I))throw new TypeError;return ee(E)||(E=ce(E)),ft(_,I,E)}e("getOwnMetadata",B);function Z(_,I){if(!xe(_))throw new TypeError;return ee(I)||(I=ce(I)),pr(_,I)}e("getMetadataKeys",Z);function ve(_,I){if(!xe(_))throw new TypeError;return ee(I)||(I=ce(I)),dr(_,I)}e("getOwnMetadataKeys",ve);function R(_,I,E){if(!xe(I))throw new TypeError;if(ee(E)||(E=ce(E)),!xe(I))throw new TypeError;ee(E)||(E=ce(E));var M=Eu(I,E,!1);return ee(M)?!1:M.OrdinaryDeleteMetadata(_,I,E)}e("deleteMetadata",R);function Ie(_,I){for(var E=_.length-1;E>=0;--E){var M=_[E],X=M(I);if(!ee(X)&&!$i(X)){if(!Re(X))throw new TypeError;I=X}}return I}function _e(_,I,E,M){for(var X=_.length-1;X>=0;--X){var Je=_[X],ut=Je(I,E,M);if(!ee(ut)&&!$i(ut)){if(!xe(ut))throw new TypeError;M=ut}}return M}function en(_,I,E){var M=P(_,I,E);if(M)return!0;var X=_y(I);return $i(X)?!1:en(_,X,E)}function P(_,I,E){var M=Eu(I,E,!1);return ee(M)?!1:Fp(M.OrdinaryHasOwnMetadata(_,I,E))}function T(_,I,E){var M=P(_,I,E);if(M)return ft(_,I,E);var X=_y(I);if(!$i(X))return T(_,X,E)}function ft(_,I,E){var M=Eu(I,E,!1);if(!ee(M))return M.OrdinaryGetOwnMetadata(_,I,E)}function pe(_,I,E,M){var X=Eu(E,M,!0);X.OrdinaryDefineOwnMetadata(_,I,E,M)}function pr(_,I){var E=dr(_,I),M=_y(_);if(M===null)return E;var X=pr(M,I);if(X.length<=0)return E;if(E.length<=0)return X;for(var Je=new f,ut=[],se=0,U=E;se<U.length;se++){var K=U[se],G=Je.has(K);G||(Je.add(K),ut.push(K))}for(var Y=0,ue=X;Y<ue.length;Y++){var K=ue[Y],G=Je.has(K);G||(Je.add(K),ut.push(K))}return ut}function dr(_,I){var E=Eu(_,I,!1);return E?E.OrdinaryOwnMetadataKeys(_,I):[]}function At(_){if(_===null)return 1;switch(typeof _){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return _===null?1:6;default:return 6}}function ee(_){return _===void 0}function $i(_){return _===null}function ca(_){return typeof _=="symbol"}function xe(_){return typeof _=="object"?_!==null:typeof _=="function"}function oe(_,I){switch(At(_)){case 0:return _;case 1:return _;case 2:return _;case 3:return _;case 4:return _;case 5:return _}var E=I===3?"string":I===5?"number":"default",M=la(_,o);if(M!==void 0){var X=M.call(_,E);if(xe(X))throw new TypeError;return X}return ua(_,E==="default"?"number":E)}function ua(_,I){if(I==="string"){var E=_.toString;if(re(E)){var M=E.call(_);if(!xe(M))return M}var X=_.valueOf;if(re(X)){var M=X.call(_);if(!xe(M))return M}}else{var X=_.valueOf;if(re(X)){var M=X.call(_);if(!xe(M))return M}var Je=_.toString;if(re(Je)){var M=Je.call(_);if(!xe(M))return M}}throw new TypeError}function Fp(_){return!!_}function j(_){return""+_}function ce(_){var I=oe(_,3);return ca(I)?I:j(I)}function N(_){return Array.isArray?Array.isArray(_):_ instanceof Object?_ instanceof Array:Object.prototype.toString.call(_)==="[object Array]"}function re(_){return typeof _=="function"}function Re(_){return typeof _=="function"}function It(_){switch(At(_)){case 3:return!0;case 4:return!0;default:return!1}}function We(_,I){return _===I||_!==_&&I!==I}function la(_,I){var E=_[I];if(E!=null){if(!re(E))throw new TypeError;return E}}function zo(_){var I=la(_,s);if(!re(I))throw new TypeError;var E=I.call(_);if(!xe(E))throw new TypeError;return E}function MI(_){return _.value}function LI(_){var I=_.next();return I.done?!1:I}function NI(_){var I=_.return;I&&I.call(_)}function _y(_){var I=Object.getPrototypeOf(_);if(typeof _!="function"||_===p||I!==p)return I;var E=_.prototype,M=E&&Object.getPrototypeOf(E);if(M==null||M===Object.prototype)return I;var X=M.constructor;return typeof X!="function"||X===_?I:X}function fU(){var _;!ee(m)&&typeof t.Reflect<"u"&&!(m in t.Reflect)&&typeof t.Reflect.defineMetadata=="function"&&(_=gU(t.Reflect));var I,E,M,X=new h,Je={registerProvider:ut,getProvider:U,setProvider:G};return Je;function ut(Y){if(!Object.isExtensible(Je))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case _===Y:break;case ee(I):I=Y;break;case I===Y:break;case ee(E):E=Y;break;case E===Y:break;default:M===void 0&&(M=new f),M.add(Y);break}}function se(Y,ue){if(!ee(I)){if(I.isProviderFor(Y,ue))return I;if(!ee(E)){if(E.isProviderFor(Y,ue))return I;if(!ee(M))for(var De=zo(M);;){var Ye=LI(De);if(!Ye)return;var tn=MI(Ye);if(tn.isProviderFor(Y,ue))return NI(De),tn}}}if(!ee(_)&&_.isProviderFor(Y,ue))return _}function U(Y,ue){var De=X.get(Y),Ye;return ee(De)||(Ye=De.get(ue)),ee(Ye)&&(Ye=se(Y,ue),ee(Ye)||(ee(De)&&(De=new d,X.set(Y,De)),De.set(ue,Ye))),Ye}function K(Y){if(ee(Y))throw new TypeError;return I===Y||E===Y||!ee(M)&&M.has(Y)}function G(Y,ue,De){if(!K(De))throw new Error("Metadata provider not registered.");var Ye=U(Y,ue);if(Ye!==De){if(!ee(Ye))return!1;var tn=X.get(Y);ee(tn)&&(tn=new d,X.set(Y,tn)),tn.set(ue,De)}return!0}}function hU(){var _;return!ee(m)&&xe(t.Reflect)&&Object.isExtensible(t.Reflect)&&(_=t.Reflect[m]),ee(_)&&(_=fU()),!ee(m)&&xe(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,m,{enumerable:!1,configurable:!1,writable:!1,value:_}),_}function mU(_){var I=new h,E={isProviderFor:function(K,G){var Y=I.get(K);return ee(Y)?!1:Y.has(G)},OrdinaryDefineOwnMetadata:ut,OrdinaryHasOwnMetadata:X,OrdinaryGetOwnMetadata:Je,OrdinaryOwnMetadataKeys:se,OrdinaryDeleteMetadata:U};return y.registerProvider(E),E;function M(K,G,Y){var ue=I.get(K),De=!1;if(ee(ue)){if(!Y)return;ue=new d,I.set(K,ue),De=!0}var Ye=ue.get(G);if(ee(Ye)){if(!Y)return;if(Ye=new d,ue.set(G,Ye),!_.setProvider(K,G,E))throw ue.delete(G),De&&I.delete(K),new Error("Wrong provider for target.")}return Ye}function X(K,G,Y){var ue=M(G,Y,!1);return ee(ue)?!1:Fp(ue.has(K))}function Je(K,G,Y){var ue=M(G,Y,!1);if(!ee(ue))return ue.get(K)}function ut(K,G,Y,ue){var De=M(Y,ue,!0);De.set(K,G)}function se(K,G){var Y=[],ue=M(K,G,!1);if(ee(ue))return Y;for(var De=ue.keys(),Ye=zo(De),tn=0;;){var FI=LI(Ye);if(!FI)return Y.length=tn,Y;var _U=MI(FI);try{Y[tn]=_U}catch(wU){try{NI(Ye)}finally{throw wU}}tn++}}function U(K,G,Y){var ue=M(G,Y,!1);if(ee(ue)||!ue.delete(K))return!1;if(ue.size===0){var De=I.get(G);ee(De)||(De.delete(Y),De.size===0&&I.delete(De))}return!0}}function gU(_){var I=_.defineMetadata,E=_.hasOwnMetadata,M=_.getOwnMetadata,X=_.getOwnMetadataKeys,Je=_.deleteMetadata,ut=new h,se={isProviderFor:function(U,K){var G=ut.get(U);return ee(G)?X(U,K).length?(ee(G)&&(G=new f,ut.set(U,G)),G.add(K),!0):!1:G.has(K)},OrdinaryDefineOwnMetadata:I,OrdinaryHasOwnMetadata:E,OrdinaryGetOwnMetadata:M,OrdinaryOwnMetadataKeys:X,OrdinaryDeleteMetadata:Je};return se}function Eu(_,I,E){var M=y.getProvider(_,I);if(!ee(M))return M;if(E){if(y.setProvider(_,I,w))return w;throw new Error("Illegal state.")}}function yU(){var _={},I=[],E=function(){function se(U,K,G){this._index=0,this._keys=U,this._values=K,this._selector=G}return se.prototype["@@iterator"]=function(){return this},se.prototype[s]=function(){return this},se.prototype.next=function(){var U=this._index;if(U>=0&&U<this._keys.length){var K=this._selector(this._keys[U],this._values[U]);return U+1>=this._keys.length?(this._index=-1,this._keys=I,this._values=I):this._index++,{value:K,done:!1}}return{value:void 0,done:!0}},se.prototype.throw=function(U){throw this._index>=0&&(this._index=-1,this._keys=I,this._values=I),U},se.prototype.return=function(U){return this._index>=0&&(this._index=-1,this._keys=I,this._values=I),{value:U,done:!0}},se}(),M=function(){function se(){this._keys=[],this._values=[],this._cacheKey=_,this._cacheIndex=-2}return Object.defineProperty(se.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),se.prototype.has=function(U){return this._find(U,!1)>=0},se.prototype.get=function(U){var K=this._find(U,!1);return K>=0?this._values[K]:void 0},se.prototype.set=function(U,K){var G=this._find(U,!0);return this._values[G]=K,this},se.prototype.delete=function(U){var K=this._find(U,!1);if(K>=0){for(var G=this._keys.length,Y=K+1;Y<G;Y++)this._keys[Y-1]=this._keys[Y],this._values[Y-1]=this._values[Y];return this._keys.length--,this._values.length--,We(U,this._cacheKey)&&(this._cacheKey=_,this._cacheIndex=-2),!0}return!1},se.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=_,this._cacheIndex=-2},se.prototype.keys=function(){return new E(this._keys,this._values,X)},se.prototype.values=function(){return new E(this._keys,this._values,Je)},se.prototype.entries=function(){return new E(this._keys,this._values,ut)},se.prototype["@@iterator"]=function(){return this.entries()},se.prototype[s]=function(){return this.entries()},se.prototype._find=function(U,K){if(!We(this._cacheKey,U)){this._cacheIndex=-1;for(var G=0;G<this._keys.length;G++)if(We(this._keys[G],U)){this._cacheIndex=G;break}}return this._cacheIndex<0&&K&&(this._cacheIndex=this._keys.length,this._keys.push(U),this._values.push(void 0)),this._cacheIndex},se}();return M;function X(se,U){return se}function Je(se,U){return U}function ut(se,U){return[se,U]}}function bU(){var _=function(){function I(){this._map=new d}return Object.defineProperty(I.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),I.prototype.has=function(E){return this._map.has(E)},I.prototype.add=function(E){return this._map.set(E,E),this},I.prototype.delete=function(E){return this._map.delete(E)},I.prototype.clear=function(){this._map.clear()},I.prototype.keys=function(){return this._map.keys()},I.prototype.values=function(){return this._map.keys()},I.prototype.entries=function(){return this._map.entries()},I.prototype["@@iterator"]=function(){return this.keys()},I.prototype[s]=function(){return this.keys()},I}();return _}function vU(){var _=16,I=l.create(),E=M();return function(){function U(){this._key=M()}return U.prototype.has=function(K){var G=X(K,!1);return G!==void 0?l.has(G,this._key):!1},U.prototype.get=function(K){var G=X(K,!1);return G!==void 0?l.get(G,this._key):void 0},U.prototype.set=function(K,G){var Y=X(K,!0);return Y[this._key]=G,this},U.prototype.delete=function(K){var G=X(K,!1);return G!==void 0?delete G[this._key]:!1},U.prototype.clear=function(){this._key=M()},U}();function M(){var U;do U="@@WeakMap@@"+se();while(l.has(I,U));return I[U]=!0,U}function X(U,K){if(!n.call(U,E)){if(!K)return;Object.defineProperty(U,E,{value:l.create()})}return U[E]}function Je(U,K){for(var G=0;G<K;++G)U[G]=Math.random()*255|0;return U}function ut(U){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(U)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(U)):Je(new Uint8Array(U),U):Je(new Array(U),U)}function se(){var U=ut(_);U[6]=U[6]&79|64,U[8]=U[8]&191|128;for(var K="",G=0;G<_;++G){var Y=U[G];(G===4||G===6||G===8)&&(K+="-"),Y<16&&(K+="0"),K+=Y.toString(16).toLowerCase()}return K}}function wy(_){return _.__=void 0,delete _.__,_}})})(VI||(VI={}))});var fi=b(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.findWindowsCandidates=kt.sort=kt.preferredEdgePath=kt.preferredFirefoxPath=kt.preferredChromePath=kt.escapeRegexSpecialChars=kt.canAccess=void 0;var WU=require("path");async function ku({access:r},e){if(!e)return!1;try{return await r(e),!0}catch{return!1}}kt.canAccess=ku;var VU="/\\.?*()^${}|[]+";function $U(r,e){let t=VU.split("").filter(i=>!e||e.indexOf(i)<0).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${t}]`,"g");return r.replace(n,"\\$&")}kt.escapeRegexSpecialChars=$U;async function HU(r,e){if(await ku(r,e.CHROME_PATH))return e.CHROME_PATH}kt.preferredChromePath=HU;async function GU(r,e){if(await ku(r,e.FIREFOX_PATH))return e.FIREFOX_PATH}kt.preferredFirefoxPath=GU;async function zU(r,e){if(await ku(r,e.EDGE_PATH))return e.EDGE_PATH}kt.preferredEdgePath=zU;function KU(r,e){return[...r].filter(n=>!!n).map(n=>{let i=e.find(o=>o.regex.test(n));return i?{path:n,weight:i.weight,quality:i.quality}:{path:n,weight:10,quality:"dev"}}).sort((n,i)=>i.weight-n.weight).map(n=>({path:n.path,quality:n.quality}))}kt.sort=KU;async function JU(r,e,t){let n=[r.LOCALAPPDATA,r.PROGRAMFILES,r["PROGRAMFILES(X86)"]].filter(o=>!!o),i=[];for(let o of n)for(let s of t){let a=WU.win32.join(o,s.name);i.push(ku(e,a).then(c=>c?{path:a,quality:s.type}:void 0))}return(await Promise.all(i)).filter(o=>!!o)}kt.findWindowsCandidates=JU});var qp=b(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.DarwinFinderBase=void 0;var YU=require("path"),XU=require("fs"),xy=fi(),GI=/( \(0x[a-f0-9]+\))/,Cy=class{constructor(e=process.env,t=XU.promises,n=n){this.env=e,this.fs=t,this.execa=n,this.lsRegisterCommand="/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -dump",this.wellKnownPaths=[]}async findWhere(e){for(let t of this.wellKnownPaths)if(e(t)&&await(0,xy.canAccess)(this.fs,t.path))return t;return(await this.findAll()).find(e)}findAll(){var e;return(e=this.foundAll)!==null&&e!==void 0||(this.foundAll=this.findAllInner()),this.foundAll}async findLaunchRegisteredApps(e,t,n){let{stdout:i}=await this.execa.command(`${this.lsRegisterCommand} | awk 'tolower($0) ~ /${e.toLowerCase()}${GI.source}?$/ { $1=""; print $0 }'`,{shell:!0,stdio:"pipe"}),o=[...t,...i.split(`
`).map(c=>c.trim().replace(GI,""))].filter(c=>!!c),s=this.getPreferredPath();s&&o.push(s);let a=new Set;for(let c of o)for(let u of n){let l=YU.posix.join(c.trim(),u);try{await this.fs.access(l),a.add(l)}catch{}}return a}createPriorities(e){let t=this.env.HOME&&(0,xy.escapeRegexSpecialChars)(this.env.HOME),n=this.getPreferredPath(),i=e.reduce((o,s)=>[...o,{regex:new RegExp(`^/Applications/.*${s.name}`),weight:s.weight+100,quality:s.quality},{regex:new RegExp(`^${t}/Applications/.*${s.name}`),weight:s.weight,quality:s.quality},{regex:new RegExp(`^/Volumes/.*${s.name}`),weight:s.weight-100,quality:s.quality}],[]);return n&&i.unshift({regex:new RegExp((0,xy.escapeRegexSpecialChars)(n)),weight:151,quality:"custom"}),i}};jp.DarwinFinderBase=Cy});var zI=b(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.DarwinChromeBrowserFinder=void 0;var QU=fi(),ZU=qp(),Py=class extends ZU.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",quality:"stable"},{path:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",quality:"canary"},{path:"/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta",quality:"beta"},{path:"/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Google Chrome Canary","/Contents/MacOS/Google Chrome Beta","/Contents/MacOS/Google Chrome Dev","/Contents/MacOS/Google Chrome"],t=["/Applications/Google Chrome.app","/Applications/Google Chrome Canary.app"],n=await this.findLaunchRegisteredApps("google chrome[A-Za-z() ]*.app",t,e);return(0,QU.sort)(n,this.createPriorities([{name:"Chrome.app",weight:0,quality:"stable"},{name:"Chrome Canary.app",weight:1,quality:"canary"},{name:"Chrome Beta.app",weight:2,quality:"beta"},{name:"Chrome Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.CHROME_PATH}};Wp.DarwinChromeBrowserFinder=Py});var KI=b(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});Vp.DarwinEdgeBrowserFinder=void 0;var ej=fi(),tj=qp(),Ty=class extends tj.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",quality:"stable"},{path:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",quality:"canary"},{path:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",quality:"beta"},{path:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Microsoft Edge Canary","/Contents/MacOS/Microsoft Edge Beta","/Contents/MacOS/Microsoft Edge Dev","/Contents/MacOS/Microsoft Edge"],t=["/Applications/Microsoft Edge.app"],n=await this.findLaunchRegisteredApps("Microsoft Edge[A-Za-z ]*.app",t,e);return(0,ej.sort)(n,this.createPriorities([{name:"Microsoft Edge.app",weight:0,quality:"stable"},{name:"Microsoft Edge Canary.app",weight:1,quality:"canary"},{name:"Microsoft Edge Beta.app",weight:2,quality:"beta"},{name:"Microsoft Edge Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.EDGE_PATH}};Vp.DarwinEdgeBrowserFinder=Ty});var JI=b($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});$p.DarwinFirefoxBrowserFinder=void 0;var rj=fi(),nj=qp(),Ey=class extends nj.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Firefox.app/Contents/MacOS/firefox",quality:"stable"},{path:"/Applications/Firefox Developer Edition.app/Contents/MacOS/firefox",quality:"dev"},{path:"/Applications/Firefox Nightly.app/Contents/MacOS/firefox",quality:"canary"}]}async findAllInner(){let e=["/Contents/MacOS/firefox"],t=["/Applications/Firefox.app"],n=await this.findLaunchRegisteredApps("Firefox[A-Za-z ]*.app",t,e);return(0,rj.sort)(n,this.createPriorities([{name:"Firefox.app",weight:0,quality:"stable"},{name:"Firefox Nightly.app",weight:1,quality:"canary"},{name:"Firefox Developer Edition.app",weight:2,quality:"dev"}]))}getPreferredPath(){return this.env.FIREFOX_PATH}};$p.DarwinFirefoxBrowserFinder=Ey});var Gp=b(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.LinuxChromeBrowserFinder=void 0;var ij=require("path"),da=fi(),Ry=require("child_process"),oj=require("os"),sj=require("fs"),YI=/\r?\n/,Ay=class{constructor(e=process.env,t=sj.promises){this.env=e,this.fs=t,this.pathEnvironmentVar="CHROME_PATH",this.priorities=[{regex:/chrome-wrapper$/,weight:54,quality:"custom"},{regex:/google-chrome-dev$/,weight:53,quality:"dev"},{regex:/google-chrome-canary$/,weight:52,quality:"canary"},{regex:/google-chrome-unstable$/,weight:51,quality:"canary"},{regex:/google-chrome-canary$/,weight:51,quality:"canary"},{regex:/google-chrome-stable$/,weight:50,quality:"stable"},{regex:/(google-)?chrome$/,weight:49,quality:"stable"},{regex:/chromium-browser$/,weight:48,quality:"custom"},{regex:/chromium$/,weight:47,quality:"custom"}],this.executablesOnPath=["google-chrome-unstable","google-chrome-dev","google-chrome-beta","google-chrome-canary","google-chrome-stable","google-chrome","chromium-browser","chromium"]}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=new Set,t=this.env[this.pathEnvironmentVar];t&&await(0,da.canAccess)(this.fs,t)&&e.add(t),[ij.posix.join((0,oj.homedir)(),".local/share/applications/"),"/usr/share/applications/","/usr/bin","/opt/google"].forEach(s=>{for(let a in this.findChromeExecutables(s))e.add(a)}),await Promise.all(this.executablesOnPath.map(async s=>{try{let a=(0,Ry.execFileSync)("which",[s],{stdio:"pipe"}).toString().split(YI)[0];await(0,da.canAccess)(this.fs,a)&&e.add(a)}catch{}}));let o=t?[{regex:new RegExp((0,da.escapeRegexSpecialChars)(t)),weight:101,quality:"custom"}].concat(this.priorities):this.priorities;return(0,da.sort)(e,o)}async findChromeExecutables(e){let t=/(^[^ ]+).*/,n=`^Exec=/.*/(${this.executablesOnPath.join("|")})-.*`,i=[];if(await(0,da.canAccess)(this.fs,e)){let o;try{o=(0,Ry.execSync)(`grep -ERI "${n}" ${e} | awk -F '=' '{print $2}'`)}catch{o=(0,Ry.execSync)(`grep -Er "${n}" ${e} | awk -F '=' '{print $2}'`)}let s=o.toString().split(YI).map(a=>a.replace(t,"$1"));await Promise.all(s.map(async a=>{await(0,da.canAccess)(this.fs,a)&&i.push(a)}))}return i}};Hp.LinuxChromeBrowserFinder=Ay});var XI=b(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.LinuxEdgeBrowserFinder=void 0;var aj=Gp(),ky=class extends aj.LinuxChromeBrowserFinder{constructor(){super(...arguments),this.pathEnvironmentVar="EDGE_PATH",this.executablesOnPath=["microsoft-edge-dev","microsoft-edge-beta","microsoft-edge-stable","microsoft-edge"],this.priorities=[{regex:/microsoft-edge\-wrapper$/,weight:52,quality:"custom"},{regex:/microsoft-edge\-dev$/,weight:51,quality:"dev"},{regex:/microsoft-edge\-beta$/,weight:51,quality:"beta"},{regex:/microsoft-edge\-stable$/,weight:50,quality:"stable"},{regex:/microsoft-edge$/,weight:49,quality:"stable"}]}};zp.LinuxEdgeBrowserFinder=ky});var QI=b(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.LinuxFirefoxBrowserFinder=void 0;var cj=Gp(),Dy=class extends cj.LinuxChromeBrowserFinder{constructor(){super(...arguments),this.pathEnvironmentVar="FIREFOX_PATH",this.executablesOnPath=["firefox-aurora","firefox-dev","firefox-developer","firefox-trunk","firefox-nightly","firefox"],this.priorities=[{regex:/firefox\-aurora$/,weight:51,quality:"dev"},{regex:/firefox\-dev$/,weight:51,quality:"dev"},{regex:/firefox\-developer$/,weight:51,quality:"dev"},{regex:/firefox\-trunk'$/,weight:50,quality:"canary"},{regex:/firefox\-nightly'$/,weight:50,quality:"canary"},{regex:/firefox$/,weight:49,quality:"stable"}]}};Kp.LinuxFirefoxBrowserFinder=Dy});var ex=b(Jp=>{"use strict";Object.defineProperty(Jp,"__esModule",{value:!0});Jp.WindowsChromeBrowserFinder=void 0;var uj=require("path"),ZI=fi(),lj=require("fs"),Oy=class{constructor(e=process.env,t=lj.promises){this.env=e,this.fs=t}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=uj.win32.sep,t=[{name:`${e}Google${e}Chrome Dev${e}Application${e}chrome.exe`,type:"dev"},{name:`${e}Google${e}Chrome SxS${e}Application${e}chrome.exe`,type:"canary"},{name:`${e}Google${e}Chrome Beta${e}Application${e}chrome.exe`,type:"beta"},{name:`${e}Google${e}Chrome${e}Application${e}chrome.exe`,type:"stable"}],n=await(0,ZI.findWindowsCandidates)(this.env,this.fs,t),i=await(0,ZI.preferredChromePath)(this.fs,this.env);return i&&n.unshift({path:i,quality:"custom"}),n}};Jp.WindowsChromeBrowserFinder=Oy});var rx=b(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.WindowsEdgeBrowserFinder=void 0;var Dt=require("path"),pj=require("fs"),tx=fi(),My=class{constructor(e=process.env,t=pj.promises){this.env=e,this.fs=t}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=[{name:`${Dt.sep}Microsoft${Dt.sep}Edge SxS${Dt.sep}Application${Dt.sep}msedge.exe`,type:"canary"},{name:`${Dt.sep}Microsoft${Dt.sep}Edge Dev${Dt.sep}Application${Dt.sep}msedge.exe`,type:"dev"},{name:`${Dt.sep}Microsoft${Dt.sep}Edge Beta${Dt.sep}Application${Dt.sep}msedge.exe`,type:"beta"},{name:`${Dt.sep}Microsoft${Dt.sep}Edge${Dt.sep}Application${Dt.sep}msedge.exe`,type:"stable"}],t=await(0,tx.findWindowsCandidates)(this.env,this.fs,e),n=await(0,tx.preferredEdgePath)(this.fs,this.env);return n&&t.unshift({path:n,quality:"custom"}),t}};Yp.WindowsEdgeBrowserFinder=My});var ix=b(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.WindowsFirefoxBrowserFinder=void 0;var dj=require("path"),nx=fi(),fj=require("fs"),Ly=class{constructor(e=process.env,t=fj.promises){this.env=e,this.fs=t}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=dj.win32.sep,t=[{name:`${e}Firefox Developer Edition${e}firefox.exe`,type:"dev"},{name:`${e}Firefox Nightly${e}firefox.exe`,type:"canary"},{name:`${e}Mozilla Firefox${e}firefox.exe`,type:"stable"}],n=await(0,nx.findWindowsCandidates)(this.env,this.fs,t),i=await(0,nx.preferredFirefoxPath)(this.fs,this.env);return i&&n.unshift({path:i,quality:"custom"}),n}};Xp.WindowsFirefoxBrowserFinder=Ly});var Ny=b(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.FirefoxBrowserFinder=fr.EdgeBrowserFinder=fr.ChromeBrowserFinder=fr.isQuality=fr.allQualities=void 0;var hj=zI(),mj=KI(),gj=JI(),yj=Gp(),bj=XI(),vj=QI(),_j=ex(),wj=rx(),Sj=ix(),Ij={canary:null,stable:null,beta:null,dev:null,custom:null};fr.allQualities=new Set(Object.keys(Ij));var xj=r=>fr.allQualities.has(r);fr.isQuality=xj;fr.ChromeBrowserFinder=process.platform==="win32"?_j.WindowsChromeBrowserFinder:process.platform==="darwin"?hj.DarwinChromeBrowserFinder:yj.LinuxChromeBrowserFinder;fr.EdgeBrowserFinder=process.platform==="win32"?wj.WindowsEdgeBrowserFinder:process.platform==="darwin"?mj.DarwinEdgeBrowserFinder:bj.LinuxEdgeBrowserFinder;fr.FirefoxBrowserFinder=process.platform==="win32"?Sj.WindowsFirefoxBrowserFinder:process.platform==="darwin"?gj.DarwinFirefoxBrowserFinder:vj.LinuxFirefoxBrowserFinder});var ux=b((uQ,cx)=>{cx.exports=ax;ax.sync=Pj;var ox=require("fs");function Cj(r,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var n=0;n<t.length;n++){var i=t[n].toLowerCase();if(i&&r.substr(-i.length).toLowerCase()===i)return!0}return!1}function sx(r,e,t){return!r.isSymbolicLink()&&!r.isFile()?!1:Cj(e,t)}function ax(r,e,t){ox.stat(r,function(n,i){t(n,n?!1:sx(i,r,e))})}function Pj(r,e){return sx(ox.statSync(r),r,e)}});var hx=b((lQ,fx)=>{fx.exports=px;px.sync=Tj;var lx=require("fs");function px(r,e,t){lx.stat(r,function(n,i){t(n,n?!1:dx(i,e))})}function Tj(r,e){return dx(lx.statSync(r),e)}function dx(r,e){return r.isFile()&&Ej(r,e)}function Ej(r,e){var t=r.mode,n=r.uid,i=r.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),s=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),l=a|c,p=t&u||t&c&&i===s||t&a&&n===o||t&l&&o===0;return p}});var gx=b((dQ,mx)=>{var pQ=require("fs"),Qp;process.platform==="win32"||global.TESTING_WINDOWS?Qp=ux():Qp=hx();mx.exports=Fy;Fy.sync=Rj;function Fy(r,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){Fy(r,e||{},function(o,s){o?i(o):n(s)})})}Qp(r,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),t(n,i)})}function Rj(r,e){try{return Qp.sync(r,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var Ix=b((fQ,Sx)=>{var fa=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",yx=require("path"),Aj=fa?";":":",bx=gx(),vx=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),_x=(r,e)=>{let t=e.colon||Aj,n=r.match(/\//)||fa&&r.match(/\\/)?[""]:[...fa?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(t)],i=fa?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=fa?i.split(t):[""];return fa&&r.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},wx=(r,e,t)=>{typeof e=="function"&&(t=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=_x(r,e),s=[],a=u=>new Promise((l,p)=>{if(u===n.length)return e.all&&s.length?l(s):p(vx(r));let d=n[u],f=/^".*"$/.test(d)?d.slice(1,-1):d,h=yx.join(f,r),m=!f&&/^\.[\\\/]/.test(r)?r.slice(0,2)+h:h;l(c(m,u,0))}),c=(u,l,p)=>new Promise((d,f)=>{if(p===i.length)return d(a(l+1));let h=i[p];bx(u+h,{pathExt:o},(m,y)=>{if(!m&&y)if(e.all)s.push(u+h);else return d(u+h);return d(c(u,l,p+1))})});return t?a(0).then(u=>t(null,u),t):a(0)},kj=(r,e)=>{e=e||{};let{pathEnv:t,pathExt:n,pathExtExe:i}=_x(r,e),o=[];for(let s=0;s<t.length;s++){let a=t[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,u=yx.join(c,r),l=!c&&/^\.[\\\/]/.test(r)?r.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let d=l+n[p];try{if(bx.sync(d,{pathExt:i}))if(e.all)o.push(d);else return d}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw vx(r)};Sx.exports=wx;wx.sync=kj});var Uy=b((hQ,By)=>{"use strict";var xx=(r={})=>{let e=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};By.exports=xx;By.exports.default=xx});var Ex=b((mQ,Tx)=>{"use strict";var Cx=require("path"),Dj=Ix(),Oj=Uy();function Px(r,e){let t=r.options.env||process.env,n=process.cwd(),i=r.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(r.options.cwd)}catch{}let s;try{s=Dj.sync(r.command,{path:t[Oj({env:t})],pathExt:e?Cx.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return s&&(s=Cx.resolve(i?r.options.cwd:"",s)),s}function Mj(r){return Px(r)||Px(r,!0)}Tx.exports=Mj});var Rx=b((gQ,qy)=>{"use strict";var jy=/([()\][%!^"`<>&|;, *?])/g;function Lj(r){return r=r.replace(jy,"^$1"),r}function Nj(r,e){return r=`${r}`,r=r.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),r=r.replace(/(?=(\\+?)?)\1$/,"$1$1"),r=`"${r}"`,r=r.replace(jy,"^$1"),e&&(r=r.replace(jy,"^$1")),r}qy.exports.command=Lj;qy.exports.argument=Nj});var kx=b((yQ,Ax)=>{"use strict";Ax.exports=/^#!(.*)/});var Ox=b((bQ,Dx)=>{"use strict";var Fj=kx();Dx.exports=(r="")=>{let e=r.match(Fj);if(!e)return null;let[t,n]=e[0].replace(/#! ?/,"").split(" "),i=t.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var Lx=b((vQ,Mx)=>{"use strict";var Wy=require("fs"),Bj=Ox();function Uj(r){let t=Buffer.alloc(150),n;try{n=Wy.openSync(r,"r"),Wy.readSync(n,t,0,150,0),Wy.closeSync(n)}catch{}return Bj(t.toString())}Mx.exports=Uj});var Ux=b((_Q,Bx)=>{"use strict";var jj=require("path"),Nx=Ex(),Fx=Rx(),qj=Lx(),Wj=process.platform==="win32",Vj=/\.(?:com|exe)$/i,$j=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Hj(r){r.file=Nx(r);let e=r.file&&qj(r.file);return e?(r.args.unshift(r.file),r.command=e,Nx(r)):r.file}function Gj(r){if(!Wj)return r;let e=Hj(r),t=!Vj.test(e);if(r.options.forceShell||t){let n=$j.test(e);r.command=jj.normalize(r.command),r.command=Fx.command(r.command),r.args=r.args.map(o=>Fx.argument(o,n));let i=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${i}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function zj(r,e,t){e&&!Array.isArray(e)&&(t=e,e=null),e=e?e.slice(0):[],t=Object.assign({},t);let n={command:r,args:e,options:t,file:void 0,original:{command:r,args:e}};return t.shell?n:Gj(n)}Bx.exports=zj});var Wx=b((wQ,qx)=>{"use strict";var Vy=process.platform==="win32";function $y(r,e){return Object.assign(new Error(`${e} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${r.command}`,path:r.command,spawnargs:r.args})}function Kj(r,e){if(!Vy)return;let t=r.emit;r.emit=function(n,i){if(n==="exit"){let o=jx(i,e);if(o)return t.call(r,"error",o)}return t.apply(r,arguments)}}function jx(r,e){return Vy&&r===1&&!e.file?$y(e.original,"spawn"):null}function Jj(r,e){return Vy&&r===1&&!e.file?$y(e.original,"spawnSync"):null}qx.exports={hookChildProcess:Kj,verifyENOENT:jx,verifyENOENTSync:Jj,notFoundError:$y}});var Hx=b((SQ,ha)=>{"use strict";var Vx=require("child_process"),Hy=Ux(),Gy=Wx();function $x(r,e,t){let n=Hy(r,e,t),i=Vx.spawn(n.command,n.args,n.options);return Gy.hookChildProcess(i,n),i}function Yj(r,e,t){let n=Hy(r,e,t),i=Vx.spawnSync(n.command,n.args,n.options);return i.error=i.error||Gy.verifyENOENTSync(i.status,n),i}ha.exports=$x;ha.exports.spawn=$x;ha.exports.sync=Yj;ha.exports._parse=Hy;ha.exports._enoent=Gy});var zx=b((IQ,Gx)=>{"use strict";Gx.exports=r=>{let e=typeof r=="string"?`
`:10,t=typeof r=="string"?"\r":13;return r[r.length-1]===e&&(r=r.slice(0,r.length-1)),r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r}});var Yx=b((xQ,Ou)=>{"use strict";var Du=require("path"),Kx=Uy(),Jx=r=>{r={cwd:process.cwd(),path:process.env[Kx()],execPath:process.execPath,...r};let e,t=Du.resolve(r.cwd),n=[];for(;e!==t;)n.push(Du.join(t,"node_modules/.bin")),e=t,t=Du.resolve(t,"..");let i=Du.resolve(r.cwd,r.execPath,"..");return n.push(i),n.concat(r.path).join(Du.delimiter)};Ou.exports=Jx;Ou.exports.default=Jx;Ou.exports.env=r=>{r={env:process.env,...r};let e={...r.env},t=Kx({env:e});return r.path=e[t],e[t]=Ou.exports(r),e}});var Qx=b((CQ,zy)=>{"use strict";var Xx=(r,e)=>{for(let t of Reflect.ownKeys(e))Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t));return r};zy.exports=Xx;zy.exports.default=Xx});var eC=b((PQ,ed)=>{"use strict";var Xj=Qx(),Zp=new WeakMap,Zx=(r,e={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let t,n=0,i=r.displayName||r.name||"<anonymous>",o=function(...s){if(Zp.set(o,++n),n===1)t=r.apply(this,s),r=null;else if(e.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return t};return Xj(o,r),Zp.set(o,n),o};ed.exports=Zx;ed.exports.default=Zx;ed.exports.callCount=r=>{if(!Zp.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return Zp.get(r)}});var tC=b(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.SIGNALS=void 0;var Qj=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];td.SIGNALS=Qj});var Ky=b(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.SIGRTMAX=ma.getRealtimeSignals=void 0;var Zj=function(){let r=nC-rC+1;return Array.from({length:r},e2)};ma.getRealtimeSignals=Zj;var e2=function(r,e){return{name:`SIGRT${e+1}`,number:rC+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},rC=34,nC=64;ma.SIGRTMAX=nC});var iC=b(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.getSignals=void 0;var t2=require("os"),r2=tC(),n2=Ky(),i2=function(){let r=(0,n2.getRealtimeSignals)();return[...r2.SIGNALS,...r].map(o2)};rd.getSignals=i2;var o2=function({name:r,number:e,description:t,action:n,forced:i=!1,standard:o}){let{signals:{[r]:s}}=t2.constants,a=s!==void 0;return{name:r,number:a?s:e,description:t,supported:a,action:n,forced:i,standard:o}}});var sC=b(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.signalsByNumber=ga.signalsByName=void 0;var s2=require("os"),oC=iC(),a2=Ky(),c2=function(){return(0,oC.getSignals)().reduce(u2,{})},u2=function(r,{name:e,number:t,description:n,supported:i,action:o,forced:s,standard:a}){return{...r,[e]:{name:e,number:t,description:n,supported:i,action:o,forced:s,standard:a}}},l2=c2();ga.signalsByName=l2;var p2=function(){let r=(0,oC.getSignals)(),e=a2.SIGRTMAX+1,t=Array.from({length:e},(n,i)=>d2(i,r));return Object.assign({},...t)},d2=function(r,e){let t=f2(r,e);if(t===void 0)return{};let{name:n,description:i,supported:o,action:s,forced:a,standard:c}=t;return{[r]:{name:n,number:r,description:i,supported:o,action:s,forced:a,standard:c}}},f2=function(r,e){let t=e.find(({name:n})=>s2.constants.signals[n]===r);return t!==void 0?t:e.find(n=>n.number===r)},h2=p2();ga.signalsByNumber=h2});var cC=b((kQ,aC)=>{"use strict";var{signalsByName:m2}=sC(),g2=({timedOut:r,timeout:e,errorCode:t,signal:n,signalDescription:i,exitCode:o,isCanceled:s})=>r?`timed out after ${e} milliseconds`:s?"was canceled":t!==void 0?`failed with ${t}`:n!==void 0?`was killed with ${n} (${i})`:o!==void 0?`failed with exit code ${o}`:"failed",y2=({stdout:r,stderr:e,all:t,error:n,signal:i,exitCode:o,command:s,escapedCommand:a,timedOut:c,isCanceled:u,killed:l,parsed:{options:{timeout:p}}})=>{o=o===null?void 0:o,i=i===null?void 0:i;let d=i===void 0?void 0:m2[i].description,f=n&&n.code,m=`Command ${g2({timedOut:c,timeout:p,errorCode:f,signal:i,signalDescription:d,exitCode:o,isCanceled:u})}: ${s}`,y=Object.prototype.toString.call(n)==="[object Error]",w=y?`${m}
${n.message}`:m,k=[w,e,r].filter(Boolean).join(`
`);return y?(n.originalMessage=n.message,n.message=k):n=new Error(k),n.shortMessage=w,n.command=s,n.escapedCommand=a,n.exitCode=o,n.signal=i,n.signalDescription=d,n.stdout=r,n.stderr=e,t!==void 0&&(n.all=t),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!c,n.isCanceled=u,n.killed=l&&!c,n};aC.exports=y2});var lC=b((DQ,Jy)=>{"use strict";var nd=["stdin","stdout","stderr"],b2=r=>nd.some(e=>r[e]!==void 0),uC=r=>{if(!r)return;let{stdio:e}=r;if(e===void 0)return nd.map(n=>r[n]);if(b2(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${nd.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let t=Math.max(e.length,nd.length);return Array.from({length:t},(n,i)=>e[i])};Jy.exports=uC;Jy.exports.node=r=>{let e=uC(r);return e==="ipc"?"ipc":e===void 0||typeof e=="string"?[e,e,e,"ipc"]:e.includes("ipc")?e:[...e,"ipc"]}});var pC=b((OQ,id)=>{id.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&id.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&id.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var hC=b((MQ,Nu)=>{var v2=require("assert"),Mu=pC(),_2=/^win/i.test(process.platform),od=require("events");typeof od!="function"&&(od=od.EventEmitter);var xt;process.__signal_exit_emitter__?xt=process.__signal_exit_emitter__:(xt=process.__signal_exit_emitter__=new od,xt.count=0,xt.emitted={});xt.infinite||(xt.setMaxListeners(1/0),xt.infinite=!0);Nu.exports=function(r,e){v2.equal(typeof r,"function","a callback must be provided for exit handler"),Lu===!1&&dC();var t="exit";e&&e.alwaysLast&&(t="afterexit");var n=function(){xt.removeListener(t,r),xt.listeners("exit").length===0&&xt.listeners("afterexit").length===0&&Xy()};return xt.on(t,r),n};Nu.exports.unload=Xy;function Xy(){Lu&&(Lu=!1,Mu.forEach(function(r){try{process.removeListener(r,Qy[r])}catch{}}),process.emit=Yy,process.reallyExit=fC,xt.count-=1)}function ya(r,e,t){xt.emitted[r]||(xt.emitted[r]=!0,xt.emit(r,e,t))}var Qy={};Mu.forEach(function(r){Qy[r]=function(){var t=process.listeners(r);t.length===xt.count&&(Xy(),ya("exit",null,r),ya("afterexit",null,r),_2&&r==="SIGHUP"&&(r="SIGINT"),process.kill(process.pid,r))}});Nu.exports.signals=function(){return Mu};Nu.exports.load=dC;var Lu=!1;function dC(){Lu||(Lu=!0,xt.count+=1,Mu=Mu.filter(function(r){try{return process.on(r,Qy[r]),!0}catch{return!1}}),process.emit=S2,process.reallyExit=w2)}var fC=process.reallyExit;function w2(r){process.exitCode=r||0,ya("exit",process.exitCode,null),ya("afterexit",process.exitCode,null),fC.call(process,process.exitCode)}var Yy=process.emit;function S2(r,e){if(r==="exit"){e!==void 0&&(process.exitCode=e);var t=Yy.apply(this,arguments);return ya("exit",process.exitCode,null),ya("afterexit",process.exitCode,null),t}else return Yy.apply(this,arguments)}});var gC=b((LQ,mC)=>{"use strict";var I2=require("os"),x2=hC(),C2=1e3*5,P2=(r,e="SIGTERM",t={})=>{let n=r(e);return T2(r,e,t,n),n},T2=(r,e,t,n)=>{if(!E2(e,t,n))return;let i=A2(t),o=setTimeout(()=>{r("SIGKILL")},i);o.unref&&o.unref()},E2=(r,{forceKillAfterTimeout:e},t)=>R2(r)&&e!==!1&&t,R2=r=>r===I2.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",A2=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return C2;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},k2=(r,e)=>{r.kill()&&(e.isCanceled=!0)},D2=(r,e,t)=>{r.kill(e),t(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},O2=(r,{timeout:e,killSignal:t="SIGTERM"},n)=>{if(e===0||e===void 0)return n;let i,o=new Promise((a,c)=>{i=setTimeout(()=>{D2(r,t,c)},e)}),s=n.finally(()=>{clearTimeout(i)});return Promise.race([o,s])},M2=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},L2=async(r,{cleanup:e,detached:t},n)=>{if(!e||t)return n;let i=x2(()=>{r.kill()});return n.finally(()=>{i()})};mC.exports={spawnedKill:P2,spawnedCancel:k2,setupTimeout:O2,validateTimeout:M2,setExitHandler:L2}});var bC=b((NQ,yC)=>{"use strict";var bn=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";bn.writable=r=>bn(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";bn.readable=r=>bn(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";bn.duplex=r=>bn.writable(r)&&bn.readable(r);bn.transform=r=>bn.duplex(r)&&typeof r._transform=="function"&&typeof r._transformState=="object";yC.exports=bn});var _C=b((FQ,vC)=>{"use strict";var{PassThrough:N2}=require("stream");vC.exports=r=>{r={...r};let{array:e}=r,{encoding:t}=r,n=t==="buffer",i=!1;e?i=!(t||n):t=t||"utf8",n&&(t=null);let o=new N2({objectMode:i});t&&o.setEncoding(t);let s=0,a=[];return o.on("data",c=>{a.push(c),i?s=a.length:s+=c.length}),o.getBufferedValue=()=>e?a:n?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o}});var wC=b((BQ,Fu)=>{"use strict";var{constants:F2}=require("buffer"),B2=require("stream"),{promisify:U2}=require("util"),j2=_C(),q2=U2(B2.pipeline),sd=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Zy(r,e){if(!r)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:t}=e,n=j2(e);return await new Promise((i,o)=>{let s=a=>{a&&n.getBufferedLength()<=F2.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),o(a)};(async()=>{try{await q2(r,n),i()}catch(a){s(a)}})(),n.on("data",()=>{n.getBufferedLength()>t&&s(new sd)})}),n.getBufferedValue()}Fu.exports=Zy;Fu.exports.buffer=(r,e)=>Zy(r,{...e,encoding:"buffer"});Fu.exports.array=(r,e)=>Zy(r,{...e,array:!0});Fu.exports.MaxBufferError=sd});var IC=b((UQ,SC)=>{"use strict";var{PassThrough:W2}=require("stream");SC.exports=function(){var r=[],e=new W2({objectMode:!0});return e.setMaxListeners(0),e.add=t,e.isEmpty=n,e.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(t),e;function t(o){return Array.isArray(o)?(o.forEach(t),this):(r.push(o),o.once("end",i.bind(null,o)),o.once("error",e.emit.bind(e,"error")),o.pipe(e,{end:!1}),this)}function n(){return r.length==0}function i(o){r=r.filter(function(s){return s!==o}),!r.length&&e.readable&&e.end()}}});var TC=b((jQ,PC)=>{"use strict";var CC=bC(),xC=wC(),V2=IC(),$2=(r,e)=>{e===void 0||r.stdin===void 0||(CC(e)?e.pipe(r.stdin):r.stdin.end(e))},H2=(r,{all:e})=>{if(!e||!r.stdout&&!r.stderr)return;let t=V2();return r.stdout&&t.add(r.stdout),r.stderr&&t.add(r.stderr),t},eb=async(r,e)=>{if(r){r.destroy();try{return await e}catch(t){return t.bufferedData}}},tb=(r,{encoding:e,buffer:t,maxBuffer:n})=>{if(!(!r||!t))return e?xC(r,{encoding:e,maxBuffer:n}):xC.buffer(r,{maxBuffer:n})},G2=async({stdout:r,stderr:e,all:t},{encoding:n,buffer:i,maxBuffer:o},s)=>{let a=tb(r,{encoding:n,buffer:i,maxBuffer:o}),c=tb(e,{encoding:n,buffer:i,maxBuffer:o}),u=tb(t,{encoding:n,buffer:i,maxBuffer:o*2});try{return await Promise.all([s,a,c,u])}catch(l){return Promise.all([{error:l,signal:l.signal,timedOut:l.timedOut},eb(r,a),eb(e,c),eb(t,u)])}},z2=({input:r})=>{if(CC(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};PC.exports={handleInput:$2,makeAllStream:H2,getSpawnedResult:G2,validateInputSync:z2}});var RC=b((qQ,EC)=>{"use strict";var K2=(async()=>{})().constructor.prototype,J2=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(K2,r)]),Y2=(r,e)=>{for(let[t,n]of J2){let i=typeof e=="function"?(...o)=>Reflect.apply(n.value,e(),o):n.value.bind(e);Reflect.defineProperty(r,t,{...n,value:i})}return r},X2=r=>new Promise((e,t)=>{r.on("exit",(n,i)=>{e({exitCode:n,signal:i})}),r.on("error",n=>{t(n)}),r.stdin&&r.stdin.on("error",n=>{t(n)})});EC.exports={mergePromise:Y2,getSpawnedPromise:X2}});var DC=b((WQ,kC)=>{"use strict";var AC=(r,e=[])=>Array.isArray(e)?[r,...e]:[r],Q2=/^[\w.-]+$/,Z2=/"/g,eq=r=>typeof r!="string"||Q2.test(r)?r:`"${r.replace(Z2,'\\"')}"`,tq=(r,e)=>AC(r,e).join(" "),rq=(r,e)=>AC(r,e).map(t=>eq(t)).join(" "),nq=/ +/g,iq=r=>{let e=[];for(let t of r.trim().split(nq)){let n=e[e.length-1];n&&n.endsWith("\\")?e[e.length-1]=`${n.slice(0,-1)} ${t}`:e.push(t)}return e};kC.exports={joinCommand:tq,getEscapedCommand:rq,parseCommand:iq}});var nb=b((VQ,ba)=>{"use strict";var oq=require("path"),rb=require("child_process"),sq=Hx(),aq=zx(),cq=Yx(),uq=eC(),ad=cC(),MC=lC(),{spawnedKill:lq,spawnedCancel:pq,setupTimeout:dq,validateTimeout:fq,setExitHandler:hq}=gC(),{handleInput:mq,getSpawnedResult:gq,makeAllStream:yq,validateInputSync:bq}=TC(),{mergePromise:OC,getSpawnedPromise:vq}=RC(),{joinCommand:LC,parseCommand:NC,getEscapedCommand:FC}=DC(),_q=1e3*1e3*100,wq=({env:r,extendEnv:e,preferLocal:t,localDir:n,execPath:i})=>{let o=e?{...process.env,...r}:r;return t?cq.env({env:o,cwd:n,execPath:i}):o},BC=(r,e,t={})=>{let n=sq._parse(r,e,t);return r=n.command,e=n.args,t=n.options,t={maxBuffer:_q,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:t.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...t},t.env=wq(t),t.stdio=MC(t),process.platform==="win32"&&oq.basename(r,".exe")==="cmd"&&e.unshift("/q"),{file:r,args:e,options:t,parsed:n}},Bu=(r,e,t)=>typeof e!="string"&&!Buffer.isBuffer(e)?t===void 0?void 0:"":r.stripFinalNewline?aq(e):e,cd=(r,e,t)=>{let n=BC(r,e,t),i=LC(r,e),o=FC(r,e);fq(n.options);let s;try{s=rb.spawn(n.file,n.args,n.options)}catch(f){let h=new rb.ChildProcess,m=Promise.reject(ad({error:f,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return OC(h,m)}let a=vq(s),c=dq(s,n.options,a),u=hq(s,n.options,c),l={isCanceled:!1};s.kill=lq.bind(null,s.kill.bind(s)),s.cancel=pq.bind(null,s,l);let d=uq(async()=>{let[{error:f,exitCode:h,signal:m,timedOut:y},w,k,D]=await gq(s,n.options,u),Q=Bu(n.options,w),F=Bu(n.options,k),te=Bu(n.options,D);if(f||h!==0||m!==null){let H=ad({error:f,exitCode:h,signal:m,stdout:Q,stderr:F,all:te,command:i,escapedCommand:o,parsed:n,timedOut:y,isCanceled:l.isCanceled,killed:s.killed});if(!n.options.reject)return H;throw H}return{command:i,escapedCommand:o,exitCode:0,stdout:Q,stderr:F,all:te,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return mq(s,n.options.input),s.all=yq(s,n.options),OC(s,d)};ba.exports=cd;ba.exports.sync=(r,e,t)=>{let n=BC(r,e,t),i=LC(r,e),o=FC(r,e);bq(n.options);let s;try{s=rb.spawnSync(n.file,n.args,n.options)}catch(u){throw ad({error:u,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let a=Bu(n.options,s.stdout,s.error),c=Bu(n.options,s.stderr,s.error);if(s.error||s.status!==0||s.signal!==null){let u=ad({stdout:a,stderr:c,error:s.error,signal:s.signal,exitCode:s.status,command:i,escapedCommand:o,parsed:n,timedOut:s.error&&s.error.code==="ETIMEDOUT",isCanceled:!1,killed:s.signal!==null});if(!n.options.reject)return u;throw u}return{command:i,escapedCommand:o,exitCode:0,stdout:a,stderr:c,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};ba.exports.command=(r,e)=>{let[t,...n]=NC(r);return cd(t,n,e)};ba.exports.commandSync=(r,e)=>{let[t,...n]=NC(r);return cd.sync(t,n,e)};ba.exports.node=(r,e,t={})=>{e&&!Array.isArray(e)&&typeof e=="object"&&(t=e,e=[]);let n=MC.node(t),i=process.execArgv.filter(a=>!a.startsWith("--inspect")),{nodePath:o=process.execPath,nodeOptions:s=i}=t;return cd(o,[...s,r,...Array.isArray(e)?e:[]],{...t,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}});var rt=b(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.NON_CUSTOM_TAG_KEYS=de.PRE_DESTROY=de.POST_CONSTRUCT=de.DESIGN_PARAM_TYPES=de.PARAM_TYPES=de.TAGGED_PROP=de.TAGGED=de.MULTI_INJECT_TAG=de.INJECT_TAG=de.OPTIONAL_TAG=de.UNMANAGED_TAG=de.NAME_TAG=de.NAMED_TAG=void 0;de.NAMED_TAG="named";de.NAME_TAG="name";de.UNMANAGED_TAG="unmanaged";de.OPTIONAL_TAG="optional";de.INJECT_TAG="inject";de.MULTI_INJECT_TAG="multi_inject";de.TAGGED="inversify:tagged";de.TAGGED_PROP="inversify:tagged_props";de.PARAM_TYPES="inversify:paramtypes";de.DESIGN_PARAM_TYPES="design:paramtypes";de.POST_CONSTRUCT="post_construct";de.PRE_DESTROY="pre_destroy";function Sq(){return[de.INJECT_TAG,de.MULTI_INJECT_TAG,de.NAME_TAG,de.UNMANAGED_TAG,de.NAMED_TAG,de.OPTIONAL_TAG]}de.NON_CUSTOM_TAG_KEYS=Sq()});var Ar=b(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.TargetTypeEnum=Hi.BindingTypeEnum=Hi.BindingScopeEnum=void 0;var Iq={Request:"Request",Singleton:"Singleton",Transient:"Transient"};Hi.BindingScopeEnum=Iq;var xq={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};Hi.BindingTypeEnum=xq;var Cq={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};Hi.TargetTypeEnum=Cq});var Gi=b(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.id=void 0;var Pq=0;function Tq(){return Pq++}ud.id=Tq});var jC=b(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.Binding=void 0;var UC=Ar(),Eq=Gi(),Rq=function(){function r(e,t){this.id=(0,Eq.id)(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=UC.BindingTypeEnum.Invalid,this.constraint=function(n){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return r.prototype.clone=function(){var e=new r(this.serviceIdentifier,this.scope);return e.activated=e.scope===UC.BindingScopeEnum.Singleton?this.activated:!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},r}();ld.Binding=Rq});var Ot=b(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.STACK_OVERFLOW=V.CIRCULAR_DEPENDENCY_IN_FACTORY=V.ON_DEACTIVATION_ERROR=V.PRE_DESTROY_ERROR=V.POST_CONSTRUCT_ERROR=V.ASYNC_UNBIND_REQUIRED=V.MULTIPLE_POST_CONSTRUCT_METHODS=V.MULTIPLE_PRE_DESTROY_METHODS=V.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=V.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=V.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=V.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=V.ARGUMENTS_LENGTH_MISMATCH=V.INVALID_DECORATOR_OPERATION=V.INVALID_TO_SELF_VALUE=V.LAZY_IN_SYNC=V.INVALID_FUNCTION_BINDING=V.INVALID_MIDDLEWARE_RETURN=V.NO_MORE_SNAPSHOTS_AVAILABLE=V.INVALID_BINDING_TYPE=V.NOT_IMPLEMENTED=V.CIRCULAR_DEPENDENCY=V.UNDEFINED_INJECT_ANNOTATION=V.MISSING_INJECT_ANNOTATION=V.MISSING_INJECTABLE_ANNOTATION=V.NOT_REGISTERED=V.CANNOT_UNBIND=V.AMBIGUOUS_MATCH=V.KEY_NOT_FOUND=V.NULL_ARGUMENT=V.DUPLICATED_METADATA=V.DUPLICATED_INJECTABLE_DECORATOR=void 0;V.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.";V.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:";V.NULL_ARGUMENT="NULL argument";V.KEY_NOT_FOUND="Key Not Found";V.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:";V.CANNOT_UNBIND="Could not unbind serviceIdentifier:";V.NOT_REGISTERED="No matching bindings found for serviceIdentifier:";V.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:";V.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var Aq=function(r){return"@inject called with undefined this could mean that the class "+r+" has a circular dependency problem. You can use a LazyServiceIdentifier to  overcome this limitation."};V.UNDEFINED_INJECT_ANNOTATION=Aq;V.CIRCULAR_DEPENDENCY="Circular dependency found:";V.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.";V.INVALID_BINDING_TYPE="Invalid binding type:";V.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.";V.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!";V.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!";var kq=function(r){return"You are attempting to construct '"+r+`' in a synchronous way
 but it has asynchronous dependencies.`};V.LAZY_IN_SYNC=kq;V.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier";V.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var Dq=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return"The number of constructor arguments in the derived class "+(r[0]+" must be >= than the number of constructor arguments of its base class.")};V.ARGUMENTS_LENGTH_MISMATCH=Dq;V.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.";V.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE='Invalid Container option. Default scope must be a string ("singleton" or "transient").';V.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean";V.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean";V.MULTIPLE_PRE_DESTROY_METHODS="Cannot apply @preDestroy decorator multiple times in the same class";V.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";V.ASYNC_UNBIND_REQUIRED="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)";var Oq=function(r,e){return"@postConstruct error in class "+r+": "+e};V.POST_CONSTRUCT_ERROR=Oq;var Mq=function(r,e){return"@preDestroy error in class "+r+": "+e};V.PRE_DESTROY_ERROR=Mq;var Lq=function(r,e){return"onDeactivation() error in class "+r+": "+e};V.ON_DEACTIVATION_ERROR=Lq;var Nq=function(r,e){return"It looks like there is a circular dependency in one of the '"+r+"' bindings. Please investigate bindings with "+("service identifier '"+e+"'.")};V.CIRCULAR_DEPENDENCY_IN_FACTORY=Nq;V.STACK_OVERFLOW="Maximum call stack size exceeded"});var ob=b(vn=>{"use strict";var Fq=vn&&vn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Bq=vn&&vn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Uq=vn&&vn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Fq(e,r,t);return Bq(e,r),e};Object.defineProperty(vn,"__esModule",{value:!0});vn.MetadataReader=void 0;var ib=Uq(rt()),jq=function(){function r(){}return r.prototype.getConstructorMetadata=function(e){var t=Reflect.getMetadata(ib.PARAM_TYPES,e),n=Reflect.getMetadata(ib.TAGGED,e);return{compilerGeneratedMetadata:t,userGeneratedMetadata:n||{}}},r.prototype.getPropertiesMetadata=function(e){var t=Reflect.getMetadata(ib.TAGGED_PROP,e)||[];return t},r}();vn.MetadataReader=jq});var qC=b(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.BindingCount=void 0;pd.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}});var sb=b(kr=>{"use strict";var qq=kr&&kr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Wq=kr&&kr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Vq=kr&&kr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&qq(e,r,t);return Wq(e,r),e};Object.defineProperty(kr,"__esModule",{value:!0});kr.tryAndThrowErrorIfStackOverflow=kr.isStackOverflowExeption=void 0;var $q=Vq(Ot());function WC(r){return r instanceof RangeError||r.message===$q.STACK_OVERFLOW}kr.isStackOverflowExeption=WC;var Hq=function(r,e){try{return r()}catch(t){throw WC(t)&&(t=e()),t}};kr.tryAndThrowErrorIfStackOverflow=Hq});var Ko=b(nt=>{"use strict";var Gq=nt&&nt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zq=nt&&nt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Kq=nt&&nt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Gq(e,r,t);return zq(e,r),e};Object.defineProperty(nt,"__esModule",{value:!0});nt.getSymbolDescription=nt.circularDependencyToException=nt.listMetadataForTarget=nt.listRegisteredBindingsForServiceIdentifier=nt.getServiceIdentifierAsString=nt.getFunctionName=void 0;var Jq=Kq(Ot());function VC(r){if(typeof r=="function"){var e=r;return e.name}else{if(typeof r=="symbol")return r.toString();var e=r;return e}}nt.getServiceIdentifierAsString=VC;function Yq(r,e,t){var n="",i=t(r,e);return i.length!==0&&(n=`
Registered bindings:`,i.forEach(function(o){var s="Object";o.implementationType!==null&&(s=GC(o.implementationType)),n=n+`
 `+s,o.constraint.metaData&&(n=n+" - "+o.constraint.metaData)})),n}nt.listRegisteredBindingsForServiceIdentifier=Yq;function $C(r,e){return r.parentRequest===null?!1:r.parentRequest.serviceIdentifier===e?!0:$C(r.parentRequest,e)}function Xq(r){function e(n,i){i===void 0&&(i=[]);var o=VC(n.serviceIdentifier);return i.push(o),n.parentRequest!==null?e(n.parentRequest,i):i}var t=e(r);return t.reverse().join(" --> ")}function HC(r){r.childRequests.forEach(function(e){if($C(e,e.serviceIdentifier)){var t=Xq(e);throw new Error(Jq.CIRCULAR_DEPENDENCY+" "+t)}else HC(e)})}nt.circularDependencyToException=HC;function Qq(r,e){if(e.isTagged()||e.isNamed()){var t="",n=e.getNamedTag(),i=e.getCustomTags();return n!==null&&(t+=n.toString()+`
`),i!==null&&i.forEach(function(o){t+=o.toString()+`
`})," "+r+`
 `+r+" - "+t}else return" "+r}nt.listMetadataForTarget=Qq;function GC(r){if(r.name)return r.name;var e=r.toString(),t=e.match(/^function\s*([^\s(]+)/);return t?t[1]:"Anonymous function: "+e}nt.getFunctionName=GC;function Zq(r){return r.toString().slice(7,-1)}nt.getSymbolDescription=Zq});var zC=b(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.Context=void 0;var eW=Gi(),tW=function(){function r(e){this.id=(0,eW.id)(),this.container=e}return r.prototype.addPlan=function(e){this.plan=e},r.prototype.setCurrentRequest=function(e){this.currentRequest=e},r}();dd.Context=tW});var rn=b(_n=>{"use strict";var rW=_n&&_n.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),nW=_n&&_n.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),iW=_n&&_n.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&rW(e,r,t);return nW(e,r),e};Object.defineProperty(_n,"__esModule",{value:!0});_n.Metadata=void 0;var oW=iW(rt()),sW=function(){function r(e,t){this.key=e,this.value=t}return r.prototype.toString=function(){return this.key===oW.NAMED_TAG?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},r}();_n.Metadata=sW});var KC=b(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.Plan=void 0;var aW=function(){function r(e,t){this.parentContext=e,this.rootRequest=t}return r}();fd.Plan=aW});var md=b(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.LazyServiceIdentifier=void 0;var cW=function(){function r(e){this._cb=e}return r.prototype.unwrap=function(){return this._cb()},r}();hd.LazyServiceIdentifier=cW});var JC=b(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.QueryableString=void 0;var uW=function(){function r(e){this.str=e}return r.prototype.startsWith=function(e){return this.str.indexOf(e)===0},r.prototype.endsWith=function(e){var t="",n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},r.prototype.contains=function(e){return this.str.indexOf(e)!==-1},r.prototype.equals=function(e){return this.str===e},r.prototype.value=function(){return this.str},r}();gd.QueryableString=uW});var ab=b(wn=>{"use strict";var lW=wn&&wn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),pW=wn&&wn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),dW=wn&&wn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&lW(e,r,t);return pW(e,r),e};Object.defineProperty(wn,"__esModule",{value:!0});wn.Target=void 0;var hi=dW(rt()),fW=Gi(),hW=Ko(),YC=rn(),mW=JC(),gW=function(){function r(e,t,n,i){this.id=(0,fW.id)(),this.type=e,this.serviceIdentifier=n;var o=typeof t=="symbol"?(0,hW.getSymbolDescription)(t):t;this.name=new mW.QueryableString(o||""),this.identifier=t,this.metadata=new Array;var s=null;typeof i=="string"?s=new YC.Metadata(hi.NAMED_TAG,i):i instanceof YC.Metadata&&(s=i),s!==null&&this.metadata.push(s)}return r.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){var i=n[t];if(i.key===e)return!0}return!1},r.prototype.isArray=function(){return this.hasTag(hi.MULTI_INJECT_TAG)},r.prototype.matchesArray=function(e){return this.matchesTag(hi.MULTI_INJECT_TAG)(e)},r.prototype.isNamed=function(){return this.hasTag(hi.NAMED_TAG)},r.prototype.isTagged=function(){return this.metadata.some(function(e){return hi.NON_CUSTOM_TAG_KEYS.every(function(t){return e.key!==t})})},r.prototype.isOptional=function(){return this.matchesTag(hi.OPTIONAL_TAG)(!0)},r.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===hi.NAMED_TAG})[0]:null},r.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return hi.NON_CUSTOM_TAG_KEYS.every(function(t){return e.key!==t})}):null},r.prototype.matchesNamedTag=function(e){return this.matchesTag(hi.NAMED_TAG)(e)},r.prototype.matchesTag=function(e){var t=this;return function(n){for(var i=0,o=t.metadata;i<o.length;i++){var s=o[i];if(s.key===e&&s.value===n)return!0}return!1}},r}();wn.Target=gW});var i0=b(Mt=>{"use strict";var yW=Mt&&Mt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),bW=Mt&&Mt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),XC=Mt&&Mt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yW(e,r,t);return bW(e,r),e},yd=Mt&&Mt.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.getFunctionName=Mt.getBaseClassDependencyCount=Mt.getDependencies=void 0;var vW=md(),cb=XC(Ot()),QC=Ar(),Uu=XC(rt()),ub=Ko();Object.defineProperty(Mt,"getFunctionName",{enumerable:!0,get:function(){return ub.getFunctionName}});var ZC=ab();function _W(r,e){var t=(0,ub.getFunctionName)(e);return e0(r,t,e,!1)}Mt.getDependencies=_W;function e0(r,e,t,n){var i=r.getConstructorMetadata(t),o=i.compilerGeneratedMetadata;if(o===void 0){var s=cb.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(s)}var a=i.userGeneratedMetadata,c=Object.keys(a),u=t.length===0&&c.length>0,l=c.length>t.length,p=u||l?c.length:t.length,d=SW(n,e,o,a,p),f=t0(r,t,e),h=yd(yd([],d,!0),f,!0);return h}function wW(r,e,t,n,i){var o=i[r.toString()]||[],s=n0(o),a=s.unmanaged!==!0,c=n[r],u=s.inject||s.multiInject;if(c=u||c,c instanceof vW.LazyServiceIdentifier&&(c=c.unwrap()),a){var l=c===Object,p=c===Function,d=c===void 0,f=l||p||d;if(!e&&f){var h=cb.MISSING_INJECT_ANNOTATION+" argument "+r+" in class "+t+".";throw new Error(h)}var m=new ZC.Target(QC.TargetTypeEnum.ConstructorArgument,s.targetName,c);return m.metadata=o,m}return null}function SW(r,e,t,n,i){for(var o=[],s=0;s<i;s++){var a=s,c=wW(a,r,e,t,n);c!==null&&o.push(c)}return o}function IW(r,e,t,n){var i=r||e;if(i===void 0){var o=cb.MISSING_INJECTABLE_ANNOTATION+" for property "+String(t)+" in class "+n+".";throw new Error(o)}return i}function t0(r,e,t){for(var n=r.getPropertiesMetadata(e),i=[],o=Object.getOwnPropertySymbols(n),s=Object.keys(n),a=s.concat(o),c=0,u=a;c<u.length;c++){var l=u[c],p=n[l],d=n0(p),f=d.targetName||l,h=IW(d.inject,d.multiInject,l,t),m=new ZC.Target(QC.TargetTypeEnum.ClassProperty,f,h);m.metadata=p,i.push(m)}var y=Object.getPrototypeOf(e.prototype).constructor;if(y!==Object){var w=t0(r,y,t);i=yd(yd([],i,!0),w,!0)}return i}function r0(r,e){var t=Object.getPrototypeOf(e.prototype).constructor;if(t!==Object){var n=(0,ub.getFunctionName)(t),i=e0(r,n,t,!0),o=i.map(function(c){return c.metadata.filter(function(u){return u.key===Uu.UNMANAGED_TAG})}),s=[].concat.apply([],o).length,a=i.length-s;return a>0?a:r0(r,t)}else return 0}Mt.getBaseClassDependencyCount=r0;function n0(r){var e={};return r.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[Uu.INJECT_TAG],multiInject:e[Uu.MULTI_INJECT_TAG],targetName:e[Uu.NAME_TAG],unmanaged:e[Uu.UNMANAGED_TAG]}}});var o0=b(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.Request=void 0;var xW=Gi(),CW=function(){function r(e,t,n,i,o){this.id=(0,xW.id)(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=n===null?new Map:null}return r.prototype.addChildRequest=function(e,t,n){var i=new r(e,this.parentContext,this,t,n);return this.childRequests.push(i),i},r}();bd.Request=CW});var hb=b(Qt=>{"use strict";var PW=Qt&&Qt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),TW=Qt&&Qt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),c0=Qt&&Qt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&PW(e,r,t);return TW(e,r),e};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.getBindingDictionary=Qt.createMockRequest=Qt.plan=void 0;var vd=qC(),pb=c0(Ot()),u0=Ar(),s0=c0(rt()),EW=sb(),va=Ko(),l0=zC(),db=rn(),RW=KC(),lb=i0(),fb=o0(),p0=ab();function d0(r){return r._bindingDictionary}Qt.getBindingDictionary=d0;function AW(r,e,t,n,i,o){var s=r?s0.MULTI_INJECT_TAG:s0.INJECT_TAG,a=new db.Metadata(s,t),c=new p0.Target(e,n,t,a);if(i!==void 0){var u=new db.Metadata(i,o);c.metadata.push(u)}return c}function a0(r,e,t,n,i){var o=ju(t.container,i.serviceIdentifier),s=[];return o.length===vd.BindingCount.NoBindingsAvailable&&t.container.options.autoBindInjectable&&typeof i.serviceIdentifier=="function"&&r.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(t.container.bind(i.serviceIdentifier).toSelf(),o=ju(t.container,i.serviceIdentifier)),e?s=o:s=o.filter(function(a){var c=new fb.Request(a.serviceIdentifier,t,n,a,i);return a.constraint(c)}),kW(i.serviceIdentifier,s,i,t.container),s}function kW(r,e,t,n){switch(e.length){case vd.BindingCount.NoBindingsAvailable:if(t.isOptional())return e;var i=(0,va.getServiceIdentifierAsString)(r),o=pb.NOT_REGISTERED;throw o+=(0,va.listMetadataForTarget)(i,t),o+=(0,va.listRegisteredBindingsForServiceIdentifier)(n,i,ju),new Error(o);case vd.BindingCount.OnlyOneBindingAvailable:return e;case vd.BindingCount.MultipleBindingsAvailable:default:if(t.isArray())return e;var i=(0,va.getServiceIdentifierAsString)(r),o=pb.AMBIGUOUS_MATCH+" "+i;throw o+=(0,va.listRegisteredBindingsForServiceIdentifier)(n,i,ju),new Error(o)}}function f0(r,e,t,n,i,o){var s,a;if(i===null){s=a0(r,e,n,null,o),a=new fb.Request(t,n,null,s,o);var c=new RW.Plan(n,a);n.addPlan(c)}else s=a0(r,e,n,i,o),a=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach(function(u){var l=null;if(o.isArray())l=a.addChildRequest(u.serviceIdentifier,u,o);else{if(u.cache)return;l=a}if(u.type===u0.BindingTypeEnum.Instance&&u.implementationType!==null){var p=(0,lb.getDependencies)(r,u.implementationType);if(!n.container.options.skipBaseClassChecks){var d=(0,lb.getBaseClassDependencyCount)(r,u.implementationType);if(p.length<d){var f=pb.ARGUMENTS_LENGTH_MISMATCH((0,lb.getFunctionName)(u.implementationType));throw new Error(f)}}p.forEach(function(h){f0(r,!1,h.serviceIdentifier,n,l,h)})}})}function ju(r,e){var t=[],n=d0(r);return n.hasKey(e)?t=n.get(e):r.parent!==null&&(t=ju(r.parent,e)),t}function DW(r,e,t,n,i,o,s,a){a===void 0&&(a=!1);var c=new l0.Context(e),u=AW(t,n,i,"",o,s);try{return f0(r,a,i,c,null,u),c}catch(l){throw(0,EW.isStackOverflowExeption)(l)&&(0,va.circularDependencyToException)(c.plan.rootRequest),l}}Qt.plan=DW;function OW(r,e,t,n){var i=new p0.Target(u0.TargetTypeEnum.Variable,"",e,new db.Metadata(t,n)),o=new l0.Context(r),s=new fb.Request(e,o,null,[],i);return s}Qt.createMockRequest=OW});var qu=b(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.isPromiseOrContainsPromise=_a.isPromise=void 0;function mb(r){var e=typeof r=="object"&&r!==null||typeof r=="function";return e&&typeof r.then=="function"}_a.isPromise=mb;function MW(r){return mb(r)?!0:Array.isArray(r)&&r.some(mb)}_a.isPromiseOrContainsPromise=MW});var h0=b(Sn=>{"use strict";var LW=Sn&&Sn.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(p){s(p)}}function c(l){try{u(n.throw(l))}catch(p){s(p)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(r,e||[])).next())})},NW=Sn&&Sn.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.saveToScope=Sn.tryGetFromScope=void 0;var _d=Ar(),FW=qu(),BW=function(r,e){return e.scope===_d.BindingScopeEnum.Singleton&&e.activated?e.cache:e.scope===_d.BindingScopeEnum.Request&&r.has(e.id)?r.get(e.id):null};Sn.tryGetFromScope=BW;var UW=function(r,e,t){e.scope===_d.BindingScopeEnum.Singleton&&qW(e,t),e.scope===_d.BindingScopeEnum.Request&&jW(r,e,t)};Sn.saveToScope=UW;var jW=function(r,e,t){r.has(e.id)||r.set(e.id,t)},qW=function(r,e){r.cache=e,r.activated=!0,(0,FW.isPromise)(e)&&WW(r,e)},WW=function(r,e){return LW(void 0,void 0,void 0,function(){var t,n;return NW(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return t=i.sent(),r.cache=t,[3,3];case 2:throw n=i.sent(),r.cache=null,r.activated=!1,n;case 3:return[2]}})})}});var m0=b(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.FactoryType=void 0;var VW;(function(r){r.DynamicValue="toDynamicValue",r.Factory="toFactory",r.Provider="toProvider"})(VW=Wu.FactoryType||(Wu.FactoryType={}))});var yb=b(Zt=>{"use strict";var $W=Zt&&Zt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),HW=Zt&&Zt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),GW=Zt&&Zt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&$W(e,r,t);return HW(e,r),e};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.getFactoryDetails=Zt.ensureFullyBound=Zt.multiBindToService=void 0;var zW=Ko(),KW=GW(Ot()),In=Ar(),gb=m0(),JW=function(r){return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach(function(i){return r.bind(i).toService(e)})}}};Zt.multiBindToService=JW;var YW=function(r){var e=null;switch(r.type){case In.BindingTypeEnum.ConstantValue:case In.BindingTypeEnum.Function:e=r.cache;break;case In.BindingTypeEnum.Constructor:case In.BindingTypeEnum.Instance:e=r.implementationType;break;case In.BindingTypeEnum.DynamicValue:e=r.dynamicValue;break;case In.BindingTypeEnum.Provider:e=r.provider;break;case In.BindingTypeEnum.Factory:e=r.factory;break}if(e===null){var t=(0,zW.getServiceIdentifierAsString)(r.serviceIdentifier);throw new Error(KW.INVALID_BINDING_TYPE+" "+t)}};Zt.ensureFullyBound=YW;var XW=function(r){switch(r.type){case In.BindingTypeEnum.Factory:return{factory:r.factory,factoryType:gb.FactoryType.Factory};case In.BindingTypeEnum.Provider:return{factory:r.provider,factoryType:gb.FactoryType.Provider};case In.BindingTypeEnum.DynamicValue:return{factory:r.dynamicValue,factoryType:gb.FactoryType.DynamicValue};default:throw new Error("Unexpected factory type "+r.type)}};Zt.getFactoryDetails=XW});var w0=b(ht=>{"use strict";var wa=ht&&ht.__assign||function(){return wa=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},wa.apply(this,arguments)},QW=ht&&ht.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ZW=ht&&ht.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),eV=ht&&ht.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&QW(e,r,t);return ZW(e,r),e},b0=ht&&ht.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(p){s(p)}}function c(l){try{u(n.throw(l))}catch(p){s(p)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(r,e||[])).next())})},v0=ht&&ht.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},tV=ht&&ht.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(ht,"__esModule",{value:!0});ht.resolveInstance=void 0;var bb=Ot(),_b=Ar(),vb=eV(rt()),wb=qu();function rV(r,e){return r.reduce(function(t,n){var i=e(n),o=n.target.type;return o===_b.TargetTypeEnum.ConstructorArgument?t.constructorInjections.push(i):(t.propertyRequests.push(n),t.propertyInjections.push(i)),t.isAsync||(t.isAsync=(0,wb.isPromiseOrContainsPromise)(i)),t},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function nV(r,e,t){var n;if(e.length>0){var i=rV(e,t),o=wa(wa({},i),{constr:r});i.isAsync?n=iV(o):n=_0(o)}else n=new r;return n}function _0(r){var e,t=new((e=r.constr).bind.apply(e,tV([void 0],r.constructorInjections,!1)));return r.propertyRequests.forEach(function(n,i){var o=n.target.identifier,s=r.propertyInjections[i];(!n.target.isOptional()||s!==void 0)&&(t[o]=s)}),t}function iV(r){return b0(this,void 0,void 0,function(){var e,t;return v0(this,function(n){switch(n.label){case 0:return[4,g0(r.constructorInjections)];case 1:return e=n.sent(),[4,g0(r.propertyInjections)];case 2:return t=n.sent(),[2,_0(wa(wa({},r),{constructorInjections:e,propertyInjections:t}))]}})})}function g0(r){return b0(this,void 0,void 0,function(){var e,t,n,i;return v0(this,function(o){for(e=[],t=0,n=r;t<n.length;t++)i=n[t],Array.isArray(i)?e.push(Promise.all(i)):e.push(i);return[2,Promise.all(e)]})})}function y0(r,e){var t=oV(r,e);return(0,wb.isPromise)(t)?t.then(function(){return e}):e}function oV(r,e){var t,n;if(Reflect.hasMetadata(vb.POST_CONSTRUCT,r)){var i=Reflect.getMetadata(vb.POST_CONSTRUCT,r);try{return(n=(t=e)[i.value])===null||n===void 0?void 0:n.call(t)}catch(o){if(o instanceof Error)throw new Error((0,bb.POST_CONSTRUCT_ERROR)(r.name,o.message))}}}function sV(r,e){r.scope!==_b.BindingScopeEnum.Singleton&&aV(r,e)}function aV(r,e){var t="Class cannot be instantiated in "+(r.scope===_b.BindingScopeEnum.Request?"request":"transient")+" scope.";if(typeof r.onDeactivation=="function")throw new Error((0,bb.ON_DEACTIVATION_ERROR)(e.name,t));if(Reflect.hasMetadata(vb.PRE_DESTROY,e))throw new Error((0,bb.PRE_DESTROY_ERROR)(e.name,t))}function cV(r,e,t,n){sV(r,e);var i=nV(e,t,n);return(0,wb.isPromise)(i)?i.then(function(o){return y0(e,o)}):y0(e,i)}ht.resolveInstance=cV});var P0=b(er=>{"use strict";var uV=er&&er.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),lV=er&&er.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),pV=er&&er.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&uV(e,r,t);return lV(e,r),e},dV=er&&er.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(p){s(p)}}function c(l){try{u(n.throw(l))}catch(p){s(p)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(r,e||[])).next())})},fV=er&&er.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(er,"__esModule",{value:!0});er.resolve=void 0;var hV=pV(Ot()),wd=Ar(),mV=hb(),S0=h0(),Sb=qu(),x0=yb(),gV=sb(),yV=w0(),Ib=function(r){return function(e){e.parentContext.setCurrentRequest(e);var t=e.bindings,n=e.childRequests,i=e.target&&e.target.isArray(),o=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(i&&o)return n.map(function(a){var c=Ib(r);return c(a)});if(e.target.isOptional()&&t.length===0)return;var s=t[0];return wV(r,e,s)}},bV=function(r,e){var t=(0,x0.getFactoryDetails)(r);return(0,gV.tryAndThrowErrorIfStackOverflow)(function(){return t.factory.bind(r)(e)},function(){return new Error(hV.CIRCULAR_DEPENDENCY_IN_FACTORY(t.factoryType,e.currentRequest.serviceIdentifier.toString()))})},vV=function(r,e,t){var n,i=e.childRequests;switch((0,x0.ensureFullyBound)(t),t.type){case wd.BindingTypeEnum.ConstantValue:case wd.BindingTypeEnum.Function:n=t.cache;break;case wd.BindingTypeEnum.Constructor:n=t.implementationType;break;case wd.BindingTypeEnum.Instance:n=(0,yV.resolveInstance)(t,t.implementationType,i,Ib(r));break;default:n=bV(t,e.parentContext)}return n},_V=function(r,e,t){var n=(0,S0.tryGetFromScope)(r,e);return n!==null||(n=t(),(0,S0.saveToScope)(r,e,n)),n},wV=function(r,e,t){return _V(r,t,function(){var n=vV(r,e,t);return(0,Sb.isPromise)(n)?n=n.then(function(i){return I0(e,t,i)}):n=I0(e,t,n),n})};function I0(r,e,t){var n=SV(r.parentContext,e,t),i=CV(r.parentContext.container),o,s=i.next();do{o=s.value;var a=r.parentContext,c=r.serviceIdentifier,u=xV(o,c);(0,Sb.isPromise)(n)?n=C0(u,a,n):n=IV(u,a,n),s=i.next()}while(s.done!==!0&&!(0,mV.getBindingDictionary)(o).hasKey(r.serviceIdentifier));return n}var SV=function(r,e,t){var n;return typeof e.onActivation=="function"?n=e.onActivation(r,t):n=t,n},IV=function(r,e,t){for(var n=r.next();!n.done;){if(t=n.value(e,t),(0,Sb.isPromise)(t))return C0(r,e,t);n=r.next()}return t},C0=function(r,e,t){return dV(void 0,void 0,void 0,function(){var n,i;return fV(this,function(o){switch(o.label){case 0:return[4,t];case 1:n=o.sent(),i=r.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(e,n)];case 3:return n=o.sent(),i=r.next(),[3,2];case 4:return[2,n]}})})},xV=function(r,e){var t=r._activations;return t.hasKey(e)?t.get(e).values():[].values()},CV=function(r){for(var e=[r],t=r.parent;t!==null;)e.push(t),t=t.parent;var n=function(){var o=e.pop();return o!==void 0?{done:!1,value:o}:{done:!0,value:void 0}},i={next:n};return i};function PV(r){var e=Ib(r.plan.rootRequest.requestScope);return e(r.plan.rootRequest)}er.resolve=PV});var xb=b(Lt=>{"use strict";var TV=Lt&&Lt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),EV=Lt&&Lt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),RV=Lt&&Lt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&TV(e,r,t);return EV(e,r),e};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.typeConstraint=Lt.namedConstraint=Lt.taggedConstraint=Lt.traverseAncerstors=void 0;var AV=RV(rt()),kV=rn(),T0=function(r,e){var t=r.parentRequest;return t!==null?e(t)?!0:T0(t,e):!1};Lt.traverseAncerstors=T0;var E0=function(r){return function(e){var t=function(n){return n!==null&&n.target!==null&&n.target.matchesTag(r)(e)};return t.metaData=new kV.Metadata(r,e),t}};Lt.taggedConstraint=E0;var DV=E0(AV.NAMED_TAG);Lt.namedConstraint=DV;var OV=function(r){return function(e){var t=null;if(e!==null)if(t=e.bindings[0],typeof r=="string"){var n=t.serviceIdentifier;return n===r}else{var i=e.bindings[0].implementationType;return r===i}return!1}};Lt.typeConstraint=OV});var Id=b(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.BindingWhenSyntax=void 0;var $t=xd(),lt=xb(),MV=function(){function r(e){this._binding=e}return r.prototype.when=function(e){return this._binding.constraint=e,new $t.BindingOnSyntax(this._binding)},r.prototype.whenTargetNamed=function(e){return this._binding.constraint=(0,lt.namedConstraint)(e),new $t.BindingOnSyntax(this._binding)},r.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){if(e===null)return!1;var t=e.target!==null&&!e.target.isNamed()&&!e.target.isTagged();return t},new $t.BindingOnSyntax(this._binding)},r.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=(0,lt.taggedConstraint)(e)(t),new $t.BindingOnSyntax(this._binding)},r.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return t!==null&&(0,lt.typeConstraint)(e)(t.parentRequest)},new $t.BindingOnSyntax(this._binding)},r.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return t!==null&&(0,lt.namedConstraint)(e)(t.parentRequest)},new $t.BindingOnSyntax(this._binding)},r.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return n!==null&&(0,lt.taggedConstraint)(e)(t)(n.parentRequest)},new $t.BindingOnSyntax(this._binding)},r.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return t!==null&&(0,lt.traverseAncerstors)(t,(0,lt.typeConstraint)(e))},new $t.BindingOnSyntax(this._binding)},r.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return t!==null&&!(0,lt.traverseAncerstors)(t,(0,lt.typeConstraint)(e))},new $t.BindingOnSyntax(this._binding)},r.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return t!==null&&(0,lt.traverseAncerstors)(t,(0,lt.namedConstraint)(e))},new $t.BindingOnSyntax(this._binding)},r.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return t!==null&&!(0,lt.traverseAncerstors)(t,(0,lt.namedConstraint)(e))},new $t.BindingOnSyntax(this._binding)},r.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return n!==null&&(0,lt.traverseAncerstors)(n,(0,lt.taggedConstraint)(e)(t))},new $t.BindingOnSyntax(this._binding)},r.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return n!==null&&!(0,lt.traverseAncerstors)(n,(0,lt.taggedConstraint)(e)(t))},new $t.BindingOnSyntax(this._binding)},r.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return t!==null&&(0,lt.traverseAncerstors)(t,e)},new $t.BindingOnSyntax(this._binding)},r.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return t!==null&&!(0,lt.traverseAncerstors)(t,e)},new $t.BindingOnSyntax(this._binding)},r}();Sd.BindingWhenSyntax=MV});var xd=b(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.BindingOnSyntax=void 0;var R0=Id(),LV=function(){function r(e){this._binding=e}return r.prototype.onActivation=function(e){return this._binding.onActivation=e,new R0.BindingWhenSyntax(this._binding)},r.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new R0.BindingWhenSyntax(this._binding)},r}();Cd.BindingOnSyntax=LV});var Cb=b(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});Pd.BindingWhenOnSyntax=void 0;var NV=xd(),FV=Id(),BV=function(){function r(e){this._binding=e,this._bindingWhenSyntax=new FV.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new NV.BindingOnSyntax(this._binding)}return r.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},r.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},r.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},r.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},r.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},r.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},r.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},r.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},r.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},r.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},r.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},r.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},r.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},r.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},r.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},r.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},r.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},r}();Pd.BindingWhenOnSyntax=BV});var A0=b(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.BindingInSyntax=void 0;var Pb=Ar(),Tb=Cb(),UV=function(){function r(e){this._binding=e}return r.prototype.inRequestScope=function(){return this._binding.scope=Pb.BindingScopeEnum.Request,new Tb.BindingWhenOnSyntax(this._binding)},r.prototype.inSingletonScope=function(){return this._binding.scope=Pb.BindingScopeEnum.Singleton,new Tb.BindingWhenOnSyntax(this._binding)},r.prototype.inTransientScope=function(){return this._binding.scope=Pb.BindingScopeEnum.Transient,new Tb.BindingWhenOnSyntax(this._binding)},r}();Td.BindingInSyntax=UV});var k0=b(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.BindingInWhenOnSyntax=void 0;var jV=A0(),qV=xd(),WV=Id(),VV=function(){function r(e){this._binding=e,this._bindingWhenSyntax=new WV.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new qV.BindingOnSyntax(this._binding),this._bindingInSyntax=new jV.BindingInSyntax(e)}return r.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},r.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},r.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},r.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},r.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},r.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},r.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},r.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},r.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},r.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},r.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},r.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},r.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},r.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},r.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},r.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},r.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},r.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},r.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},r.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},r}();Ed.BindingInWhenOnSyntax=VV});var M0=b(xn=>{"use strict";var $V=xn&&xn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),HV=xn&&xn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),GV=xn&&xn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&$V(e,r,t);return HV(e,r),e};Object.defineProperty(xn,"__esModule",{value:!0});xn.BindingToSyntax=void 0;var D0=GV(Ot()),Ht=Ar(),O0=k0(),Sa=Cb(),zV=function(){function r(e){this._binding=e}return r.prototype.to=function(e){return this._binding.type=Ht.BindingTypeEnum.Instance,this._binding.implementationType=e,new O0.BindingInWhenOnSyntax(this._binding)},r.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+D0.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},r.prototype.toConstantValue=function(e){return this._binding.type=Ht.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Ht.BindingScopeEnum.Singleton,new Sa.BindingWhenOnSyntax(this._binding)},r.prototype.toDynamicValue=function(e){return this._binding.type=Ht.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new O0.BindingInWhenOnSyntax(this._binding)},r.prototype.toConstructor=function(e){return this._binding.type=Ht.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=Ht.BindingScopeEnum.Singleton,new Sa.BindingWhenOnSyntax(this._binding)},r.prototype.toFactory=function(e){return this._binding.type=Ht.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=Ht.BindingScopeEnum.Singleton,new Sa.BindingWhenOnSyntax(this._binding)},r.prototype.toFunction=function(e){if(typeof e!="function")throw new Error(D0.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=Ht.BindingTypeEnum.Function,this._binding.scope=Ht.BindingScopeEnum.Singleton,t},r.prototype.toAutoFactory=function(e){return this._binding.type=Ht.BindingTypeEnum.Factory,this._binding.factory=function(t){var n=function(){return t.container.get(e)};return n},this._binding.scope=Ht.BindingScopeEnum.Singleton,new Sa.BindingWhenOnSyntax(this._binding)},r.prototype.toAutoNamedFactory=function(e){return this._binding.type=Ht.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new Sa.BindingWhenOnSyntax(this._binding)},r.prototype.toProvider=function(e){return this._binding.type=Ht.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=Ht.BindingScopeEnum.Singleton,new Sa.BindingWhenOnSyntax(this._binding)},r.prototype.toService=function(e){this.toDynamicValue(function(t){return t.container.get(e)})},r}();xn.BindingToSyntax=zV});var L0=b(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.ContainerSnapshot=void 0;var KV=function(){function r(){}return r.of=function(e,t,n,i,o){var s=new r;return s.bindings=e,s.middleware=t,s.deactivations=i,s.activations=n,s.moduleActivationStore=o,s},r}();Rd.ContainerSnapshot=KV});var N0=b(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.isClonable=void 0;function JV(r){return typeof r=="object"&&r!==null&&"clone"in r&&typeof r.clone=="function"}Ad.isClonable=JV});var Eb=b(Cn=>{"use strict";var YV=Cn&&Cn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),XV=Cn&&Cn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),QV=Cn&&Cn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&YV(e,r,t);return XV(e,r),e};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.Lookup=void 0;var Jo=QV(Ot()),ZV=N0(),e$=function(){function r(){this._map=new Map}return r.prototype.getMap=function(){return this._map},r.prototype.add=function(e,t){if(e==null)throw new Error(Jo.NULL_ARGUMENT);if(t==null)throw new Error(Jo.NULL_ARGUMENT);var n=this._map.get(e);n!==void 0?n.push(t):this._map.set(e,[t])},r.prototype.get=function(e){if(e==null)throw new Error(Jo.NULL_ARGUMENT);var t=this._map.get(e);if(t!==void 0)return t;throw new Error(Jo.KEY_NOT_FOUND)},r.prototype.remove=function(e){if(e==null)throw new Error(Jo.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(Jo.KEY_NOT_FOUND)},r.prototype.removeIntersection=function(e){var t=this;this.traverse(function(n,i){var o=e.hasKey(n)?e.get(n):void 0;if(o!==void 0){var s=i.filter(function(a){return!o.some(function(c){return a===c})});t._setValue(n,s)}})},r.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach(function(i,o){for(var s=[],a=0,c=i;a<c.length;a++){var u=c[a],l=e(u);l?n.push(u):s.push(u)}t._setValue(o,s)}),n},r.prototype.hasKey=function(e){if(e==null)throw new Error(Jo.NULL_ARGUMENT);return this._map.has(e)},r.prototype.clone=function(){var e=new r;return this._map.forEach(function(t,n){t.forEach(function(i){return e.add(n,(0,ZV.isClonable)(i)?i.clone():i)})}),e},r.prototype.traverse=function(e){this._map.forEach(function(t,n){e(n,t)})},r.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},r}();Cn.Lookup=e$});var B0=b(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.ModuleActivationStore=void 0;var F0=Eb(),t$=function(){function r(){this._map=new Map}return r.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},r.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},r.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},r.prototype.clone=function(){var e=new r;return this._map.forEach(function(t,n){e._map.set(n,{onActivations:t.onActivations.clone(),onDeactivations:t.onDeactivations.clone()})}),e},r.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return t===void 0&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},r.prototype._getEmptyHandlersStore=function(){var e={onActivations:new F0.Lookup,onDeactivations:new F0.Lookup};return e},r}();kd.ModuleActivationStore=t$});var j0=b(mt=>{"use strict";var Od=mt&&mt.__assign||function(){return Od=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Od.apply(this,arguments)},r$=mt&&mt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),n$=mt&&mt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),U0=mt&&mt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&r$(e,r,t);return n$(e,r),e},Dr=mt&&mt.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(p){s(p)}}function c(l){try{u(n.throw(l))}catch(p){s(p)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(r,e||[])).next())})},Or=mt&&mt.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},i$=mt&&mt.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(mt,"__esModule",{value:!0});mt.Container=void 0;var o$=jC(),nn=U0(Ot()),Ia=Ar(),Yo=U0(rt()),s$=ob(),Dd=hb(),a$=P0(),c$=M0(),Xo=qu(),u$=Gi(),l$=Ko(),p$=L0(),Vu=Eb(),d$=B0(),f$=function(){function r(e){var t=e||{};if(typeof t!="object")throw new Error(""+nn.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(t.defaultScope===void 0)t.defaultScope=Ia.BindingScopeEnum.Transient;else if(t.defaultScope!==Ia.BindingScopeEnum.Singleton&&t.defaultScope!==Ia.BindingScopeEnum.Transient&&t.defaultScope!==Ia.BindingScopeEnum.Request)throw new Error(""+nn.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(t.autoBindInjectable===void 0)t.autoBindInjectable=!1;else if(typeof t.autoBindInjectable!="boolean")throw new Error(""+nn.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(t.skipBaseClassChecks===void 0)t.skipBaseClassChecks=!1;else if(typeof t.skipBaseClassChecks!="boolean")throw new Error(""+nn.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=(0,u$.id)(),this._bindingDictionary=new Vu.Lookup,this._snapshots=[],this._middleware=null,this._activations=new Vu.Lookup,this._deactivations=new Vu.Lookup,this.parent=null,this._metadataReader=new s$.MetadataReader,this._moduleActivationStore=new d$.ModuleActivationStore}return r.merge=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=new r,s=i$([e,t],n,!0).map(function(u){return(0,Dd.getBindingDictionary)(u)}),a=(0,Dd.getBindingDictionary)(o);function c(u,l){u.traverse(function(p,d){d.forEach(function(f){l.add(f.serviceIdentifier,f.clone())})})}return s.forEach(function(u){c(u,a)}),o},r.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),i=0,o=e;i<o.length;i++){var s=o[i],a=n(s.id);s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)}},r.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dr(this,void 0,void 0,function(){var n,i,o,s,a;return Or(this,function(c){switch(c.label){case 0:n=this._getContainerModuleHelpersFactory(),i=0,o=e,c.label=1;case 1:return i<o.length?(s=o[i],a=n(s.id),[4,s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},r.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(i){var o=e._removeModuleBindings(i.id);e._deactivateSingletons(o),e._removeModuleHandlers(i.id)})},r.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dr(this,void 0,void 0,function(){var n,i,o,s;return Or(this,function(a){switch(a.label){case 0:n=0,i=e,a.label=1;case 1:return n<i.length?(o=i[n],s=this._removeModuleBindings(o.id),[4,this._deactivateSingletonsAsync(s)]):[3,4];case 2:a.sent(),this._removeModuleHandlers(o.id),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},r.prototype.bind=function(e){var t=this.options.defaultScope||Ia.BindingScopeEnum.Transient,n=new o$.Binding(e,t);return this._bindingDictionary.add(e,n),new c$.BindingToSyntax(n)},r.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},r.prototype.rebindAsync=function(e){return Dr(this,void 0,void 0,function(){return Or(this,function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}})})},r.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},r.prototype.unbindAsync=function(e){return Dr(this,void 0,void 0,function(){var t;return Or(this,function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}})})},r.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse(function(t,n){e._deactivateSingletons(n)}),this._bindingDictionary=new Vu.Lookup},r.prototype.unbindAllAsync=function(){return Dr(this,void 0,void 0,function(){var e,t=this;return Or(this,function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse(function(i,o){e.push(t._deactivateSingletonsAsync(o))}),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new Vu.Lookup,[2]}})})},r.prototype.onActivation=function(e,t){this._activations.add(e,t)},r.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},r.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},r.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},r.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,Yo.NAMED_TAG,t)},r.prototype.isBoundTagged=function(e,t,n){var i=!1;if(this._bindingDictionary.hasKey(e)){var o=this._bindingDictionary.get(e),s=(0,Dd.createMockRequest)(this,e,t,n);i=o.some(function(a){return a.constraint(s)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,t,n)),i},r.prototype.snapshot=function(){this._snapshots.push(p$.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},r.prototype.restore=function(){var e=this._snapshots.pop();if(e===void 0)throw new Error(nn.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},r.prototype.createChild=function(e){var t=new r(e||this.options);return t.parent=this,t},r.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(i,o){return o(i)},n)},r.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},r.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},r.prototype.getAsync=function(e){return Dr(this,void 0,void 0,function(){var t;return Or(this,function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]})})},r.prototype.getTagged=function(e,t,n){var i=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(i)},r.prototype.getTaggedAsync=function(e,t,n){return Dr(this,void 0,void 0,function(){var i;return Or(this,function(o){return i=this._getNotAllArgs(e,!1,t,n),[2,this._get(i)]})})},r.prototype.getNamed=function(e,t){return this.getTagged(e,Yo.NAMED_TAG,t)},r.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,Yo.NAMED_TAG,t)},r.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},r.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},r.prototype.getAllTagged=function(e,t,n){var i=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(i)},r.prototype.getAllTaggedAsync=function(e,t,n){var i=this._getNotAllArgs(e,!0,t,n);return this._getAll(i)},r.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,Yo.NAMED_TAG,t)},r.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,Yo.NAMED_TAG,t)},r.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},r.prototype._preDestroy=function(e,t){var n,i;if(Reflect.hasMetadata(Yo.PRE_DESTROY,e)){var o=Reflect.getMetadata(Yo.PRE_DESTROY,e);return(i=(n=t)[o.value])===null||i===void 0?void 0:i.call(n)}},r.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},r.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition(function(t){return t.moduleId===e})},r.prototype._deactivate=function(e,t){var n=this,i=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var o=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if((0,Xo.isPromise)(o))return this._handleDeactivationError(o.then(function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,i)}),i)}var s=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,i);if((0,Xo.isPromise)(s))return this._handleDeactivationError(s,i)}catch(a){if(a instanceof Error)throw new Error(nn.ON_DEACTIVATION_ERROR(i.name,a.message))}},r.prototype._handleDeactivationError=function(e,t){return Dr(this,void 0,void 0,function(){var n;return Or(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return i.sent(),[3,3];case 2:if(n=i.sent(),n instanceof Error)throw new Error(nn.ON_DEACTIVATION_ERROR(t.name,n.message));return[3,3];case 3:return[2]}})})},r.prototype._deactivateContainer=function(e,t){for(var n=this,i=t.next();i.value;){var o=i.value(e);if((0,Xo.isPromise)(o))return o.then(function(){return n._deactivateContainerAsync(e,t)});i=t.next()}},r.prototype._deactivateContainerAsync=function(e,t){return Dr(this,void 0,void 0,function(){var n;return Or(this,function(i){switch(i.label){case 0:n=t.next(),i.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return i.sent(),n=t.next(),[3,1];case 3:return[2]}})})},r.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(l,p){l._binding.moduleId=p},n=function(l){return function(p){var d=e.bind(p);return t(d,l),d}},i=function(){return function(l){return e.unbind(l)}},o=function(){return function(l){return e.unbindAsync(l)}},s=function(){return function(l){return e.isBound(l)}},a=function(l){return function(p){var d=e.rebind(p);return t(d,l),d}},c=function(l){return function(p,d){e._moduleActivationStore.addActivation(l,p,d),e.onActivation(p,d)}},u=function(l){return function(p,d){e._moduleActivationStore.addDeactivation(l,p,d),e.onDeactivation(p,d)}};return function(l){return{bindFunction:n(l),isboundFunction:s(),onActivationFunction:c(l),onDeactivationFunction:u(l),rebindFunction:a(l),unbindFunction:i(),unbindAsyncFunction:o()}}},r.prototype._getAll=function(e){return Promise.all(this._get(e))},r.prototype._get=function(e){var t=Od(Od({},e),{contextInterceptor:function(i){return i},targetType:Ia.TargetTypeEnum.Variable});if(this._middleware){var n=this._middleware(t);if(n==null)throw new Error(nn.INVALID_MIDDLEWARE_RETURN);return n}return this._planAndResolve()(t)},r.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if((0,Xo.isPromiseOrContainsPromise)(t))throw new Error(nn.LAZY_IN_SYNC(e.serviceIdentifier));return t},r.prototype._getAllArgs=function(e){var t={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e};return t},r.prototype._getNotAllArgs=function(e,t,n,i){var o={avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:i};return o},r.prototype._planAndResolve=function(){var e=this;return function(t){var n=(0,Dd.plan)(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);n=t.contextInterceptor(n);var i=(0,a$.resolve)(n);return i}},r.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return(0,Xo.isPromise)(e.cache)?e.cache.then(function(n){return t._deactivate(e,n)}):this._deactivate(e,e.cache)},r.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],o=this._deactivateIfSingleton(i);if((0,Xo.isPromise)(o))throw new Error(nn.ASYNC_UNBIND_REQUIRED)}},r.prototype._deactivateSingletonsAsync=function(e){return Dr(this,void 0,void 0,function(){var t=this;return Or(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(i){return t._deactivateIfSingleton(i)}))];case 1:return n.sent(),[2]}})})},r.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},r.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return Dr(this,void 0,void 0,function(){return Or(this,function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:i.sent(),i.label=4;case 4:return[2]}})})},r.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch{throw new Error(nn.CANNOT_UNBIND+" "+(0,l$.getServiceIdentifierAsString)(e))}},r.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var i=this;if(typeof e.onDeactivation=="function"){var o=e.onDeactivation(t);if((0,Xo.isPromise)(o))return o.then(function(){return i._preDestroy(n,t)})}return this._preDestroy(n,t)},r.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return Dr(this,void 0,void 0,function(){return Or(this,function(i){switch(i.label){case 0:return typeof e.onDeactivation!="function"?[3,2]:[4,e.onDeactivation(t)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return i.sent(),[2]}})})},r}();mt.Container=f$});var W0=b(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.AsyncContainerModule=xa.ContainerModule=void 0;var q0=Gi(),h$=function(){function r(e){this.id=(0,q0.id)(),this.registry=e}return r}();xa.ContainerModule=h$;var m$=function(){function r(e){this.id=(0,q0.id)(),this.registry=e}return r}();xa.AsyncContainerModule=m$});var V0=b(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.getFirstArrayDuplicate=void 0;function g$(r){for(var e=new Set,t=0,n=r;t<n.length;t++){var i=n[t];if(e.has(i))return i;e.add(i)}}Md.getFirstArrayDuplicate=g$});var mi=b(Nt=>{"use strict";var y$=Nt&&Nt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),b$=Nt&&Nt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),H0=Nt&&Nt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&y$(e,r,t);return b$(e,r),e};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.createTaggedDecorator=Nt.tagProperty=Nt.tagParameter=Nt.decorate=void 0;var Ld=H0(Ot()),G0=H0(rt()),v$=V0();function _$(r){return r.prototype!==void 0}function w$(r){if(r!==void 0)throw new Error(Ld.INVALID_DECORATOR_OPERATION)}function z0(r,e,t,n){w$(e),J0(G0.TAGGED,r,t.toString(),n)}Nt.tagParameter=z0;function K0(r,e,t){if(_$(r))throw new Error(Ld.INVALID_DECORATOR_OPERATION);J0(G0.TAGGED_PROP,r.constructor,e,t)}Nt.tagProperty=K0;function S$(r){var e=[];if(Array.isArray(r)){e=r;var t=(0,v$.getFirstArrayDuplicate)(e.map(function(n){return n.key}));if(t!==void 0)throw new Error(Ld.DUPLICATED_METADATA+" "+t.toString())}else e=[r];return e}function J0(r,e,t,n){var i=S$(n),o={};Reflect.hasOwnMetadata(r,e)&&(o=Reflect.getMetadata(r,e));var s=o[t];if(s===void 0)s=[];else for(var a=function(p){if(i.some(function(d){return d.key===p.key}))throw new Error(Ld.DUPLICATED_METADATA+" "+p.key.toString())},c=0,u=s;c<u.length;c++){var l=u[c];a(l)}s.push.apply(s,i),o[t]=s,Reflect.defineMetadata(r,o,e)}function I$(r){return function(e,t,n){typeof n=="number"?z0(e,t,n,r):K0(e,t,r)}}Nt.createTaggedDecorator=I$;function $0(r,e){Reflect.decorate(r,e)}function x$(r,e){return function(t,n){e(t,n,r)}}function C$(r,e,t){typeof t=="number"?$0([x$(t,r)],e):typeof t=="string"?Reflect.decorate([r],e,t):$0([r],e)}Nt.decorate=C$});var X0=b(Pn=>{"use strict";var P$=Pn&&Pn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),T$=Pn&&Pn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Y0=Pn&&Pn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&P$(e,r,t);return T$(e,r),e};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.injectable=void 0;var E$=Y0(Ot()),Rb=Y0(rt());function R$(){return function(r){if(Reflect.hasOwnMetadata(Rb.PARAM_TYPES,r))throw new Error(E$.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(Rb.DESIGN_PARAM_TYPES,r)||[];return Reflect.defineMetadata(Rb.PARAM_TYPES,e,r),r}}Pn.injectable=R$});var Q0=b(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});Nd.tagged=void 0;var A$=rn(),k$=mi();function D$(r,e){return(0,k$.createTaggedDecorator)(new A$.Metadata(r,e))}Nd.tagged=D$});var Z0=b(Tn=>{"use strict";var O$=Tn&&Tn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),M$=Tn&&Tn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),L$=Tn&&Tn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&O$(e,r,t);return M$(e,r),e};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.named=void 0;var N$=L$(rt()),F$=rn(),B$=mi();function U$(r){return(0,B$.createTaggedDecorator)(new F$.Metadata(N$.NAMED_TAG,r))}Tn.named=U$});var Ab=b(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.injectBase=void 0;var j$=Ot(),q$=rn(),W$=mi();function V$(r){return function(e){return function(t,n,i){if(e===void 0){var o=typeof t=="function"?t.name:t.constructor.name;throw new Error((0,j$.UNDEFINED_INJECT_ANNOTATION)(o))}return(0,W$.createTaggedDecorator)(new q$.Metadata(r,e))(t,n,i)}}}Fd.injectBase=V$});var eP=b(En=>{"use strict";var $$=En&&En.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),H$=En&&En.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),G$=En&&En.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&$$(e,r,t);return H$(e,r),e};Object.defineProperty(En,"__esModule",{value:!0});En.inject=void 0;var z$=G$(rt()),K$=Ab(),J$=(0,K$.injectBase)(z$.INJECT_TAG);En.inject=J$});var tP=b(Rn=>{"use strict";var Y$=Rn&&Rn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),X$=Rn&&Rn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Q$=Rn&&Rn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Y$(e,r,t);return X$(e,r),e};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.optional=void 0;var Z$=Q$(rt()),eH=rn(),tH=mi();function rH(){return(0,tH.createTaggedDecorator)(new eH.Metadata(Z$.OPTIONAL_TAG,!0))}Rn.optional=rH});var rP=b(An=>{"use strict";var nH=An&&An.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),iH=An&&An.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),oH=An&&An.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&nH(e,r,t);return iH(e,r),e};Object.defineProperty(An,"__esModule",{value:!0});An.unmanaged=void 0;var sH=oH(rt()),aH=rn(),cH=mi();function uH(){return function(r,e,t){var n=new aH.Metadata(sH.UNMANAGED_TAG,!0);(0,cH.tagParameter)(r,e,t,n)}}An.unmanaged=uH});var nP=b(kn=>{"use strict";var lH=kn&&kn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),pH=kn&&kn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),dH=kn&&kn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&lH(e,r,t);return pH(e,r),e};Object.defineProperty(kn,"__esModule",{value:!0});kn.multiInject=void 0;var fH=dH(rt()),hH=Ab(),mH=(0,hH.injectBase)(fH.MULTI_INJECT_TAG);kn.multiInject=mH});var iP=b(Dn=>{"use strict";var gH=Dn&&Dn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),yH=Dn&&Dn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),bH=Dn&&Dn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&gH(e,r,t);return yH(e,r),e};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.targetName=void 0;var vH=bH(rt()),_H=rn(),wH=mi();function SH(r){return function(e,t,n){var i=new _H.Metadata(vH.NAME_TAG,r);(0,wH.tagParameter)(e,t,n,i)}}Dn.targetName=SH});var kb=b(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.propertyEventDecorator=void 0;var IH=rn();function xH(r,e){return function(){return function(t,n){var i=new IH.Metadata(r,n);if(Reflect.hasOwnMetadata(r,t.constructor))throw new Error(e);Reflect.defineMetadata(r,i,t.constructor)}}}Bd.propertyEventDecorator=xH});var sP=b(On=>{"use strict";var CH=On&&On.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),PH=On&&On.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),oP=On&&On.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&CH(e,r,t);return PH(e,r),e};Object.defineProperty(On,"__esModule",{value:!0});On.postConstruct=void 0;var TH=oP(Ot()),EH=oP(rt()),RH=kb(),AH=(0,RH.propertyEventDecorator)(EH.POST_CONSTRUCT,TH.MULTIPLE_POST_CONSTRUCT_METHODS);On.postConstruct=AH});var cP=b(Mn=>{"use strict";var kH=Mn&&Mn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),DH=Mn&&Mn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),aP=Mn&&Mn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&kH(e,r,t);return DH(e,r),e};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.preDestroy=void 0;var OH=aP(Ot()),MH=aP(rt()),LH=kb(),NH=(0,LH.propertyEventDecorator)(MH.PRE_DESTROY,OH.MULTIPLE_PRE_DESTROY_METHODS);Mn.preDestroy=NH});var uP=b(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.interfaces=void 0;var Db;Db||(Db={});Ud.interfaces=Db});var $=b(W=>{"use strict";var FH=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),BH=W&&W.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),UH=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&FH(e,r,t);return BH(e,r),e};Object.defineProperty(W,"__esModule",{value:!0});W.multiBindToService=W.getServiceIdentifierAsString=W.typeConstraint=W.namedConstraint=W.taggedConstraint=W.traverseAncerstors=W.decorate=W.interfaces=W.id=W.MetadataReader=W.preDestroy=W.postConstruct=W.targetName=W.multiInject=W.unmanaged=W.optional=W.LazyServiceIdentifer=W.LazyServiceIdentifier=W.inject=W.named=W.tagged=W.injectable=W.createTaggedDecorator=W.ContainerModule=W.AsyncContainerModule=W.TargetTypeEnum=W.BindingTypeEnum=W.BindingScopeEnum=W.Container=W.METADATA_KEY=void 0;var jH=UH(rt());W.METADATA_KEY=jH;var qH=j0();Object.defineProperty(W,"Container",{enumerable:!0,get:function(){return qH.Container}});var Ob=Ar();Object.defineProperty(W,"BindingScopeEnum",{enumerable:!0,get:function(){return Ob.BindingScopeEnum}});Object.defineProperty(W,"BindingTypeEnum",{enumerable:!0,get:function(){return Ob.BindingTypeEnum}});Object.defineProperty(W,"TargetTypeEnum",{enumerable:!0,get:function(){return Ob.TargetTypeEnum}});var lP=W0();Object.defineProperty(W,"AsyncContainerModule",{enumerable:!0,get:function(){return lP.AsyncContainerModule}});Object.defineProperty(W,"ContainerModule",{enumerable:!0,get:function(){return lP.ContainerModule}});var WH=mi();Object.defineProperty(W,"createTaggedDecorator",{enumerable:!0,get:function(){return WH.createTaggedDecorator}});var VH=X0();Object.defineProperty(W,"injectable",{enumerable:!0,get:function(){return VH.injectable}});var $H=Q0();Object.defineProperty(W,"tagged",{enumerable:!0,get:function(){return $H.tagged}});var HH=Z0();Object.defineProperty(W,"named",{enumerable:!0,get:function(){return HH.named}});var GH=eP();Object.defineProperty(W,"inject",{enumerable:!0,get:function(){return GH.inject}});var zH=md();Object.defineProperty(W,"LazyServiceIdentifier",{enumerable:!0,get:function(){return zH.LazyServiceIdentifier}});var KH=md();Object.defineProperty(W,"LazyServiceIdentifer",{enumerable:!0,get:function(){return KH.LazyServiceIdentifier}});var JH=tP();Object.defineProperty(W,"optional",{enumerable:!0,get:function(){return JH.optional}});var YH=rP();Object.defineProperty(W,"unmanaged",{enumerable:!0,get:function(){return YH.unmanaged}});var XH=nP();Object.defineProperty(W,"multiInject",{enumerable:!0,get:function(){return XH.multiInject}});var QH=iP();Object.defineProperty(W,"targetName",{enumerable:!0,get:function(){return QH.targetName}});var ZH=sP();Object.defineProperty(W,"postConstruct",{enumerable:!0,get:function(){return ZH.postConstruct}});var e5=cP();Object.defineProperty(W,"preDestroy",{enumerable:!0,get:function(){return e5.preDestroy}});var t5=ob();Object.defineProperty(W,"MetadataReader",{enumerable:!0,get:function(){return t5.MetadataReader}});var r5=Gi();Object.defineProperty(W,"id",{enumerable:!0,get:function(){return r5.id}});var n5=uP();Object.defineProperty(W,"interfaces",{enumerable:!0,get:function(){return n5.interfaces}});var i5=mi();Object.defineProperty(W,"decorate",{enumerable:!0,get:function(){return i5.decorate}});var jd=xb();Object.defineProperty(W,"traverseAncerstors",{enumerable:!0,get:function(){return jd.traverseAncerstors}});Object.defineProperty(W,"taggedConstraint",{enumerable:!0,get:function(){return jd.taggedConstraint}});Object.defineProperty(W,"namedConstraint",{enumerable:!0,get:function(){return jd.namedConstraint}});Object.defineProperty(W,"typeConstraint",{enumerable:!0,get:function(){return jd.typeConstraint}});var o5=Ko();Object.defineProperty(W,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return o5.getServiceIdentifierAsString}});var s5=yb();Object.defineProperty(W,"multiBindToService",{enumerable:!0,get:function(){return s5.multiBindToService}})});var bE=b((ure,ds)=>{var gE={};gE.__wbindgen_placeholder__=ds.exports;var Vn,{TextDecoder:HG}=require("util"),Of=null;function vv(){return(Of===null||Of.byteLength===0)&&(Of=new Uint8Array(Vn.memory.buffer)),Of}function GG(r,e){return r=r>>>0,vv().subarray(r/1,r/1+e)}var xi=new Array(128).fill(void 0);xi.push(void 0,null,!0,!1);function Mf(r){return xi[r]}var ll=xi.length;function zG(r){r<132||(xi[r]=ll,ll=r)}function KG(r){let e=Mf(r);return zG(r),e}var yE=new HG("utf-8",{ignoreBOM:!0,fatal:!0});yE.decode();function JG(r,e){return r=r>>>0,yE.decode(vv().subarray(r,r+e))}var yv=0;function hE(r,e){let t=e(r.length*1,1)>>>0;return vv().set(r,t/1),yv=r.length,t}function YG(r){ll===xi.length&&xi.push(xi.length+1);let e=ll;return ll=xi[e],xi[e]=r,e}var mE=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>Vn.__wbg_hasher_free(r>>>0,1)),bv=class{__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,mE.unregister(this),e}free(){let e=this.__destroy_into_raw();Vn.__wbg_hasher_free(e,0)}constructor(){let e=Vn.hasher_new();return this.__wbg_ptr=e>>>0,mE.register(this,this.__wbg_ptr,this),this}update(e){let t=hE(e,Vn.__wbindgen_malloc),n=yv;Vn.hasher_update(this.__wbg_ptr,t,n)}digest(e){var t=hE(e,Vn.__wbindgen_malloc),n=yv;Vn.hasher_digest(this.__wbg_ptr,t,n,YG(e))}};ds.exports.Hasher=bv;ds.exports.__wbindgen_copy_to_typed_array=function(r,e,t){new Uint8Array(Mf(t).buffer,Mf(t).byteOffset,Mf(t).byteLength).set(GG(r,e))};ds.exports.__wbindgen_object_drop_ref=function(r){KG(r)};ds.exports.__wbindgen_throw=function(r,e){throw new Error(JG(r,e))};var XG=require("path").join(__dirname,"chromehash_bg.wasm"),QG=require("fs").readFileSync(XG),ZG=new WebAssembly.Module(QG),e3=new WebAssembly.Instance(ZG,gE);Vn=e3.exports;ds.exports.__wasm=Vn});var xE=b(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.normalizeShaBuffer=yr.shaHashFile=yr.hashFile=yr.shaHash=yr.hash=void 0;var wE=bE(),SE=require("fs"),vE=require("string_decoder"),IE=require("crypto"),Nf=Buffer.alloc(4*5),t3=r=>{let e=new wE.Hasher;return e.update(o3(r)),e.digest(Nf),e.free(),Nf.toString("hex")};yr.hash=t3;var r3=r=>{let e=(0,IE.createHash)("sha256");return e.update((0,yr.normalizeShaBuffer)(r)),e.digest("hex")};yr.shaHash=r3;var n3=async(r,e=4096)=>{e%2===1&&e++;let t=Buffer.alloc(e),n=new wE.Hasher,i;try{i=await SE.promises.open(r,"r");let o=await i.read(t,0,t.length,null),s=t.slice(0,o.bytesRead);if(Bf(s))for(n.update(s.slice(2));o.bytesRead===t.length;)o=await i.read(t,0,t.length,null),n.update(t.slice(0,o.bytesRead));else if(Uf(s))for(n.update(s.slice(2).swap16());o.bytesRead===t.length;)o=await i.read(t,0,t.length,null),n.update(t.slice(0,o.bytesRead).swap16());else if(Ff(s)){let a=new vE.StringDecoder("utf8");for(n.update(Buffer.from(a.write(s.slice(3)),"utf16le"));o.bytesRead===t.length;)o=await i.read(t,0,t.length,null),n.update(Buffer.from(a.write(t.slice(0,o.bytesRead)),"utf16le"))}else{let a=new vE.StringDecoder("utf8");for(n.update(Buffer.from(a.write(s),"utf16le"));o.bytesRead===t.length;)o=await i.read(t,0,t.length,null),n.update(Buffer.from(a.write(t.slice(0,o.bytesRead)),"utf16le"))}return n.digest(Nf),Nf.toString("hex")}finally{n.free(),i!==void 0&&await i.close()}};yr.hashFile=n3;var Lf={stream:!0},i3=async(r,e=4096)=>{e%2===1&&e++;let t=Buffer.alloc(e),n=(0,IE.createHash)("sha256"),i;try{i=await SE.promises.open(r,"r");let o=await i.read(t,0,t.length,null),s=t.slice(0,o.bytesRead);if(Bf(s)){let a=new TextDecoder("utf-16le");for(n.update(a.decode(s.slice(2),Lf));o.bytesRead>0;)o=await i.read(t,0,t.length,null),n.update(a.decode(t.slice(0,o.bytesRead),Lf))}else if(Uf(s)){let a=new TextDecoder("utf-16be");for(n.update(a.decode(s.slice(2),Lf));o.bytesRead>0;)o=await i.read(t,0,t.length,null),n.update(a.decode(t.slice(0,o.bytesRead),Lf))}else if(Ff(s))for(n.update(s.slice(3));o.bytesRead>0;)o=await i.read(t,0,t.length,null),n.update(t.slice(0,o.bytesRead));else for(n.update(s);o.bytesRead>0;)o=await i.read(t,0,t.length,null),n.update(t.slice(0,o.bytesRead));return n.digest("hex")}finally{await i?.close()}};yr.shaHashFile=i3;var Ff=r=>r.length>=3&&r[0]===239&&r[1]===187&&r[2]===191,Bf=r=>r.length>=2&&r[0]===255&&r[1]===254,Uf=r=>r.length>=2&&r[0]===254&&r[1]===255,o3=r=>Ff(r)?_E(r.slice(3)):Bf(r)?r.slice(2):Uf(r)?r.slice(2).swap16():_E(r),s3=r=>Ff(r)?r.slice(3):Bf(r)?new TextEncoder().encode(new TextDecoder("utf-16le").decode(r.slice(2))):Uf(r)?new TextEncoder().encode(new TextDecoder("utf-16be").decode(r.slice(2))):r;yr.normalizeShaBuffer=s3;var _E=r=>Buffer.from(r.toString("utf8"),"utf16le")});var Qf=b(Ur=>{"use strict";Ur.isInteger=r=>typeof r=="number"?Number.isInteger(r):typeof r=="string"&&r.trim()!==""?Number.isInteger(Number(r)):!1;Ur.find=(r,e)=>r.nodes.find(t=>t.type===e);Ur.exceedsLimit=(r,e,t=1,n)=>n===!1||!Ur.isInteger(r)||!Ur.isInteger(e)?!1:(Number(e)-Number(r))/Number(t)>=n;Ur.escapeNode=(r,e=0,t)=>{let n=r.nodes[e];n&&(t&&n.type===t||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};Ur.encloseBrace=r=>r.type!=="brace"?!1:r.commas>>0+r.ranges>>0===0?(r.invalid=!0,!0):!1;Ur.isInvalidBrace=r=>r.type!=="brace"?!1:r.invalid===!0||r.dollar?!0:r.commas>>0+r.ranges>>0===0||r.open!==!0||r.close!==!0?(r.invalid=!0,!0):!1;Ur.isOpenOrClose=r=>r.type==="open"||r.type==="close"?!0:r.open===!0||r.close===!0;Ur.reduce=r=>r.reduce((e,t)=>(t.type==="text"&&e.push(t.value),t.type==="range"&&(t.type="text"),e),[]);Ur.flatten=(...r)=>{let e=[],t=n=>{for(let i=0;i<n.length;i++){let o=n[i];if(Array.isArray(o)){t(o);continue}o!==void 0&&e.push(o)}return e};return t(r),e}});var Zf=b((fie,JE)=>{"use strict";var KE=Qf();JE.exports=(r,e={})=>{let t=(n,i={})=>{let o=e.escapeInvalid&&KE.isInvalidBrace(i),s=n.invalid===!0&&e.escapeInvalid===!0,a="";if(n.value)return(o||s)&&KE.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let c of n.nodes)a+=t(c);return a};return t(r)}});var XE=b((hie,YE)=>{"use strict";YE.exports=function(r){return typeof r=="number"?r-r===0:typeof r=="string"&&r.trim()!==""?Number.isFinite?Number.isFinite(+r):isFinite(+r):!1}});var sR=b((mie,oR)=>{"use strict";var QE=XE(),ys=(r,e,t)=>{if(QE(r)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||r===e)return String(r);if(QE(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...t};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),o=String(n.shorthand),s=String(n.capture),a=String(n.wrap),c=r+":"+e+"="+i+o+s+a;if(ys.cache.hasOwnProperty(c))return ys.cache[c].result;let u=Math.min(r,e),l=Math.max(r,e);if(Math.abs(u-l)===1){let m=r+"|"+e;return n.capture?`(${m})`:n.wrap===!1?m:`(?:${m})`}let p=iR(r)||iR(e),d={min:r,max:e,a:u,b:l},f=[],h=[];if(p&&(d.isPadded=p,d.maxLen=String(d.max).length),u<0){let m=l<0?Math.abs(l):1;h=ZE(m,Math.abs(u),d,n),u=d.a=0}return l>=0&&(f=ZE(u,l,d,n)),d.negatives=h,d.positives=f,d.result=P3(h,f,n),n.capture===!0?d.result=`(${d.result})`:n.wrap!==!1&&f.length+h.length>1&&(d.result=`(?:${d.result})`),ys.cache[c]=d,d.result};function P3(r,e,t){let n=Cv(r,e,"-",!1,t)||[],i=Cv(e,r,"",!1,t)||[],o=Cv(r,e,"-?",!0,t)||[];return n.concat(o).concat(i).join("|")}function T3(r,e){let t=1,n=1,i=tR(r,t),o=new Set([e]);for(;r<=i&&i<=e;)o.add(i),t+=1,i=tR(r,t);for(i=rR(e+1,n)-1;r<i&&i<=e;)o.add(i),n+=1,i=rR(e+1,n)-1;return o=[...o],o.sort(A3),o}function E3(r,e,t){if(r===e)return{pattern:r,count:[],digits:0};let n=R3(r,e),i=n.length,o="",s=0;for(let a=0;a<i;a++){let[c,u]=n[a];c===u?o+=c:c!=="0"||u!=="9"?o+=k3(c,u,t):s++}return s&&(o+=t.shorthand===!0?"\\d":"[0-9]"),{pattern:o,count:[s],digits:i}}function ZE(r,e,t,n){let i=T3(r,e),o=[],s=r,a;for(let c=0;c<i.length;c++){let u=i[c],l=E3(String(s),String(u),n),p="";if(!t.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+nR(a.count),s=u+1;continue}t.isPadded&&(p=D3(u,t,n)),l.string=p+l.pattern+nR(l.count),o.push(l),s=u+1,a=l}return o}function Cv(r,e,t,n,i){let o=[];for(let s of r){let{string:a}=s;!n&&!eR(e,"string",a)&&o.push(t+a),n&&eR(e,"string",a)&&o.push(t+a)}return o}function R3(r,e){let t=[];for(let n=0;n<r.length;n++)t.push([r[n],e[n]]);return t}function A3(r,e){return r>e?1:e>r?-1:0}function eR(r,e,t){return r.some(n=>n[e]===t)}function tR(r,e){return Number(String(r).slice(0,-e)+"9".repeat(e))}function rR(r,e){return r-r%Math.pow(10,e)}function nR(r){let[e=0,t=""]=r;return t||e>1?`{${e+(t?","+t:"")}}`:""}function k3(r,e,t){return`[${r}${e-r===1?"":"-"}${e}]`}function iR(r){return/^-?(0+)\d/.test(r)}function D3(r,e,t){if(!e.isPadded)return r;let n=Math.abs(e.maxLen-String(r).length),i=t.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}ys.cache={};ys.clearCache=()=>ys.cache={};oR.exports=ys});var Ev=b((gie,fR)=>{"use strict";var O3=require("util"),cR=sR(),aR=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),M3=r=>e=>r===!0?Number(e):String(e),Pv=r=>typeof r=="number"||typeof r=="string"&&r!=="",dl=r=>Number.isInteger(+r),Tv=r=>{let e=`${r}`,t=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++t]==="0";);return t>0},L3=(r,e,t)=>typeof r=="string"||typeof e=="string"?!0:t.stringify===!0,N3=(r,e,t)=>{if(e>0){let n=r[0]==="-"?"-":"";n&&(r=r.slice(1)),r=n+r.padStart(n?e-1:e,"0")}return t===!1?String(r):r},th=(r,e)=>{let t=r[0]==="-"?"-":"";for(t&&(r=r.slice(1),e--);r.length<e;)r="0"+r;return t?"-"+r:r},F3=(r,e,t)=>{r.negatives.sort((a,c)=>a<c?-1:a>c?1:0),r.positives.sort((a,c)=>a<c?-1:a>c?1:0);let n=e.capture?"":"?:",i="",o="",s;return r.positives.length&&(i=r.positives.map(a=>th(String(a),t)).join("|")),r.negatives.length&&(o=`-(${n}${r.negatives.map(a=>th(String(a),t)).join("|")})`),i&&o?s=`${i}|${o}`:s=i||o,e.wrap?`(${n}${s})`:s},uR=(r,e,t,n)=>{if(t)return cR(r,e,{wrap:!1,...n});let i=String.fromCharCode(r);if(r===e)return i;let o=String.fromCharCode(e);return`[${i}-${o}]`},lR=(r,e,t)=>{if(Array.isArray(r)){let n=t.wrap===!0,i=t.capture?"":"?:";return n?`(${i}${r.join("|")})`:r.join("|")}return cR(r,e,t)},pR=(...r)=>new RangeError("Invalid range arguments: "+O3.inspect(...r)),dR=(r,e,t)=>{if(t.strictRanges===!0)throw pR([r,e]);return[]},B3=(r,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${r}" to be a number`);return[]},U3=(r,e,t=1,n={})=>{let i=Number(r),o=Number(e);if(!Number.isInteger(i)||!Number.isInteger(o)){if(n.strictRanges===!0)throw pR([r,e]);return[]}i===0&&(i=0),o===0&&(o=0);let s=i>o,a=String(r),c=String(e),u=String(t);t=Math.max(Math.abs(t),1);let l=Tv(a)||Tv(c)||Tv(u),p=l?Math.max(a.length,c.length,u.length):0,d=l===!1&&L3(r,e,n)===!1,f=n.transform||M3(d);if(n.toRegex&&t===1)return uR(th(r,p),th(e,p),!0,n);let h={negatives:[],positives:[]},m=k=>h[k<0?"negatives":"positives"].push(Math.abs(k)),y=[],w=0;for(;s?i>=o:i<=o;)n.toRegex===!0&&t>1?m(i):y.push(N3(f(i,w),p,d)),i=s?i-t:i+t,w++;return n.toRegex===!0?t>1?F3(h,n,p):lR(y,null,{wrap:!1,...n}):y},j3=(r,e,t=1,n={})=>{if(!dl(r)&&r.length>1||!dl(e)&&e.length>1)return dR(r,e,n);let i=n.transform||(d=>String.fromCharCode(d)),o=`${r}`.charCodeAt(0),s=`${e}`.charCodeAt(0),a=o>s,c=Math.min(o,s),u=Math.max(o,s);if(n.toRegex&&t===1)return uR(c,u,!1,n);let l=[],p=0;for(;a?o>=s:o<=s;)l.push(i(o,p)),o=a?o-t:o+t,p++;return n.toRegex===!0?lR(l,null,{wrap:!1,options:n}):l},eh=(r,e,t,n={})=>{if(e==null&&Pv(r))return[r];if(!Pv(r)||!Pv(e))return dR(r,e,n);if(typeof t=="function")return eh(r,e,1,{transform:t});if(aR(t))return eh(r,e,0,t);let i={...n};return i.capture===!0&&(i.wrap=!0),t=t||i.step||1,dl(t)?dl(r)&&dl(e)?U3(r,e,t,i):j3(r,e,Math.max(Math.abs(t),1),i):t!=null&&!aR(t)?B3(t,i):eh(r,e,1,t)};fR.exports=eh});var gR=b((yie,mR)=>{"use strict";var q3=Ev(),hR=Qf(),W3=(r,e={})=>{let t=(n,i={})=>{let o=hR.isInvalidBrace(i),s=n.invalid===!0&&e.escapeInvalid===!0,a=o===!0||s===!0,c=e.escapeInvalid===!0?"\\":"",u="";if(n.isOpen===!0)return c+n.value;if(n.isClose===!0)return console.log("node.isClose",c,n.value),c+n.value;if(n.type==="open")return a?c+n.value:"(";if(n.type==="close")return a?c+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let l=hR.reduce(n.nodes),p=q3(...l,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(p.length!==0)return l.length>1&&p.length>1?`(${p})`:p}if(n.nodes)for(let l of n.nodes)u+=t(l,n);return u};return t(r)};mR.exports=W3});var vR=b((bie,bR)=>{"use strict";var V3=Ev(),yR=Zf(),tc=Qf(),bs=(r="",e="",t=!1)=>{let n=[];if(r=[].concat(r),e=[].concat(e),!e.length)return r;if(!r.length)return t?tc.flatten(e).map(i=>`{${i}}`):e;for(let i of r)if(Array.isArray(i))for(let o of i)n.push(bs(o,e,t));else for(let o of e)t===!0&&typeof o=="string"&&(o=`{${o}}`),n.push(Array.isArray(o)?bs(i,o,t):i+o);return tc.flatten(n)},$3=(r,e={})=>{let t=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(i,o={})=>{i.queue=[];let s=o,a=o.queue;for(;s.type!=="brace"&&s.type!=="root"&&s.parent;)s=s.parent,a=s.queue;if(i.invalid||i.dollar){a.push(bs(a.pop(),yR(i,e)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(bs(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let p=tc.reduce(i.nodes);if(tc.exceedsLimit(...p,e.step,t))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let d=V3(...p,e);d.length===0&&(d=yR(i,e)),a.push(bs(a.pop(),d)),i.nodes=[];return}let c=tc.encloseBrace(i),u=i.queue,l=i;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,u=l.queue;for(let p=0;p<i.nodes.length;p++){let d=i.nodes[p];if(d.type==="comma"&&i.type==="brace"){p===1&&u.push(""),u.push("");continue}if(d.type==="close"){a.push(bs(a.pop(),u,c));continue}if(d.value&&d.type!=="open"){u.push(bs(u.pop(),d.value));continue}d.nodes&&n(d,i)}return u};return tc.flatten(n(r))};bR.exports=$3});var wR=b((vie,_R)=>{"use strict";_R.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var PR=b((_ie,CR)=>{"use strict";var H3=Zf(),{MAX_LENGTH:SR,CHAR_BACKSLASH:Rv,CHAR_BACKTICK:G3,CHAR_COMMA:z3,CHAR_DOT:K3,CHAR_LEFT_PARENTHESES:J3,CHAR_RIGHT_PARENTHESES:Y3,CHAR_LEFT_CURLY_BRACE:X3,CHAR_RIGHT_CURLY_BRACE:Q3,CHAR_LEFT_SQUARE_BRACKET:IR,CHAR_RIGHT_SQUARE_BRACKET:xR,CHAR_DOUBLE_QUOTE:Z3,CHAR_SINGLE_QUOTE:e4,CHAR_NO_BREAK_SPACE:t4,CHAR_ZERO_WIDTH_NOBREAK_SPACE:r4}=wR(),n4=(r,e={})=>{if(typeof r!="string")throw new TypeError("Expected a string");let t=e||{},n=typeof t.maxLength=="number"?Math.min(SR,t.maxLength):SR;if(r.length>n)throw new SyntaxError(`Input length (${r.length}), exceeds max characters (${n})`);let i={type:"root",input:r,nodes:[]},o=[i],s=i,a=i,c=0,u=r.length,l=0,p=0,d,f=()=>r[l++],h=m=>{if(m.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&m.type==="text"){a.value+=m.value;return}return s.nodes.push(m),m.parent=s,m.prev=a,a=m,m};for(h({type:"bos"});l<u;)if(s=o[o.length-1],d=f(),!(d===r4||d===t4)){if(d===Rv){h({type:"text",value:(e.keepEscaping?d:"")+f()});continue}if(d===xR){h({type:"text",value:"\\"+d});continue}if(d===IR){c++;let m;for(;l<u&&(m=f());){if(d+=m,m===IR){c++;continue}if(m===Rv){d+=f();continue}if(m===xR&&(c--,c===0))break}h({type:"text",value:d});continue}if(d===J3){s=h({type:"paren",nodes:[]}),o.push(s),h({type:"text",value:d});continue}if(d===Y3){if(s.type!=="paren"){h({type:"text",value:d});continue}s=o.pop(),h({type:"text",value:d}),s=o[o.length-1];continue}if(d===Z3||d===e4||d===G3){let m=d,y;for(e.keepQuotes!==!0&&(d="");l<u&&(y=f());){if(y===Rv){d+=y+f();continue}if(y===m){e.keepQuotes===!0&&(d+=y);break}d+=y}h({type:"text",value:d});continue}if(d===X3){p++;let y={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||s.dollar===!0,depth:p,commas:0,ranges:0,nodes:[]};s=h(y),o.push(s),h({type:"open",value:d});continue}if(d===Q3){if(s.type!=="brace"){h({type:"text",value:d});continue}let m="close";s=o.pop(),s.close=!0,h({type:m,value:d}),p--,s=o[o.length-1];continue}if(d===z3&&p>0){if(s.ranges>0){s.ranges=0;let m=s.nodes.shift();s.nodes=[m,{type:"text",value:H3(s)}]}h({type:"comma",value:d}),s.commas++;continue}if(d===K3&&p>0&&s.commas===0){let m=s.nodes;if(p===0||m.length===0){h({type:"text",value:d});continue}if(a.type==="dot"){if(s.range=[],a.value+=d,a.type="range",s.nodes.length!==3&&s.nodes.length!==5){s.invalid=!0,s.ranges=0,a.type="text";continue}s.ranges++,s.args=[];continue}if(a.type==="range"){m.pop();let y=m[m.length-1];y.value+=a.value+d,a=y,s.ranges--;continue}h({type:"dot",value:d});continue}h({type:"text",value:d})}do if(s=o.pop(),s.type!=="root"){s.nodes.forEach(w=>{w.nodes||(w.type==="open"&&(w.isOpen=!0),w.type==="close"&&(w.isClose=!0),w.nodes||(w.type="text"),w.invalid=!0)});let m=o[o.length-1],y=m.nodes.indexOf(s);m.nodes.splice(y,1,...s.nodes)}while(o.length>0);return h({type:"eos"}),i};CR.exports=n4});var RR=b((wie,ER)=>{"use strict";var TR=Zf(),i4=gR(),o4=vR(),s4=PR(),br=(r,e={})=>{let t=[];if(Array.isArray(r))for(let n of r){let i=br.create(n,e);Array.isArray(i)?t.push(...i):t.push(i)}else t=[].concat(br.create(r,e));return e&&e.expand===!0&&e.nodupes===!0&&(t=[...new Set(t)]),t};br.parse=(r,e={})=>s4(r,e);br.stringify=(r,e={})=>TR(typeof r=="string"?br.parse(r,e):r,e);br.compile=(r,e={})=>(typeof r=="string"&&(r=br.parse(r,e)),i4(r,e));br.expand=(r,e={})=>{typeof r=="string"&&(r=br.parse(r,e));let t=o4(r,e);return e.noempty===!0&&(t=t.filter(Boolean)),e.nodupes===!0&&(t=[...new Set(t)]),t};br.create=(r,e={})=>r===""||r.length<3?[r]:e.expand!==!0?br.compile(r,e):br.expand(r,e);ER.exports=br});var fl=b((Sie,MR)=>{"use strict";var a4=require("path"),Hn="\\\\/",AR=`[^${Hn}]`,Ti="\\.",c4="\\+",u4="\\?",rh="\\/",l4="(?=.)",kR="[^/]",Av=`(?:${rh}|$)`,DR=`(?:^|${rh})`,kv=`${Ti}{1,2}${Av}`,p4=`(?!${Ti})`,d4=`(?!${DR}${kv})`,f4=`(?!${Ti}{0,1}${Av})`,h4=`(?!${kv})`,m4=`[^.${rh}]`,g4=`${kR}*?`,OR={DOT_LITERAL:Ti,PLUS_LITERAL:c4,QMARK_LITERAL:u4,SLASH_LITERAL:rh,ONE_CHAR:l4,QMARK:kR,END_ANCHOR:Av,DOTS_SLASH:kv,NO_DOT:p4,NO_DOTS:d4,NO_DOT_SLASH:f4,NO_DOTS_SLASH:h4,QMARK_NO_DOT:m4,STAR:g4,START_ANCHOR:DR},y4={...OR,SLASH_LITERAL:`[${Hn}]`,QMARK:AR,STAR:`${AR}*?`,DOTS_SLASH:`${Ti}{1,2}(?:[${Hn}]|$)`,NO_DOT:`(?!${Ti})`,NO_DOTS:`(?!(?:^|[${Hn}])${Ti}{1,2}(?:[${Hn}]|$))`,NO_DOT_SLASH:`(?!${Ti}{0,1}(?:[${Hn}]|$))`,NO_DOTS_SLASH:`(?!${Ti}{1,2}(?:[${Hn}]|$))`,QMARK_NO_DOT:`[^.${Hn}]`,START_ANCHOR:`(?:^|[${Hn}])`,END_ANCHOR:`(?:[${Hn}]|$)`},b4={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};MR.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:b4,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:a4.sep,extglobChars(r){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${r.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(r){return r===!0?y4:OR}}});var hl=b(ir=>{"use strict";var v4=require("path"),_4=process.platform==="win32",{REGEX_BACKSLASH:w4,REGEX_REMOVE_BACKSLASH:S4,REGEX_SPECIAL_CHARS:I4,REGEX_SPECIAL_CHARS_GLOBAL:x4}=fl();ir.isObject=r=>r!==null&&typeof r=="object"&&!Array.isArray(r);ir.hasRegexChars=r=>I4.test(r);ir.isRegexChar=r=>r.length===1&&ir.hasRegexChars(r);ir.escapeRegex=r=>r.replace(x4,"\\$1");ir.toPosixSlashes=r=>r.replace(w4,"/");ir.removeBackslashes=r=>r.replace(S4,e=>e==="\\"?"":e);ir.supportsLookbehinds=()=>{let r=process.version.slice(1).split(".").map(Number);return r.length===3&&r[0]>=9||r[0]===8&&r[1]>=10};ir.isWindows=r=>r&&typeof r.windows=="boolean"?r.windows:_4===!0||v4.sep==="\\";ir.escapeLast=(r,e,t)=>{let n=r.lastIndexOf(e,t);return n===-1?r:r[n-1]==="\\"?ir.escapeLast(r,e,n-1):`${r.slice(0,n)}\\${r.slice(n)}`};ir.removePrefix=(r,e={})=>{let t=r;return t.startsWith("./")&&(t=t.slice(2),e.prefix="./"),t};ir.wrapOutput=(r,e={},t={})=>{let n=t.contains?"":"^",i=t.contains?"":"$",o=`${n}(?:${r})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var WR=b((xie,qR)=>{"use strict";var LR=hl(),{CHAR_ASTERISK:Dv,CHAR_AT:C4,CHAR_BACKWARD_SLASH:ml,CHAR_COMMA:P4,CHAR_DOT:Ov,CHAR_EXCLAMATION_MARK:Mv,CHAR_FORWARD_SLASH:jR,CHAR_LEFT_CURLY_BRACE:Lv,CHAR_LEFT_PARENTHESES:Nv,CHAR_LEFT_SQUARE_BRACKET:T4,CHAR_PLUS:E4,CHAR_QUESTION_MARK:NR,CHAR_RIGHT_CURLY_BRACE:R4,CHAR_RIGHT_PARENTHESES:FR,CHAR_RIGHT_SQUARE_BRACKET:A4}=fl(),BR=r=>r===jR||r===ml,UR=r=>{r.isPrefix!==!0&&(r.depth=r.isGlobstar?1/0:1)},k4=(r,e)=>{let t=e||{},n=r.length-1,i=t.parts===!0||t.scanToEnd===!0,o=[],s=[],a=[],c=r,u=-1,l=0,p=0,d=!1,f=!1,h=!1,m=!1,y=!1,w=!1,k=!1,D=!1,Q=!1,F=!1,te=0,H,B,Z={value:"",depth:0,isGlob:!1},ve=()=>u>=n,R=()=>c.charCodeAt(u+1),Ie=()=>(H=B,c.charCodeAt(++u));for(;u<n;){B=Ie();let ft;if(B===ml){k=Z.backslashes=!0,B=Ie(),B===Lv&&(w=!0);continue}if(w===!0||B===Lv){for(te++;ve()!==!0&&(B=Ie());){if(B===ml){k=Z.backslashes=!0,Ie();continue}if(B===Lv){te++;continue}if(w!==!0&&B===Ov&&(B=Ie())===Ov){if(d=Z.isBrace=!0,h=Z.isGlob=!0,F=!0,i===!0)continue;break}if(w!==!0&&B===P4){if(d=Z.isBrace=!0,h=Z.isGlob=!0,F=!0,i===!0)continue;break}if(B===R4&&(te--,te===0)){w=!1,d=Z.isBrace=!0,F=!0;break}}if(i===!0)continue;break}if(B===jR){if(o.push(u),s.push(Z),Z={value:"",depth:0,isGlob:!1},F===!0)continue;if(H===Ov&&u===l+1){l+=2;continue}p=u+1;continue}if(t.noext!==!0&&(B===E4||B===C4||B===Dv||B===NR||B===Mv)===!0&&R()===Nv){if(h=Z.isGlob=!0,m=Z.isExtglob=!0,F=!0,B===Mv&&u===l&&(Q=!0),i===!0){for(;ve()!==!0&&(B=Ie());){if(B===ml){k=Z.backslashes=!0,B=Ie();continue}if(B===FR){h=Z.isGlob=!0,F=!0;break}}continue}break}if(B===Dv){if(H===Dv&&(y=Z.isGlobstar=!0),h=Z.isGlob=!0,F=!0,i===!0)continue;break}if(B===NR){if(h=Z.isGlob=!0,F=!0,i===!0)continue;break}if(B===T4){for(;ve()!==!0&&(ft=Ie());){if(ft===ml){k=Z.backslashes=!0,Ie();continue}if(ft===A4){f=Z.isBracket=!0,h=Z.isGlob=!0,F=!0;break}}if(i===!0)continue;break}if(t.nonegate!==!0&&B===Mv&&u===l){D=Z.negated=!0,l++;continue}if(t.noparen!==!0&&B===Nv){if(h=Z.isGlob=!0,i===!0){for(;ve()!==!0&&(B=Ie());){if(B===Nv){k=Z.backslashes=!0,B=Ie();continue}if(B===FR){F=!0;break}}continue}break}if(h===!0){if(F=!0,i===!0)continue;break}}t.noext===!0&&(m=!1,h=!1);let _e=c,en="",P="";l>0&&(en=c.slice(0,l),c=c.slice(l),p-=l),_e&&h===!0&&p>0?(_e=c.slice(0,p),P=c.slice(p)):h===!0?(_e="",P=c):_e=c,_e&&_e!==""&&_e!=="/"&&_e!==c&&BR(_e.charCodeAt(_e.length-1))&&(_e=_e.slice(0,-1)),t.unescape===!0&&(P&&(P=LR.removeBackslashes(P)),_e&&k===!0&&(_e=LR.removeBackslashes(_e)));let T={prefix:en,input:r,start:l,base:_e,glob:P,isBrace:d,isBracket:f,isGlob:h,isExtglob:m,isGlobstar:y,negated:D,negatedExtglob:Q};if(t.tokens===!0&&(T.maxDepth=0,BR(B)||s.push(Z),T.tokens=s),t.parts===!0||t.tokens===!0){let ft;for(let pe=0;pe<o.length;pe++){let pr=ft?ft+1:l,dr=o[pe],At=r.slice(pr,dr);t.tokens&&(pe===0&&l!==0?(s[pe].isPrefix=!0,s[pe].value=en):s[pe].value=At,UR(s[pe]),T.maxDepth+=s[pe].depth),(pe!==0||At!=="")&&a.push(At),ft=dr}if(ft&&ft+1<r.length){let pe=r.slice(ft+1);a.push(pe),t.tokens&&(s[s.length-1].value=pe,UR(s[s.length-1]),T.maxDepth+=s[s.length-1].depth)}T.slashes=o,T.parts=a}return T};qR.exports=k4});var HR=b((Cie,$R)=>{"use strict";var nh=fl(),vr=hl(),{MAX_LENGTH:ih,POSIX_REGEX_SOURCE:D4,REGEX_NON_SPECIAL_CHARS:O4,REGEX_SPECIAL_CHARS_BACKREF:M4,REPLACEMENTS:VR}=nh,L4=(r,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...r,e);r.sort();let t=`[${r.join("-")}]`;try{new RegExp(t)}catch{return r.map(i=>vr.escapeRegex(i)).join("..")}return t},rc=(r,e)=>`Missing ${r}: "${e}" - use "\\\\${e}" to match literal characters`,Fv=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a string");r=VR[r]||r;let t={...e},n=typeof t.maxLength=="number"?Math.min(ih,t.maxLength):ih,i=r.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:t.prepend||""},s=[o],a=t.capture?"":"?:",c=vr.isWindows(e),u=nh.globChars(c),l=nh.extglobChars(u),{DOT_LITERAL:p,PLUS_LITERAL:d,SLASH_LITERAL:f,ONE_CHAR:h,DOTS_SLASH:m,NO_DOT:y,NO_DOT_SLASH:w,NO_DOTS_SLASH:k,QMARK:D,QMARK_NO_DOT:Q,STAR:F,START_ANCHOR:te}=u,H=j=>`(${a}(?:(?!${te}${j.dot?m:p}).)*?)`,B=t.dot?"":y,Z=t.dot?D:Q,ve=t.bash===!0?H(t):F;t.capture&&(ve=`(${ve})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let R={input:r,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};r=vr.removePrefix(r,R),i=r.length;let Ie=[],_e=[],en=[],P=o,T,ft=()=>R.index===i-1,pe=R.peek=(j=1)=>r[R.index+j],pr=R.advance=()=>r[++R.index]||"",dr=()=>r.slice(R.index+1),At=(j="",ce=0)=>{R.consumed+=j,R.index+=ce},ee=j=>{R.output+=j.output!=null?j.output:j.value,At(j.value)},$i=()=>{let j=1;for(;pe()==="!"&&(pe(2)!=="("||pe(3)==="?");)pr(),R.start++,j++;return j%2===0?!1:(R.negated=!0,R.start++,!0)},ca=j=>{R[j]++,en.push(j)},xe=j=>{R[j]--,en.pop()},oe=j=>{if(P.type==="globstar"){let ce=R.braces>0&&(j.type==="comma"||j.type==="brace"),N=j.extglob===!0||Ie.length&&(j.type==="pipe"||j.type==="paren");j.type!=="slash"&&j.type!=="paren"&&!ce&&!N&&(R.output=R.output.slice(0,-P.output.length),P.type="star",P.value="*",P.output=ve,R.output+=P.output)}if(Ie.length&&j.type!=="paren"&&(Ie[Ie.length-1].inner+=j.value),(j.value||j.output)&&ee(j),P&&P.type==="text"&&j.type==="text"){P.output=(P.output||P.value)+j.value,P.value+=j.value;return}j.prev=P,s.push(j),P=j},ua=(j,ce)=>{let N={...l[ce],conditions:1,inner:""};N.prev=P,N.parens=R.parens,N.output=R.output;let re=(t.capture?"(":"")+N.open;ca("parens"),oe({type:j,value:ce,output:R.output?"":h}),oe({type:"paren",extglob:!0,value:pr(),output:re}),Ie.push(N)},Fp=j=>{let ce=j.close+(t.capture?")":""),N;if(j.type==="negate"){let re=ve;if(j.inner&&j.inner.length>1&&j.inner.includes("/")&&(re=H(t)),(re!==ve||ft()||/^\)+$/.test(dr()))&&(ce=j.close=`)$))${re}`),j.inner.includes("*")&&(N=dr())&&/^\.[^\\/.]+$/.test(N)){let Re=Fv(N,{...e,fastpaths:!1}).output;ce=j.close=`)${Re})${re})`}j.prev.type==="bos"&&(R.negatedExtglob=!0)}oe({type:"paren",extglob:!0,value:T,output:ce}),xe("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(r)){let j=!1,ce=r.replace(M4,(N,re,Re,It,We,la)=>It==="\\"?(j=!0,N):It==="?"?re?re+It+(We?D.repeat(We.length):""):la===0?Z+(We?D.repeat(We.length):""):D.repeat(Re.length):It==="."?p.repeat(Re.length):It==="*"?re?re+It+(We?ve:""):ve:re?N:`\\${N}`);return j===!0&&(t.unescape===!0?ce=ce.replace(/\\/g,""):ce=ce.replace(/\\+/g,N=>N.length%2===0?"\\\\":N?"\\":"")),ce===r&&t.contains===!0?(R.output=r,R):(R.output=vr.wrapOutput(ce,R,e),R)}for(;!ft();){if(T=pr(),T==="\0")continue;if(T==="\\"){let N=pe();if(N==="/"&&t.bash!==!0||N==="."||N===";")continue;if(!N){T+="\\",oe({type:"text",value:T});continue}let re=/^\\+/.exec(dr()),Re=0;if(re&&re[0].length>2&&(Re=re[0].length,R.index+=Re,Re%2!==0&&(T+="\\")),t.unescape===!0?T=pr():T+=pr(),R.brackets===0){oe({type:"text",value:T});continue}}if(R.brackets>0&&(T!=="]"||P.value==="["||P.value==="[^")){if(t.posix!==!1&&T===":"){let N=P.value.slice(1);if(N.includes("[")&&(P.posix=!0,N.includes(":"))){let re=P.value.lastIndexOf("["),Re=P.value.slice(0,re),It=P.value.slice(re+2),We=D4[It];if(We){P.value=Re+We,R.backtrack=!0,pr(),!o.output&&s.indexOf(P)===1&&(o.output=h);continue}}}(T==="["&&pe()!==":"||T==="-"&&pe()==="]")&&(T=`\\${T}`),T==="]"&&(P.value==="["||P.value==="[^")&&(T=`\\${T}`),t.posix===!0&&T==="!"&&P.value==="["&&(T="^"),P.value+=T,ee({value:T});continue}if(R.quotes===1&&T!=='"'){T=vr.escapeRegex(T),P.value+=T,ee({value:T});continue}if(T==='"'){R.quotes=R.quotes===1?0:1,t.keepQuotes===!0&&oe({type:"text",value:T});continue}if(T==="("){ca("parens"),oe({type:"paren",value:T});continue}if(T===")"){if(R.parens===0&&t.strictBrackets===!0)throw new SyntaxError(rc("opening","("));let N=Ie[Ie.length-1];if(N&&R.parens===N.parens+1){Fp(Ie.pop());continue}oe({type:"paren",value:T,output:R.parens?")":"\\)"}),xe("parens");continue}if(T==="["){if(t.nobracket===!0||!dr().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(rc("closing","]"));T=`\\${T}`}else ca("brackets");oe({type:"bracket",value:T});continue}if(T==="]"){if(t.nobracket===!0||P&&P.type==="bracket"&&P.value.length===1){oe({type:"text",value:T,output:`\\${T}`});continue}if(R.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(rc("opening","["));oe({type:"text",value:T,output:`\\${T}`});continue}xe("brackets");let N=P.value.slice(1);if(P.posix!==!0&&N[0]==="^"&&!N.includes("/")&&(T=`/${T}`),P.value+=T,ee({value:T}),t.literalBrackets===!1||vr.hasRegexChars(N))continue;let re=vr.escapeRegex(P.value);if(R.output=R.output.slice(0,-P.value.length),t.literalBrackets===!0){R.output+=re,P.value=re;continue}P.value=`(${a}${re}|${P.value})`,R.output+=P.value;continue}if(T==="{"&&t.nobrace!==!0){ca("braces");let N={type:"brace",value:T,output:"(",outputIndex:R.output.length,tokensIndex:R.tokens.length};_e.push(N),oe(N);continue}if(T==="}"){let N=_e[_e.length-1];if(t.nobrace===!0||!N){oe({type:"text",value:T,output:T});continue}let re=")";if(N.dots===!0){let Re=s.slice(),It=[];for(let We=Re.length-1;We>=0&&(s.pop(),Re[We].type!=="brace");We--)Re[We].type!=="dots"&&It.unshift(Re[We].value);re=L4(It,t),R.backtrack=!0}if(N.comma!==!0&&N.dots!==!0){let Re=R.output.slice(0,N.outputIndex),It=R.tokens.slice(N.tokensIndex);N.value=N.output="\\{",T=re="\\}",R.output=Re;for(let We of It)R.output+=We.output||We.value}oe({type:"brace",value:T,output:re}),xe("braces"),_e.pop();continue}if(T==="|"){Ie.length>0&&Ie[Ie.length-1].conditions++,oe({type:"text",value:T});continue}if(T===","){let N=T,re=_e[_e.length-1];re&&en[en.length-1]==="braces"&&(re.comma=!0,N="|"),oe({type:"comma",value:T,output:N});continue}if(T==="/"){if(P.type==="dot"&&R.index===R.start+1){R.start=R.index+1,R.consumed="",R.output="",s.pop(),P=o;continue}oe({type:"slash",value:T,output:f});continue}if(T==="."){if(R.braces>0&&P.type==="dot"){P.value==="."&&(P.output=p);let N=_e[_e.length-1];P.type="dots",P.output+=T,P.value+=T,N.dots=!0;continue}if(R.braces+R.parens===0&&P.type!=="bos"&&P.type!=="slash"){oe({type:"text",value:T,output:p});continue}oe({type:"dot",value:T,output:p});continue}if(T==="?"){if(!(P&&P.value==="(")&&t.noextglob!==!0&&pe()==="("&&pe(2)!=="?"){ua("qmark",T);continue}if(P&&P.type==="paren"){let re=pe(),Re=T;if(re==="<"&&!vr.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(P.value==="("&&!/[!=<:]/.test(re)||re==="<"&&!/<([!=]|\w+>)/.test(dr()))&&(Re=`\\${T}`),oe({type:"text",value:T,output:Re});continue}if(t.dot!==!0&&(P.type==="slash"||P.type==="bos")){oe({type:"qmark",value:T,output:Q});continue}oe({type:"qmark",value:T,output:D});continue}if(T==="!"){if(t.noextglob!==!0&&pe()==="("&&(pe(2)!=="?"||!/[!=<:]/.test(pe(3)))){ua("negate",T);continue}if(t.nonegate!==!0&&R.index===0){$i();continue}}if(T==="+"){if(t.noextglob!==!0&&pe()==="("&&pe(2)!=="?"){ua("plus",T);continue}if(P&&P.value==="("||t.regex===!1){oe({type:"plus",value:T,output:d});continue}if(P&&(P.type==="bracket"||P.type==="paren"||P.type==="brace")||R.parens>0){oe({type:"plus",value:T});continue}oe({type:"plus",value:d});continue}if(T==="@"){if(t.noextglob!==!0&&pe()==="("&&pe(2)!=="?"){oe({type:"at",extglob:!0,value:T,output:""});continue}oe({type:"text",value:T});continue}if(T!=="*"){(T==="$"||T==="^")&&(T=`\\${T}`);let N=O4.exec(dr());N&&(T+=N[0],R.index+=N[0].length),oe({type:"text",value:T});continue}if(P&&(P.type==="globstar"||P.star===!0)){P.type="star",P.star=!0,P.value+=T,P.output=ve,R.backtrack=!0,R.globstar=!0,At(T);continue}let j=dr();if(t.noextglob!==!0&&/^\([^?]/.test(j)){ua("star",T);continue}if(P.type==="star"){if(t.noglobstar===!0){At(T);continue}let N=P.prev,re=N.prev,Re=N.type==="slash"||N.type==="bos",It=re&&(re.type==="star"||re.type==="globstar");if(t.bash===!0&&(!Re||j[0]&&j[0]!=="/")){oe({type:"star",value:T,output:""});continue}let We=R.braces>0&&(N.type==="comma"||N.type==="brace"),la=Ie.length&&(N.type==="pipe"||N.type==="paren");if(!Re&&N.type!=="paren"&&!We&&!la){oe({type:"star",value:T,output:""});continue}for(;j.slice(0,3)==="/**";){let zo=r[R.index+4];if(zo&&zo!=="/")break;j=j.slice(3),At("/**",3)}if(N.type==="bos"&&ft()){P.type="globstar",P.value+=T,P.output=H(t),R.output=P.output,R.globstar=!0,At(T);continue}if(N.type==="slash"&&N.prev.type!=="bos"&&!It&&ft()){R.output=R.output.slice(0,-(N.output+P.output).length),N.output=`(?:${N.output}`,P.type="globstar",P.output=H(t)+(t.strictSlashes?")":"|$)"),P.value+=T,R.globstar=!0,R.output+=N.output+P.output,At(T);continue}if(N.type==="slash"&&N.prev.type!=="bos"&&j[0]==="/"){let zo=j[1]!==void 0?"|$":"";R.output=R.output.slice(0,-(N.output+P.output).length),N.output=`(?:${N.output}`,P.type="globstar",P.output=`${H(t)}${f}|${f}${zo})`,P.value+=T,R.output+=N.output+P.output,R.globstar=!0,At(T+pr()),oe({type:"slash",value:"/",output:""});continue}if(N.type==="bos"&&j[0]==="/"){P.type="globstar",P.value+=T,P.output=`(?:^|${f}|${H(t)}${f})`,R.output=P.output,R.globstar=!0,At(T+pr()),oe({type:"slash",value:"/",output:""});continue}R.output=R.output.slice(0,-P.output.length),P.type="globstar",P.output=H(t),P.value+=T,R.output+=P.output,R.globstar=!0,At(T);continue}let ce={type:"star",value:T,output:ve};if(t.bash===!0){ce.output=".*?",(P.type==="bos"||P.type==="slash")&&(ce.output=B+ce.output),oe(ce);continue}if(P&&(P.type==="bracket"||P.type==="paren")&&t.regex===!0){ce.output=T,oe(ce);continue}(R.index===R.start||P.type==="slash"||P.type==="dot")&&(P.type==="dot"?(R.output+=w,P.output+=w):t.dot===!0?(R.output+=k,P.output+=k):(R.output+=B,P.output+=B),pe()!=="*"&&(R.output+=h,P.output+=h)),oe(ce)}for(;R.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(rc("closing","]"));R.output=vr.escapeLast(R.output,"["),xe("brackets")}for(;R.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(rc("closing",")"));R.output=vr.escapeLast(R.output,"("),xe("parens")}for(;R.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(rc("closing","}"));R.output=vr.escapeLast(R.output,"{"),xe("braces")}if(t.strictSlashes!==!0&&(P.type==="star"||P.type==="bracket")&&oe({type:"maybe_slash",value:"",output:`${f}?`}),R.backtrack===!0){R.output="";for(let j of R.tokens)R.output+=j.output!=null?j.output:j.value,j.suffix&&(R.output+=j.suffix)}return R};Fv.fastpaths=(r,e)=>{let t={...e},n=typeof t.maxLength=="number"?Math.min(ih,t.maxLength):ih,i=r.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);r=VR[r]||r;let o=vr.isWindows(e),{DOT_LITERAL:s,SLASH_LITERAL:a,ONE_CHAR:c,DOTS_SLASH:u,NO_DOT:l,NO_DOTS:p,NO_DOTS_SLASH:d,STAR:f,START_ANCHOR:h}=nh.globChars(o),m=t.dot?p:l,y=t.dot?d:l,w=t.capture?"":"?:",k={negated:!1,prefix:""},D=t.bash===!0?".*?":f;t.capture&&(D=`(${D})`);let Q=B=>B.noglobstar===!0?D:`(${w}(?:(?!${h}${B.dot?u:s}).)*?)`,F=B=>{switch(B){case"*":return`${m}${c}${D}`;case".*":return`${s}${c}${D}`;case"*.*":return`${m}${D}${s}${c}${D}`;case"*/*":return`${m}${D}${a}${c}${y}${D}`;case"**":return m+Q(t);case"**/*":return`(?:${m}${Q(t)}${a})?${y}${c}${D}`;case"**/*.*":return`(?:${m}${Q(t)}${a})?${y}${D}${s}${c}${D}`;case"**/.*":return`(?:${m}${Q(t)}${a})?${s}${c}${D}`;default:{let Z=/^(.*?)\.(\w+)$/.exec(B);if(!Z)return;let ve=F(Z[1]);return ve?ve+s+Z[2]:void 0}}},te=vr.removePrefix(r,k),H=F(te);return H&&t.strictSlashes!==!0&&(H+=`${a}?`),H};$R.exports=Fv});var zR=b((Pie,GR)=>{"use strict";var N4=require("path"),F4=WR(),Bv=HR(),Uv=hl(),B4=fl(),U4=r=>r&&typeof r=="object"&&!Array.isArray(r),Ze=(r,e,t=!1)=>{if(Array.isArray(r)){let l=r.map(d=>Ze(d,e,t));return d=>{for(let f of l){let h=f(d);if(h)return h}return!1}}let n=U4(r)&&r.tokens&&r.input;if(r===""||typeof r!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=Uv.isWindows(e),s=n?Ze.compileRe(r,e):Ze.makeRe(r,e,!1,!0),a=s.state;delete s.state;let c=()=>!1;if(i.ignore){let l={...e,ignore:null,onMatch:null,onResult:null};c=Ze(i.ignore,l,t)}let u=(l,p=!1)=>{let{isMatch:d,match:f,output:h}=Ze.test(l,s,e,{glob:r,posix:o}),m={glob:r,state:a,regex:s,posix:o,input:l,output:h,match:f,isMatch:d};return typeof i.onResult=="function"&&i.onResult(m),d===!1?(m.isMatch=!1,p?m:!1):c(l)?(typeof i.onIgnore=="function"&&i.onIgnore(m),m.isMatch=!1,p?m:!1):(typeof i.onMatch=="function"&&i.onMatch(m),p?m:!0)};return t&&(u.state=a),u};Ze.test=(r,e,t,{glob:n,posix:i}={})=>{if(typeof r!="string")throw new TypeError("Expected input to be a string");if(r==="")return{isMatch:!1,output:""};let o=t||{},s=o.format||(i?Uv.toPosixSlashes:null),a=r===n,c=a&&s?s(r):r;return a===!1&&(c=s?s(r):r,a=c===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=Ze.matchBase(r,e,t,i):a=e.exec(c)),{isMatch:!!a,match:a,output:c}};Ze.matchBase=(r,e,t,n=Uv.isWindows(t))=>(e instanceof RegExp?e:Ze.makeRe(e,t)).test(N4.basename(r));Ze.isMatch=(r,e,t)=>Ze(e,t)(r);Ze.parse=(r,e)=>Array.isArray(r)?r.map(t=>Ze.parse(t,e)):Bv(r,{...e,fastpaths:!1});Ze.scan=(r,e)=>F4(r,e);Ze.compileRe=(r,e,t=!1,n=!1)=>{if(t===!0)return r.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${r.output})${s}`;r&&r.negated===!0&&(a=`^(?!${a}).*$`);let c=Ze.toRegex(a,e);return n===!0&&(c.state=r),c};Ze.makeRe=(r,e={},t=!1,n=!1)=>{if(!r||typeof r!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(r[0]==="."||r[0]==="*")&&(i.output=Bv.fastpaths(r,e)),i.output||(i=Bv(r,e)),Ze.compileRe(i,e,t,n)};Ze.toRegex=(r,e)=>{try{let t=e||{};return new RegExp(r,t.flags||(t.nocase?"i":""))}catch(t){if(e&&e.debug===!0)throw t;return/$^/}};Ze.constants=B4;GR.exports=Ze});var jv=b((Tie,KR)=>{"use strict";KR.exports=zR()});var gl=b((Eie,ZR)=>{"use strict";var YR=require("util"),XR=RR(),Gn=jv(),qv=hl(),JR=r=>r===""||r==="./",QR=r=>{let e=r.indexOf("{");return e>-1&&r.indexOf("}",e)>-1},Me=(r,e,t)=>{e=[].concat(e),r=[].concat(r);let n=new Set,i=new Set,o=new Set,s=0,a=l=>{o.add(l.output),t&&t.onResult&&t.onResult(l)};for(let l=0;l<e.length;l++){let p=Gn(String(e[l]),{...t,onResult:a},!0),d=p.state.negated||p.state.negatedExtglob;d&&s++;for(let f of r){let h=p(f,!0);(d?!h.isMatch:h.isMatch)&&(d?n.add(h.output):(n.delete(h.output),i.add(h.output)))}}let u=(s===e.length?[...o]:[...i]).filter(l=>!n.has(l));if(t&&u.length===0){if(t.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(t.nonull===!0||t.nullglob===!0)return t.unescape?e.map(l=>l.replace(/\\/g,"")):e}return u};Me.match=Me;Me.matcher=(r,e)=>Gn(r,e);Me.isMatch=(r,e,t)=>Gn(e,t)(r);Me.any=Me.isMatch;Me.not=(r,e,t={})=>{e=[].concat(e).map(String);let n=new Set,i=[],o=a=>{t.onResult&&t.onResult(a),i.push(a.output)},s=new Set(Me(r,e,{...t,onResult:o}));for(let a of i)s.has(a)||n.add(a);return[...n]};Me.contains=(r,e,t)=>{if(typeof r!="string")throw new TypeError(`Expected a string: "${YR.inspect(r)}"`);if(Array.isArray(e))return e.some(n=>Me.contains(r,n,t));if(typeof e=="string"){if(JR(r)||JR(e))return!1;if(r.includes(e)||r.startsWith("./")&&r.slice(2).includes(e))return!0}return Me.isMatch(r,e,{...t,contains:!0})};Me.matchKeys=(r,e,t)=>{if(!qv.isObject(r))throw new TypeError("Expected the first argument to be an object");let n=Me(Object.keys(r),e,t),i={};for(let o of n)i[o]=r[o];return i};Me.some=(r,e,t)=>{let n=[].concat(r);for(let i of[].concat(e)){let o=Gn(String(i),t);if(n.some(s=>o(s)))return!0}return!1};Me.every=(r,e,t)=>{let n=[].concat(r);for(let i of[].concat(e)){let o=Gn(String(i),t);if(!n.every(s=>o(s)))return!1}return!0};Me.all=(r,e,t)=>{if(typeof r!="string")throw new TypeError(`Expected a string: "${YR.inspect(r)}"`);return[].concat(e).every(n=>Gn(n,t)(r))};Me.capture=(r,e,t)=>{let n=qv.isWindows(t),o=Gn.makeRe(String(r),{...t,capture:!0}).exec(n?qv.toPosixSlashes(e):e);if(o)return o.slice(1).map(s=>s===void 0?"":s)};Me.makeRe=(...r)=>Gn.makeRe(...r);Me.scan=(...r)=>Gn.scan(...r);Me.parse=(r,e)=>{let t=[];for(let n of[].concat(r||[]))for(let i of XR(String(n),e))t.push(Gn.parse(i,e));return t};Me.braces=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!QR(r)?[r]:XR(r,e)};Me.braceExpand=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a string");return Me.braces(r,{...e,expand:!0})};Me.hasBraces=QR;ZR.exports=Me});var xA=b((Ose,IA)=>{"use strict";var{Duplex:Y4}=require("stream");function wA(r){r.emit("close")}function X4(){!this.destroyed&&this._writableState.finished&&this.destroy()}function SA(r){this.removeListener("error",SA),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function Q4(r,e){let t=!0,n=new Y4({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return r.on("message",function(o,s){let a=!s&&n._readableState.objectMode?o.toString():o;n.push(a)||r.pause()}),r.once("error",function(o){n.destroyed||(t=!1,n.destroy(o))}),r.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,o){if(r.readyState===r.CLOSED){o(i),process.nextTick(wA,n);return}let s=!1;r.once("error",function(c){s=!0,o(c)}),r.once("close",function(){s||o(i),process.nextTick(wA,n)}),t&&r.terminate()},n._final=function(i){if(r.readyState===r.CONNECTING){r.once("open",function(){n._final(i)});return}r._socket!==null&&(r._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(r._socket.once("finish",function(){i()}),r.close()))},n._read=function(){r.isPaused&&r.resume()},n._write=function(i,o,s){if(r.readyState===r.CONNECTING){r.once("open",function(){n._write(i,o,s)});return}r.send(i,s)},n.on("end",X4),n.on("error",SA),n}IA.exports=Q4});var co=b((Mse,CA)=>{"use strict";CA.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var wl=b((Lse,gh)=>{"use strict";var{EMPTY_BUFFER:Z4}=co(),Jv=Buffer[Symbol.species];function e6(r,e){if(r.length===0)return Z4;if(r.length===1)return r[0];let t=Buffer.allocUnsafe(e),n=0;for(let i=0;i<r.length;i++){let o=r[i];t.set(o,n),n+=o.length}return n<e?new Jv(t.buffer,t.byteOffset,n):t}function PA(r,e,t,n,i){for(let o=0;o<i;o++)t[n+o]=r[o]^e[o&3]}function TA(r,e){for(let t=0;t<r.length;t++)r[t]^=e[t&3]}function t6(r){return r.length===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.length)}function Yv(r){if(Yv.readOnly=!0,Buffer.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=new Jv(r):ArrayBuffer.isView(r)?e=new Jv(r.buffer,r.byteOffset,r.byteLength):(e=Buffer.from(r),Yv.readOnly=!1),e}gh.exports={concat:e6,mask:PA,toArrayBuffer:t6,toBuffer:Yv,unmask:TA};if(!process.env.WS_NO_BUFFER_UTIL)try{let r=require("bufferutil");gh.exports.mask=function(e,t,n,i,o){o<48?PA(e,t,n,i,o):r.mask(e,t,n,i,o)},gh.exports.unmask=function(e,t){e.length<32?TA(e,t):r.unmask(e,t)}}catch{}});var AA=b((Nse,RA)=>{"use strict";var EA=Symbol("kDone"),Xv=Symbol("kRun"),Qv=class{constructor(e){this[EA]=()=>{this.pending--,this[Xv]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Xv]()}[Xv](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[EA])}}};RA.exports=Qv});var xl=b((Fse,MA)=>{"use strict";var Sl=require("zlib"),kA=wl(),r6=AA(),{kStatusCode:DA}=co(),n6=Buffer[Symbol.species],i6=Buffer.from([0,0,255,255]),vh=Symbol("permessage-deflate"),Ri=Symbol("total-length"),Il=Symbol("callback"),uo=Symbol("buffers"),bh=Symbol("error"),yh,Zv=class{constructor(e,t,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!yh){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;yh=new r6(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Il];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,n=e.find(i=>!(t.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>i.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(n.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?n.client_max_window_bits=t.clientMaxWindowBits:(n.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(n=>{let i=t[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);t[n]=i})}),e}decompress(e,t,n){yh.add(i=>{this._decompress(e,t,(o,s)=>{i(),n(o,s)})})}compress(e,t,n){yh.add(i=>{this._compress(e,t,(o,s)=>{i(),n(o,s)})})}_decompress(e,t,n){let i=this._isServer?"client":"server";if(!this._inflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?Sl.Z_DEFAULT_WINDOWBITS:this.params[o];this._inflate=Sl.createInflateRaw({...this._options.zlibInflateOptions,windowBits:s}),this._inflate[vh]=this,this._inflate[Ri]=0,this._inflate[uo]=[],this._inflate.on("error",s6),this._inflate.on("data",OA)}this._inflate[Il]=n,this._inflate.write(e),t&&this._inflate.write(i6),this._inflate.flush(()=>{let o=this._inflate[bh];if(o){this._inflate.close(),this._inflate=null,n(o);return}let s=kA.concat(this._inflate[uo],this._inflate[Ri]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Ri]=0,this._inflate[uo]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,s)})}_compress(e,t,n){let i=this._isServer?"server":"client";if(!this._deflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?Sl.Z_DEFAULT_WINDOWBITS:this.params[o];this._deflate=Sl.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:s}),this._deflate[Ri]=0,this._deflate[uo]=[],this._deflate.on("data",o6)}this._deflate[Il]=n,this._deflate.write(e),this._deflate.flush(Sl.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let o=kA.concat(this._deflate[uo],this._deflate[Ri]);t&&(o=new n6(o.buffer,o.byteOffset,o.length-4)),this._deflate[Il]=null,this._deflate[Ri]=0,this._deflate[uo]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,o)})}};MA.exports=Zv;function o6(r){this[uo].push(r),this[Ri]+=r.length}function OA(r){if(this[Ri]+=r.length,this[vh]._maxPayload<1||this[Ri]<=this[vh]._maxPayload){this[uo].push(r);return}this[bh]=new RangeError("Max payload size exceeded"),this[bh].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[bh][DA]=1009,this.removeListener("data",OA),this.reset()}function s6(r){this[vh]._inflate=null,r[DA]=1007,this[Il](r)}});var Cl=b((Bse,_h)=>{"use strict";var{isUtf8:LA}=require("buffer"),a6=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function c6(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function e_(r){let e=r.length,t=0;for(;t<e;)if((r[t]&128)===0)t++;else if((r[t]&224)===192){if(t+1===e||(r[t+1]&192)!==128||(r[t]&254)===192)return!1;t+=2}else if((r[t]&240)===224){if(t+2>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||r[t]===224&&(r[t+1]&224)===128||r[t]===237&&(r[t+1]&224)===160)return!1;t+=3}else if((r[t]&248)===240){if(t+3>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||(r[t+3]&192)!==128||r[t]===240&&(r[t+1]&240)===128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}_h.exports={isValidStatusCode:c6,isValidUTF8:e_,tokenChars:a6};if(LA)_h.exports.isValidUTF8=function(r){return r.length<24?e_(r):LA(r)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let r=require("utf-8-validate");_h.exports.isValidUTF8=function(e){return e.length<32?e_(e):r(e)}}catch{}});var o_=b((Use,WA)=>{"use strict";var{Writable:u6}=require("stream"),NA=xl(),{BINARY_TYPES:l6,EMPTY_BUFFER:FA,kStatusCode:p6,kWebSocket:d6}=co(),{concat:t_,toArrayBuffer:f6,unmask:h6}=wl(),{isValidStatusCode:m6,isValidUTF8:BA}=Cl(),wh=Buffer[Symbol.species],Wr=0,UA=1,jA=2,qA=3,r_=4,n_=5,Sh=6,i_=class extends u6{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||l6[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[d6]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=Wr}_write(e,t,n){if(this._opcode===8&&this._state==Wr)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new wh(n.buffer,n.byteOffset+e,n.length-e),new wh(n.buffer,n.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=t.length-e;e>=n.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new wh(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return t}startLoop(e){this._loop=!0;do switch(this._state){case Wr:this.getInfo(e);break;case UA:this.getPayloadLength16(e);break;case jA:this.getPayloadLength64(e);break;case qA:this.getMask();break;case r_:this.getData(e);break;case n_:case Sh:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((t[0]&48)!==0){let i=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(i);return}let n=(t[0]&64)===64;if(n&&!this._extensions[NA.extensionName]){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._fin=(t[0]&128)===128,this._opcode=t[0]&15,this._payloadLength=t[1]&127,this._opcode===0){if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(!this._fragmented){let i=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let i=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(i);return}if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let i=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(i);return}}else{let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(t[1]&128)===128,this._isServer){if(!this._masked){let i=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(i);return}}else if(this._masked){let i=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(i);return}this._payloadLength===126?this._state=UA:this._payloadLength===127?this._state=jA:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),n=t.readUInt32BE(0);if(n>Math.pow(2,21)-1){let i=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(i);return}this._payloadLength=n*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let t=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(t);return}this._masked?this._state=qA:this._state=r_}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=r_}getData(e){let t=FA;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&h6(t,this._mask)}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=n_,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[NA.extensionName].decompress(e,this._fin,(i,o)=>{if(i)return t(i);if(o.length){if(this._messageLength+=o.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let s=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(s);return}this._fragments.push(o)}this.dataMessage(t),this._state===Wr&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=Wr;return}let t=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=t_(n,t):this._binaryType==="arraybuffer"?i=f6(t_(n,t)):i=n,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=Wr):(this._state=Sh,setImmediate(()=>{this.emit("message",i,!0),this._state=Wr,this.startLoop(e)}))}else{let i=t_(n,t);if(!this._skipUTF8Validation&&!BA(i)){let o=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(o);return}this._state===n_||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=Wr):(this._state=Sh,setImmediate(()=>{this.emit("message",i,!1),this._state=Wr,this.startLoop(e)}))}}controlMessage(e,t){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,FA),this.end();else{let n=e.readUInt16BE(0);if(!m6(n)){let o=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");t(o);return}let i=new wh(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!BA(i)){let o=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(o);return}this._loop=!1,this.emit("conclude",n,i),this.end()}this._state=Wr;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=Wr):(this._state=Sh,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=Wr,this.startLoop(t)}))}createError(e,t,n,i,o){this._loop=!1,this._errored=!0;let s=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,this.createError),s.code=o,s[p6]=i,s}};WA.exports=i_});var a_=b((qse,HA)=>{"use strict";var{Duplex:jse}=require("stream"),{randomFillSync:g6}=require("crypto"),VA=xl(),{EMPTY_BUFFER:y6}=co(),{isValidStatusCode:b6}=Cl(),{mask:$A,toBuffer:pc}=wl(),un=Symbol("kByteLength"),v6=Buffer.alloc(4),Ih=8*1024,ws,dc=Ih,s_=class r{constructor(e,t,n){this._extensions=t||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let n,i=!1,o=2,s=!1;t.mask&&(n=t.maskBuffer||v6,t.generateMask?t.generateMask(n):(dc===Ih&&(ws===void 0&&(ws=Buffer.alloc(Ih)),g6(ws,0,Ih),dc=0),n[0]=ws[dc++],n[1]=ws[dc++],n[2]=ws[dc++],n[3]=ws[dc++]),s=(n[0]|n[1]|n[2]|n[3])===0,o=6);let a;typeof e=="string"?(!t.mask||s)&&t[un]!==void 0?a=t[un]:(e=Buffer.from(e),a=e.length):(a=e.length,i=t.mask&&t.readOnly&&!s);let c=a;a>=65536?(o+=8,c=127):a>125&&(o+=2,c=126);let u=Buffer.allocUnsafe(i?a+o:o);return u[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(u[0]|=64),u[1]=c,c===126?u.writeUInt16BE(a,2):c===127&&(u[2]=u[3]=0,u.writeUIntBE(a,4,6)),t.mask?(u[1]|=128,u[o-4]=n[0],u[o-3]=n[1],u[o-2]=n[2],u[o-1]=n[3],s?[u,e]:i?($A(e,n,u,o,a),[u]):($A(e,n,e,0,a),[u,e])):[u,e]}close(e,t,n,i){let o;if(e===void 0)o=y6;else{if(typeof e!="number"||!b6(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0);else{let a=Buffer.byteLength(t);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+a),o.writeUInt16BE(e,0),typeof t=="string"?o.write(t,2):o.set(t,2)}}let s={[un]:o.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,o,!1,s,i]):this.sendFrame(r.frame(o,s),i)}ping(e,t,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):(e=pc(e),i=e.length,o=pc.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[un]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(r.frame(e,s),n)}pong(e,t,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):(e=pc(e),i=e.length,o=pc.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[un]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(r.frame(e,s),n)}send(e,t,n){let i=this._extensions[VA.extensionName],o=t.binary?2:1,s=t.compress,a,c;if(typeof e=="string"?(a=Buffer.byteLength(e),c=!1):(e=pc(e),a=e.length,c=pc.readOnly),this._firstFragment?(this._firstFragment=!1,s&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=a>=i._threshold),this._compress=s):(s=!1,o=0),t.fin&&(this._firstFragment=!0),i){let u={[un]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:c,rsv1:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,u,n]):this.dispatch(e,this._compress,u,n)}else this.sendFrame(r.frame(e,{[un]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:c,rsv1:!1}),n)}dispatch(e,t,n,i){if(!t){this.sendFrame(r.frame(e,n),i);return}let o=this._extensions[VA.extensionName];this._bufferedBytes+=n[un],this._deflating=!0,o.compress(e,n.fin,(s,a)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(c);for(let u=0;u<this._queue.length;u++){let l=this._queue[u],p=l[l.length-1];typeof p=="function"&&p(c)}return}this._bufferedBytes-=n[un],this._deflating=!1,n.readOnly=!1,this.sendFrame(r.frame(a,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][un],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][un],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};HA.exports=s_});var ek=b((Wse,ZA)=>{"use strict";var{kForOnEventAttribute:Pl,kListener:c_}=co(),GA=Symbol("kCode"),zA=Symbol("kData"),KA=Symbol("kError"),JA=Symbol("kMessage"),YA=Symbol("kReason"),fc=Symbol("kTarget"),XA=Symbol("kType"),QA=Symbol("kWasClean"),Ai=class{constructor(e){this[fc]=null,this[XA]=e}get target(){return this[fc]}get type(){return this[XA]}};Object.defineProperty(Ai.prototype,"target",{enumerable:!0});Object.defineProperty(Ai.prototype,"type",{enumerable:!0});var Ss=class extends Ai{constructor(e,t={}){super(e),this[GA]=t.code===void 0?0:t.code,this[YA]=t.reason===void 0?"":t.reason,this[QA]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[GA]}get reason(){return this[YA]}get wasClean(){return this[QA]}};Object.defineProperty(Ss.prototype,"code",{enumerable:!0});Object.defineProperty(Ss.prototype,"reason",{enumerable:!0});Object.defineProperty(Ss.prototype,"wasClean",{enumerable:!0});var hc=class extends Ai{constructor(e,t={}){super(e),this[KA]=t.error===void 0?null:t.error,this[JA]=t.message===void 0?"":t.message}get error(){return this[KA]}get message(){return this[JA]}};Object.defineProperty(hc.prototype,"error",{enumerable:!0});Object.defineProperty(hc.prototype,"message",{enumerable:!0});var Tl=class extends Ai{constructor(e,t={}){super(e),this[zA]=t.data===void 0?null:t.data}get data(){return this[zA]}};Object.defineProperty(Tl.prototype,"data",{enumerable:!0});var _6={addEventListener(r,e,t={}){for(let i of this.listeners(r))if(!t[Pl]&&i[c_]===e&&!i[Pl])return;let n;if(r==="message")n=function(o,s){let a=new Tl("message",{data:s?o:o.toString()});a[fc]=this,xh(e,this,a)};else if(r==="close")n=function(o,s){let a=new Ss("close",{code:o,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[fc]=this,xh(e,this,a)};else if(r==="error")n=function(o){let s=new hc("error",{error:o,message:o.message});s[fc]=this,xh(e,this,s)};else if(r==="open")n=function(){let o=new Ai("open");o[fc]=this,xh(e,this,o)};else return;n[Pl]=!!t[Pl],n[c_]=e,t.once?this.once(r,n):this.on(r,n)},removeEventListener(r,e){for(let t of this.listeners(r))if(t[c_]===e&&!t[Pl]){this.removeListener(r,t);break}}};ZA.exports={CloseEvent:Ss,ErrorEvent:hc,Event:Ai,EventTarget:_6,MessageEvent:Tl};function xh(r,e,t){typeof r=="object"&&r.handleEvent?r.handleEvent.call(r,t):r.call(e,t)}});var u_=b((Vse,tk)=>{"use strict";var{tokenChars:El}=Cl();function ei(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}function w6(r){let e=Object.create(null),t=Object.create(null),n=!1,i=!1,o=!1,s,a,c=-1,u=-1,l=-1,p=0;for(;p<r.length;p++)if(u=r.charCodeAt(p),s===void 0)if(l===-1&&El[u]===1)c===-1&&(c=p);else if(p!==0&&(u===32||u===9))l===-1&&c!==-1&&(l=p);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let f=r.slice(c,l);u===44?(ei(e,f,t),t=Object.create(null)):s=f,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(a===void 0)if(l===-1&&El[u]===1)c===-1&&(c=p);else if(u===32||u===9)l===-1&&c!==-1&&(l=p);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p),ei(t,r.slice(c,l),!0),u===44&&(ei(e,s,t),t=Object.create(null),s=void 0),c=l=-1}else if(u===61&&c!==-1&&l===-1)a=r.slice(c,p),c=l=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(i){if(El[u]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);c===-1?c=p:n||(n=!0),i=!1}else if(o)if(El[u]===1)c===-1&&(c=p);else if(u===34&&c!==-1)o=!1,l=p;else if(u===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(u===34&&r.charCodeAt(p-1)===61)o=!0;else if(l===-1&&El[u]===1)c===-1&&(c=p);else if(c!==-1&&(u===32||u===9))l===-1&&(l=p);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let f=r.slice(c,l);n&&(f=f.replace(/\\/g,""),n=!1),ei(t,a,f),u===44&&(ei(e,s,t),t=Object.create(null),s=void 0),a=void 0,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(c===-1||o||u===32||u===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=p);let d=r.slice(c,l);return s===void 0?ei(e,d,t):(a===void 0?ei(t,d,!0):n?ei(t,a,d.replace(/\\/g,"")):ei(t,a,d),ei(e,s,t)),e}function S6(r){return Object.keys(r).map(e=>{let t=r[e];return Array.isArray(t)||(t=[t]),t.map(n=>[e].concat(Object.keys(n).map(i=>{let o=n[i];return Array.isArray(o)||(o=[o]),o.map(s=>s===!0?i:`${i}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}tk.exports={format:S6,parse:w6}});var h_=b((Gse,dk)=>{"use strict";var I6=require("events"),x6=require("https"),C6=require("http"),ik=require("net"),P6=require("tls"),{randomBytes:T6,createHash:E6}=require("crypto"),{Duplex:$se,Readable:Hse}=require("stream"),{URL:l_}=require("url"),lo=xl(),R6=o_(),A6=a_(),{BINARY_TYPES:rk,EMPTY_BUFFER:Ch,GUID:k6,kForOnEventAttribute:p_,kListener:D6,kStatusCode:O6,kWebSocket:jt,NOOP:ok}=co(),{EventTarget:{addEventListener:M6,removeEventListener:L6}}=ek(),{format:N6,parse:F6}=u_(),{toBuffer:B6}=wl(),U6=30*1e3,sk=Symbol("kAborted"),d_=[8,13],ki=["CONNECTING","OPEN","CLOSING","CLOSED"],j6=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,et=class r extends I6{constructor(e,t,n){super(),this._binaryType=rk[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Ch,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=r.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(n=t,t=[]):t=[t]),ak(this,e,t,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){rk.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){let i=new R6({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new A6(e,this._extensions,n.generateMask),this._receiver=i,this._socket=e,i[jt]=this,e[jt]=this,i.on("conclude",V6),i.on("drain",$6),i.on("error",H6),i.on("message",G6),i.on("ping",z6),i.on("pong",K6),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",uk),e.on("data",Th),e.on("end",lk),e.on("error",pk),this._readyState=r.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[lo.extensionName]&&this._extensions[lo.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){_r(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===r.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=r.CLOSING,this._sender.close(e,t,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),U6)}}pause(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,n){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){f_(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||Ch,t,n)}pong(e,t,n){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){f_(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||Ch,t,n)}resume(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,n){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(n=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){f_(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[lo.extensionName]||(i.compress=!1),this._sender.send(e||Ch,i,n)}terminate(){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){_r(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=r.CLOSING,this._socket.destroy())}}};Object.defineProperty(et,"CONNECTING",{enumerable:!0,value:ki.indexOf("CONNECTING")});Object.defineProperty(et.prototype,"CONNECTING",{enumerable:!0,value:ki.indexOf("CONNECTING")});Object.defineProperty(et,"OPEN",{enumerable:!0,value:ki.indexOf("OPEN")});Object.defineProperty(et.prototype,"OPEN",{enumerable:!0,value:ki.indexOf("OPEN")});Object.defineProperty(et,"CLOSING",{enumerable:!0,value:ki.indexOf("CLOSING")});Object.defineProperty(et.prototype,"CLOSING",{enumerable:!0,value:ki.indexOf("CLOSING")});Object.defineProperty(et,"CLOSED",{enumerable:!0,value:ki.indexOf("CLOSED")});Object.defineProperty(et.prototype,"CLOSED",{enumerable:!0,value:ki.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(et.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(et.prototype,`on${r}`,{enumerable:!0,get(){for(let e of this.listeners(r))if(e[p_])return e[D6];return null},set(e){for(let t of this.listeners(r))if(t[p_]){this.removeListener(r,t);break}typeof e=="function"&&this.addEventListener(r,e,{[p_]:!0})}})});et.prototype.addEventListener=M6;et.prototype.removeEventListener=L6;dk.exports=et;function ak(r,e,t,n){let i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:d_[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(r._autoPong=i.autoPong,!d_.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${d_.join(", ")})`);let o;if(e instanceof l_)o=e;else try{o=new l_(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}o.protocol==="http:"?o.protocol="ws:":o.protocol==="https:"&&(o.protocol="wss:"),r._url=o.href;let s=o.protocol==="wss:",a=o.protocol==="ws+unix:",c;if(o.protocol!=="ws:"&&!s&&!a?c=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!o.pathname?c="The URL's pathname is empty":o.hash&&(c="The URL contains a fragment identifier"),c){let m=new SyntaxError(c);if(r._redirects===0)throw m;Ph(r,m);return}let u=s?443:80,l=T6(16).toString("base64"),p=s?x6.request:C6.request,d=new Set,f;if(i.createConnection=i.createConnection||(s?W6:q6),i.defaultPort=i.defaultPort||u,i.port=o.port||u,i.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=o.pathname+o.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(f=new lo(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=N6({[lo.extensionName]:f.offer()})),t.length){for(let m of t){if(typeof m!="string"||!j6.test(m)||d.has(m))throw new SyntaxError("An invalid or duplicated subprotocol was specified");d.add(m)}i.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(o.username||o.password)&&(i.auth=`${o.username}:${o.password}`),a){let m=i.path.split(":");i.socketPath=m[0],i.path=m[1]}let h;if(i.followRedirects){if(r._redirects===0){r._originalIpc=a,r._originalSecure=s,r._originalHostOrSocketPath=a?i.socketPath:o.host;let m=n&&n.headers;if(n={...n,headers:{}},m)for(let[y,w]of Object.entries(m))n.headers[y.toLowerCase()]=w}else if(r.listenerCount("redirect")===0){let m=a?r._originalIpc?i.socketPath===r._originalHostOrSocketPath:!1:r._originalIpc?!1:o.host===r._originalHostOrSocketPath;(!m||r._originalSecure&&!s)&&(delete i.headers.authorization,delete i.headers.cookie,m||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),h=r._req=p(i),r._redirects&&r.emit("redirect",r.url,h)}else h=r._req=p(i);i.timeout&&h.on("timeout",()=>{_r(r,h,"Opening handshake has timed out")}),h.on("error",m=>{h===null||h[sk]||(h=r._req=null,Ph(r,m))}),h.on("response",m=>{let y=m.headers.location,w=m.statusCode;if(y&&i.followRedirects&&w>=300&&w<400){if(++r._redirects>i.maxRedirects){_r(r,h,"Maximum redirects exceeded");return}h.abort();let k;try{k=new l_(y,e)}catch{let Q=new SyntaxError(`Invalid URL: ${y}`);Ph(r,Q);return}ak(r,k,t,n)}else r.emit("unexpected-response",h,m)||_r(r,h,`Unexpected server response: ${m.statusCode}`)}),h.on("upgrade",(m,y,w)=>{if(r.emit("upgrade",m),r.readyState!==et.CONNECTING)return;h=r._req=null;let k=m.headers.upgrade;if(k===void 0||k.toLowerCase()!=="websocket"){_r(r,y,"Invalid Upgrade header");return}let D=E6("sha1").update(l+k6).digest("base64");if(m.headers["sec-websocket-accept"]!==D){_r(r,y,"Invalid Sec-WebSocket-Accept header");return}let Q=m.headers["sec-websocket-protocol"],F;if(Q!==void 0?d.size?d.has(Q)||(F="Server sent an invalid subprotocol"):F="Server sent a subprotocol but none was requested":d.size&&(F="Server sent no subprotocol"),F){_r(r,y,F);return}Q&&(r._protocol=Q);let te=m.headers["sec-websocket-extensions"];if(te!==void 0){if(!f){_r(r,y,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let H;try{H=F6(te)}catch{_r(r,y,"Invalid Sec-WebSocket-Extensions header");return}let B=Object.keys(H);if(B.length!==1||B[0]!==lo.extensionName){_r(r,y,"Server indicated an extension that was not requested");return}try{f.accept(H[lo.extensionName])}catch{_r(r,y,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[lo.extensionName]=f}r.setSocket(y,w,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(h,r):h.end()}function Ph(r,e){r._readyState=et.CLOSING,r.emit("error",e),r.emitClose()}function q6(r){return r.path=r.socketPath,ik.connect(r)}function W6(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=ik.isIP(r.host)?"":r.host),P6.connect(r)}function _r(r,e,t){r._readyState=et.CLOSING;let n=new Error(t);Error.captureStackTrace(n,_r),e.setHeader?(e[sk]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Ph,r,n)):(e.destroy(n),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function f_(r,e,t){if(e){let n=B6(e).length;r._socket?r._sender._bufferedBytes+=n:r._bufferedAmount+=n}if(t){let n=new Error(`WebSocket is not open: readyState ${r.readyState} (${ki[r.readyState]})`);process.nextTick(t,n)}}function V6(r,e){let t=this[jt];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=r,t._socket[jt]!==void 0&&(t._socket.removeListener("data",Th),process.nextTick(ck,t._socket),r===1005?t.close():t.close(r,e))}function $6(){let r=this[jt];r.isPaused||r._socket.resume()}function H6(r){let e=this[jt];e._socket[jt]!==void 0&&(e._socket.removeListener("data",Th),process.nextTick(ck,e._socket),e.close(r[O6])),e.emit("error",r)}function nk(){this[jt].emitClose()}function G6(r,e){this[jt].emit("message",r,e)}function z6(r){let e=this[jt];e._autoPong&&e.pong(r,!this._isServer,ok),e.emit("ping",r)}function K6(r){this[jt].emit("pong",r)}function ck(r){r.resume()}function uk(){let r=this[jt];this.removeListener("close",uk),this.removeListener("data",Th),this.removeListener("end",lk),r._readyState=et.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[jt]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",nk),r._receiver.on("finish",nk))}function Th(r){this[jt]._receiver.write(r)||this.pause()}function lk(){let r=this[jt];r._readyState=et.CLOSING,r._receiver.end(),this.end()}function pk(){let r=this[jt];this.removeListener("error",pk),this.on("error",ok),r&&(r._readyState=et.CLOSING,this.destroy())}});var hk=b((zse,fk)=>{"use strict";var{tokenChars:J6}=Cl();function Y6(r){let e=new Set,t=-1,n=-1,i=0;for(i;i<r.length;i++){let s=r.charCodeAt(i);if(n===-1&&J6[s]===1)t===-1&&(t=i);else if(i!==0&&(s===32||s===9))n===-1&&t!==-1&&(n=i);else if(s===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=r.slice(t,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),t=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(t===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let o=r.slice(t,i);if(e.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return e.add(o),e}fk.exports={parse:Y6}});var wk=b((Jse,_k)=>{"use strict";var X6=require("events"),Eh=require("http"),{Duplex:Kse}=require("stream"),{createHash:Q6}=require("crypto"),mk=u_(),Is=xl(),Z6=hk(),ez=h_(),{GUID:tz,kWebSocket:rz}=co(),nz=/^[+/0-9A-Za-z]{22}==$/,gk=0,yk=1,vk=2,m_=class extends X6{constructor(e,t){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:ez,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Eh.createServer((n,i)=>{let o=Eh.STATUS_CODES[426];i.writeHead(426,{"Content-Length":o.length,"Content-Type":"text/plain"}),i.end(o)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=iz(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,o,s)=>{this.handleUpgrade(i,o,s,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=gk}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===vk){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Rl,this);return}if(e&&this.once("close",e),this._state!==yk)if(this._state=yk,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Rl,this):process.nextTick(Rl,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{Rl(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,i){t.on("error",bk);let o=e.headers["sec-websocket-key"],s=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){xs(this,e,t,405,"Invalid HTTP method");return}if(s===void 0||s.toLowerCase()!=="websocket"){xs(this,e,t,400,"Invalid Upgrade header");return}if(o===void 0||!nz.test(o)){xs(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){xs(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){Al(t,400);return}let c=e.headers["sec-websocket-protocol"],u=new Set;if(c!==void 0)try{u=Z6.parse(c)}catch{xs(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let l=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&l!==void 0){let d=new Is(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=mk.parse(l);f[Is.extensionName]&&(d.accept(f[Is.extensionName]),p[Is.extensionName]=d)}catch{xs(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let d={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(d,(f,h,m,y)=>{if(!f)return Al(t,h||401,m,y);this.completeUpgrade(p,o,u,e,t,n,i)});return}if(!this.options.verifyClient(d))return Al(t,401)}this.completeUpgrade(p,o,u,e,t,n,i)}completeUpgrade(e,t,n,i,o,s,a){if(!o.readable||!o.writable)return o.destroy();if(o[rz])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>gk)return Al(o,503);let u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Q6("sha1").update(t+tz).digest("base64")}`],l=new this.options.WebSocket(null,void 0,this.options);if(n.size){let p=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;p&&(u.push(`Sec-WebSocket-Protocol: ${p}`),l._protocol=p)}if(e[Is.extensionName]){let p=e[Is.extensionName].params,d=mk.format({[Is.extensionName]:[p]});u.push(`Sec-WebSocket-Extensions: ${d}`),l._extensions=e}this.emit("headers",u,i),o.write(u.concat(`\r
`).join(`\r
`)),o.removeListener("error",bk),l.setSocket(o,s,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Rl,this)})),a(l,i)}};_k.exports=m_;function iz(r,e){for(let t of Object.keys(e))r.on(t,e[t]);return function(){for(let n of Object.keys(e))r.removeListener(n,e[n])}}function Rl(r){r._state=vk,r.emit("close")}function bk(){this.destroy()}function Al(r,e,t,n){t=t||Eh.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t),...n},r.once("finish",r.destroy),r.end(`HTTP/1.1 ${e} ${Eh.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+t)}function xs(r,e,t,n,i){if(r.listenerCount("wsClientError")){let o=new Error(i);Error.captureStackTrace(o,xs),r.emit("wsClientError",o,t,e)}else Al(t,n,i)}});var Bk=b((Oae,Fk)=>{"use strict";Fk.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var jk=b((Mae,Uk)=>{Uk.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var Vk=b((Lae,Wk)=>{"use strict";var fz=jk(),hz=Array.prototype.concat,mz=Array.prototype.slice,qk=Wk.exports=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n];fz(o)?t=hz.call(t,mz.call(o)):t.push(o)}return t};qk.wrap=function(r){return function(){return r(qk(arguments))}}});var zk=b((Nae,Gk)=>{var Ml=Bk(),Ll=Vk(),$k=Object.hasOwnProperty,Hk={};for(Mh in Ml)$k.call(Ml,Mh)&&(Hk[Ml[Mh]]=Mh);var Mh,wr=Gk.exports={to:{},get:{}};wr.get=function(r){var e=r.substring(0,3).toLowerCase(),t,n;switch(e){case"hsl":t=wr.get.hsl(r),n="hsl";break;case"hwb":t=wr.get.hwb(r),n="hwb";break;default:t=wr.get.rgb(r),n="rgb";break}return t?{model:n,value:t}:null};wr.get.rgb=function(r){if(!r)return null;var e=/^#([a-f0-9]{3,4})$/i,t=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,s=[0,0,0,1],a,c,u;if(a=r.match(t)){for(u=a[2],a=a[1],c=0;c<3;c++){var l=c*2;s[c]=parseInt(a.slice(l,l+2),16)}u&&(s[3]=parseInt(u,16)/255)}else if(a=r.match(e)){for(a=a[1],u=a[3],c=0;c<3;c++)s[c]=parseInt(a[c]+a[c],16);u&&(s[3]=parseInt(u+u,16)/255)}else if(a=r.match(n)){for(c=0;c<3;c++)s[c]=parseInt(a[c+1],0);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else if(a=r.match(i)){for(c=0;c<3;c++)s[c]=Math.round(parseFloat(a[c+1])*2.55);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else return(a=r.match(o))?a[1]==="transparent"?[0,0,0,0]:$k.call(Ml,a[1])?(s=Ml[a[1]],s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=ho(s[c],0,255);return s[3]=ho(s[3],0,1),s};wr.get.hsl=function(r){if(!r)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,o=ho(parseFloat(t[2]),0,100),s=ho(parseFloat(t[3]),0,100),a=ho(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};wr.get.hwb=function(r){if(!r)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,o=ho(parseFloat(t[2]),0,100),s=ho(parseFloat(t[3]),0,100),a=ho(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};wr.to.hex=function(){var r=Ll(arguments);return"#"+Lh(r[0])+Lh(r[1])+Lh(r[2])+(r[3]<1?Lh(Math.round(r[3]*255)):"")};wr.to.rgb=function(){var r=Ll(arguments);return r.length<4||r[3]===1?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"};wr.to.rgb.percent=function(){var r=Ll(arguments),e=Math.round(r[0]/255*100),t=Math.round(r[1]/255*100),n=Math.round(r[2]/255*100);return r.length<4||r[3]===1?"rgb("+e+"%, "+t+"%, "+n+"%)":"rgba("+e+"%, "+t+"%, "+n+"%, "+r[3]+")"};wr.to.hsl=function(){var r=Ll(arguments);return r.length<4||r[3]===1?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"};wr.to.hwb=function(){var r=Ll(arguments),e="";return r.length>=4&&r[3]!==1&&(e=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+e+")"};wr.to.keyword=function(r){return Hk[r.slice(0,3)]};function ho(r,e,t){return Math.min(Math.max(e,r),t)}function Lh(r){var e=Math.round(r).toString(16).toUpperCase();return e.length<2?"0"+e:e}});var Jk=b((Fae,Kk)=>{"use strict";Kk.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var S_=b((Bae,Xk)=>{var Nl=Jk(),Yk={};for(let r of Object.keys(Nl))Yk[Nl[r]]=r;var J={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Xk.exports=J;for(let r of Object.keys(J)){if(!("channels"in J[r]))throw new Error("missing channels property: "+r);if(!("labels"in J[r]))throw new Error("missing channel labels property: "+r);if(J[r].labels.length!==J[r].channels)throw new Error("channel and label counts mismatch: "+r);let{channels:e,labels:t}=J[r];delete J[r].channels,delete J[r].labels,Object.defineProperty(J[r],"channels",{value:e}),Object.defineProperty(J[r],"labels",{value:t})}J.rgb.hsl=function(r){let e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.min(e,t,n),o=Math.max(e,t,n),s=o-i,a,c;o===i?a=0:e===o?a=(t-n)/s:t===o?a=2+(n-e)/s:n===o&&(a=4+(e-t)/s),a=Math.min(a*60,360),a<0&&(a+=360);let u=(i+o)/2;return o===i?c=0:u<=.5?c=s/(o+i):c=s/(2-o-i),[a,c*100,u*100]};J.rgb.hsv=function(r){let e,t,n,i,o,s=r[0]/255,a=r[1]/255,c=r[2]/255,u=Math.max(s,a,c),l=u-Math.min(s,a,c),p=function(d){return(u-d)/6/l+1/2};return l===0?(i=0,o=0):(o=l/u,e=p(s),t=p(a),n=p(c),s===u?i=n-t:a===u?i=1/3+e-n:c===u&&(i=2/3+t-e),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,u*100]};J.rgb.hwb=function(r){let e=r[0],t=r[1],n=r[2],i=J.rgb.hsl(r)[0],o=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[i,o*100,n*100]};J.rgb.cmyk=function(r){let e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.min(1-e,1-t,1-n),o=(1-e-i)/(1-i)||0,s=(1-t-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[o*100,s*100,a*100,i*100]};function gz(r,e){return(r[0]-e[0])**2+(r[1]-e[1])**2+(r[2]-e[2])**2}J.rgb.keyword=function(r){let e=Yk[r];if(e)return e;let t=1/0,n;for(let i of Object.keys(Nl)){let o=Nl[i],s=gz(r,o);s<t&&(t=s,n=i)}return n};J.keyword.rgb=function(r){return Nl[r]};J.rgb.xyz=function(r){let e=r[0]/255,t=r[1]/255,n=r[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=e*.4124+t*.3576+n*.1805,o=e*.2126+t*.7152+n*.0722,s=e*.0193+t*.1192+n*.9505;return[i*100,o*100,s*100]};J.rgb.lab=function(r){let e=J.rgb.xyz(r),t=e[0],n=e[1],i=e[2];t/=95.047,n/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let o=116*n-16,s=500*(t-n),a=200*(n-i);return[o,s,a]};J.hsl.rgb=function(r){let e=r[0]/360,t=r[1]/100,n=r[2]/100,i,o,s;if(t===0)return s=n*255,[s,s,s];n<.5?i=n*(1+t):i=n+t-n*t;let a=2*n-i,c=[0,0,0];for(let u=0;u<3;u++)o=e+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,c[u]=s*255;return c};J.hsl.hsv=function(r){let e=r[0],t=r[1]/100,n=r[2]/100,i=t,o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,i*=o<=1?o:2-o;let s=(n+t)/2,a=n===0?2*i/(o+i):2*t/(n+t);return[e,a*100,s*100]};J.hsv.rgb=function(r){let e=r[0]/60,t=r[1]/100,n=r[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),s=255*n*(1-t),a=255*n*(1-t*o),c=255*n*(1-t*(1-o));switch(n*=255,i){case 0:return[n,c,s];case 1:return[a,n,s];case 2:return[s,n,c];case 3:return[s,a,n];case 4:return[c,s,n];case 5:return[n,s,a]}};J.hsv.hsl=function(r){let e=r[0],t=r[1]/100,n=r[2]/100,i=Math.max(n,.01),o,s;s=(2-t)*n;let a=(2-t)*i;return o=t*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};J.hwb.rgb=function(r){let e=r[0]/360,t=r[1]/100,n=r[2]/100,i=t+n,o;i>1&&(t/=i,n/=i);let s=Math.floor(6*e),a=1-n;o=6*e-s,(s&1)!==0&&(o=1-o);let c=t+o*(a-t),u,l,p;switch(s){default:case 6:case 0:u=a,l=c,p=t;break;case 1:u=c,l=a,p=t;break;case 2:u=t,l=a,p=c;break;case 3:u=t,l=c,p=a;break;case 4:u=c,l=t,p=a;break;case 5:u=a,l=t,p=c;break}return[u*255,l*255,p*255]};J.cmyk.rgb=function(r){let e=r[0]/100,t=r[1]/100,n=r[2]/100,i=r[3]/100,o=1-Math.min(1,e*(1-i)+i),s=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[o*255,s*255,a*255]};J.xyz.rgb=function(r){let e=r[0]/100,t=r[1]/100,n=r[2]/100,i,o,s;return i=e*3.2406+t*-1.5372+n*-.4986,o=e*-.9689+t*1.8758+n*.0415,s=e*.0557+t*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[i*255,o*255,s*255]};J.xyz.lab=function(r){let e=r[0],t=r[1],n=r[2];e/=95.047,t/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*t-16,o=500*(e-t),s=200*(t-n);return[i,o,s]};J.lab.xyz=function(r){let e=r[0],t=r[1],n=r[2],i,o,s;o=(e+16)/116,i=t/500+o,s=o-n/200;let a=o**3,c=i**3,u=s**3;return o=a>.008856?a:(o-16/116)/7.787,i=c>.008856?c:(i-16/116)/7.787,s=u>.008856?u:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]};J.lab.lch=function(r){let e=r[0],t=r[1],n=r[2],i;i=Math.atan2(n,t)*360/2/Math.PI,i<0&&(i+=360);let s=Math.sqrt(t*t+n*n);return[e,s,i]};J.lch.lab=function(r){let e=r[0],t=r[1],i=r[2]/360*2*Math.PI,o=t*Math.cos(i),s=t*Math.sin(i);return[e,o,s]};J.rgb.ansi16=function(r,e=null){let[t,n,i]=r,o=e===null?J.rgb.hsv(r)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};J.hsv.ansi16=function(r){return J.rgb.ansi16(J.hsv.rgb(r),r[2])};J.rgb.ansi256=function(r){let e=r[0],t=r[1],n=r[2];return e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};J.ansi16.rgb=function(r){let e=r%10;if(e===0||e===7)return r>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let t=(~~(r>50)+1)*.5,n=(e&1)*t*255,i=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[n,i,o]};J.ansi256.rgb=function(r){if(r>=232){let o=(r-232)*10+8;return[o,o,o]}r-=16;let e,t=Math.floor(r/36)/5*255,n=Math.floor((e=r%36)/6)/5*255,i=e%6/5*255;return[t,n,i]};J.rgb.hex=function(r){let t=(((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};J.hex.rgb=function(r){let e=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(a=>a+a).join(""));let n=parseInt(t,16),i=n>>16&255,o=n>>8&255,s=n&255;return[i,o,s]};J.rgb.hcg=function(r){let e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.max(Math.max(e,t),n),o=Math.min(Math.min(e,t),n),s=i-o,a,c;return s<1?a=o/(1-s):a=0,s<=0?c=0:i===e?c=(t-n)/s%6:i===t?c=2+(n-e)/s:c=4+(e-t)/s,c/=6,c%=1,[c*360,s*100,a*100]};J.hsl.hcg=function(r){let e=r[1]/100,t=r[2]/100,n=t<.5?2*e*t:2*e*(1-t),i=0;return n<1&&(i=(t-.5*n)/(1-n)),[r[0],n*100,i*100]};J.hsv.hcg=function(r){let e=r[1]/100,t=r[2]/100,n=e*t,i=0;return n<1&&(i=(t-n)/(1-n)),[r[0],n*100,i*100]};J.hcg.rgb=function(r){let e=r[0]/360,t=r[1]/100,n=r[2]/100;if(t===0)return[n*255,n*255,n*255];let i=[0,0,0],o=e%1*6,s=o%1,a=1-s,c=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return c=(1-t)*n,[(t*i[0]+c)*255,(t*i[1]+c)*255,(t*i[2]+c)*255]};J.hcg.hsv=function(r){let e=r[1]/100,t=r[2]/100,n=e+t*(1-e),i=0;return n>0&&(i=e/n),[r[0],i*100,n*100]};J.hcg.hsl=function(r){let e=r[1]/100,n=r[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[r[0],i*100,n*100]};J.hcg.hwb=function(r){let e=r[1]/100,t=r[2]/100,n=e+t*(1-e);return[r[0],(n-e)*100,(1-n)*100]};J.hwb.hcg=function(r){let e=r[1]/100,n=1-r[2]/100,i=n-e,o=0;return i<1&&(o=(n-i)/(1-i)),[r[0],i*100,o*100]};J.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};J.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};J.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};J.gray.hsl=function(r){return[0,0,r[0]]};J.gray.hsv=J.gray.hsl;J.gray.hwb=function(r){return[0,100,r[0]]};J.gray.cmyk=function(r){return[0,0,0,r[0]]};J.gray.lab=function(r){return[r[0],0,0]};J.gray.hex=function(r){let e=Math.round(r[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};J.rgb.gray=function(r){return[(r[0]+r[1]+r[2])/3/255*100]}});var Zk=b((Uae,Qk)=>{var Nh=S_();function yz(){let r={},e=Object.keys(Nh);for(let t=e.length,n=0;n<t;n++)r[e[n]]={distance:-1,parent:null};return r}function bz(r){let e=yz(),t=[r];for(e[r].distance=0;t.length;){let n=t.pop(),i=Object.keys(Nh[n]);for(let o=i.length,s=0;s<o;s++){let a=i[s],c=e[a];c.distance===-1&&(c.distance=e[n].distance+1,c.parent=n,t.unshift(a))}}return e}function vz(r,e){return function(t){return e(r(t))}}function _z(r,e){let t=[e[r].parent,r],n=Nh[e[r].parent][r],i=e[r].parent;for(;e[i].parent;)t.unshift(e[i].parent),n=vz(Nh[e[i].parent][i],n),i=e[i].parent;return n.conversion=t,n}Qk.exports=function(r){let e=bz(r),t={},n=Object.keys(e);for(let i=n.length,o=0;o<i;o++){let s=n[o];e[s].parent!==null&&(t[s]=_z(s,e))}return t}});var tD=b((jae,eD)=>{var I_=S_(),wz=Zk(),vc={},Sz=Object.keys(I_);function Iz(r){let e=function(...t){let n=t[0];return n==null?n:(n.length>1&&(t=n),r(t))};return"conversion"in r&&(e.conversion=r.conversion),e}function xz(r){let e=function(...t){let n=t[0];if(n==null)return n;n.length>1&&(t=n);let i=r(t);if(typeof i=="object")for(let o=i.length,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in r&&(e.conversion=r.conversion),e}Sz.forEach(r=>{vc[r]={},Object.defineProperty(vc[r],"channels",{value:I_[r].channels}),Object.defineProperty(vc[r],"labels",{value:I_[r].labels});let e=wz(r);Object.keys(e).forEach(n=>{let i=e[n];vc[r][n]=xz(i),vc[r][n].raw=Iz(i)})});eD.exports=vc});var iD=b((qae,nD)=>{var _c=zk(),Sr=tD(),rD=["keyword","gray","hex"],x_={};for(let r of Object.keys(Sr))x_[[...Sr[r].labels].sort().join("")]=r;var Fh={};function vt(r,e){if(!(this instanceof vt))return new vt(r,e);if(e&&e in rD&&(e=null),e&&!(e in Sr))throw new Error("Unknown model: "+e);let t,n;if(r==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(r instanceof vt)this.model=r.model,this.color=[...r.color],this.valpha=r.valpha;else if(typeof r=="string"){let i=_c.get(r);if(i===null)throw new Error("Unable to parse color from string: "+r);this.model=i.model,n=Sr[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(r.length>0){this.model=e||"rgb",n=Sr[this.model].channels;let i=Array.prototype.slice.call(r,0,n);this.color=C_(i,n),this.valpha=typeof r[n]=="number"?r[n]:1}else if(typeof r=="number")this.model="rgb",this.color=[r>>16&255,r>>8&255,r&255],this.valpha=1;else{this.valpha=1;let i=Object.keys(r);"alpha"in r&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof r.alpha=="number"?r.alpha:0);let o=i.sort().join("");if(!(o in x_))throw new Error("Unable to parse color from object: "+JSON.stringify(r));this.model=x_[o];let{labels:s}=Sr[this.model],a=[];for(t=0;t<s.length;t++)a.push(r[s[t]]);this.color=C_(a)}if(Fh[this.model])for(n=Sr[this.model].channels,t=0;t<n;t++){let i=Fh[this.model][t];i&&(this.color[t]=i(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}vt.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(r){let e=this.model in _c.to?this:this.rgb();e=e.round(typeof r=="number"?r:1);let t=e.valpha===1?e.color:[...e.color,this.valpha];return _c.to[e.model](t)},percentString(r){let e=this.rgb().round(typeof r=="number"?r:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return _c.to.rgb.percent(t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){let r={},{channels:e}=Sr[this.model],{labels:t}=Sr[this.model];for(let n=0;n<e;n++)r[t[n]]=this.color[n];return this.valpha!==1&&(r.alpha=this.valpha),r},unitArray(){let r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,this.valpha!==1&&r.push(this.valpha),r},unitObject(){let r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,this.valpha!==1&&(r.alpha=this.valpha),r},round(r){return r=Math.max(r||0,0),new vt([...this.color.map(Pz(r)),this.valpha],this.model)},alpha(r){return r!==void 0?new vt([...this.color,Math.max(0,Math.min(1,r))],this.model):this.valpha},red:Ke("rgb",0,dt(255)),green:Ke("rgb",1,dt(255)),blue:Ke("rgb",2,dt(255)),hue:Ke(["hsl","hsv","hsl","hwb","hcg"],0,r=>(r%360+360)%360),saturationl:Ke("hsl",1,dt(100)),lightness:Ke("hsl",2,dt(100)),saturationv:Ke("hsv",1,dt(100)),value:Ke("hsv",2,dt(100)),chroma:Ke("hcg",1,dt(100)),gray:Ke("hcg",2,dt(100)),white:Ke("hwb",1,dt(100)),wblack:Ke("hwb",2,dt(100)),cyan:Ke("cmyk",0,dt(100)),magenta:Ke("cmyk",1,dt(100)),yellow:Ke("cmyk",2,dt(100)),black:Ke("cmyk",3,dt(100)),x:Ke("xyz",0,dt(95.047)),y:Ke("xyz",1,dt(100)),z:Ke("xyz",2,dt(108.833)),l:Ke("lab",0,dt(100)),a:Ke("lab",1),b:Ke("lab",2),keyword(r){return r!==void 0?new vt(r):Sr[this.model].keyword(this.color)},hex(r){return r!==void 0?new vt(r):_c.to.hex(this.rgb().round().color)},hexa(r){if(r!==void 0)return new vt(r);let e=this.rgb().round().color,t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),_c.to.hex(e)+t},rgbNumber(){let r=this.rgb().color;return(r[0]&255)<<16|(r[1]&255)<<8|r[2]&255},luminosity(){let r=this.rgb().color,e=[];for(let[t,n]of r.entries()){let i=n/255;e[t]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(r){let e=this.luminosity(),t=r.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(r){let e=this.contrast(r);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){let r=this.rgb().color;return(r[0]*2126+r[1]*7152+r[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){let r=this.rgb();for(let e=0;e<3;e++)r.color[e]=255-r.color[e];return r},lighten(r){let e=this.hsl();return e.color[2]+=e.color[2]*r,e},darken(r){let e=this.hsl();return e.color[2]-=e.color[2]*r,e},saturate(r){let e=this.hsl();return e.color[1]+=e.color[1]*r,e},desaturate(r){let e=this.hsl();return e.color[1]-=e.color[1]*r,e},whiten(r){let e=this.hwb();return e.color[1]+=e.color[1]*r,e},blacken(r){let e=this.hwb();return e.color[2]+=e.color[2]*r,e},grayscale(){let r=this.rgb().color,e=r[0]*.3+r[1]*.59+r[2]*.11;return vt.rgb(e,e,e)},fade(r){return this.alpha(this.valpha-this.valpha*r)},opaquer(r){return this.alpha(this.valpha+this.valpha*r)},rotate(r){let e=this.hsl(),t=e.color[0];return t=(t+r)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(r,e){if(!r||!r.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof r);let t=r.rgb(),n=this.rgb(),i=e===void 0?.5:e,o=2*i-1,s=t.alpha()-n.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return vt.rgb(a*t.red()+c*n.red(),a*t.green()+c*n.green(),a*t.blue()+c*n.blue(),t.alpha()*i+n.alpha()*(1-i))}};for(let r of Object.keys(Sr)){if(rD.includes(r))continue;let{channels:e}=Sr[r];vt.prototype[r]=function(...t){return this.model===r?new vt(this):t.length>0?new vt(t,r):new vt([...Tz(Sr[this.model][r].raw(this.color)),this.valpha],r)},vt[r]=function(...t){let n=t[0];return typeof n=="number"&&(n=C_(t,e)),new vt(n,r)}}function Cz(r,e){return Number(r.toFixed(e))}function Pz(r){return function(e){return Cz(e,r)}}function Ke(r,e,t){r=Array.isArray(r)?r:[r];for(let n of r)(Fh[n]||(Fh[n]=[]))[e]=t;return r=r[0],function(n){let i;return n!==void 0?(t&&(n=t(n)),i=this[r](),i.color[e]=n,i):(i=this[r]().color[e],t&&(i=t(i)),i)}}function dt(r){return function(e){return Math.max(0,Math.min(r,e))}}function Tz(r){return Array.isArray(r)?r:[r]}function C_(r,e){for(let t=0;t<e;t++)typeof r[t]!="number"&&(r[t]=0);return r}nD.exports=vt});var i1=b(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.dataUriToBuffer=void 0;function s8(r){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=[];for(let o=0;o<r.length;o+=4){let s=e.indexOf(r.charAt(o)),a=e.indexOf(r.charAt(o+1)),c=r.charAt(o+2)==="="?0:e.indexOf(r.charAt(o+2)),u=r.charAt(o+3)==="="?0:e.indexOf(r.charAt(o+3)),l=s<<2|a>>4,p=(a&15)<<4|c>>2,d=(c&3)<<6|u;t.push(l),r.charAt(o+2)!=="="&&t.push(p),r.charAt(o+3)!=="="&&t.push(d)}let n=new ArrayBuffer(t.length);return new Uint8Array(n).set(t),n}function a8(r){let e=new ArrayBuffer(r.length),t=new Uint8Array(e);for(let n=0;n<r.length;n++)t[n]=r.charCodeAt(n);return e}function c8(r){if(r=String(r),!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let e=r.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let t=r.substring(5,e).split(";"),n="",i=!1,o=t[0]||"text/plain",s=o;for(let u=1;u<t.length;u++)t[u]==="base64"?i=!0:t[u]&&(s+=`;${t[u]}`,t[u].indexOf("charset=")===0&&(n=t[u].substring(8)));!t[0]&&!n.length&&(s+=";charset=US-ASCII",n="US-ASCII");let a=unescape(r.substring(e+1)),c=i?s8(a):a8(a);return{type:o,typeFull:s,charset:n,buffer:c}}ym.dataUriToBuffer=c8});var Li=b((Mi,bm)=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});var o1=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function u8(r){return o1.includes(r)}var l8=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...o1];function p8(r){return l8.includes(r)}var d8=["null","undefined","string","number","bigint","boolean","symbol"];function f8(r){return d8.includes(r)}function Oc(r){return e=>typeof e===r}var{toString:s1}=Object.prototype,zl=r=>{let e=s1.call(r).slice(8,-1);if(/HTML\w+Element/.test(e)&&v.domElement(r))return"HTMLElement";if(p8(e))return e},Ee=r=>e=>zl(e)===r;function v(r){if(r===null)return"null";switch(typeof r){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(v.observable(r))return"Observable";if(v.array(r))return"Array";if(v.buffer(r))return"Buffer";let e=zl(r);if(e)return e;if(r instanceof String||r instanceof Boolean||r instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}v.undefined=Oc("undefined");v.string=Oc("string");var h8=Oc("number");v.number=r=>h8(r)&&!v.nan(r);v.bigint=Oc("bigint");v.function_=Oc("function");v.null_=r=>r===null;v.class_=r=>v.function_(r)&&r.toString().startsWith("class ");v.boolean=r=>r===!0||r===!1;v.symbol=Oc("symbol");v.numericString=r=>v.string(r)&&!v.emptyStringOrWhitespace(r)&&!Number.isNaN(Number(r));v.array=(r,e)=>Array.isArray(r)?v.function_(e)?r.every(e):!0:!1;v.buffer=r=>{var e,t,n,i;return(i=(n=(t=(e=r)===null||e===void 0?void 0:e.constructor)===null||t===void 0?void 0:t.isBuffer)===null||n===void 0?void 0:n.call(t,r))!==null&&i!==void 0?i:!1};v.blob=r=>Ee("Blob")(r);v.nullOrUndefined=r=>v.null_(r)||v.undefined(r);v.object=r=>!v.null_(r)&&(typeof r=="object"||v.function_(r));v.iterable=r=>{var e;return v.function_((e=r)===null||e===void 0?void 0:e[Symbol.iterator])};v.asyncIterable=r=>{var e;return v.function_((e=r)===null||e===void 0?void 0:e[Symbol.asyncIterator])};v.generator=r=>{var e,t;return v.iterable(r)&&v.function_((e=r)===null||e===void 0?void 0:e.next)&&v.function_((t=r)===null||t===void 0?void 0:t.throw)};v.asyncGenerator=r=>v.asyncIterable(r)&&v.function_(r.next)&&v.function_(r.throw);v.nativePromise=r=>Ee("Promise")(r);var m8=r=>{var e,t;return v.function_((e=r)===null||e===void 0?void 0:e.then)&&v.function_((t=r)===null||t===void 0?void 0:t.catch)};v.promise=r=>v.nativePromise(r)||m8(r);v.generatorFunction=Ee("GeneratorFunction");v.asyncGeneratorFunction=r=>zl(r)==="AsyncGeneratorFunction";v.asyncFunction=r=>zl(r)==="AsyncFunction";v.boundFunction=r=>v.function_(r)&&!r.hasOwnProperty("prototype");v.regExp=Ee("RegExp");v.date=Ee("Date");v.error=Ee("Error");v.map=r=>Ee("Map")(r);v.set=r=>Ee("Set")(r);v.weakMap=r=>Ee("WeakMap")(r);v.weakSet=r=>Ee("WeakSet")(r);v.int8Array=Ee("Int8Array");v.uint8Array=Ee("Uint8Array");v.uint8ClampedArray=Ee("Uint8ClampedArray");v.int16Array=Ee("Int16Array");v.uint16Array=Ee("Uint16Array");v.int32Array=Ee("Int32Array");v.uint32Array=Ee("Uint32Array");v.float32Array=Ee("Float32Array");v.float64Array=Ee("Float64Array");v.bigInt64Array=Ee("BigInt64Array");v.bigUint64Array=Ee("BigUint64Array");v.arrayBuffer=Ee("ArrayBuffer");v.sharedArrayBuffer=Ee("SharedArrayBuffer");v.dataView=Ee("DataView");v.enumCase=(r,e)=>Object.values(e).includes(r);v.directInstanceOf=(r,e)=>Object.getPrototypeOf(r)===e.prototype;v.urlInstance=r=>Ee("URL")(r);v.urlString=r=>{if(!v.string(r))return!1;try{return new URL(r),!0}catch{return!1}};v.truthy=r=>!!r;v.falsy=r=>!r;v.nan=r=>Number.isNaN(r);v.primitive=r=>v.null_(r)||f8(typeof r);v.integer=r=>Number.isInteger(r);v.safeInteger=r=>Number.isSafeInteger(r);v.plainObject=r=>{if(s1.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.getPrototypeOf({})};v.typedArray=r=>u8(zl(r));var g8=r=>v.safeInteger(r)&&r>=0;v.arrayLike=r=>!v.nullOrUndefined(r)&&!v.function_(r)&&g8(r.length);v.inRange=(r,e)=>{if(v.number(e))return r>=Math.min(0,e)&&r<=Math.max(e,0);if(v.array(e)&&e.length===2)return r>=Math.min(...e)&&r<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};var y8=1,b8=["innerHTML","ownerDocument","style","attributes","nodeValue"];v.domElement=r=>v.object(r)&&r.nodeType===y8&&v.string(r.nodeName)&&!v.plainObject(r)&&b8.every(e=>e in r);v.observable=r=>{var e,t,n,i;return r?r===((t=(e=r)[Symbol.observable])===null||t===void 0?void 0:t.call(e))||r===((i=(n=r)["@@observable"])===null||i===void 0?void 0:i.call(n)):!1};v.nodeStream=r=>v.object(r)&&v.function_(r.pipe)&&!v.observable(r);v.infinite=r=>r===1/0||r===-1/0;var a1=r=>e=>v.integer(e)&&Math.abs(e%2)===r;v.evenInteger=a1(0);v.oddInteger=a1(1);v.emptyArray=r=>v.array(r)&&r.length===0;v.nonEmptyArray=r=>v.array(r)&&r.length>0;v.emptyString=r=>v.string(r)&&r.length===0;var v8=r=>v.string(r)&&!/\S/.test(r);v.emptyStringOrWhitespace=r=>v.emptyString(r)||v8(r);v.nonEmptyString=r=>v.string(r)&&r.length>0;v.nonEmptyStringAndNotWhitespace=r=>v.string(r)&&!v.emptyStringOrWhitespace(r);v.emptyObject=r=>v.object(r)&&!v.map(r)&&!v.set(r)&&Object.keys(r).length===0;v.nonEmptyObject=r=>v.object(r)&&!v.map(r)&&!v.set(r)&&Object.keys(r).length>0;v.emptySet=r=>v.set(r)&&r.size===0;v.nonEmptySet=r=>v.set(r)&&r.size>0;v.emptyMap=r=>v.map(r)&&r.size===0;v.nonEmptyMap=r=>v.map(r)&&r.size>0;v.propertyKey=r=>v.any([v.string,v.number,v.symbol],r);v.formData=r=>Ee("FormData")(r);v.urlSearchParams=r=>Ee("URLSearchParams")(r);var c1=(r,e,t)=>{if(!v.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(t.length===0)throw new TypeError("Invalid number of values");return r.call(t,e)};v.any=(r,...e)=>(v.array(r)?r:[r]).some(n=>c1(Array.prototype.some,n,e));v.all=(r,...e)=>c1(Array.prototype.every,r,e);var L=(r,e,t,n={})=>{if(!r){let{multipleValues:i}=n,o=i?`received values of types ${[...new Set(t.map(s=>`\`${v(s)}\``))].join(", ")}`:`received value of type \`${v(t)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${o}.`)}};Mi.assert={undefined:r=>L(v.undefined(r),"undefined",r),string:r=>L(v.string(r),"string",r),number:r=>L(v.number(r),"number",r),bigint:r=>L(v.bigint(r),"bigint",r),function_:r=>L(v.function_(r),"Function",r),null_:r=>L(v.null_(r),"null",r),class_:r=>L(v.class_(r),"Class",r),boolean:r=>L(v.boolean(r),"boolean",r),symbol:r=>L(v.symbol(r),"symbol",r),numericString:r=>L(v.numericString(r),"string with a number",r),array:(r,e)=>{L(v.array(r),"Array",r),e&&r.forEach(e)},buffer:r=>L(v.buffer(r),"Buffer",r),blob:r=>L(v.blob(r),"Blob",r),nullOrUndefined:r=>L(v.nullOrUndefined(r),"null or undefined",r),object:r=>L(v.object(r),"Object",r),iterable:r=>L(v.iterable(r),"Iterable",r),asyncIterable:r=>L(v.asyncIterable(r),"AsyncIterable",r),generator:r=>L(v.generator(r),"Generator",r),asyncGenerator:r=>L(v.asyncGenerator(r),"AsyncGenerator",r),nativePromise:r=>L(v.nativePromise(r),"native Promise",r),promise:r=>L(v.promise(r),"Promise",r),generatorFunction:r=>L(v.generatorFunction(r),"GeneratorFunction",r),asyncGeneratorFunction:r=>L(v.asyncGeneratorFunction(r),"AsyncGeneratorFunction",r),asyncFunction:r=>L(v.asyncFunction(r),"AsyncFunction",r),boundFunction:r=>L(v.boundFunction(r),"Function",r),regExp:r=>L(v.regExp(r),"RegExp",r),date:r=>L(v.date(r),"Date",r),error:r=>L(v.error(r),"Error",r),map:r=>L(v.map(r),"Map",r),set:r=>L(v.set(r),"Set",r),weakMap:r=>L(v.weakMap(r),"WeakMap",r),weakSet:r=>L(v.weakSet(r),"WeakSet",r),int8Array:r=>L(v.int8Array(r),"Int8Array",r),uint8Array:r=>L(v.uint8Array(r),"Uint8Array",r),uint8ClampedArray:r=>L(v.uint8ClampedArray(r),"Uint8ClampedArray",r),int16Array:r=>L(v.int16Array(r),"Int16Array",r),uint16Array:r=>L(v.uint16Array(r),"Uint16Array",r),int32Array:r=>L(v.int32Array(r),"Int32Array",r),uint32Array:r=>L(v.uint32Array(r),"Uint32Array",r),float32Array:r=>L(v.float32Array(r),"Float32Array",r),float64Array:r=>L(v.float64Array(r),"Float64Array",r),bigInt64Array:r=>L(v.bigInt64Array(r),"BigInt64Array",r),bigUint64Array:r=>L(v.bigUint64Array(r),"BigUint64Array",r),arrayBuffer:r=>L(v.arrayBuffer(r),"ArrayBuffer",r),sharedArrayBuffer:r=>L(v.sharedArrayBuffer(r),"SharedArrayBuffer",r),dataView:r=>L(v.dataView(r),"DataView",r),enumCase:(r,e)=>L(v.enumCase(r,e),"EnumCase",r),urlInstance:r=>L(v.urlInstance(r),"URL",r),urlString:r=>L(v.urlString(r),"string with a URL",r),truthy:r=>L(v.truthy(r),"truthy",r),falsy:r=>L(v.falsy(r),"falsy",r),nan:r=>L(v.nan(r),"NaN",r),primitive:r=>L(v.primitive(r),"primitive",r),integer:r=>L(v.integer(r),"integer",r),safeInteger:r=>L(v.safeInteger(r),"integer",r),plainObject:r=>L(v.plainObject(r),"plain object",r),typedArray:r=>L(v.typedArray(r),"TypedArray",r),arrayLike:r=>L(v.arrayLike(r),"array-like",r),domElement:r=>L(v.domElement(r),"HTMLElement",r),observable:r=>L(v.observable(r),"Observable",r),nodeStream:r=>L(v.nodeStream(r),"Node.js Stream",r),infinite:r=>L(v.infinite(r),"infinite number",r),emptyArray:r=>L(v.emptyArray(r),"empty array",r),nonEmptyArray:r=>L(v.nonEmptyArray(r),"non-empty array",r),emptyString:r=>L(v.emptyString(r),"empty string",r),emptyStringOrWhitespace:r=>L(v.emptyStringOrWhitespace(r),"empty string or whitespace",r),nonEmptyString:r=>L(v.nonEmptyString(r),"non-empty string",r),nonEmptyStringAndNotWhitespace:r=>L(v.nonEmptyStringAndNotWhitespace(r),"non-empty string and not whitespace",r),emptyObject:r=>L(v.emptyObject(r),"empty object",r),nonEmptyObject:r=>L(v.nonEmptyObject(r),"non-empty object",r),emptySet:r=>L(v.emptySet(r),"empty set",r),nonEmptySet:r=>L(v.nonEmptySet(r),"non-empty set",r),emptyMap:r=>L(v.emptyMap(r),"empty map",r),nonEmptyMap:r=>L(v.nonEmptyMap(r),"non-empty map",r),propertyKey:r=>L(v.propertyKey(r),"PropertyKey",r),formData:r=>L(v.formData(r),"FormData",r),urlSearchParams:r=>L(v.urlSearchParams(r),"URLSearchParams",r),evenInteger:r=>L(v.evenInteger(r),"even integer",r),oddInteger:r=>L(v.oddInteger(r),"odd integer",r),directInstanceOf:(r,e)=>L(v.directInstanceOf(r,e),"T",r),inRange:(r,e)=>L(v.inRange(r,e),"in range",r),any:(r,...e)=>L(v.any(r,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(r,...e)=>L(v.all(r,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(v,{class:{value:v.class_},function:{value:v.function_},null:{value:v.null_}});Object.defineProperties(Mi.assert,{class:{value:Mi.assert.class_},function:{value:Mi.assert.function_},null:{value:Mi.assert.null_}});Mi.default=v;bm.exports=v;bm.exports.default=v;bm.exports.assert=Mi.assert});var u1=b((Sde,cw)=>{"use strict";var vm=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},_m=class r{static fn(e){return(...t)=>new r((n,i,o)=>{t.push(o),e(...t).then(n,i)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((t,n)=>{this._reject=n;let i=a=>{(!this._isCanceled||!s.shouldReject)&&(this._isPending=!1,t(a))},o=a=>{this._isPending=!1,n(a)},s=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(s,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(i,o,s)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let t of this._cancelHandlers)t()}catch(t){this._reject(t);return}this._rejectOnCancel&&this._reject(new vm(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(_m.prototype,Promise.prototype);cw.exports=_m;cw.exports.CancelError=vm});var l1=b((lw,pw)=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});function _8(r){return r.encrypted}var uw=(r,e)=>{let t;typeof e=="function"?t={connect:e}:t=e;let n=typeof t.connect=="function",i=typeof t.secureConnect=="function",o=typeof t.close=="function",s=()=>{n&&t.connect(),_8(r)&&i&&(r.authorized?t.secureConnect():r.authorizationError||r.once("secureConnect",t.secureConnect)),o&&r.once("close",t.close)};r.writable&&!r.connecting?s():r.connecting?r.once("connect",s):r.destroyed&&o&&t.close(r._hadError)};lw.default=uw;pw.exports=uw;pw.exports.default=uw});var p1=b((fw,hw)=>{"use strict";Object.defineProperty(fw,"__esModule",{value:!0});var w8=l1(),S8=require("util"),I8=Number(process.versions.node.split(".")[0]),dw=r=>{if(r.timings)return r.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};r.timings=e;let t=a=>{let c=a.emit.bind(a);a.emit=(u,...l)=>(u==="error"&&(e.error=Date.now(),e.phases.total=e.error-e.start,a.emit=c),c(u,...l))};t(r);let n=()=>{e.abort=Date.now(),(!e.response||I8>=13)&&(e.phases.total=Date.now()-e.start)};r.prependOnceListener("abort",n);let i=a=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,S8.types.isProxy(a))return;let c=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};a.prependOnceListener("lookup",c),w8.default(a,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(a.removeListener("lookup",c),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};r.socket?i(r.socket):r.prependOnceListener("socket",i);let o=()=>{var a;e.upload=Date.now(),e.phases.request=e.upload-((a=e.secureConnect)!==null&&a!==void 0?a:e.connect)};return(typeof r.writableFinished=="boolean"?r.writableFinished:r.finished&&r.outputSize===0&&(!r.socket||r.socket.writableLength===0))?o():r.prependOnceListener("finish",o),r.prependOnceListener("response",a=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,a.timings=e,t(a),a.prependOnceListener("end",()=>{e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start}),a.prependOnceListener("aborted",n)}),e};fw.default=dw;hw.exports=dw;hw.exports.default=dw});var b1=b((Ide,yw)=>{"use strict";var{V4MAPPED:x8,ADDRCONFIG:C8,ALL:y1,promises:{Resolver:d1},lookup:P8}=require("dns"),{promisify:mw}=require("util"),T8=require("os"),Mc=Symbol("cacheableLookupCreateConnection"),gw=Symbol("cacheableLookupInstance"),f1=Symbol("expires"),E8=typeof y1=="number",h1=r=>{if(!(r&&typeof r.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},R8=r=>{for(let e of r)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},m1=()=>{let r=!1,e=!1;for(let t of Object.values(T8.networkInterfaces()))for(let n of t)if(!n.internal&&(n.family==="IPv6"?e=!0:r=!0,r&&e))return{has4:r,has6:e};return{has4:r,has6:e}},A8=r=>Symbol.iterator in r,g1={ttl:!0},k8={all:!0},wm=class{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:n=3600,errorTtl:i=.15,resolver:o=new d1,lookup:s=P8}={}){if(this.maxTtl=t,this.errorTtl=i,this._cache=e,this._resolver=o,this._dnsLookup=mw(s),this._resolver instanceof d1?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=mw(this._resolver.resolve4.bind(this._resolver)),this._resolve6=mw(this._resolver.resolve6.bind(this._resolver))),this._iface=m1(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,n<1)this._fallback=!1;else{this._fallback=!0;let a=setInterval(()=>{this._hostnamesToFallback.clear()},n*1e3);a.unref&&a.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,n){if(typeof t=="function"?(n=t,t={}):typeof t=="number"&&(t={family:t}),!n)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then(i=>{t.all?n(null,i):n(null,i.address,i.family,i.expires,i.ttl)},n)}async lookupAsync(e,t={}){typeof t=="number"&&(t={family:t});let n=await this.query(e);if(t.family===6){let i=n.filter(o=>o.family===6);t.hints&x8&&(E8&&t.hints&y1||i.length===0)?R8(n):n=i}else t.family===4&&(n=n.filter(i=>i.family===4));if(t.hints&C8){let{_iface:i}=this;n=n.filter(o=>o.family===6?i.has6:i.has4)}if(n.length===0){let i=new Error(`cacheableLookup ENOTFOUND ${e}`);throw i.code="ENOTFOUND",i.hostname=e,i}return t.all?n:n[0]}async query(e){let t=await this._cache.get(e);if(!t){let n=this._pending[e];if(n)t=await n;else{let i=this.queryAndCache(e);this._pending[e]=i;try{t=await i}finally{delete this._pending[e]}}}return t=t.map(n=>({...n})),t}async _resolve(e){let t=async u=>{try{return await u}catch(l){if(l.code==="ENODATA"||l.code==="ENOTFOUND")return[];throw l}},[n,i]=await Promise.all([this._resolve4(e,g1),this._resolve6(e,g1)].map(u=>t(u))),o=0,s=0,a=0,c=Date.now();for(let u of n)u.family=4,u.expires=c+u.ttl*1e3,o=Math.max(o,u.ttl);for(let u of i)u.family=6,u.expires=c+u.ttl*1e3,s=Math.max(s,u.ttl);return n.length>0?i.length>0?a=Math.min(o,s):a=o:a=s,{entries:[...n,...i],cacheTtl:a}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,n){if(this.maxTtl>0&&n>0){n=Math.min(n,this.maxTtl)*1e3,t[f1]=Date.now()+n;try{await this._cache.set(e,t,n)}catch(i){this.lookupAsync=async()=>{let o=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw o.cause=i,o}}A8(this._cache)&&this._tick(n)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,k8);let t=await this._resolve(e);t.entries.length===0&&this._fallback&&(t=await this._lookup(e),t.entries.length!==0&&this._hostnamesToFallback.add(e));let n=t.entries.length===0?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,n),t.entries}_tick(e){let t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let n=1/0,i=Date.now();for(let[o,s]of this._cache){let a=s[f1];i>=a?this._cache.delete(o):a<n&&(n=a)}n!==1/0&&this._tick(n-i)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(h1(e),Mc in e)throw new Error("CacheableLookup has been already installed");e[Mc]=e.createConnection,e[gw]=this,e.createConnection=(t,n)=>("lookup"in t||(t.lookup=this.lookup),e[Mc](t,n))}uninstall(e){if(h1(e),e[Mc]){if(e[gw]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[Mc],delete e[Mc],delete e[gw]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=m1(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};yw.exports=wm;yw.exports.default=wm});var w1=b((xde,_1)=>{"use strict";var D8="text/plain",O8="us-ascii",v1=(r,e)=>e.some(t=>t instanceof RegExp?t.test(r):t===r),M8=(r,{stripHash:e})=>{let t=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(r);if(!t)throw new Error(`Invalid URL: ${r}`);let{type:n,data:i,hash:o}=t.groups,s=n.split(";");o=e?"":o;let a=!1;s[s.length-1]==="base64"&&(s.pop(),a=!0);let c=(s.shift()||"").toLowerCase(),l=[...s.map(p=>{let[d,f=""]=p.split("=").map(h=>h.trim());return d==="charset"&&(f=f.toLowerCase(),f===O8)?"":`${d}${f?`=${f}`:""}`}).filter(Boolean)];return a&&l.push("base64"),(l.length!==0||c&&c!==D8)&&l.unshift(c),`data:${l.join(";")},${a?i.trim():i}${o?`#${o}`:""}`},L8=(r,e)=>{if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},r=r.trim(),/^data:/i.test(r))return M8(r,e);if(/^view-source:/i.test(r))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let t=r.startsWith("//");!t&&/^\.*\//.test(r)||(r=r.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(r);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname&&(i.pathname=i.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),a=s[s.length-1];v1(a,e.removeDirectoryIndex)&&(s=s.slice(0,s.length-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let s of[...i.searchParams.keys()])v1(s,e.removeQueryParameters)&&i.searchParams.delete(s);e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters&&i.searchParams.sort(),e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=r;return r=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(r=r.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(r=r.replace(/\/$/,"")),t&&!e.normalizeProtocol&&(r=r.replace(/^http:\/\//,"//")),e.stripProtocol&&(r=r.replace(/^(?:https?:)?\/\//,"")),r};_1.exports=L8});var x1=b((Cde,I1)=>{I1.exports=S1;function S1(r,e){if(r&&e)return S1(r)(e);if(typeof r!="function")throw new TypeError("need wrapper function");return Object.keys(r).forEach(function(n){t[n]=r[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=r.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}});var vw=b((Pde,bw)=>{var C1=x1();bw.exports=C1(Sm);bw.exports.strict=C1(P1);Sm.proto=Sm(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Sm(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return P1(this)},configurable:!0})});function Sm(r){var e=function(){return e.called?e.value:(e.called=!0,e.value=r.apply(this,arguments))};return e.called=!1,e}function P1(r){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=r.apply(this,arguments)},t=r.name||"Function wrapped with `once`";return e.onceError=t+" shouldn't be called more than once",e.called=!1,e}});var R1=b((Tde,E1)=>{var N8=vw(),F8=function(){},B8=function(r){return r.setHeader&&typeof r.abort=="function"},U8=function(r){return r.stdio&&Array.isArray(r.stdio)&&r.stdio.length===3},T1=function(r,e,t){if(typeof e=="function")return T1(r,null,e);e||(e={}),t=N8(t||F8);var n=r._writableState,i=r._readableState,o=e.readable||e.readable!==!1&&r.readable,s=e.writable||e.writable!==!1&&r.writable,a=!1,c=function(){r.writable||u()},u=function(){s=!1,o||t.call(r)},l=function(){o=!1,s||t.call(r)},p=function(y){t.call(r,y?new Error("exited with error code: "+y):null)},d=function(y){t.call(r,y)},f=function(){process.nextTick(h)},h=function(){if(!a){if(o&&!(i&&i.ended&&!i.destroyed))return t.call(r,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return t.call(r,new Error("premature close"))}},m=function(){r.req.on("finish",u)};return B8(r)?(r.on("complete",u),r.on("abort",f),r.req?m():r.on("request",m)):s&&!n&&(r.on("end",c),r.on("close",c)),U8(r)&&r.on("exit",p),r.on("end",l),r.on("finish",u),e.error!==!1&&r.on("error",d),r.on("close",f),function(){a=!0,r.removeListener("complete",u),r.removeListener("abort",f),r.removeListener("request",m),r.req&&r.req.removeListener("finish",u),r.removeListener("end",c),r.removeListener("close",c),r.removeListener("finish",u),r.removeListener("exit",p),r.removeListener("end",l),r.removeListener("error",d),r.removeListener("close",f)}};E1.exports=T1});var D1=b((Ede,k1)=>{var j8=vw(),q8=R1(),_w=require("fs"),Kl=function(){},W8=/^v?\.0/.test(process.version),Im=function(r){return typeof r=="function"},V8=function(r){return!W8||!_w?!1:(r instanceof(_w.ReadStream||Kl)||r instanceof(_w.WriteStream||Kl))&&Im(r.close)},$8=function(r){return r.setHeader&&Im(r.abort)},H8=function(r,e,t,n){n=j8(n);var i=!1;r.on("close",function(){i=!0}),q8(r,{readable:e,writable:t},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,V8(r))return r.close(Kl);if($8(r))return r.abort();if(Im(r.destroy))return r.destroy();n(s||new Error("stream was destroyed"))}}},A1=function(r){r()},G8=function(r,e){return r.pipe(e)},z8=function(){var r=Array.prototype.slice.call(arguments),e=Im(r[r.length-1]||Kl)&&r.pop()||Kl;if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new Error("pump requires two streams per minimum");var t,n=r.map(function(i,o){var s=o<r.length-1,a=o>0;return H8(i,s,a,function(c){t||(t=c),c&&n.forEach(A1),!s&&(n.forEach(A1),e(t))})});return r.reduce(G8)};k1.exports=z8});var M1=b((Rde,O1)=>{"use strict";var{PassThrough:K8}=require("stream");O1.exports=r=>{r={...r};let{array:e}=r,{encoding:t}=r,n=t==="buffer",i=!1;e?i=!(t||n):t=t||"utf8",n&&(t=null);let o=new K8({objectMode:i});t&&o.setEncoding(t);let s=0,a=[];return o.on("data",c=>{a.push(c),i?s=a.length:s+=c.length}),o.getBufferedValue=()=>e?a:n?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o}});var L1=b((Ade,Lc)=>{"use strict";var{constants:J8}=require("buffer"),Y8=D1(),X8=M1(),xm=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Cm(r,e){if(!r)return Promise.reject(new Error("Expected a stream"));e={maxBuffer:1/0,...e};let{maxBuffer:t}=e,n;return await new Promise((i,o)=>{let s=a=>{a&&n.getBufferedLength()<=J8.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),o(a)};n=Y8(r,X8(e),a=>{if(a){s(a);return}i()}),n.on("data",()=>{n.getBufferedLength()>t&&s(new xm)})}),n.getBufferedValue()}Lc.exports=Cm;Lc.exports.default=Cm;Lc.exports.buffer=(r,e)=>Cm(r,{...e,encoding:"buffer"});Lc.exports.array=(r,e)=>Cm(r,{...e,array:!0});Lc.exports.MaxBufferError=xm});var F1=b((Dde,N1)=>{"use strict";var Q8=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Z8=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),eK=new Set([500,502,503,504]),tK={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},rK={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Ls(r){let e=parseInt(r,10);return isFinite(e)?e:0}function nK(r){return r?eK.has(r.status):!0}function ww(r){let e={};if(!r)return e;let t=r.trim().split(/,/);for(let n of t){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function iK(r){let e=[];for(let t in r){let n=r[t];e.push(n===!0?t:t+"="+n)}if(e.length)return e.join(", ")}N1.exports=class{constructor(e,t,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=ww(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=ww(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":iK(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),t.headers["cache-control"]==null&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Z8.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Q8.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let t=ww(e.headers["cache-control"]);return t["no-cache"]||/no-cache/.test(e.headers.pragma)||t["max-age"]&&this.age()>t["max-age"]||t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"]||this.stale()&&!(t["max-stale"]&&!this._rescc["must-revalidate"]&&(t["max-stale"]===!0||t["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of t)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let t={};for(let n in e)tK[n]||(t[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete t[i]}if(t.warning){let n=t.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?t.warning=n.join(",").trim():delete t.warning}return t}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(t)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),t=(this.now()-this._responseTime)/1e3;return e+t}_ageValue(){return Ls(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Ls(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Ls(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<t?0:Math.max(e,(n-t)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&t>n)return Math.max(e,(t-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),t=e+Ls(this._rescc["stale-if-error"]),n=e+Ls(this._rescc["stale-while-revalidate"]);return Math.max(0,e,t,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Ls(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Ls(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;if(this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete t["if-modified-since"],t["if-none-match"]){let i=t["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?t["if-none-match"]=i.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&nK(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let n=!1;if(t.status!==void 0&&t.status!=304?n=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===t.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!t.headers.etag&&!t.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,t),modified:t.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in t.headers&&!rK[s]?t.headers[s]:this._resHeaders[s];let o=Object.assign({},t,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var Pm=b((Ode,B1)=>{"use strict";B1.exports=r=>{let e={};for(let[t,n]of Object.entries(r))e[t.toLowerCase()]=n;return e}});var j1=b((Mde,U1)=>{"use strict";var oK=require("stream").Readable,sK=Pm(),Sw=class extends oK{constructor(e,t,n,i){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof t!="object")throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof i!="string")throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=sK(t),this.body=n,this.url=i}_read(){this.push(this.body),this.push(null)}};U1.exports=Sw});var W1=b((Lde,q1)=>{"use strict";var aK=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];q1.exports=(r,e)=>{let t=new Set(Object.keys(r).concat(aK));for(let n of t)n in e||(e[n]=typeof r[n]=="function"?r[n].bind(r):r[n])}});var $1=b((Nde,V1)=>{"use strict";var cK=require("stream").PassThrough,uK=W1(),lK=r=>{if(!(r&&r.pipe))throw new TypeError("Parameter `response` must be a response stream.");let e=new cK;return uK(r,e),r.pipe(e)};V1.exports=lK});var H1=b(Iw=>{Iw.stringify=function r(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var t="",n=Array.isArray(e);t=n?"[":"{";var i=!0;for(var o in e){var s=typeof e[o]=="function"||!n&&typeof e[o]>"u";Object.hasOwnProperty.call(e,o)&&!s&&(i||(t+=","),i=!1,n?e[o]==null?t+="null":t+=r(e[o]):e[o]!==void 0&&(t+=r(o)+":"+r(e[o])))}return t+=n?"]":"}",t}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};Iw.parse=function(r){return JSON.parse(r,function(e,t){return typeof t=="string"?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t})}});var J1=b((Bde,K1)=>{"use strict";var pK=require("events"),G1=H1(),dK=r=>{let e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(r.adapter||r.uri){let t=r.adapter||/^[^:+]*/.exec(r.uri)[0];return new(require(e[t]))(r)}return new Map},z1=["sqlite","postgres","mysql","mongo","redis","tiered"],xw=class extends pK{constructor(e,{emitErrors:t=!0,...n}={}){if(super(),this.opts={namespace:"keyv",serialize:G1.stringify,deserialize:G1.parse,...typeof e=="string"?{uri:e}:e,...n},!this.opts.store){let o={...this.opts};this.opts.store=dK(o)}if(this.opts.compression){let o=this.opts.compression;this.opts.serialize=o.serialize.bind(o),this.opts.deserialize=o.deserialize.bind(o)}typeof this.opts.store.on=="function"&&t&&this.opts.store.on("error",o=>this.emit("error",o)),this.opts.store.namespace=this.opts.namespace;let i=o=>async function*(){for await(let[s,a]of typeof o=="function"?o(this.opts.store.namespace):o){let c=await this.opts.deserialize(a);if(!(this.opts.store.namespace&&!s.includes(this.opts.store.namespace))){if(typeof c.expires=="number"&&Date.now()>c.expires){this.delete(s);continue}yield[this._getKeyUnprefix(s),c.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=i(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=i(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return z1.includes(this.opts.store.opts.dialect)||z1.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(t=>`${this.opts.namespace}:${t}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,t){let{store:n}=this.opts,i=Array.isArray(e),o=i?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(i&&n.getMany===void 0){let s=[];for(let a of o)s.push(Promise.resolve().then(()=>n.get(a)).then(c=>typeof c=="string"?this.opts.deserialize(c):this.opts.compression?this.opts.deserialize(c):c).then(c=>{if(c!=null)return typeof c.expires=="number"&&Date.now()>c.expires?this.delete(a).then(()=>{}):t&&t.raw?c:c.value}));return Promise.allSettled(s).then(a=>{let c=[];for(let u of a)c.push(u.value);return c})}return Promise.resolve().then(()=>i?n.getMany(o):n.get(o)).then(s=>typeof s=="string"?this.opts.deserialize(s):this.opts.compression?this.opts.deserialize(s):s).then(s=>{if(s!=null)return i?s.map((a,c)=>{if(typeof a=="string"&&(a=this.opts.deserialize(a)),a!=null){if(typeof a.expires=="number"&&Date.now()>a.expires){this.delete(e[c]).then(()=>{});return}return t&&t.raw?a:a.value}}):typeof s.expires=="number"&&Date.now()>s.expires?this.delete(e).then(()=>{}):t&&t.raw?s:s.value})}set(e,t,n){let i=this._getKeyPrefix(e);typeof n>"u"&&(n=this.opts.ttl),n===0&&(n=void 0);let{store:o}=this.opts;return Promise.resolve().then(()=>{let s=typeof n=="number"?Date.now()+n:null;return typeof t=="symbol"&&this.emit("error","symbol cannot be serialized"),t={value:t,expires:s},this.opts.serialize(t)}).then(s=>o.set(i,s,n)).then(()=>!0)}delete(e){let{store:t}=this.opts;if(Array.isArray(e)){let i=this._getKeyPrefixArray(e);if(t.deleteMany===void 0){let o=[];for(let s of i)o.push(t.delete(s));return Promise.allSettled(o).then(s=>s.every(a=>a.value===!0))}return Promise.resolve().then(()=>t.deleteMany(i))}let n=this._getKeyPrefix(e);return Promise.resolve().then(()=>t.delete(n))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let t=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(async()=>typeof n.has=="function"?n.has(t):await n.get(t)!==void 0)}disconnect(){let{store:e}=this.opts;if(typeof e.disconnect=="function")return e.disconnect()}};K1.exports=xw});var Q1=b((Ude,X1)=>{"use strict";var fK=require("events"),Tm=require("url"),hK=w1(),mK=L1(),Cw=F1(),Y1=j1(),gK=Pm(),yK=$1(),bK=J1(),Jl=class r{constructor(e,t){if(typeof e!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new bK({uri:typeof t=="string"&&t,store:typeof t!="string"&&t,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(t,n)=>{let i;if(typeof t=="string")i=Pw(Tm.parse(t)),t={};else if(t instanceof Tm.URL)i=Pw(Tm.parse(t.toString())),t={};else{let[p,...d]=(t.path||"").split("?"),f=d.length>0?`?${d.join("?")}`:"";i=Pw({...t,pathname:p,search:f})}t={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...t,...vK(i)},t.headers=gK(t.headers);let o=new fK,s=hK(Tm.format(i),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${t.method}:${s}`,c=!1,u=!1,l=p=>{u=!0;let d=!1,f,h=new Promise(y=>{f=()=>{d||(d=!0,y())}}),m=y=>{if(c&&!p.forceRefresh){y.status=y.statusCode;let k=Cw.fromObject(c.cachePolicy).revalidatedPolicy(p,y);if(!k.modified){let D=k.policy.responseHeaders();y=new Y1(c.statusCode,D,c.body,c.url),y.cachePolicy=k.policy,y.fromCache=!0}}y.fromCache||(y.cachePolicy=new Cw(p,y,p),y.fromCache=!1);let w;p.cache&&y.cachePolicy.storable()?(w=yK(y),(async()=>{try{let k=mK.buffer(y);if(await Promise.race([h,new Promise(te=>y.once("end",te))]),d)return;let D=await k,Q={cachePolicy:y.cachePolicy.toObject(),url:y.url,statusCode:y.fromCache?c.statusCode:y.statusCode,body:D},F=p.strictTtl?y.cachePolicy.timeToLive():void 0;p.maxTtl&&(F=F?Math.min(F,p.maxTtl):p.maxTtl),await this.cache.set(a,Q,F)}catch(k){o.emit("error",new r.CacheError(k))}})()):p.cache&&c&&(async()=>{try{await this.cache.delete(a)}catch(k){o.emit("error",new r.CacheError(k))}})(),o.emit("response",w||y),typeof n=="function"&&n(w||y)};try{let y=e(p,m);y.once("error",f),y.once("abort",f),o.emit("request",y)}catch(y){o.emit("error",new r.RequestError(y))}};return(async()=>{let p=async f=>{await Promise.resolve();let h=f.cache?await this.cache.get(a):void 0;if(typeof h>"u")return l(f);let m=Cw.fromObject(h.cachePolicy);if(m.satisfiesWithoutRevalidation(f)&&!f.forceRefresh){let y=m.responseHeaders(),w=new Y1(h.statusCode,y,h.body,h.url);w.cachePolicy=m,w.fromCache=!0,o.emit("response",w),typeof n=="function"&&n(w)}else c=h,f.headers=m.revalidationHeaders(f),l(f)},d=f=>o.emit("error",new r.CacheError(f));this.cache.once("error",d),o.on("response",()=>this.cache.removeListener("error",d));try{await p(t)}catch(f){t.automaticFailover&&!u&&l(t),o.emit("error",new r.CacheError(f))}})(),o}}};function vK(r){let e={...r};return e.path=`${r.pathname||"/"}${r.search||""}`,delete e.pathname,delete e.search,e}function Pw(r){return{protocol:r.protocol,auth:r.auth,hostname:r.hostname||r.host||"localhost",port:r.port,pathname:r.pathname,search:r.search}}Jl.RequestError=class extends Error{constructor(r){super(r.message),this.name="RequestError",Object.assign(this,r)}};Jl.CacheError=class extends Error{constructor(r){super(r.message),this.name="CacheError",Object.assign(this,r)}};X1.exports=Jl});var eO=b((Wde,Z1)=>{"use strict";var _K=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];Z1.exports=(r,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let t=new Set(Object.keys(r).concat(_K)),n={};for(let i of t)i in e||(n[i]={get(){let o=r[i];return typeof o=="function"?o.bind(r):o},set(o){r[i]=o},enumerable:!0,configurable:!1});return Object.defineProperties(e,n),r.once("aborted",()=>{e.destroy(),e.emit("aborted")}),r.once("close",()=>{r.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var rO=b((Vde,tO)=>{"use strict";var{Transform:wK,PassThrough:SK}=require("stream"),Tw=require("zlib"),IK=eO();tO.exports=r=>{let e=(r.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return r;let t=e==="br";if(t&&typeof Tw.createBrotliDecompress!="function")return r.destroy(new Error("Brotli is not supported on Node.js < 12")),r;let n=!0,i=new wK({transform(a,c,u){n=!1,u(null,a)},flush(a){a()}}),o=new SK({autoDestroy:!1,destroy(a,c){r.destroy(),c(a)}}),s=t?Tw.createBrotliDecompress():Tw.createUnzip();return s.once("error",a=>{if(n&&!r.readable){o.end();return}o.destroy(a)}),IK(r,o),r.pipe(i).pipe(s).pipe(o),o}});var Rw=b(($de,nO)=>{"use strict";var Ew=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[n,i]of this.oldCache.entries())this.onEviction(n,i);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}};nO.exports=Ew});var kw=b((Hde,aO)=>{"use strict";var xK=require("events"),CK=require("tls"),PK=require("http2"),TK=Rw(),Yt=Symbol("currentStreamsCount"),iO=Symbol("request"),Hr=Symbol("cachedOriginSet"),Nc=Symbol("gracefullyClosing"),EK=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],RK=(r,e,t)=>{let n=0,i=r.length;for(;n<i;){let o=n+i>>>1;t(r[o],e)?n=o+1:i=o}return n},AK=(r,e)=>r.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,Aw=(r,e)=>{for(let t of r)t[Hr].length<e[Hr].length&&t[Hr].every(n=>e[Hr].includes(n))&&t[Yt]+e[Yt]<=e.remoteSettings.maxConcurrentStreams&&sO(t)},kK=(r,e)=>{for(let t of r)e[Hr].length<t[Hr].length&&e[Hr].every(n=>t[Hr].includes(n))&&e[Yt]+t[Yt]<=t.remoteSettings.maxConcurrentStreams&&sO(e)},oO=({agent:r,isFree:e})=>{let t={};for(let n in r.sessions){let o=r.sessions[n].filter(s=>{let a=s[Ns.kCurrentStreamsCount]<s.remoteSettings.maxConcurrentStreams;return e?a:!a});o.length!==0&&(t[n]=o)}return t},sO=r=>{r[Nc]=!0,r[Yt]===0&&r.close()},Ns=class r extends xK{constructor({timeout:e=6e4,maxSessions:t=1/0,maxFreeSessions:n=10,maxCachedTlsSessions:i=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxFreeSessions=n,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new TK({maxSize:i})}static normalizeOrigin(e,t){return typeof e=="string"&&(e=new URL(e)),t&&e.hostname!==t&&(e.hostname=t),e.origin}normalizeOptions(e){let t="";if(e)for(let n of EK)e[n]&&(t+=`:${e[n]}`);return t}_tryToCreateNewSession(e,t){if(!(e in this.queue)||!(t in this.queue[e]))return;let n=this.queue[e][t];this._sessionsCount<this.maxSessions&&!n.completed&&(n.completed=!0,n())}getSession(e,t,n){return new Promise((i,o)=>{Array.isArray(n)?(n=[...n],i()):n=[{resolve:i,reject:o}];let s=this.normalizeOptions(t),a=r.normalizeOrigin(e,t&&t.servername);if(a===void 0){for(let{reject:l}of n)l(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(s in this.sessions){let l=this.sessions[s],p=-1,d=-1,f;for(let h of l){let m=h.remoteSettings.maxConcurrentStreams;if(m<p)break;if(h[Hr].includes(a)){let y=h[Yt];if(y>=m||h[Nc]||h.destroyed)continue;f||(p=m),y>d&&(f=h,d=y)}}if(f){if(n.length!==1){for(let{reject:h}of n){let m=new Error(`Expected the length of listeners to be 1, got ${n.length}.
Please report this to https://github.com/szmarczak/http2-wrapper/`);h(m)}return}n[0].resolve(f);return}}if(s in this.queue){if(a in this.queue[s]){this.queue[s][a].listeners.push(...n),this._tryToCreateNewSession(s,a);return}}else this.queue[s]={};let c=()=>{s in this.queue&&this.queue[s][a]===u&&(delete this.queue[s][a],Object.keys(this.queue[s]).length===0&&delete this.queue[s])},u=()=>{let l=`${a}:${s}`,p=!1;try{let d=PK.connect(e,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(l),...t});d[Yt]=0,d[Nc]=!1;let f=()=>d[Yt]<d.remoteSettings.maxConcurrentStreams,h=!0;d.socket.once("session",y=>{this.tlsSessionCache.set(l,y)}),d.once("error",y=>{for(let{reject:w}of n)w(y);this.tlsSessionCache.delete(l)}),d.setTimeout(this.timeout,()=>{d.destroy()}),d.once("close",()=>{if(p){h&&this._freeSessionsCount--,this._sessionsCount--;let y=this.sessions[s];y.splice(y.indexOf(d),1),y.length===0&&delete this.sessions[s]}else{let y=new Error("Session closed without receiving a SETTINGS frame");y.code="HTTP2WRAPPER_NOSETTINGS";for(let{reject:w}of n)w(y);c()}this._tryToCreateNewSession(s,a)});let m=()=>{if(!(!(s in this.queue)||!f())){for(let y of d[Hr])if(y in this.queue[s]){let{listeners:w}=this.queue[s][y];for(;w.length!==0&&f();)w.shift().resolve(d);let k=this.queue[s];if(k[y].listeners.length===0&&(delete k[y],Object.keys(k).length===0)){delete this.queue[s];break}if(!f())break}}};d.on("origin",()=>{d[Hr]=d.originSet,f()&&(m(),Aw(this.sessions[s],d))}),d.once("remoteSettings",()=>{if(d.ref(),d.unref(),this._sessionsCount++,u.destroyed){let y=new Error("Agent has been destroyed");for(let w of n)w.reject(y);d.destroy();return}d[Hr]=d.originSet;{let y=this.sessions;if(s in y){let w=y[s];w.splice(RK(w,d,AK),0,d)}else y[s]=[d]}this._freeSessionsCount+=1,p=!0,this.emit("session",d),m(),c(),d[Yt]===0&&this._freeSessionsCount>this.maxFreeSessions&&d.close(),n.length!==0&&(this.getSession(a,t,n),n.length=0),d.on("remoteSettings",()=>{m(),Aw(this.sessions[s],d)})}),d[iO]=d.request,d.request=(y,w)=>{if(d[Nc])throw new Error("The session is gracefully closing. No new streams are allowed.");let k=d[iO](y,w);return d.ref(),++d[Yt],d[Yt]===d.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,k.once("close",()=>{if(h=f(),--d[Yt],!d.destroyed&&!d.closed&&(kK(this.sessions[s],d),f()&&!d.closed)){h||(this._freeSessionsCount++,h=!0);let D=d[Yt]===0;D&&d.unref(),D&&(this._freeSessionsCount>this.maxFreeSessions||d[Nc])?d.close():(Aw(this.sessions[s],d),m())}}),k}}catch(d){for(let f of n)f.reject(d);c()}};u.listeners=n,u.completed=!1,u.destroyed=!1,this.queue[s][a]=u,this._tryToCreateNewSession(s,a)})}request(e,t,n,i){return new Promise((o,s)=>{this.getSession(e,t,[{reject:s,resolve:a=>{try{o(a.request(n,i))}catch(c){s(c)}}}])})}createConnection(e,t){return r.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];let n=e.port||443,i=e.hostname||e.host;return typeof t.servername>"u"&&(t.servername=i),CK.connect(n,i,t)}closeFreeSessions(){for(let e of Object.values(this.sessions))for(let t of e)t[Yt]===0&&t.close()}destroy(e){for(let t of Object.values(this.sessions))for(let n of t)n.destroy(e);for(let t of Object.values(this.queue))for(let n of Object.values(t))n.destroyed=!0;this.queue={}}get freeSessions(){return oO({agent:this,isFree:!0})}get busySessions(){return oO({agent:this,isFree:!1})}};Ns.kCurrentStreamsCount=Yt;Ns.kGracefullyClosing=Nc;aO.exports={Agent:Ns,globalAgent:new Ns}});var Ow=b((Gde,cO)=>{"use strict";var{Readable:DK}=require("stream"),Dw=class extends DK{constructor(e,t){super({highWaterMark:t,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};cO.exports=Dw});var Mw=b((zde,uO)=>{"use strict";uO.exports=r=>{let e={protocol:r.protocol,hostname:typeof r.hostname=="string"&&r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,host:r.host,hash:r.hash,search:r.search,pathname:r.pathname,href:r.href,path:`${r.pathname||""}${r.search||""}`};return typeof r.port=="string"&&r.port.length!==0&&(e.port=Number(r.port)),(r.username||r.password)&&(e.auth=`${r.username||""}:${r.password||""}`),e}});var pO=b((Kde,lO)=>{"use strict";lO.exports=(r,e,t)=>{for(let n of t)r.on(n,(...i)=>e.emit(n,...i))}});var fO=b((Jde,dO)=>{"use strict";dO.exports=r=>{switch(r){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var mO=b((Xde,hO)=>{"use strict";var Fc=(r,e,t)=>{hO.exports[e]=class extends r{constructor(...i){super(typeof t=="string"?t:t(i)),this.name=`${super.name} [${e}]`,this.code=e}}};Fc(TypeError,"ERR_INVALID_ARG_TYPE",r=>{let e=r[0].includes(".")?"property":"argument",t=r[1],n=Array.isArray(t);return n&&(t=`${t.slice(0,-1).join(", ")} or ${t.slice(-1)}`),`The "${r[0]}" ${e} must be ${n?"one of":"of"} type ${t}. Received ${typeof r[2]}`});Fc(TypeError,"ERR_INVALID_PROTOCOL",r=>`Protocol "${r[0]}" not supported. Expected "${r[1]}"`);Fc(Error,"ERR_HTTP_HEADERS_SENT",r=>`Cannot ${r[0]} headers after they are sent to the client`);Fc(TypeError,"ERR_INVALID_HTTP_TOKEN",r=>`${r[0]} must be a valid HTTP token [${r[1]}]`);Fc(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",r=>`Invalid value "${r[0]} for header "${r[1]}"`);Fc(TypeError,"ERR_INVALID_CHAR",r=>`Invalid character in ${r[0]} [${r[1]}]`)});var Uw=b((Qde,SO)=>{"use strict";var OK=require("http2"),{Writable:MK}=require("stream"),{Agent:gO,globalAgent:LK}=kw(),NK=Ow(),FK=Mw(),BK=pO(),UK=fO(),{ERR_INVALID_ARG_TYPE:Lw,ERR_INVALID_PROTOCOL:jK,ERR_HTTP_HEADERS_SENT:yO,ERR_INVALID_HTTP_TOKEN:qK,ERR_HTTP_INVALID_HEADER_VALUE:WK,ERR_INVALID_CHAR:VK}=mO(),{HTTP2_HEADER_STATUS:bO,HTTP2_HEADER_METHOD:vO,HTTP2_HEADER_PATH:_O,HTTP2_METHOD_CONNECT:$K}=OK.constants,Wt=Symbol("headers"),Nw=Symbol("origin"),Fw=Symbol("session"),wO=Symbol("options"),Em=Symbol("flushedHeaders"),Yl=Symbol("jobs"),HK=/^[\^`\-\w!#$%&*+.|~]+$/,GK=/[^\t\u0020-\u007E\u0080-\u00FF]/,Bw=class extends MK{constructor(e,t,n){super({autoDestroy:!1});let i=typeof e=="string"||e instanceof URL;if(i&&(e=FK(e instanceof URL?e:new URL(e))),typeof t=="function"||t===void 0?(n=t,t=i?e:{...e}):t={...e,...t},t.h2session)this[Fw]=t.h2session;else if(t.agent===!1)this.agent=new gO({maxFreeSessions:0});else if(typeof t.agent>"u"||t.agent===null)typeof t.createConnection=="function"?(this.agent=new gO({maxFreeSessions:0}),this.agent.createConnection=t.createConnection):this.agent=LK;else if(typeof t.agent.request=="function")this.agent=t.agent;else throw new Lw("options.agent",["Agent-like Object","undefined","false"],t.agent);if(t.protocol&&t.protocol!=="https:")throw new jK(t.protocol,"https:");let o=t.port||t.defaultPort||this.agent&&this.agent.defaultPort||443,s=t.hostname||t.host||"localhost";delete t.hostname,delete t.host,delete t.port;let{timeout:a}=t;if(t.timeout=void 0,this[Wt]=Object.create(null),this[Yl]=[],this.socket=null,this.connection=null,this.method=t.method||"GET",this.path=t.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,t.headers)for(let[c,u]of Object.entries(t.headers))this.setHeader(c,u);t.auth&&!("authorization"in this[Wt])&&(this[Wt].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[wO]=t,o===443?(this[Nw]=`https://${s}`,":authority"in this[Wt]||(this[Wt][":authority"]=s)):(this[Nw]=`https://${s}:${o}`,":authority"in this[Wt]||(this[Wt][":authority"]=`${s}:${o}`)),a&&this.setTimeout(a),n&&this.once("response",n),this[Em]=!1}get method(){return this[Wt][vO]}set method(e){e&&(this[Wt][vO]=e.toUpperCase())}get path(){return this[Wt][_O]}set path(e){e&&(this[Wt][_O]=e)}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,t,n){if(this._mustNotHaveABody){n(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let i=()=>this._request.write(e,t,n);this._request?i():this[Yl].push(i)}_final(e){if(this.destroyed)return;this.flushHeaders();let t=()=>{if(this._mustNotHaveABody){e();return}this._request.end(e)};this._request?t():this[Yl].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(e,t){this.res&&this.res._dump(),this._request&&this._request.destroy(),t(e)}async flushHeaders(){if(this[Em]||this.destroyed)return;this[Em]=!0;let e=this.method===$K,t=n=>{if(this._request=n,this.destroyed){n.destroy();return}e||BK(n,this,["timeout","continue","close","error"]);let i=s=>(...a)=>{!this.writable&&!this.destroyed?s(...a):this.once("finish",()=>{s(...a)})};n.once("response",i((s,a,c)=>{let u=new NK(this.socket,n.readableHighWaterMark);this.res=u,u.req=this,u.statusCode=s[bO],u.headers=s,u.rawHeaders=c,u.once("end",()=>{this.aborted?(u.aborted=!0,u.emit("aborted")):(u.complete=!0,u.socket=null,u.connection=null)}),e?(u.upgrade=!0,this.emit("connect",u,n,Buffer.alloc(0))?this.emit("close"):n.destroy()):(n.on("data",l=>{!u._dumped&&!u.push(l)&&n.pause()}),n.once("end",()=>{u.push(null)}),this.emit("response",u)||u._dump())})),n.once("headers",i(s=>this.emit("information",{statusCode:s[bO]}))),n.once("trailers",i((s,a,c)=>{let{res:u}=this;u.trailers=s,u.rawTrailers=c}));let{socket:o}=n.session;this.socket=o,this.connection=o;for(let s of this[Yl])s();this.emit("socket",this.socket)};if(this[Fw])try{t(this[Fw].request(this[Wt]))}catch(n){this.emit("error",n)}else{this.reusedSocket=!0;try{t(await this.agent.request(this[Nw],this[wO],this[Wt]))}catch(n){this.emit("error",n)}}}getHeader(e){if(typeof e!="string")throw new Lw("name","string",e);return this[Wt][e.toLowerCase()]}get headersSent(){return this[Em]}removeHeader(e){if(typeof e!="string")throw new Lw("name","string",e);if(this.headersSent)throw new yO("remove");delete this[Wt][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new yO("set");if(typeof e!="string"||!HK.test(e)&&!UK(e))throw new qK("Header name",e);if(typeof t>"u")throw new WK(t,e);if(GK.test(t))throw new VK("header content",e);this[Wt][e.toLowerCase()]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){let n=()=>this._request.setTimeout(e,t);return this._request?n():this[Yl].push(n),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};SO.exports=Bw});var xO=b((Zde,IO)=>{"use strict";var zK=require("tls");IO.exports=(r={},e=zK.connect)=>new Promise((t,n)=>{let i=!1,o,s=async()=>{await c,o.off("timeout",a),o.off("error",n),r.resolveSocket?(t({alpnProtocol:o.alpnProtocol,socket:o,timeout:i}),i&&(await Promise.resolve(),o.emit("timeout"))):(o.destroy(),t({alpnProtocol:o.alpnProtocol,timeout:i}))},a=async()=>{i=!0,s()},c=(async()=>{try{o=await e(r,s),o.on("error",n),o.once("timeout",a)}catch(u){n(u)}})()})});var PO=b((efe,CO)=>{"use strict";var KK=require("net");CO.exports=r=>{let e=r.host,t=r.headers&&r.headers.host;return t&&(t.startsWith("[")?t.indexOf("]")===-1?e=t:e=t.slice(1,-1):e=t.split(":",1)[0]),KK.isIP(e)?"":e}});var RO=b((tfe,qw)=>{"use strict";var TO=require("http"),jw=require("https"),JK=xO(),YK=Rw(),XK=Uw(),QK=PO(),ZK=Mw(),Rm=new YK({maxSize:100}),Xl=new Map,EO=(r,e,t)=>{e._httpMessage={shouldKeepAlive:!0};let n=()=>{r.emit("free",e,t)};e.on("free",n);let i=()=>{r.removeSocket(e,t)};e.on("close",i);let o=()=>{r.removeSocket(e,t),e.off("close",i),e.off("free",n),e.off("agentRemove",o)};e.on("agentRemove",o),r.emit("free",e,t)},e9=async r=>{let e=`${r.host}:${r.port}:${r.ALPNProtocols.sort()}`;if(!Rm.has(e)){if(Xl.has(e))return(await Xl.get(e)).alpnProtocol;let{path:t,agent:n}=r;r.path=r.socketPath;let i=JK(r);Xl.set(e,i);try{let{socket:o,alpnProtocol:s}=await i;if(Rm.set(e,s),r.path=t,s==="h2")o.destroy();else{let{globalAgent:a}=jw,c=jw.Agent.prototype.createConnection;n?n.createConnection===c?EO(n,o,r):o.destroy():a.createConnection===c?EO(a,o,r):o.destroy()}return Xl.delete(e),s}catch(o){throw Xl.delete(e),o}}return Rm.get(e)};qw.exports=async(r,e,t)=>{if((typeof r=="string"||r instanceof URL)&&(r=ZK(new URL(r))),typeof e=="function"&&(t=e,e=void 0),e={ALPNProtocols:["h2","http/1.1"],...r,...e,resolveSocket:!0},!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let n=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||QK(e),e.port=e.port||(n?443:80),e._defaultAgent=n?jw.globalAgent:TO.globalAgent;let i=e.agent;if(i){if(i.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");e.agent=i[n?"https":"http"]}return n&&await e9(e)==="h2"?(i&&(e.agent=i.http2),new XK(e,t)):TO.request(e,t)};qw.exports.protocolCache=Rm});var kO=b((rfe,AO)=>{"use strict";var t9=require("http2"),r9=kw(),Ww=Uw(),n9=Ow(),i9=RO(),o9=(r,e,t)=>new Ww(r,e,t),s9=(r,e,t)=>{let n=new Ww(r,e,t);return n.end(),n};AO.exports={...t9,ClientRequest:Ww,IncomingMessage:n9,...r9,request:o9,get:s9,auto:i9}});var $w=b(Vw=>{"use strict";Object.defineProperty(Vw,"__esModule",{value:!0});var DO=Li();Vw.default=r=>DO.default.nodeStream(r)&&DO.default.function_(r.getBoundary)});var NO=b(Hw=>{"use strict";Object.defineProperty(Hw,"__esModule",{value:!0});var MO=require("fs"),LO=require("util"),OO=Li(),a9=$w(),c9=LO.promisify(MO.stat);Hw.default=async(r,e)=>{if(e&&"content-length"in e)return Number(e["content-length"]);if(!r)return 0;if(OO.default.string(r))return Buffer.byteLength(r);if(OO.default.buffer(r))return r.length;if(a9.default(r))return LO.promisify(r.getLength.bind(r))();if(r instanceof MO.ReadStream){let{size:t}=await c9(r.path);return t===0?void 0:t}}});var zw=b(Gw=>{"use strict";Object.defineProperty(Gw,"__esModule",{value:!0});function u9(r,e,t){let n={};for(let i of t)n[i]=(...o)=>{e.emit(i,...o)},r.on(i,n[i]);return()=>{for(let i of t)r.off(i,n[i])}}Gw.default=u9});var FO=b(Kw=>{"use strict";Object.defineProperty(Kw,"__esModule",{value:!0});Kw.default=()=>{let r=[];return{once(e,t,n){e.once(t,n),r.push({origin:e,event:t,fn:n})},unhandleAll(){for(let e of r){let{origin:t,event:n,fn:i}=e;t.removeListener(n,i)}r.length=0}}}});var UO=b(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.TimeoutError=void 0;var l9=require("net"),p9=FO(),BO=Symbol("reentry"),d9=()=>{},Am=class extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),this.event=t,this.name="TimeoutError",this.code="ETIMEDOUT"}};Ql.TimeoutError=Am;Ql.default=(r,e,t)=>{if(BO in r)return d9;r[BO]=!0;let n=[],{once:i,unhandleAll:o}=p9.default(),s=(p,d,f)=>{var h;let m=setTimeout(d,p,p,f);(h=m.unref)===null||h===void 0||h.call(m);let y=()=>{clearTimeout(m)};return n.push(y),y},{host:a,hostname:c}=t,u=(p,d)=>{r.destroy(new Am(p,d))},l=()=>{for(let p of n)p();o()};if(r.once("error",p=>{if(l(),r.listenerCount("error")===0)throw p}),r.once("close",l),i(r,"response",p=>{i(p,"end",l)}),typeof e.request<"u"&&s(e.request,u,"request"),typeof e.socket<"u"){let p=()=>{u(e.socket,"socket")};r.setTimeout(e.socket,p),n.push(()=>{r.removeListener("timeout",p)})}return i(r,"socket",p=>{var d;let{socketPath:f}=r;if(p.connecting){let h=!!(f??l9.isIP((d=c??a)!==null&&d!==void 0?d:"")!==0);if(typeof e.lookup<"u"&&!h&&typeof p.address().address>"u"){let m=s(e.lookup,u,"lookup");i(p,"lookup",m)}if(typeof e.connect<"u"){let m=()=>s(e.connect,u,"connect");h?i(p,"connect",m()):i(p,"lookup",y=>{y===null&&i(p,"connect",m())})}typeof e.secureConnect<"u"&&t.protocol==="https:"&&i(p,"connect",()=>{let m=s(e.secureConnect,u,"secureConnect");i(p,"secureConnect",m)})}if(typeof e.send<"u"){let h=()=>s(e.send,u,"send");p.connecting?i(p,"connect",()=>{i(r,"upload-complete",h())}):i(r,"upload-complete",h())}}),typeof e.response<"u"&&i(r,"upload-complete",()=>{let p=s(e.response,u,"response");i(r,"response",p)}),l}});var qO=b(Jw=>{"use strict";Object.defineProperty(Jw,"__esModule",{value:!0});var jO=Li();Jw.default=r=>{r=r;let e={protocol:r.protocol,hostname:jO.default.string(r.hostname)&&r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,host:r.host,hash:r.hash,search:r.search,pathname:r.pathname,href:r.href,path:`${r.pathname||""}${r.search||""}`};return jO.default.string(r.port)&&r.port.length>0&&(e.port=Number(r.port)),(r.username||r.password)&&(e.auth=`${r.username||""}:${r.password||""}`),e}});var WO=b(Yw=>{"use strict";Object.defineProperty(Yw,"__esModule",{value:!0});var f9=require("url"),h9=["protocol","host","hostname","port","pathname","search"];Yw.default=(r,e)=>{var t,n;if(e.path){if(e.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(e.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(e.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(e.search&&e.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!r){if(!e.protocol)throw new TypeError("No URL protocol specified");r=`${e.protocol}//${(n=(t=e.hostname)!==null&&t!==void 0?t:e.host)!==null&&n!==void 0?n:""}`}let i=new f9.URL(r);if(e.path){let o=e.path.indexOf("?");o===-1?e.pathname=e.path:(e.pathname=e.path.slice(0,o),e.search=e.path.slice(o+1)),delete e.path}for(let o of h9)e[o]&&(i[o]=e[o].toString());return i}});var VO=b(Qw=>{"use strict";Object.defineProperty(Qw,"__esModule",{value:!0});var Xw=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,t){typeof e=="object"?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};Qw.default=Xw});var eS=b(Zw=>{"use strict";Object.defineProperty(Zw,"__esModule",{value:!0});var m9=async r=>{let e=[],t=0;for await(let n of r)e.push(n),t+=Buffer.byteLength(n);return Buffer.isBuffer(e[0])?Buffer.concat(e,t):Buffer.from(e.join(""))};Zw.default=m9});var HO=b(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.dnsLookupIpVersionToFamily=Fs.isDnsLookupIpVersion=void 0;var $O={auto:0,ipv4:4,ipv6:6};Fs.isDnsLookupIpVersion=r=>r in $O;Fs.dnsLookupIpVersionToFamily=r=>{if(Fs.isDnsLookupIpVersion(r))return $O[r];throw new Error("Invalid DNS lookup IP version")}});var tS=b(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.isResponseOk=void 0;km.isResponseOk=r=>{let{statusCode:e}=r,t=r.request.options.followRedirect?299:399;return e>=200&&e<=t||e===304}});var zO=b(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});var GO=new Set;rS.default=r=>{GO.has(r)||(GO.add(r),process.emitWarning(`Got: ${r}`,{type:"DeprecationWarning"}))}});var KO=b(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});var Ne=Li(),g9=(r,e)=>{if(Ne.default.null_(r.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");Ne.assert.any([Ne.default.string,Ne.default.undefined],r.encoding),Ne.assert.any([Ne.default.boolean,Ne.default.undefined],r.resolveBodyOnly),Ne.assert.any([Ne.default.boolean,Ne.default.undefined],r.methodRewriting),Ne.assert.any([Ne.default.boolean,Ne.default.undefined],r.isStream),Ne.assert.any([Ne.default.string,Ne.default.undefined],r.responseType),r.responseType===void 0&&(r.responseType="text");let{retry:t}=r;if(e?r.retry={...e.retry}:r.retry={calculateDelay:n=>n.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},Ne.default.object(t)?(r.retry={...r.retry,...t},r.retry.methods=[...new Set(r.retry.methods.map(n=>n.toUpperCase()))],r.retry.statusCodes=[...new Set(r.retry.statusCodes)],r.retry.errorCodes=[...new Set(r.retry.errorCodes)]):Ne.default.number(t)&&(r.retry.limit=t),Ne.default.undefined(r.retry.maxRetryAfter)&&(r.retry.maxRetryAfter=Math.min(...[r.timeout.request,r.timeout.connect].filter(Ne.default.number))),Ne.default.object(r.pagination)){e&&(r.pagination={...e.pagination,...r.pagination});let{pagination:n}=r;if(!Ne.default.function_(n.transform))throw new Error("`options.pagination.transform` must be implemented");if(!Ne.default.function_(n.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!Ne.default.function_(n.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!Ne.default.function_(n.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return r.responseType==="json"&&r.headers.accept===void 0&&(r.headers.accept="application/json"),r};nS.default=g9});var JO=b(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.retryAfterStatusCodes=void 0;Zl.retryAfterStatusCodes=new Set([413,429,503]);var y9=({attemptCount:r,retryOptions:e,error:t,retryAfter:n})=>{if(r>e.limit)return 0;let i=e.methods.includes(t.options.method),o=e.errorCodes.includes(t.code),s=t.response&&e.statusCodes.includes(t.response.statusCode);if(!i||!o&&!s)return 0;if(t.response){if(n)return e.maxRetryAfter===void 0||n>e.maxRetryAfter?0:n;if(t.response.statusCode===413)return 0}let a=Math.random()*100;return 2**(r-1)*1e3+a};Zl.default=y9});var rp=b(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.UnsupportedProtocolError=me.ReadError=me.TimeoutError=me.UploadError=me.CacheError=me.HTTPError=me.MaxRedirectsError=me.RequestError=me.setNonEnumerableProperties=me.knownHookEvents=me.withoutBody=me.kIsNormalizedAlready=void 0;var YO=require("util"),XO=require("stream"),b9=require("fs"),Io=require("url"),QO=require("http"),iS=require("http"),v9=require("https"),_9=p1(),w9=b1(),ZO=Q1(),S9=rO(),I9=kO(),x9=Pm(),x=Li(),C9=NO(),eM=$w(),P9=zw(),tM=UO(),T9=qO(),rM=WO(),E9=VO(),R9=eS(),nM=HO(),A9=tS(),xo=zO(),k9=KO(),D9=JO(),oS,Et=Symbol("request"),Mm=Symbol("response"),Bc=Symbol("responseSize"),Uc=Symbol("downloadedSize"),jc=Symbol("bodySize"),qc=Symbol("uploadedSize"),Dm=Symbol("serverResponsesPiped"),iM=Symbol("unproxyEvents"),oM=Symbol("isFromCache"),sS=Symbol("cancelTimeouts"),sM=Symbol("startedReading"),Wc=Symbol("stopReading"),Om=Symbol("triggerRead"),Co=Symbol("body"),ep=Symbol("jobs"),aM=Symbol("originalResponse"),cM=Symbol("retryTimeout");me.kIsNormalizedAlready=Symbol("isNormalizedAlready");var O9=x.default.string(process.versions.brotli);me.withoutBody=new Set(["GET","HEAD"]);me.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];function M9(r){for(let e in r){let t=r[e];if(!x.default.string(t)&&!x.default.number(t)&&!x.default.boolean(t)&&!x.default.null_(t)&&!x.default.undefined(t))throw new TypeError(`The \`searchParams\` value '${String(t)}' must be a string, number, boolean or null`)}}function L9(r){return x.default.object(r)&&!("statusCode"in r)}var aS=new E9.default,N9=async r=>new Promise((e,t)=>{let n=i=>{t(i)};r.pending||e(),r.once("error",n),r.once("ready",()=>{r.off("error",n),e()})}),F9=new Set([300,301,302,303,304,307,308]),B9=["context","body","json","form"];me.setNonEnumerableProperties=(r,e)=>{let t={};for(let n of r)if(n)for(let i of B9)i in n&&(t[i]={writable:!0,configurable:!0,enumerable:!1,value:n[i]});Object.defineProperties(e,t)};var tt=class extends Error{constructor(e,t,n){var i,o;if(super(e),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=(i=t.code)!==null&&i!==void 0?i:"ERR_GOT_REQUEST_ERROR",n instanceof qm?(Object.defineProperty(this,"request",{enumerable:!1,value:n}),Object.defineProperty(this,"response",{enumerable:!1,value:n[Mm]}),Object.defineProperty(this,"options",{enumerable:!1,value:n.options})):Object.defineProperty(this,"options",{enumerable:!1,value:n}),this.timings=(o=this.request)===null||o===void 0?void 0:o.timings,x.default.string(t.stack)&&x.default.string(this.stack)){let s=this.stack.indexOf(this.message)+this.message.length,a=this.stack.slice(s).split(`
`).reverse(),c=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split(`
`).reverse();for(;c.length!==0&&c[0]===a[0];)a.shift();this.stack=`${this.stack.slice(0,s)}${a.reverse().join(`
`)}${c.reverse().join(`
`)}`}}};me.RequestError=tt;var Lm=class extends tt{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}};me.MaxRedirectsError=Lm;var Nm=class extends tt{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}};me.HTTPError=Nm;var Fm=class extends tt{constructor(e,t){super(e.message,e,t),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}};me.CacheError=Fm;var Bm=class extends tt{constructor(e,t){super(e.message,e,t),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}};me.UploadError=Bm;var Um=class extends tt{constructor(e,t,n){super(e.message,e,n),this.name="TimeoutError",this.event=e.event,this.timings=t}};me.TimeoutError=Um;var tp=class extends tt{constructor(e,t){super(e.message,e,t),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}};me.ReadError=tp;var jm=class extends tt{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e),this.name="UnsupportedProtocolError",this.code="ERR_UNSUPPORTED_PROTOCOL"}};me.UnsupportedProtocolError=jm;var U9=["socket","connect","continue","information","upgrade","timeout"],qm=class extends XO.Duplex{constructor(e,t={},n){super({autoDestroy:!1,highWaterMark:0}),this[Uc]=0,this[qc]=0,this.requestInitialized=!1,this[Dm]=new Set,this.redirects=[],this[Wc]=!1,this[Om]=!1,this[ep]=[],this.retryCount=0,this._progressCallbacks=[];let i=()=>this._unlockWrite(),o=()=>this._lockWrite();this.on("pipe",u=>{u.prependListener("data",i),u.on("data",o),u.prependListener("end",i),u.on("end",o)}),this.on("unpipe",u=>{u.off("data",i),u.off("data",o),u.off("end",i),u.off("end",o)}),this.on("pipe",u=>{u instanceof iS.IncomingMessage&&(this.options.headers={...u.headers,...this.options.headers})});let{json:s,body:a,form:c}=t;if((s||a||c)&&this._lockWrite(),me.kIsNormalizedAlready in t)this.options=t;else try{this.options=this.constructor.normalizeArguments(e,t,n)}catch(u){x.default.nodeStream(t.body)&&t.body.destroy(),this.destroy(u);return}(async()=>{var u;try{this.options.body instanceof b9.ReadStream&&await N9(this.options.body);let{url:l}=this.options;if(!l)throw new TypeError("Missing `url` property");if(this.requestUrl=l.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed){(u=this[Et])===null||u===void 0||u.destroy();return}for(let p of this[ep])p();this[ep].length=0,this.requestInitialized=!0}catch(l){if(l instanceof tt){this._beforeError(l);return}this.destroyed||this.destroy(l)}})()}static normalizeArguments(e,t,n){var i,o,s,a,c;let u=t;if(x.default.object(e)&&!x.default.urlInstance(e))t={...n,...e,...t};else{if(e&&t&&t.url!==void 0)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");t={...n,...t},e!==void 0&&(t.url=e),x.default.urlInstance(t.url)&&(t.url=new Io.URL(t.url.toString()))}if(t.cache===!1&&(t.cache=void 0),t.dnsCache===!1&&(t.dnsCache=void 0),x.assert.any([x.default.string,x.default.undefined],t.method),x.assert.any([x.default.object,x.default.undefined],t.headers),x.assert.any([x.default.string,x.default.urlInstance,x.default.undefined],t.prefixUrl),x.assert.any([x.default.object,x.default.undefined],t.cookieJar),x.assert.any([x.default.object,x.default.string,x.default.undefined],t.searchParams),x.assert.any([x.default.object,x.default.string,x.default.undefined],t.cache),x.assert.any([x.default.object,x.default.number,x.default.undefined],t.timeout),x.assert.any([x.default.object,x.default.undefined],t.context),x.assert.any([x.default.object,x.default.undefined],t.hooks),x.assert.any([x.default.boolean,x.default.undefined],t.decompress),x.assert.any([x.default.boolean,x.default.undefined],t.ignoreInvalidCookies),x.assert.any([x.default.boolean,x.default.undefined],t.followRedirect),x.assert.any([x.default.number,x.default.undefined],t.maxRedirects),x.assert.any([x.default.boolean,x.default.undefined],t.throwHttpErrors),x.assert.any([x.default.boolean,x.default.undefined],t.http2),x.assert.any([x.default.boolean,x.default.undefined],t.allowGetBody),x.assert.any([x.default.string,x.default.undefined],t.localAddress),x.assert.any([nM.isDnsLookupIpVersion,x.default.undefined],t.dnsLookupIpVersion),x.assert.any([x.default.object,x.default.undefined],t.https),x.assert.any([x.default.boolean,x.default.undefined],t.rejectUnauthorized),t.https&&(x.assert.any([x.default.boolean,x.default.undefined],t.https.rejectUnauthorized),x.assert.any([x.default.function_,x.default.undefined],t.https.checkServerIdentity),x.assert.any([x.default.string,x.default.object,x.default.array,x.default.undefined],t.https.certificateAuthority),x.assert.any([x.default.string,x.default.object,x.default.array,x.default.undefined],t.https.key),x.assert.any([x.default.string,x.default.object,x.default.array,x.default.undefined],t.https.certificate),x.assert.any([x.default.string,x.default.undefined],t.https.passphrase),x.assert.any([x.default.string,x.default.buffer,x.default.array,x.default.undefined],t.https.pfx)),x.assert.any([x.default.object,x.default.undefined],t.cacheOptions),x.default.string(t.method)?t.method=t.method.toUpperCase():t.method="GET",t.headers===n?.headers?t.headers={...t.headers}:t.headers=x9({...n?.headers,...t.headers}),"slashes"in t)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in t)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in t&&t.searchParams&&t.searchParams!==n?.searchParams){let f;if(x.default.string(t.searchParams)||t.searchParams instanceof Io.URLSearchParams)f=new Io.URLSearchParams(t.searchParams);else{M9(t.searchParams),f=new Io.URLSearchParams;for(let h in t.searchParams){let m=t.searchParams[h];m===null?f.append(h,""):m!==void 0&&f.append(h,m)}}(i=n?.searchParams)===null||i===void 0||i.forEach((h,m)=>{f.has(m)||f.append(m,h)}),t.searchParams=f}if(t.username=(o=t.username)!==null&&o!==void 0?o:"",t.password=(s=t.password)!==null&&s!==void 0?s:"",x.default.undefined(t.prefixUrl)?t.prefixUrl=(a=n?.prefixUrl)!==null&&a!==void 0?a:"":(t.prefixUrl=t.prefixUrl.toString(),t.prefixUrl!==""&&!t.prefixUrl.endsWith("/")&&(t.prefixUrl+="/")),x.default.string(t.url)){if(t.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");t.url=rM.default(t.prefixUrl+t.url,t)}else(x.default.undefined(t.url)&&t.prefixUrl!==""||t.protocol)&&(t.url=rM.default(t.prefixUrl,t));if(t.url){"port"in t&&delete t.port;let{prefixUrl:f}=t;Object.defineProperty(t,"prefixUrl",{set:m=>{let y=t.url;if(!y.href.startsWith(m))throw new Error(`Cannot change \`prefixUrl\` from ${f} to ${m}: ${y.href}`);t.url=new Io.URL(m+y.href.slice(f.length)),f=m},get:()=>f});let{protocol:h}=t.url;if(h==="unix:"&&(h="http:",t.url=new Io.URL(`http://unix${t.url.pathname}${t.url.search}`)),t.searchParams&&(t.url.search=t.searchParams.toString()),h!=="http:"&&h!=="https:")throw new jm(t);t.username===""?t.username=t.url.username:t.url.username=t.username,t.password===""?t.password=t.url.password:t.url.password=t.password}let{cookieJar:l}=t;if(l){let{setCookie:f,getCookieString:h}=l;x.assert.function_(f),x.assert.function_(h),f.length===4&&h.length===0&&(f=YO.promisify(f.bind(t.cookieJar)),h=YO.promisify(h.bind(t.cookieJar)),t.cookieJar={setCookie:f,getCookieString:h})}let{cache:p}=t;if(p&&(aS.has(p)||aS.set(p,new ZO((f,h)=>{let m=f[Et](f,h);return x.default.promise(m)&&(m.once=(y,w)=>{if(y==="error")m.catch(w);else if(y==="abort")(async()=>{try{(await m).once("abort",w)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${y}`);return m}),m},p))),t.cacheOptions={...t.cacheOptions},t.dnsCache===!0)oS||(oS=new w9.default),t.dnsCache=oS;else if(!x.default.undefined(t.dnsCache)&&!t.dnsCache.lookup)throw new TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${x.default(t.dnsCache)}`);x.default.number(t.timeout)?t.timeout={request:t.timeout}:n&&t.timeout!==n.timeout?t.timeout={...n.timeout,...t.timeout}:t.timeout={...t.timeout},t.context||(t.context={});let d=t.hooks===n?.hooks;t.hooks={...t.hooks};for(let f of me.knownHookEvents)if(f in t.hooks)if(x.default.array(t.hooks[f]))t.hooks[f]=[...t.hooks[f]];else throw new TypeError(`Parameter \`${f}\` must be an Array, got ${x.default(t.hooks[f])}`);else t.hooks[f]=[];if(n&&!d)for(let f of me.knownHookEvents)n.hooks[f].length>0&&(t.hooks[f]=[...n.hooks[f],...t.hooks[f]]);if("family"in t&&xo.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),n?.https&&(t.https={...n.https,...t.https}),"rejectUnauthorized"in t&&xo.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in t&&xo.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in t&&xo.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in t&&xo.default('"options.key" was never documented, please use "options.https.key"'),"cert"in t&&xo.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in t&&xo.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in t&&xo.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in t)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(t.agent){for(let f in t.agent)if(f!=="http"&&f!=="https"&&f!=="http2")throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${f}\``)}return t.maxRedirects=(c=t.maxRedirects)!==null&&c!==void 0?c:0,me.setNonEnumerableProperties([n,u],t),k9.default(t,n)}_lockWrite(){let e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:e}=this,{headers:t}=e,n=!x.default.undefined(e.form),i=!x.default.undefined(e.json),o=!x.default.undefined(e.body),s=n||i||o,a=me.withoutBody.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=a,s){if(a)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([o,n,i].filter(c=>c).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(o&&!(e.body instanceof XO.Readable)&&!x.default.string(e.body)&&!x.default.buffer(e.body)&&!eM.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(n&&!x.default.object(e.form))throw new TypeError("The `form` option must be an Object");{let c=!x.default.string(t["content-type"]);o?(eM.default(e.body)&&c&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`),this[Co]=e.body):n?(c&&(t["content-type"]="application/x-www-form-urlencoded"),this[Co]=new Io.URLSearchParams(e.form).toString()):(c&&(t["content-type"]="application/json"),this[Co]=e.stringifyJson(e.json));let u=await C9.default(this[Co],e.headers);x.default.undefined(t["content-length"])&&x.default.undefined(t["transfer-encoding"])&&!a&&!x.default.undefined(u)&&(t["content-length"]=String(u))}}else a?this._lockWrite():this._unlockWrite();this[jc]=Number(t["content-length"])||void 0}async _onResponseBase(e){let{options:t}=this,{url:n}=t;this[aM]=e,t.decompress&&(e=S9(e));let i=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:QO.STATUS_CODES[i],o.url=t.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=e.fromCache||!1,o.ip=this.ip,o.retryCount=this.retryCount,this[oM]=o.isFromCache,this[Bc]=Number(e.headers["content-length"])||void 0,this[Mm]=e,e.once("end",()=>{this[Bc]=this[Uc],this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{e.destroy(),this._beforeError(new tp(a,this))}),e.once("aborted",()=>{this._beforeError(new tp({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let s=e.headers["set-cookie"];if(x.default.object(t.cookieJar)&&s){let a=s.map(async c=>t.cookieJar.setCookie(c,n.toString()));t.ignoreInvalidCookies&&(a=a.map(async c=>c.catch(()=>{})));try{await Promise.all(a)}catch(c){this._beforeError(c);return}}if(t.followRedirect&&e.headers.location&&F9.has(i)){if(e.resume(),this[Et]&&(this[sS](),delete this[Et],this[iM]()),(i===303&&t.method!=="GET"&&t.method!=="HEAD"||!t.methodRewriting)&&(t.method="GET","body"in t&&delete t.body,"json"in t&&delete t.json,"form"in t&&delete t.form,this[Co]=void 0,delete t.headers["content-length"]),this.redirects.length>=t.maxRedirects){this._beforeError(new Lm(this));return}try{let p=function(d){return d.protocol==="unix:"||d.hostname==="unix"},c=Buffer.from(e.headers.location,"binary").toString(),u=new Io.URL(c,n),l=u.toString();if(decodeURI(l),!p(n)&&p(u)){this._beforeError(new tt("Cannot redirect to UNIX socket",{},this));return}u.hostname!==n.hostname||u.port!==n.port?("host"in t.headers&&delete t.headers.host,"cookie"in t.headers&&delete t.headers.cookie,"authorization"in t.headers&&delete t.headers.authorization,(t.username||t.password)&&(t.username="",t.password="")):(u.username=t.username,u.password=t.password),this.redirects.push(l),t.url=u;for(let d of t.hooks.beforeRedirect)await d(t,o);this.emit("redirect",o,t),await this._makeRequest()}catch(c){this._beforeError(c);return}return}if(t.isStream&&t.throwHttpErrors&&!A9.isResponseOk(o)){this._beforeError(new Nm(o));return}e.on("readable",()=>{this[Om]&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this.emit("response",e);for(let a of this[Dm])if(!a.headersSent){for(let c in e.headers){let u=t.decompress?c!=="content-encoding":!0,l=e.headers[c];u&&a.setHeader(c,l)}a.statusCode=i}}async _onResponse(e){try{await this._onResponseBase(e)}catch(t){this._beforeError(t)}}_onRequest(e){let{options:t}=this,{timeout:n,url:i}=t;_9.default(e),this[sS]=tM.default(e,n,i);let o=t.cache?"cacheableResponse":"response";e.once(o,c=>{this._onResponse(c)}),e.once("error",c=>{var u;e.destroy(),(u=e.res)===null||u===void 0||u.removeAllListeners("end"),c=c instanceof tM.TimeoutError?new Um(c,this.timings,this):new tt(c.message,c,this),this._beforeError(c)}),this[iM]=P9.default(e,this,U9),this[Et]=e,this.emit("uploadProgress",this.uploadProgress);let s=this[Co],a=this.redirects.length===0?this:e;x.default.nodeStream(s)?(s.pipe(a),s.once("error",c=>{this._beforeError(new Bm(c,this))})):(this._unlockWrite(),x.default.undefined(s)?(this._cannotHaveBody||this._noPipe)&&(a.end(),this._lockWrite()):(this._writeRequest(s,void 0,()=>{}),a.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,t){return new Promise((n,i)=>{Object.assign(t,T9.default(e)),delete t.url;let o,s=aS.get(t.cache)(t,async a=>{a._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",a),n(a)});t.url=e,s.once("error",i),s.once("request",async a=>{o=a,n(o)})})}async _makeRequest(){var e,t,n,i,o;let{options:s}=this,{headers:a}=s;for(let w in a)if(x.default.undefined(a[w]))delete a[w];else if(x.default.null_(a[w]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${w}\` header`);if(s.decompress&&x.default.undefined(a["accept-encoding"])&&(a["accept-encoding"]=O9?"gzip, deflate, br":"gzip, deflate"),s.cookieJar){let w=await s.cookieJar.getCookieString(s.url.toString());x.default.nonEmptyString(w)&&(s.headers.cookie=w)}for(let w of s.hooks.beforeRequest){let k=await w(s);if(!x.default.undefined(k)){s.request=()=>k;break}}s.body&&this[Co]!==s.body&&(this[Co]=s.body);let{agent:c,request:u,timeout:l,url:p}=s;if(s.dnsCache&&!("lookup"in s)&&(s.lookup=s.dnsCache.lookup),p.hostname==="unix"){let w=/(?<socketPath>.+?):(?<path>.+)/.exec(`${p.pathname}${p.search}`);if(w?.groups){let{socketPath:k,path:D}=w.groups;Object.assign(s,{socketPath:k,path:D,host:""})}}let d=p.protocol==="https:",f;s.http2?f=I9.auto:f=d?v9.request:QO.request;let h=(e=s.request)!==null&&e!==void 0?e:f,m=s.cache?this._createCacheableRequest:h;c&&!s.http2&&(s.agent=c[d?"https":"http"]),s[Et]=h,delete s.request,delete s.timeout;let y=s;if(y.shared=(t=s.cacheOptions)===null||t===void 0?void 0:t.shared,y.cacheHeuristic=(n=s.cacheOptions)===null||n===void 0?void 0:n.cacheHeuristic,y.immutableMinTimeToLive=(i=s.cacheOptions)===null||i===void 0?void 0:i.immutableMinTimeToLive,y.ignoreCargoCult=(o=s.cacheOptions)===null||o===void 0?void 0:o.ignoreCargoCult,s.dnsLookupIpVersion!==void 0)try{y.family=nM.dnsLookupIpVersionToFamily(s.dnsLookupIpVersion)}catch{throw new Error("Invalid `dnsLookupIpVersion` option value")}s.https&&("rejectUnauthorized"in s.https&&(y.rejectUnauthorized=s.https.rejectUnauthorized),s.https.checkServerIdentity&&(y.checkServerIdentity=s.https.checkServerIdentity),s.https.certificateAuthority&&(y.ca=s.https.certificateAuthority),s.https.certificate&&(y.cert=s.https.certificate),s.https.key&&(y.key=s.https.key),s.https.passphrase&&(y.passphrase=s.https.passphrase),s.https.pfx&&(y.pfx=s.https.pfx));try{let w=await m(p,y);x.default.undefined(w)&&(w=f(p,y)),s.request=u,s.timeout=l,s.agent=c,s.https&&("rejectUnauthorized"in s.https&&delete y.rejectUnauthorized,s.https.checkServerIdentity&&delete y.checkServerIdentity,s.https.certificateAuthority&&delete y.ca,s.https.certificate&&delete y.cert,s.https.key&&delete y.key,s.https.passphrase&&delete y.passphrase,s.https.pfx&&delete y.pfx),L9(w)?this._onRequest(w):this.writable?(this.once("finish",()=>{this._onResponse(w)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(w)}catch(w){throw w instanceof ZO.CacheError?new Fm(w,this):new tt(w.message,w,this)}}async _error(e){try{for(let t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new tt(t.message,t,this)}this.destroy(e)}_beforeError(e){if(this[Wc])return;let{options:t}=this,n=this.retryCount+1;this[Wc]=!0,e instanceof tt||(e=new tt(e.message,e,this));let i=e,{response:o}=i;(async()=>{if(o&&!o.body){o.setEncoding(this._readableState.encoding);try{o.rawBody=await R9.default(o),o.body=o.rawBody.toString()}catch{}}if(this.listenerCount("retry")!==0){let s;try{let a;o&&"retry-after"in o.headers&&(a=Number(o.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(o.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3),s=await t.retry.calculateDelay({attemptCount:n,retryOptions:t.retry,error:i,retryAfter:a,computedValue:D9.default({attemptCount:n,retryOptions:t.retry,error:i,retryAfter:a,computedValue:0})})}catch(a){this._error(new tt(a.message,a,this));return}if(s){let a=async()=>{try{for(let c of this.options.hooks.beforeRetry)await c(this.options,i,n)}catch(c){this._error(new tt(c.message,e,this));return}this.destroyed||(this.destroy(),this.emit("retry",n,e))};this[cM]=setTimeout(a,s);return}}this._error(i)})()}_read(){this[Om]=!0;let e=this[Mm];if(e&&!this[Wc]){e.readableLength&&(this[Om]=!1);let t;for(;(t=e.read())!==null;){this[Uc]+=t.length,this[sM]=!0;let n=this.downloadProgress;n.percent<1&&this.emit("downloadProgress",n),this.push(t)}}}_write(e,t,n){let i=()=>{this._writeRequest(e,t,n)};this.requestInitialized?i():this[ep].push(i)}_writeRequest(e,t,n){this[Et].destroyed||(this._progressCallbacks.push(()=>{this[qc]+=Buffer.byteLength(e,t);let i=this.uploadProgress;i.percent<1&&this.emit("uploadProgress",i)}),this[Et].write(e,t,i=>{!i&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),n(i)}))}_final(e){let t=()=>{for(;this._progressCallbacks.length!==0;)this._progressCallbacks.shift()();if(!(Et in this)){e();return}if(this[Et].destroyed){e();return}this[Et].end(n=>{n||(this[jc]=this[qc],this.emit("uploadProgress",this.uploadProgress),this[Et].emit("upload-complete")),e(n)})};this.requestInitialized?t():this[ep].push(t)}_destroy(e,t){var n;this[Wc]=!0,clearTimeout(this[cM]),Et in this&&(this[sS](),!((n=this[Mm])===null||n===void 0)&&n.complete||this[Et].destroy()),e!==null&&!x.default.undefined(e)&&!(e instanceof tt)&&(e=new tt(e.message,e,this)),t(e)}get _isAboutToError(){return this[Wc]}get ip(){var e;return(e=this.socket)===null||e===void 0?void 0:e.remoteAddress}get aborted(){var e,t,n;return((t=(e=this[Et])===null||e===void 0?void 0:e.destroyed)!==null&&t!==void 0?t:this.destroyed)&&!(!((n=this[aM])===null||n===void 0)&&n.complete)}get socket(){var e,t;return(t=(e=this[Et])===null||e===void 0?void 0:e.socket)!==null&&t!==void 0?t:void 0}get downloadProgress(){let e;return this[Bc]?e=this[Uc]/this[Bc]:this[Bc]===this[Uc]?e=1:e=0,{percent:e,transferred:this[Uc],total:this[Bc]}}get uploadProgress(){let e;return this[jc]?e=this[qc]/this[jc]:this[jc]===this[qc]?e=1:e=0,{percent:e,transferred:this[qc],total:this[jc]}}get timings(){var e;return(e=this[Et])===null||e===void 0?void 0:e.timings}get isFromCache(){return this[oM]}pipe(e,t){if(this[sM])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof iS.ServerResponse&&this[Dm].add(e),super.pipe(e,t)}unpipe(e){return e instanceof iS.ServerResponse&&this[Dm].delete(e),super.unpipe(e),this}};me.default=qm});var np=b(ln=>{"use strict";var j9=ln&&ln.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),q9=ln&&ln.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&j9(e,r,t)};Object.defineProperty(ln,"__esModule",{value:!0});ln.CancelError=ln.ParseError=void 0;var uM=rp(),cS=class extends uM.RequestError{constructor(e,t){let{options:n}=t.request;super(`${e.message} in "${n.url.toString()}"`,e,t.request),this.name="ParseError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_BODY_PARSE_FAILURE":this.code}};ln.ParseError=cS;var uS=class extends uM.RequestError{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};ln.CancelError=uS;q9(rp(),ln)});var pM=b(lS=>{"use strict";Object.defineProperty(lS,"__esModule",{value:!0});var lM=np(),W9=(r,e,t,n)=>{let{rawBody:i}=r;try{if(e==="text")return i.toString(n);if(e==="json")return i.length===0?"":t(i.toString());if(e==="buffer")return i;throw new lM.ParseError({message:`Unknown body type '${e}'`,name:"Error"},r)}catch(o){throw new lM.ParseError(o,r)}};lS.default=W9});var pS=b(Po=>{"use strict";var V9=Po&&Po.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),$9=Po&&Po.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&V9(e,r,t)};Object.defineProperty(Po,"__esModule",{value:!0});var H9=require("events"),G9=Li(),z9=u1(),Wm=np(),dM=pM(),fM=rp(),K9=zw(),J9=eS(),hM=tS(),Y9=["request","response","redirect","uploadProgress","downloadProgress"];function mM(r){let e,t,n=new H9.EventEmitter,i=new z9((s,a,c)=>{let u=l=>{let p=new fM.default(void 0,r);p.retryCount=l,p._noPipe=!0,c(()=>p.destroy()),c.shouldReject=!1,c(()=>a(new Wm.CancelError(p))),e=p,p.once("response",async h=>{var m;if(h.retryCount=l,h.request.aborted)return;let y;try{y=await J9.default(p),h.rawBody=y}catch{return}if(p._isAboutToError)return;let w=((m=h.headers["content-encoding"])!==null&&m!==void 0?m:"").toLowerCase(),k=["gzip","deflate","br"].includes(w),{options:D}=p;if(k&&!D.decompress)h.body=y;else try{h.body=dM.default(h,D.responseType,D.parseJson,D.encoding)}catch(Q){if(h.body=y.toString(),hM.isResponseOk(h)){p._beforeError(Q);return}}try{for(let[Q,F]of D.hooks.afterResponse.entries())h=await F(h,async te=>{let H=fM.default.normalizeArguments(void 0,{...te,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},D);H.hooks.afterResponse=H.hooks.afterResponse.slice(0,Q);for(let Z of H.hooks.beforeRetry)await Z(H);let B=mM(H);return c(()=>{B.catch(()=>{}),B.cancel()}),B})}catch(Q){p._beforeError(new Wm.RequestError(Q.message,Q,p));return}if(t=h,!hM.isResponseOk(h)){p._beforeError(new Wm.HTTPError(h));return}p.destroy(),s(p.options.resolveBodyOnly?h.body:h)});let d=h=>{if(i.isCanceled)return;let{options:m}=p;if(h instanceof Wm.HTTPError&&!m.throwHttpErrors){let{response:y}=h;s(p.options.resolveBodyOnly?y.body:y);return}a(h)};p.once("error",d);let f=p.options.body;p.once("retry",(h,m)=>{var y,w;if(f===((y=m.request)===null||y===void 0?void 0:y.options.body)&&G9.default.nodeStream((w=m.request)===null||w===void 0?void 0:w.options.body)){d(m);return}u(h)}),K9.default(p,n,Y9)};u(0)});i.on=(s,a)=>(n.on(s,a),i);let o=s=>{let a=(async()=>{await i;let{options:c}=t.request;return dM.default(t,s,c.parseJson,c.encoding)})();return Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)),a};return i.json=()=>{let{headers:s}=e.options;return!e.writableFinished&&s.accept===void 0&&(s.accept="application/json"),o("json")},i.buffer=()=>o("buffer"),i.text=()=>o("text"),i}Po.default=mM;$9(np(),Po)});var gM=b(dS=>{"use strict";Object.defineProperty(dS,"__esModule",{value:!0});var X9=np();function Q9(r,...e){let t=(async()=>{if(r instanceof X9.RequestError)try{for(let i of e)if(i)for(let o of i)r=await o(r)}catch(i){r=i}throw r})(),n=()=>t;return t.json=n,t.text=n,t.buffer=n,t.on=n,t}dS.default=Q9});var vM=b(fS=>{"use strict";Object.defineProperty(fS,"__esModule",{value:!0});var yM=Li();function bM(r){for(let e of Object.values(r))(yM.default.plainObject(e)||yM.default.array(e))&&bM(e);return Object.freeze(r)}fS.default=bM});var wM=b(_M=>{"use strict";Object.defineProperty(_M,"__esModule",{value:!0})});var hS=b(zr=>{"use strict";var Z9=zr&&zr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),e7=zr&&zr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Z9(e,r,t)};Object.defineProperty(zr,"__esModule",{value:!0});zr.defaultHandler=void 0;var SM=Li(),Gr=pS(),t7=gM(),$m=rp(),r7=vM(),n7={RequestError:Gr.RequestError,CacheError:Gr.CacheError,ReadError:Gr.ReadError,HTTPError:Gr.HTTPError,MaxRedirectsError:Gr.MaxRedirectsError,TimeoutError:Gr.TimeoutError,ParseError:Gr.ParseError,CancelError:Gr.CancelError,UnsupportedProtocolError:Gr.UnsupportedProtocolError,UploadError:Gr.UploadError},i7=async r=>new Promise(e=>{setTimeout(e,r)}),{normalizeArguments:Vm}=$m.default,IM=(...r)=>{let e;for(let t of r)e=Vm(void 0,t,e);return e},o7=r=>r.isStream?new $m.default(void 0,r):Gr.default(r),s7=r=>"defaults"in r&&"options"in r.defaults,a7=["get","post","put","patch","head","delete"];zr.defaultHandler=(r,e)=>e(r);var xM=(r,e)=>{if(r)for(let t of r)t(e)},CM=r=>{r._rawHandlers=r.handlers,r.handlers=r.handlers.map(n=>(i,o)=>{let s,a=n(i,c=>(s=o(c),s));if(a!==s&&!i.isStream&&s){let c=a,{then:u,catch:l,finally:p}=c;Object.setPrototypeOf(c,Object.getPrototypeOf(s)),Object.defineProperties(c,Object.getOwnPropertyDescriptors(s)),c.then=u,c.catch=l,c.finally=p}return a});let e=(n,i={},o)=>{var s,a;let c=0,u=l=>r.handlers[c++](l,c===r.handlers.length?o7:u);if(SM.default.plainObject(n)){let l={...n,...i};$m.setNonEnumerableProperties([n,i],l),i=l,n=void 0}try{let l;try{xM(r.options.hooks.init,i),xM((s=i.hooks)===null||s===void 0?void 0:s.init,i)}catch(d){l=d}let p=Vm(n,i,o??r.options);if(p[$m.kIsNormalizedAlready]=!0,l)throw new Gr.RequestError(l.message,l,p);return u(p)}catch(l){if(i.isStream)throw l;return t7.default(l,r.options.hooks.beforeError,(a=i.hooks)===null||a===void 0?void 0:a.beforeError)}};e.extend=(...n)=>{let i=[r.options],o=[...r._rawHandlers],s;for(let a of n)s7(a)?(i.push(a.defaults.options),o.push(...a.defaults._rawHandlers),s=a.defaults.mutableDefaults):(i.push(a),"handlers"in a&&o.push(...a.handlers),s=a.mutableDefaults);return o=o.filter(a=>a!==zr.defaultHandler),o.length===0&&o.push(zr.defaultHandler),CM({options:IM(...i),handlers:o,mutableDefaults:!!s})};let t=async function*(n,i){let o=Vm(n,i,r.options);o.resolveBodyOnly=!1;let s=o.pagination;if(!SM.default.object(s))throw new TypeError("`options.pagination` must be implemented");let a=[],{countLimit:c}=s,u=0;for(;u<s.requestLimit;){u!==0&&await i7(s.backoff);let l=await e(void 0,void 0,o),p=await s.transform(l),d=[];for(let h of p)if(s.filter(h,a,d)&&(!s.shouldContinue(h,a,d)||(yield h,s.stackAllItems&&a.push(h),d.push(h),--c<=0)))return;let f=s.paginate(l,a,d);if(f===!1)return;f===l.request.options?o=l.request.options:f!==void 0&&(o=Vm(void 0,f,o)),u++}};e.paginate=t,e.paginate.all=async(n,i)=>{let o=[];for await(let s of t(n,i))o.push(s);return o},e.paginate.each=t,e.stream=(n,i)=>e(n,{...i,isStream:!0});for(let n of a7)e[n]=(i,o)=>e(i,{...o,method:n}),e.stream[n]=(i,o)=>e(i,{...o,method:n,isStream:!0});return Object.assign(e,n7),Object.defineProperty(e,"defaults",{value:r.mutableDefaults?r:r7.default(r),writable:r.mutableDefaults,configurable:r.mutableDefaults,enumerable:!0}),e.mergeOptions=IM,e};zr.default=CM;e7(wM(),zr)});var EM=b((Ni,Hm)=>{"use strict";var c7=Ni&&Ni.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),PM=Ni&&Ni.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&c7(e,r,t)};Object.defineProperty(Ni,"__esModule",{value:!0});var u7=require("url"),TM=hS(),l7={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:r})=>r},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:r=>r.request.options.responseType==="json"?r.body:JSON.parse(r.body),paginate:r=>{if(!Reflect.has(r.headers,"link"))return!1;let e=r.headers.link.split(","),t;for(let n of e){let i=n.split(";");if(i[1].includes("next")){t=i[0].trimStart().trim(),t=t.slice(1,-1);break}}return t?{url:new u7.URL(t)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:r=>JSON.parse(r),stringifyJson:r=>JSON.stringify(r),cacheOptions:{}},handlers:[TM.defaultHandler],mutableDefaults:!1},mS=TM.default(l7);Ni.default=mS;Hm.exports=mS;Hm.exports.default=mS;Hm.exports.__esModule=!0;PM(hS(),Ni);PM(pS(),Ni)});async function gS(){if(BM.default.platform!=="darwin")throw new Error("macOS only");let{stdout:r}=await h7("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(r)?.groups.id??"com.apple.Safari"}var FM,BM,UM,h7,jM=Ru(()=>{FM=require("node:util"),BM=S(require("node:process"),1),UM=require("node:child_process"),h7=(0,FM.promisify)(UM.execFile)});async function VM(r,{humanReadableOutput:e=!0}={}){if(qM.default.platform!=="darwin")throw new Error("macOS only");let t=e?[]:["-ss"],{stdout:n}=await m7("osascript",["-e",r,t]);return n.trim()}var qM,WM,yS,m7,$M=Ru(()=>{qM=S(require("node:process"),1),WM=require("node:util"),yS=require("node:child_process"),m7=(0,WM.promisify)(yS.execFile)});async function bS(r){return VM(`tell application "Finder" to set app_path to application file id "${r}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var HM=Ru(()=>{$M()});async function vS(r=g7){let{stdout:e}=await r("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),t=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!t)throw new Km(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=t.groups,i=y7[n];if(!i)throw new Km(`Unknown browser ID: ${n}`);return i}var GM,zM,g7,y7,Km,KM=Ru(()=>{GM=require("node:util"),zM=require("node:child_process"),g7=(0,GM.promisify)(zM.execFile),y7={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},Km=class extends Error{}});var QM={};PU(QM,{default:()=>XM});async function XM(){if(Jm.default.platform==="darwin"){let r=await gS();return{name:await bS(r),id:r}}if(Jm.default.platform==="linux"){let{stdout:r}=await b7("xdg-mime",["query","default","x-scheme-handler/http"]),e=r.trim();return{name:v7(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(Jm.default.platform==="win32")return vS();throw new Error("Only macOS, Linux, and Windows are supported")}var JM,Jm,YM,b7,v7,ZM=Ru(()=>{JM=require("node:util"),Jm=S(require("node:process"),1),YM=require("node:child_process");jM();HM();KM();b7=(0,JM.promisify)(YM.execFile),v7=r=>r.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase())});var oL=b((tme,iL)=>{"use strict";function w7(r){var e=new r,t=e;function n(){var o=e;return o.next?e=o.next:(e=new r,t=e),o.next=null,o}function i(o){t.next=o,t=o}return{get:n,release:i}}iL.exports=w7});var aL=b((rme,wS)=>{"use strict";var S7=oL();function sL(r,e,t){if(typeof r=="function"&&(t=e,e=r,r=null),t<1)throw new Error("fastqueue concurrency must be greater than 1");var n=S7(I7),i=null,o=null,s=0,a=null,c={push:m,drain:Yr,saturated:Yr,pause:l,paused:!1,concurrency:t,running:u,resume:f,idle:h,length:p,getQueue:d,unshift:y,empty:Yr,kill:k,killAndDrain:D,error:Q};return c;function u(){return s}function l(){c.paused=!0}function p(){for(var F=i,te=0;F;)F=F.next,te++;return te}function d(){for(var F=i,te=[];F;)te.push(F.value),F=F.next;return te}function f(){if(c.paused){c.paused=!1;for(var F=0;F<c.concurrency;F++)s++,w()}}function h(){return s===0&&c.length()===0}function m(F,te){var H=n.get();H.context=r,H.release=w,H.value=F,H.callback=te||Yr,H.errorHandler=a,s===c.concurrency||c.paused?o?(o.next=H,o=H):(i=H,o=H,c.saturated()):(s++,e.call(r,H.value,H.worked))}function y(F,te){var H=n.get();H.context=r,H.release=w,H.value=F,H.callback=te||Yr,s===c.concurrency||c.paused?i?(H.next=i,i=H):(i=H,o=H,c.saturated()):(s++,e.call(r,H.value,H.worked))}function w(F){F&&n.release(F);var te=i;te?c.paused?s--:(o===i&&(o=null),i=te.next,te.next=null,e.call(r,te.value,te.worked),o===null&&c.empty()):--s===0&&c.drain()}function k(){i=null,o=null,c.drain=Yr}function D(){i=null,o=null,c.drain(),c.drain=Yr}function Q(F){a=F}}function Yr(){}function I7(){this.value=null,this.callback=Yr,this.next=null,this.release=Yr,this.context=null,this.errorHandler=null;var r=this;this.worked=function(t,n){var i=r.callback,o=r.errorHandler,s=r.value;r.value=null,r.callback=Yr,r.errorHandler&&o(t,s),i.call(r.context,t,n),r.release(r)}}function x7(r,e,t){typeof r=="function"&&(t=e,e=r,r=null);function n(l,p){e.call(this,l).then(function(d){p(null,d)},p)}var i=sL(r,n,t),o=i.push,s=i.unshift;return i.push=a,i.unshift=c,i.drained=u,i;function a(l){var p=new Promise(function(d,f){o(l,function(h,m){if(h){f(h);return}d(m)})});return p.catch(Yr),p}function c(l){var p=new Promise(function(d,f){s(l,function(h,m){if(h){f(h);return}d(m)})});return p.catch(Yr),p}function u(){if(i.idle())return new Promise(function(d){d()});var l=i.drain,p=new Promise(function(d){i.drain=function(){l(),d()}});return p}}wS.exports=sL;wS.exports.promise=x7});var SS=b((nme,cL)=>{cL.exports=function(r,e){if(typeof r!="string")throw new TypeError("expected path to be a string");if(r==="\\"||r==="/")return"/";var t=r.length;if(t<=1)return r;var n="";if(t>4&&r[3]==="\\"){var i=r[2];(i==="?"||i===".")&&r.slice(0,2)==="\\\\"&&(r=r.slice(2),n="//")}var o=r.split(/[/\\]+/);return e!==!1&&o[o.length-1]===""&&o.pop(),n+o.join("/")}});var hL=b((dL,fL)=>{"use strict";Object.defineProperty(dL,"__esModule",{value:!0});var pL=jv(),C7=SS(),uL="!",P7={returnIndex:!1},T7=r=>Array.isArray(r)?r:[r],E7=(r,e)=>{if(typeof r=="function")return r;if(typeof r=="string"){let t=pL(r,e);return n=>r===n||t(n)}return r instanceof RegExp?t=>r.test(t):t=>!1},lL=(r,e,t,n)=>{let i=Array.isArray(t),o=i?t[0]:t;if(!i&&typeof o!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(o));let s=C7(o,!1);for(let c=0;c<e.length;c++){let u=e[c];if(u(s))return n?-1:!1}let a=i&&[s].concat(t.slice(1));for(let c=0;c<r.length;c++){let u=r[c];if(i?u(...a):u(s))return n?c:!0}return n?-1:!1},IS=(r,e,t=P7)=>{if(r==null)throw new TypeError("anymatch: specify first argument");let n=typeof t=="boolean"?{returnIndex:t}:t,i=n.returnIndex||!1,o=T7(r),s=o.filter(c=>typeof c=="string"&&c.charAt(0)===uL).map(c=>c.slice(1)).map(c=>pL(c,n)),a=o.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==uL).map(c=>E7(c,n));return e==null?(c,u=!1)=>lL(a,s,c,typeof u=="boolean"?u:!1):lL(a,s,e,i)};IS.default=IS;fL.exports=IS});var gL=b((ime,mL)=>{mL.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var bL=b((ome,yL)=>{yL.exports=typeof process<"u"&&typeof process.nextTick=="function"?process.nextTick.bind(process):gL()});var _L=b((ame,vL)=>{vL.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var IL=b((ume,SL)=>{var wL=_L();SL.exports=class{constructor(e){this.hwm=e||16,this.head=new wL(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let t=this.head;this.head=t.next=new wL(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var GL=b((lme,HL)=>{var{EventEmitter:R7}=require("events"),ng=new Error("Stream was destroyed"),xS=new Error("Premature close"),EL=bL(),RL=IL(),st=(1<<27)-1,$s=1,kS=2,qs=4,sp=8,AL=st^$s,A7=st^kS,fp=16,ap=32,Yc=64,Ro=128,cp=256,DS=512,Ws=1024,CS=2048,OS=4096,MS=8192,pn=16384,Gc=32768,ig=65536,kL=cp|DS,k7=fp|ig,D7=Yc|fp,O7=OS|Ro,M7=st^fp,L7=st^Yc,N7=st^(Yc|ig),F7=st^ig,B7=st^cp,U7=st^(Ro|MS),j7=st^Ws,xL=st^kL,DL=st^Gc,q7=st^ap,Ao=1<<17,Kc=2<<17,hp=4<<17,Vs=8<<17,mp=16<<17,Hs=32<<17,PS=64<<17,zc=128<<17,LS=256<<17,Jc=512<<17,OL=st^(Ao|LS),ML=st^hp,W7=st^Jc,V7=st^mp,$7=st^Vs,LL=st^zc,H7=st^Kc,up=fp|Ao,NL=st^up,NS=pn|Hs,Fi=qs|sp|kS,Pr=Fi|$s,FL=Fi|NS,G7=ML&L7,FS=zc|Gc,z7=FS&NL,BL=Pr|z7,K7=Pr|Ws|pn,CL=Pr|pn|Ro,J7=Pr|Ws|Ro,Y7=Pr|OS|Ro|MS,X7=Pr|fp|Ws|pn|ig,Q7=Fi|Ws|pn,Z7=ap|Pr|Gc|Yc,eJ=Pr|Jc|Hs,tJ=Vs|mp,UL=Vs|Ao,rJ=Vs|mp|Pr|Ao,PL=Pr|Ao|Vs,nJ=hp|Ao,iJ=Ao|LS,oJ=Pr|Jc|UL|Hs,sJ=mp|Fi|Jc|Hs,aJ=Kc|Pr|zc|hp,Qm=Symbol.asyncIterator||Symbol("asyncIterator"),Zm=class{constructor(e,{highWaterMark:t=16384,map:n=null,mapWritable:i,byteLength:o,byteLengthWritable:s}={}){this.stream=e,this.queue=new RL,this.highWaterMark=t,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||o||$L,this.map=i||n,this.afterWrite=lJ.bind(this),this.afterUpdateNextTick=fJ.bind(this)}get ended(){return(this.stream._duplexState&Hs)!==0}push(e){return this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=Vs,!0):(this.stream._duplexState|=tJ,!1)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=$7),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|Jc)&ML}autoBatch(e,t){let n=[],i=this.stream;for(n.push(e);(i._duplexState&PL)===UL;)n.push(i._writableState.shift());if((i._duplexState&Pr)!==0)return t(null);i._writev(n,t)}update(){let e=this.stream;e._duplexState|=Kc;do{for(;(e._duplexState&PL)===Vs;){let t=this.shift();e._duplexState|=iJ,e._write(t,this.afterWrite)}(e._duplexState&nJ)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=H7}updateNonPrimary(){let e=this.stream;if((e._duplexState&oJ)===Jc){e._duplexState=(e._duplexState|Ao)&W7,e._final(uJ.bind(this));return}if((e._duplexState&Fi)===qs){(e._duplexState&FS)===0&&(e._duplexState|=up,e._destroy(jL.bind(this)));return}(e._duplexState&BL)===$s&&(e._duplexState=(e._duplexState|up)&AL,e._open(qL.bind(this)))}continueUpdate(){return(this.stream._duplexState&zc)===0?!1:(this.stream._duplexState&=LL,!0)}updateCallback(){(this.stream._duplexState&aJ)===hp?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&zc)===0&&(this.stream._duplexState|=zc,(this.stream._duplexState&Kc)===0&&EL(this.afterUpdateNextTick))}},TS=class{constructor(e,{highWaterMark:t=16384,map:n=null,mapReadable:i,byteLength:o,byteLengthReadable:s}={}){this.stream=e,this.queue=new RL,this.highWaterMark=t,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=s||o||$L,this.map=i||n,this.pipeTo=null,this.afterRead=pJ.bind(this),this.afterUpdateNextTick=dJ.bind(this)}get ended(){return(this.stream._duplexState&pn)!==0}pipe(e,t){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof t!="function"&&(t=null),this.stream._duplexState|=DS,this.pipeTo=e,this.pipeline=new RS(this.stream,e,t),t&&this.stream.on("error",TL),dp(e))e._writableState.pipeline=this.pipeline,t&&e.on("error",TL),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let n=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",n),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",cJ.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let t=this.stream;return e===null?(this.highWaterMark=0,t._duplexState=(t._duplexState|Ws)&N7,!1):(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),t._duplexState=(t._duplexState|Ro)&F7,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=U7),e}unshift(e){let t=[this.map!==null?this.map(e):e];for(;this.buffered>0;)t.push(this.shift());for(let n=0;n<t.length-1;n++){let i=t[n];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(t[t.length-1])}read(){let e=this.stream;if((e._duplexState&CL)===Ro){let t=this.shift();return this.pipeTo!==null&&this.pipeTo.write(t)===!1&&(e._duplexState&=xL),(e._duplexState&CS)!==0&&e.emit("data",t),t}return null}drain(){let e=this.stream;for(;(e._duplexState&CL)===Ro&&(e._duplexState&kL)!==0;){let t=this.shift();this.pipeTo!==null&&this.pipeTo.write(t)===!1&&(e._duplexState&=xL),(e._duplexState&CS)!==0&&e.emit("data",t)}}update(){let e=this.stream;e._duplexState|=ap;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&X7)===0;)e._duplexState|=k7,e._read(this.afterRead),this.drain();(e._duplexState&Y7)===O7&&(e._duplexState|=MS,e.emit("readable")),(e._duplexState&D7)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=q7}updateNonPrimary(){let e=this.stream;if((e._duplexState&J7)===Ws&&(e._duplexState=(e._duplexState|pn)&j7,e.emit("end"),(e._duplexState&FL)===NS&&(e._duplexState|=qs),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&Fi)===qs){(e._duplexState&FS)===0&&(e._duplexState|=up,e._destroy(jL.bind(this)));return}(e._duplexState&BL)===$s&&(e._duplexState=(e._duplexState|up)&AL,e._open(qL.bind(this)))}continueUpdate(){return(this.stream._duplexState&Gc)===0?!1:(this.stream._duplexState&=DL,!0)}updateCallback(){(this.stream._duplexState&Z7)===Yc?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&Gc)===0&&(this.stream._duplexState|=Gc,(this.stream._duplexState&ap)===0&&EL(this.afterUpdateNextTick))}},ES=class{constructor(e){this.data=null,this.afterTransform=mJ.bind(e),this.afterFinal=null}},RS=class{constructor(e,t,n){this.from=e,this.to=t,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,t){if(t&&(this.error=t),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&pn)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&pn)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function cJ(){this.stream._duplexState|=DS,this.updateCallback()}function uJ(r){let e=this.stream;r&&e.destroy(r),(e._duplexState&Fi)===0&&(e._duplexState|=Hs,e.emit("finish")),(e._duplexState&FL)===NS&&(e._duplexState|=qs),e._duplexState&=OL,(e._duplexState&Kc)===0?this.update():this.updateNextTick()}function jL(r){let e=this.stream;!r&&this.error!==ng&&(r=this.error),r&&e.emit("error",r),e._duplexState|=sp,e.emit("close");let t=e._readableState,n=e._writableState;if(t!==null&&t.pipeline!==null&&t.pipeline.done(e,r),n!==null){for(;n.drains!==null&&n.drains.length>0;)n.drains.shift().resolve(!1);n.pipeline!==null&&n.pipeline.done(e,r)}}function lJ(r){let e=this.stream;r&&e.destroy(r),e._duplexState&=OL,this.drains!==null&&hJ(this.drains),(e._duplexState&rJ)===mp&&(e._duplexState&=V7,(e._duplexState&PS)===PS&&e.emit("drain")),this.updateCallback()}function pJ(r){r&&this.stream.destroy(r),this.stream._duplexState&=M7,this.updateCallback()}function dJ(){(this.stream._duplexState&ap)===0&&(this.stream._duplexState&=DL,this.update())}function fJ(){(this.stream._duplexState&Kc)===0&&(this.stream._duplexState&=LL,this.update())}function hJ(r){for(let e=0;e<r.length;e++)--r[e].writes===0&&(r.shift().resolve(!0),e--)}function qL(r){let e=this.stream;r&&e.destroy(r),(e._duplexState&qs)===0&&((e._duplexState&K7)===0&&(e._duplexState|=Yc),(e._duplexState&eJ)===0&&(e._duplexState|=hp),e.emit("open")),e._duplexState&=NL,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function mJ(r,e){e!=null&&this.push(e),this._writableState.afterWrite(r)}function gJ(r){this._readableState!==null&&(r==="data"&&(this._duplexState|=CS|cp,this._readableState.updateNextTick()),r==="readable"&&(this._duplexState|=OS,this._readableState.updateNextTick())),this._writableState!==null&&r==="drain"&&(this._duplexState|=PS,this._writableState.updateNextTick())}var lp=class extends R7{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",SJ.bind(this))),this.on("newListener",gJ)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&sp)!==0}get destroying(){return(this._duplexState&Fi)!==0}destroy(e){(this._duplexState&Fi)===0&&(e||(e=ng),this._duplexState=(this._duplexState|qs)&G7,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=kS,this._predestroy(),this._duplexState&=A7,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},eg=class r extends lp{constructor(e){super(e),this._duplexState|=$s|Hs,this._readableState=new TS(this,e),e&&(e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick())}_read(e){e(null)}pipe(e,t){return this._readableState.updateNextTick(),this._readableState.pipe(e,t),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTick(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTick(),this._readableState.unshift(e)}resume(){return this._duplexState|=cp,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=B7,this}static _fromAsyncIterator(e,t){let n,i=new r({...t,read(s){e.next().then(o).then(s.bind(null,null)).catch(s)},predestroy(){n=e.return()},destroy(s){if(!n)return s(null);n.then(s.bind(null,null)).catch(s)}});return i;function o(s){s.done?i.push(null):i.push(s.value)}}static from(e,t){if(_J(e))return e;if(e[Qm])return this._fromAsyncIterator(e[Qm](),t);Array.isArray(e)||(e=e===void 0?[]:[e]);let n=0;return new r({...t,read(i){this.push(n===e.length?null:e[n++]),i(null)}})}static isBackpressured(e){return(e._duplexState&Q7)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&cp)===0}[Qm](){let e=this,t=null,n=null,i=null;return this.on("error",u=>{t=u}),this.on("readable",o),this.on("close",s),{[Qm](){return this},next(){return new Promise(function(u,l){n=u,i=l;let p=e.read();p!==null?a(p):(e._duplexState&sp)!==0&&a(null)})},return(){return c(null)},throw(u){return c(u)}};function o(){n!==null&&a(e.read())}function s(){n!==null&&a(null)}function a(u){i!==null&&(t?i(t):u===null&&(e._duplexState&pn)===0?i(ng):n({value:u,done:u===null}),i=n=null)}function c(u){return e.destroy(u),new Promise((l,p)=>{if(e._duplexState&sp)return l({value:void 0,done:!0});e.once("close",function(){u?p(u):l({value:void 0,done:!0})})})}}},tg=class extends lp{constructor(e){super(e),this._duplexState|=$s|pn,this._writableState=new Zm(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&sJ)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let t=e._writableState,i=(IJ(e)?Math.min(1,t.queue.length):t.queue.length)+(e._duplexState&LS?1:0);return i===0?Promise.resolve(!0):(t.drains===null&&(t.drains=[]),new Promise(o=>{t.drains.push({writes:i,resolve:o})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},pp=class extends eg{constructor(e){super(e),this._duplexState=$s,this._writableState=new Zm(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},rg=class extends pp{constructor(e){super(e),this._transformState=new ES(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,t){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let t=this._transformState.data;this._transformState.data=null,e(null),this._transform(t,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,t){t(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(yJ.bind(this))}},AS=class extends rg{};function yJ(r,e){let t=this._transformState.afterFinal;if(r)return t(r);e!=null&&this.push(e),this.push(null),t(null)}function bJ(...r){return new Promise((e,t)=>WL(...r,n=>{if(n)return t(n);e()}))}function WL(r,...e){let t=Array.isArray(r)?[...r,...e]:[r,...e],n=t.length&&typeof t[t.length-1]=="function"?t.pop():null;if(t.length<2)throw new Error("Pipeline requires at least 2 streams");let i=t[0],o=null,s=null;for(let u=1;u<t.length;u++)o=t[u],dp(i)?i.pipe(o,c):(a(i,!0,u>1,c),i.pipe(o)),i=o;if(n){let u=!1,l=dp(o)||!!(o._writableState&&o._writableState.autoDestroy);o.on("error",p=>{s===null&&(s=p)}),o.on("finish",()=>{u=!0,l||n(s)}),l&&o.on("close",()=>n(s||(u?null:xS)))}return o;function a(u,l,p,d){u.on("error",d),u.on("close",f);function f(){if(l&&u._readableState&&!u._readableState.ended||p&&u._writableState&&!u._writableState.ended)return d(xS)}}function c(u){if(!(!u||s)){s=u;for(let l of t)l.destroy(u)}}}function VL(r){return!!r._readableState||!!r._writableState}function dp(r){return typeof r._duplexState=="number"&&VL(r)}function vJ(r){let e=r._readableState&&r._readableState.error||r._writableState&&r._writableState.error;return e===ng?null:e}function _J(r){return dp(r)&&r.readable}function wJ(r){return typeof r=="object"&&r!==null&&typeof r.byteLength=="number"}function $L(r){return wJ(r)?r.byteLength:1024}function TL(){}function SJ(){this.destroy(new Error("Stream aborted."))}function IJ(r){return r._writev!==tg.prototype._writev&&r._writev!==pp.prototype._writev}HL.exports={pipeline:WL,pipelinePromise:bJ,isStream:VL,isStreamx:dp,getStreamError:vJ,Stream:lp,Writable:tg,Readable:eg,Duplex:pp,Transform:rg,PassThrough:AS}});var KL=b((pme,zL)=>{zL.exports=function(e){if(typeof e!="string"||e==="")return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}});var BS=b((dme,YL)=>{var xJ=KL(),JL={"{":"}","(":")","[":"]"},CJ=function(r){if(r[0]==="!")return!0;for(var e=0,t=-2,n=-2,i=-2,o=-2,s=-2;e<r.length;){if(r[e]==="*"||r[e+1]==="?"&&/[\].+)]/.test(r[e])||n!==-1&&r[e]==="["&&r[e+1]!=="]"&&(n<e&&(n=r.indexOf("]",e)),n>e&&(s===-1||s>n||(s=r.indexOf("\\",e),s===-1||s>n)))||i!==-1&&r[e]==="{"&&r[e+1]!=="}"&&(i=r.indexOf("}",e),i>e&&(s=r.indexOf("\\",e),s===-1||s>i))||o!==-1&&r[e]==="("&&r[e+1]==="?"&&/[:!=]/.test(r[e+2])&&r[e+3]!==")"&&(o=r.indexOf(")",e),o>e&&(s=r.indexOf("\\",e),s===-1||s>o))||t!==-1&&r[e]==="("&&r[e+1]!=="|"&&(t<e&&(t=r.indexOf("|",e)),t!==-1&&r[t+1]!==")"&&(o=r.indexOf(")",t),o>t&&(s=r.indexOf("\\",t),s===-1||s>o))))return!0;if(r[e]==="\\"){var a=r[e+1];e+=2;var c=JL[a];if(c){var u=r.indexOf(c,e);u!==-1&&(e=u+1)}if(r[e]==="!")return!0}else e++}return!1},PJ=function(r){if(r[0]==="!")return!0;for(var e=0;e<r.length;){if(/[*?{}()[\]]/.test(r[e]))return!0;if(r[e]==="\\"){var t=r[e+1];e+=2;var n=JL[t];if(n){var i=r.indexOf(n,e);i!==-1&&(e=i+1)}if(r[e]==="!")return!0}else e++}return!1};YL.exports=function(e,t){if(typeof e!="string"||e==="")return!1;if(xJ(e))return!0;var n=CJ;return t&&t.strict===!1&&(n=PJ),n(e)}});var QL=b((fme,XL)=>{"use strict";var TJ=BS(),EJ=require("path").posix.dirname,RJ=require("os").platform()==="win32",og="/",AJ=/\\/g,kJ=/\\([!*?|[\](){}])/g;XL.exports=function(e,t){var n=Object.assign({flipBackslashes:!0},t);n.flipBackslashes&&RJ&&e.indexOf(og)<0&&(e=e.replace(AJ,og)),DJ(e)&&(e+=og),e+="a";do e=EJ(e);while(OJ(e));return e.replace(kJ,"$1")};function DJ(r){var e=r.slice(-1),t;switch(e){case"}":t="{";break;case"]":t="[";break;default:return!1}var n=r.indexOf(t);return n<0?!1:r.slice(n+1,-1).includes(og)}function OJ(r){return/\([^()]+$/.test(r)||r[0]==="{"||r[0]==="["||/[^\\][{[]/.test(r)?!0:TJ(r)}});var sg=b((hme,ZL)=>{"use strict";ZL.exports=function(r){if(typeof r!="string")throw new TypeError("expected a string");var e={negated:!1,pattern:r,original:r};return r.charAt(0)==="!"&&r.charAt(1)!=="("&&(e.negated=!0,e.pattern=r.slice(1)),e}});var iN=b((mme,nN)=>{"use strict";var ag=require("path"),MJ=sg();nN.exports=function(r,e){var t=e||{},n=tN(t.cwd?t.cwd:process.cwd());n=ag.resolve(n),n=US(n),n=eN(n);var i=t.root;i&&(i=tN(i),i=US(i),(process.platform==="win32"||!ag.isAbsolute(i))&&(i=US(ag.resolve(i))),i=eN(i));var o=r.slice(-1),s=MJ(r);return r=s.pattern,r.slice(0,2)==="./"&&(r=r.slice(2)),r.length===1&&r==="."&&(r=""),i&&r.charAt(0)==="/"?r=rN(i,r):(!ag.isAbsolute(r)||r.slice(0,1)==="\\")&&(r=rN(n,r)),o==="/"&&r.slice(-1)!=="/"&&(r+="/"),s.negated?"!"+r:r};function eN(r){return r.replace(/([({[\]})*?!])/g,"\\$1")}function tN(r){return r.replace(/\\([({[\]})*?!])/g,"$1")}function US(r){return r.replace(/\\/g,"/")}function rN(r,e){if(r.charAt(r.length-1)==="/"&&(r=r.slice(0,-1)),e.charAt(0)==="/"&&(e=e.slice(1)),!e)return r;for(;e.slice(0,3)==="../";)r=r.slice(0,r.lastIndexOf("/")),e=e.slice(3);return r+"/"+e}});var aN=b((gme,sN)=>{"use strict";var LJ=require("fs"),jS=require("path"),NJ=require("events"),FJ=aL(),BJ=hL(),UJ=GL().Readable,jJ=BS(),qJ=QL(),oN=SS(),WJ=sg(),VJ=iN(),$J="File not found with singular glob: ",HJ=" (if this was purposeful, use `allowEmpty` option)";function GJ(r){return jJ(r)}function zJ(){var r={withFileTypes:!0},e=new NJ,t=FJ(i,1);t.drain=function(){e.emit("end")},t.error(n);function n(o){o&&e.emit("error",o)}e.pause=function(){t.pause()},e.resume=function(){t.resume()},e.end=function(){t.kill()},e.walk=function(o){t.push(o)};function i(o,s){LJ.readdir(o,r,a);function a(u,l){if(u)return s(u);l.forEach(c),s()}function c(u){var l=jS.join(o,u.name);e.emit("path",l,u),u.isDirectory()&&t.push(l)}}return e}function KJ(r){var e=!1;r.forEach(t);function t(n,i){if(typeof n!="string")throw new Error("Invalid glob at index "+i);var o=WJ(n);o.negated===!1&&(e=!0)}if(e===!1)throw new Error("Missing positive glob")}function JJ(r){if(typeof r.cwd!="string")throw new Error("The `cwd` option must be a string");if(typeof r.dot!="boolean")throw new Error("The `dot` option must be a boolean");if(typeof r.cwdbase!="boolean")throw new Error("The `cwdbase` option must be a boolean");if(typeof r.uniqueBy!="string"&&typeof r.uniqueBy!="function")throw new Error("The `uniqueBy` option must be a string or function");if(typeof r.allowEmpty!="boolean")throw new Error("The `allowEmpty` option must be a boolean");if(r.base&&typeof r.base!="string")throw new Error("The `base` option must be a string if specified");if(!Array.isArray(r.ignore))throw new Error("The `ignore` option must be a string or array")}function YJ(r){var e=new Set;if(typeof r=="string")return n;return i;function t(o){return e.has(o)?!1:(e.add(o),!0)}function n(o){return t(o[r])}function i(o){return t(r(o))}}function XJ(r,e){Array.isArray(r)||(r=[r]),KJ(r);var t=Object.assign({},{cwd:process.cwd(),dot:!1,cwdbase:!1,uniqueBy:"path",allowEmpty:!1,ignore:[]},e);t.ignore=typeof t.ignore=="string"?[t.ignore]:t.ignore,JJ(t),t.cwd=oN(jS.resolve(t.cwd),!0);var n=t.base;t.cwdbase&&(n=t.cwd);var i=zJ(),o=new UJ({highWaterMark:t.highWaterMark,read:l,predestroy:p}),s=r.map(d);t.ignore=t.ignore.map(d);var a=s.map(GJ),c=BJ(s,null,t),u=YJ(t.uniqueBy);i.on("path",f),i.once("end",h),i.once("error",m),i.walk(t.cwd);function l(y){i.resume(),y()}function p(){i.end()}function d(y){return VJ(y,t)}function f(y,w){var k=c(y,!0);if(k===-1&&w.isDirectory()&&(k=c(y+jS.sep,!0)),k!==-1){a[k]=!0;var D=n||qJ(s[k]),Q={cwd:t.cwd,base:D,path:oN(y,!0)},F=u(Q);if(F){var te=o.push(Q);te||i.pause()}}}function h(){var y=!1;a.forEach(function(w,k){if(t.allowEmpty!==!0&&!w){y=!0;var D=new Error($J+s[k]+HJ);return o.destroy(D)}}),y===!1&&o.push(null)}function m(y){o.destroy(y)}return o}sN.exports=XJ});var uN=b((bme,cN)=>{"use strict";cN.exports=function(){return/^[\\\/]{2,}[^\\\/]+[\\\/]+[^\\\/]+/}});var pN=b((vme,lN)=>{"use strict";var QJ=uN()();lN.exports=function(r){if(typeof r!="string")throw new TypeError("expected a string");return QJ.test(r)}});var fN=b((_me,dN)=>{"use strict";var ZJ=pN();dN.exports=function(e){if(typeof e!="string")throw new TypeError("expected filepath to be a string");return!ZJ(e)&&!/^([a-z]:)?[\\\/]/i.test(e)}});var hN=b((qS,WS)=>{(function(r){qS&&typeof qS=="object"&&typeof WS<"u"?WS.exports=r():typeof define=="function"&&define.amd?define([],r):typeof window<"u"?window.isWindows=r():typeof global<"u"?global.isWindows=r():typeof self<"u"?self.isWindows=r():this.isWindows=r()})(function(){"use strict";return function(){return process&&(process.platform==="win32"||/^(msys|cygwin)$/.test(process.env.OSTYPE))}})});var gN=b((wme,mN)=>{"use strict";var eY=fN(),tY=hN();mN.exports=gp;function gp(r){if(typeof r!="string")throw new TypeError("isAbsolute expects a string.");return tY()?gp.win32(r):gp.posix(r)}gp.posix=function(e){return e.charAt(0)==="/"};gp.win32=function(e){return/[a-z]/i.test(e.charAt(0))&&e.charAt(1)===":"&&e.charAt(2)==="\\"||e.slice(0,2)==="\\\\"?!0:!eY(e)}});var IN=b((Sme,SN)=>{"use strict";var yN=require("path"),rY=sg(),bN=gN();SN.exports=function(r,e){var t=e||{},n=_N(t.cwd?t.cwd:process.cwd());n=yN.resolve(n),n=VS(n),n=vN(n);var i=t.root;i&&(i=_N(i),i=VS(i),(process.platform==="win32"||!bN(i))&&(i=VS(yN.resolve(i))),i=vN(i)),r.slice(0,2)==="./"&&(r=r.slice(2)),r.length===1&&r==="."&&(r="");var o=r.slice(-1),s=rY(r);return r=s.pattern,i&&r.charAt(0)==="/"?r=wN(i,r):(!bN(r)||r.slice(0,1)==="\\")&&(r=wN(n,r)),o==="/"&&r.slice(-1)!=="/"&&(r+="/"),s.negated?"!"+r:r};function vN(r){return r.replace(/([({[\]})*?!])/g,"\\$1")}function _N(r){return r.replace(/\\([({[\]})*?!])/g,"$1")}function VS(r){return r.replace(/\\/g,"/")}function wN(r,e){return r.charAt(r.length-1)==="/"&&(r=r.slice(0,-1)),e.charAt(0)==="/"&&(e=e.slice(1)),e?r+"/"+e:r}});var tF=b((Jbe,eF)=>{try{eF.exports=require("./win32-app-container-tokens.win32-arm64-msvc-4ZJZ3U55.node")}catch{}});var nF=b((Ybe,rF)=>{try{rF.exports=require("./win32-app-container-tokens.win32-x64-msvc-VCQE7GJP.node")}catch{}});var _F=b((J_e,_Y)=>{_Y.exports={name:"dotenv",version:"16.4.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var IF=b((Y_e,Wi)=>{var Lg=require("fs"),iI=require("path"),wY=require("os"),SY=require("crypto"),IY=_F(),oI=IY.version,xY=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function CY(r){let e={},t=r.toString();t=t.replace(/\r\n?/mg,`
`);let n;for(;(n=xY.exec(t))!=null;){let i=n[1],o=n[2]||"";o=o.trim();let s=o[0];o=o.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),s==='"'&&(o=o.replace(/\\n/g,`
`),o=o.replace(/\\r/g,"\r")),e[i]=o}return e}function PY(r){let e=SF(r),t=St.configDotenv({path:e});if(!t.parsed){let s=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw s.code="MISSING_DATA",s}let n=wF(r).split(","),i=n.length,o;for(let s=0;s<i;s++)try{let a=n[s].trim(),c=RY(t,a);o=St.decrypt(c.ciphertext,c.key);break}catch(a){if(s+1>=i)throw a}return St.parse(o)}function TY(r){console.log(`[dotenv@${oI}][INFO] ${r}`)}function EY(r){console.log(`[dotenv@${oI}][WARN] ${r}`)}function Ng(r){console.log(`[dotenv@${oI}][DEBUG] ${r}`)}function wF(r){return r&&r.DOTENV_KEY&&r.DOTENV_KEY.length>0?r.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function RY(r,e){let t;try{t=new URL(e)}catch(a){if(a.code==="ERR_INVALID_URL"){let c=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development");throw c.code="INVALID_DOTENV_KEY",c}throw a}let n=t.password;if(!n){let a=new Error("INVALID_DOTENV_KEY: Missing key part");throw a.code="INVALID_DOTENV_KEY",a}let i=t.searchParams.get("environment");if(!i){let a=new Error("INVALID_DOTENV_KEY: Missing environment part");throw a.code="INVALID_DOTENV_KEY",a}let o=`DOTENV_VAULT_${i.toUpperCase()}`,s=r.parsed[o];if(!s){let a=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${o} in your .env.vault file.`);throw a.code="NOT_FOUND_DOTENV_ENVIRONMENT",a}return{ciphertext:s,key:n}}function SF(r){let e=null;if(r&&r.path&&r.path.length>0)if(Array.isArray(r.path))for(let t of r.path)Lg.existsSync(t)&&(e=t.endsWith(".vault")?t:`${t}.vault`);else e=r.path.endsWith(".vault")?r.path:`${r.path}.vault`;else e=iI.resolve(process.cwd(),".env.vault");return Lg.existsSync(e)?e:null}function AY(r){return r[0]==="~"?iI.join(wY.homedir(),r.slice(1)):r}function kY(r){TY("Loading env from encrypted .env.vault");let e=St._parseVault(r),t=process.env;return r&&r.processEnv!=null&&(t=r.processEnv),St.populate(t,e,r),{parsed:e}}function DY(r){let e=iI.resolve(process.cwd(),".env"),t="utf8",n=!!(r&&r.debug);if(r){if(r.path!=null){let i=r.path;if(Array.isArray(i)){for(let o of r.path)if(Lg.existsSync(o)){i=o;break}}e=AY(i)}r.encoding!=null?t=r.encoding:n&&Ng("No encoding is specified. UTF-8 is used by default")}try{let i=St.parse(Lg.readFileSync(e,{encoding:t})),o=process.env;return r&&r.processEnv!=null&&(o=r.processEnv),St.populate(o,i,r),{parsed:i}}catch(i){return n&&Ng(`Failed to load ${e} ${i.message}`),{error:i}}}function OY(r){if(wF(r).length===0)return St.configDotenv(r);let e=SF(r);return e?St._configVault(r):(EY(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),St.configDotenv(r))}function MY(r,e){let t=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(r,"base64"),i=n.subarray(0,12),o=n.subarray(-16);n=n.subarray(12,-16);try{let s=SY.createDecipheriv("aes-256-gcm",t,i);return s.setAuthTag(o),`${s.update(n)}${s.final()}`}catch(s){let a=s instanceof RangeError,c=s.message==="Invalid key length",u=s.message==="Unsupported state or unable to authenticate data";if(a||c){let l=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw l.code="INVALID_DOTENV_KEY",l}else if(u){let l=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw l.code="DECRYPTION_FAILED",l}else throw s}}function LY(r,e,t={}){let n=!!(t&&t.debug),i=!!(t&&t.override);if(typeof e!="object"){let o=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw o.code="OBJECT_REQUIRED",o}for(let o of Object.keys(e))Object.prototype.hasOwnProperty.call(r,o)?(i===!0&&(r[o]=e[o]),n&&Ng(i===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):r[o]=e[o]}var St={configDotenv:DY,_configVault:kY,_parseVault:PY,config:OY,decrypt:MY,parse:CY,populate:LY};Wi.exports.configDotenv=St.configDotenv;Wi.exports._configVault=St._configVault;Wi.exports._parseVault=St._parseVault;Wi.exports.config=St.config;Wi.exports.decrypt=St.decrypt;Wi.exports.parse=St.parse;Wi.exports.populate=St.populate;Wi.exports=St});var AB=b(dI=>{var RB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");dI.encode=function(r){if(0<=r&&r<RB.length)return RB[r];throw new TypeError("Must be between 0 and 63: "+r)};dI.decode=function(r){var e=65,t=90,n=97,i=122,o=48,s=57,a=43,c=47,u=26,l=52;return e<=r&&r<=t?r-e:n<=r&&r<=i?r-n+u:o<=r&&r<=s?r-o+l:r==a?62:r==c?63:-1}});var mI=b(hI=>{var kB=AB(),fI=5,DB=1<<fI,OB=DB-1,MB=DB;function iX(r){return r<0?(-r<<1)+1:(r<<1)+0}function oX(r){var e=(r&1)===1,t=r>>1;return e?-t:t}hI.encode=function(e){var t="",n,i=iX(e);do n=i&OB,i>>>=fI,i>0&&(n|=MB),t+=kB.encode(n);while(i>0);return t};hI.decode=function(e,t,n){var i=e.length,o=0,s=0,a,c;do{if(t>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=kB.decode(e.charCodeAt(t++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));a=!!(c&MB),c&=OB,o=o+(c<<s),s+=fI}while(a);n.value=oX(o),n.rest=t}});var Cu=b(Vt=>{function sX(r,e,t){if(e in r)return r[e];if(arguments.length===3)return t;throw new Error('"'+e+'" is a required argument.')}Vt.getArg=sX;var LB=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,aX=/^data:.+\,.+$/;function Dp(r){var e=r.match(LB);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}Vt.urlParse=Dp;function Iu(r){var e="";return r.scheme&&(e+=r.scheme+":"),e+="//",r.auth&&(e+=r.auth+"@"),r.host&&(e+=r.host),r.port&&(e+=":"+r.port),r.path&&(e+=r.path),e}Vt.urlGenerate=Iu;function gI(r){var e=r,t=Dp(r);if(t){if(!t.path)return r;e=t.path}for(var n=Vt.isAbsolute(e),i=e.split(/\/+/),o,s=0,a=i.length-1;a>=0;a--)o=i[a],o==="."?i.splice(a,1):o===".."?s++:s>0&&(o===""?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return e=i.join("/"),e===""&&(e=n?"/":"."),t?(t.path=e,Iu(t)):e}Vt.normalize=gI;function NB(r,e){r===""&&(r="."),e===""&&(e=".");var t=Dp(e),n=Dp(r);if(n&&(r=n.path||"/"),t&&!t.scheme)return n&&(t.scheme=n.scheme),Iu(t);if(t||e.match(aX))return e;if(n&&!n.host&&!n.path)return n.host=e,Iu(n);var i=e.charAt(0)==="/"?e:gI(r.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,Iu(n)):i}Vt.join=NB;Vt.isAbsolute=function(r){return r.charAt(0)==="/"||LB.test(r)};function cX(r,e){r===""&&(r="."),r=r.replace(/\/$/,"");for(var t=0;e.indexOf(r+"/")!==0;){var n=r.lastIndexOf("/");if(n<0||(r=r.slice(0,n),r.match(/^([^\/]+:\/)?\/*$/)))return e;++t}return Array(t+1).join("../")+e.substr(r.length+1)}Vt.relative=cX;var FB=function(){var r=Object.create(null);return!("__proto__"in r)}();function BB(r){return r}function uX(r){return UB(r)?"$"+r:r}Vt.toSetString=FB?BB:uX;function lX(r){return UB(r)?r.slice(1):r}Vt.fromSetString=FB?BB:lX;function UB(r){if(!r)return!1;var e=r.length;if(e<9||r.charCodeAt(e-1)!==95||r.charCodeAt(e-2)!==95||r.charCodeAt(e-3)!==111||r.charCodeAt(e-4)!==116||r.charCodeAt(e-5)!==111||r.charCodeAt(e-6)!==114||r.charCodeAt(e-7)!==112||r.charCodeAt(e-8)!==95||r.charCodeAt(e-9)!==95)return!1;for(var t=e-10;t>=0;t--)if(r.charCodeAt(t)!==36)return!1;return!0}function pX(r,e,t){var n=xu(r.source,e.source);return n!==0||(n=r.originalLine-e.originalLine,n!==0)||(n=r.originalColumn-e.originalColumn,n!==0||t)||(n=r.generatedColumn-e.generatedColumn,n!==0)||(n=r.generatedLine-e.generatedLine,n!==0)?n:xu(r.name,e.name)}Vt.compareByOriginalPositions=pX;function dX(r,e,t){var n=r.generatedLine-e.generatedLine;return n!==0||(n=r.generatedColumn-e.generatedColumn,n!==0||t)||(n=xu(r.source,e.source),n!==0)||(n=r.originalLine-e.originalLine,n!==0)||(n=r.originalColumn-e.originalColumn,n!==0)?n:xu(r.name,e.name)}Vt.compareByGeneratedPositionsDeflated=dX;function xu(r,e){return r===e?0:r===null?1:e===null?-1:r>e?1:-1}function fX(r,e){var t=r.generatedLine-e.generatedLine;return t!==0||(t=r.generatedColumn-e.generatedColumn,t!==0)||(t=xu(r.source,e.source),t!==0)||(t=r.originalLine-e.originalLine,t!==0)||(t=r.originalColumn-e.originalColumn,t!==0)?t:xu(r.name,e.name)}Vt.compareByGeneratedPositionsInflated=fX;function hX(r){return JSON.parse(r.replace(/^\)]}'[^\n]*\n/,""))}Vt.parseSourceMapInput=hX;function mX(r,e,t){if(e=e||"",r&&(r[r.length-1]!=="/"&&e[0]!=="/"&&(r+="/"),e=r+e),t){var n=Dp(t);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=NB(Iu(n),e)}return gI(e)}Vt.computeSourceURL=mX});var vI=b(jB=>{var yI=Cu(),bI=Object.prototype.hasOwnProperty,ia=typeof Map<"u";function Vi(){this._array=[],this._set=ia?new Map:Object.create(null)}Vi.fromArray=function(e,t){for(var n=new Vi,i=0,o=e.length;i<o;i++)n.add(e[i],t);return n};Vi.prototype.size=function(){return ia?this._set.size:Object.getOwnPropertyNames(this._set).length};Vi.prototype.add=function(e,t){var n=ia?e:yI.toSetString(e),i=ia?this.has(e):bI.call(this._set,n),o=this._array.length;(!i||t)&&this._array.push(e),i||(ia?this._set.set(e,o):this._set[n]=o)};Vi.prototype.has=function(e){if(ia)return this._set.has(e);var t=yI.toSetString(e);return bI.call(this._set,t)};Vi.prototype.indexOf=function(e){if(ia){var t=this._set.get(e);if(t>=0)return t}else{var n=yI.toSetString(e);if(bI.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};Vi.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};Vi.prototype.toArray=function(){return this._array.slice()};jB.ArraySet=Vi});var VB=b(WB=>{var qB=Cu();function gX(r,e){var t=r.generatedLine,n=e.generatedLine,i=r.generatedColumn,o=e.generatedColumn;return n>t||n==t&&o>=i||qB.compareByGeneratedPositionsInflated(r,e)<=0}function uy(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}uy.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)};uy.prototype.add=function(e){gX(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};uy.prototype.toArray=function(){return this._sorted||(this._array.sort(qB.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};WB.MappingList=uy});var _I=b($B=>{var Op=mI(),ct=Cu(),ly=vI().ArraySet,yX=VB().MappingList;function Zr(r){r||(r={}),this._file=ct.getArg(r,"file",null),this._sourceRoot=ct.getArg(r,"sourceRoot",null),this._skipValidation=ct.getArg(r,"skipValidation",!1),this._sources=new ly,this._names=new ly,this._mappings=new yX,this._sourcesContents=null}Zr.prototype._version=3;Zr.fromSourceMap=function(e){var t=e.sourceRoot,n=new Zr({file:e.file,sourceRoot:t});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,t!=null&&(o.source=ct.relative(t,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;t!==null&&(o=ct.relative(t,i)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n};Zr.prototype.addMapping=function(e){var t=ct.getArg(e,"generated"),n=ct.getArg(e,"original",null),i=ct.getArg(e,"source",null),o=ct.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})};Zr.prototype.setSourceContent=function(e,t){var n=e;this._sourceRoot!=null&&(n=ct.relative(this._sourceRoot,n)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[ct.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[ct.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Zr.prototype.applySourceMap=function(e,t,n){var i=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=ct.relative(o,i));var s=new ly,a=new ly;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,n!=null&&(c.source=ct.join(n,c.source)),o!=null&&(c.source=ct.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var l=c.source;l!=null&&!s.has(l)&&s.add(l);var p=c.name;p!=null&&!a.has(p)&&a.add(p)},this),this._sources=s,this._names=a,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(n!=null&&(c=ct.join(n,c)),o!=null&&(c=ct.relative(o,c)),this.setSourceContent(c,u))},this)};Zr.prototype._validateMapping=function(e,t,n,i){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!n&&!i)){if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:i}))}};Zr.prototype._serializeMappings=function(){for(var e=0,t=1,n=0,i=0,o=0,s=0,a="",c,u,l,p,d=this._mappings.toArray(),f=0,h=d.length;f<h;f++){if(u=d[f],c="",u.generatedLine!==t)for(e=0;u.generatedLine!==t;)c+=";",t++;else if(f>0){if(!ct.compareByGeneratedPositionsInflated(u,d[f-1]))continue;c+=","}c+=Op.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),c+=Op.encode(p-s),s=p,c+=Op.encode(u.originalLine-1-i),i=u.originalLine-1,c+=Op.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(l=this._names.indexOf(u.name),c+=Op.encode(l-o),o=l)),a+=c}return a};Zr.prototype._generateSourcesContent=function(e,t){return e.map(function(n){if(!this._sourcesContents)return null;t!=null&&(n=ct.relative(t,n));var i=ct.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};Zr.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Zr.prototype.toString=function(){return JSON.stringify(this.toJSON())};$B.SourceMapGenerator=Zr});var HB=b(oa=>{oa.GREATEST_LOWER_BOUND=1;oa.LEAST_UPPER_BOUND=2;function wI(r,e,t,n,i,o){var s=Math.floor((e-r)/2)+r,a=i(t,n[s],!0);return a===0?s:a>0?e-s>1?wI(s,e,t,n,i,o):o==oa.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-r>1?wI(r,s,t,n,i,o):o==oa.LEAST_UPPER_BOUND?s:r<0?-1:r}oa.search=function(e,t,n,i){if(t.length===0)return-1;var o=wI(-1,t.length,e,t,n,i||oa.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(t[o],t[o-1],!0)===0;)--o;return o}});var zB=b(GB=>{function SI(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function bX(r,e){return Math.round(r+Math.random()*(e-r))}function II(r,e,t,n){if(t<n){var i=bX(t,n),o=t-1;SI(r,i,n);for(var s=r[n],a=t;a<n;a++)e(r[a],s)<=0&&(o+=1,SI(r,o,a));SI(r,o+1,a);var c=o+1;II(r,e,t,c-1),II(r,e,c+1,n)}}GB.quickSort=function(r,e){II(r,e,0,r.length-1)}});var JB=b(py=>{var z=Cu(),xI=HB(),Pu=vI().ArraySet,vX=mI(),Mp=zB().quickSort;function Fe(r,e){var t=r;return typeof r=="string"&&(t=z.parseSourceMapInput(r)),t.sections!=null?new yn(t,e):new Rt(t,e)}Fe.fromSourceMap=function(r,e){return Rt.fromSourceMap(r,e)};Fe.prototype._version=3;Fe.prototype.__generatedMappings=null;Object.defineProperty(Fe.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Fe.prototype.__originalMappings=null;Object.defineProperty(Fe.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Fe.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return n===";"||n===","};Fe.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")};Fe.GENERATED_ORDER=1;Fe.ORIGINAL_ORDER=2;Fe.GREATEST_LOWER_BOUND=1;Fe.LEAST_UPPER_BOUND=2;Fe.prototype.eachMapping=function(e,t,n){var i=t||null,o=n||Fe.GENERATED_ORDER,s;switch(o){case Fe.GENERATED_ORDER:s=this._generatedMappings;break;case Fe.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=z.computeSourceURL(a,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)};Fe.prototype.allGeneratedPositionsFor=function(e){var t=z.getArg(e,"line"),n={source:z.getArg(e,"source"),originalLine:t,originalColumn:z.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",z.compareByOriginalPositions,xI.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)i.push({line:z.getArg(s,"generatedLine",null),column:z.getArg(s,"generatedColumn",null),lastColumn:z.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var c=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==c;)i.push({line:z.getArg(s,"generatedLine",null),column:z.getArg(s,"generatedColumn",null),lastColumn:z.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i};py.SourceMapConsumer=Fe;function Rt(r,e){var t=r;typeof r=="string"&&(t=z.parseSourceMapInput(r));var n=z.getArg(t,"version"),i=z.getArg(t,"sources"),o=z.getArg(t,"names",[]),s=z.getArg(t,"sourceRoot",null),a=z.getArg(t,"sourcesContent",null),c=z.getArg(t,"mappings"),u=z.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=z.normalize(s)),i=i.map(String).map(z.normalize).map(function(l){return s&&z.isAbsolute(s)&&z.isAbsolute(l)?z.relative(s,l):l}),this._names=Pu.fromArray(o.map(String),!0),this._sources=Pu.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(l){return z.computeSourceURL(s,l,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=c,this._sourceMapURL=e,this.file=u}Rt.prototype=Object.create(Fe.prototype);Rt.prototype.consumer=Fe;Rt.prototype._findSourceIndex=function(r){var e=r;if(this.sourceRoot!=null&&(e=z.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==r)return t;return-1};Rt.fromSourceMap=function(e,t){var n=Object.create(Rt.prototype),i=n._names=Pu.fromArray(e._names.toArray(),!0),o=n._sources=Pu.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=t,n._absoluteSources=n._sources.toArray().map(function(f){return z.computeSourceURL(n.sourceRoot,f,t)});for(var s=e._mappings.toArray().slice(),a=n.__generatedMappings=[],c=n.__originalMappings=[],u=0,l=s.length;u<l;u++){var p=s[u],d=new KB;d.generatedLine=p.generatedLine,d.generatedColumn=p.generatedColumn,p.source&&(d.source=o.indexOf(p.source),d.originalLine=p.originalLine,d.originalColumn=p.originalColumn,p.name&&(d.name=i.indexOf(p.name)),c.push(d)),a.push(d)}return Mp(n.__originalMappings,z.compareByOriginalPositions),n};Rt.prototype._version=3;Object.defineProperty(Rt.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function KB(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}Rt.prototype._parseMappings=function(e,t){for(var n=1,i=0,o=0,s=0,a=0,c=0,u=e.length,l=0,p={},d={},f=[],h=[],m,y,w,k,D;l<u;)if(e.charAt(l)===";")n++,l++,i=0;else if(e.charAt(l)===",")l++;else{for(m=new KB,m.generatedLine=n,k=l;k<u&&!this._charIsMappingSeparator(e,k);k++);if(y=e.slice(l,k),w=p[y],w)l+=y.length;else{for(w=[];l<k;)vX.decode(e,l,d),D=d.value,l=d.rest,w.push(D);if(w.length===2)throw new Error("Found a source, but no line and column");if(w.length===3)throw new Error("Found a source and line, but no column");p[y]=w}m.generatedColumn=i+w[0],i=m.generatedColumn,w.length>1&&(m.source=a+w[1],a+=w[1],m.originalLine=o+w[2],o=m.originalLine,m.originalLine+=1,m.originalColumn=s+w[3],s=m.originalColumn,w.length>4&&(m.name=c+w[4],c+=w[4])),h.push(m),typeof m.originalLine=="number"&&f.push(m)}Mp(h,z.compareByGeneratedPositionsDeflated),this.__generatedMappings=h,Mp(f,z.compareByOriginalPositions),this.__originalMappings=f};Rt.prototype._findMapping=function(e,t,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return xI.search(e,t,o,s)};Rt.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}};Rt.prototype.originalPositionFor=function(e){var t={generatedLine:z.getArg(e,"line"),generatedColumn:z.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",z.compareByGeneratedPositionsDeflated,z.getArg(e,"bias",Fe.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===t.generatedLine){var o=z.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=z.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=z.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:z.getArg(i,"originalLine",null),column:z.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};Rt.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};Rt.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=z.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=z.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(t)return null;throw new Error('"'+i+'" is not in the SourceMap.')};Rt.prototype.generatedPositionFor=function(e){var t=z.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var n={source:t,originalLine:z.getArg(e,"line"),originalColumn:z.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",z.compareByOriginalPositions,z.getArg(e,"bias",Fe.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:z.getArg(o,"generatedLine",null),column:z.getArg(o,"generatedColumn",null),lastColumn:z.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};py.BasicSourceMapConsumer=Rt;function yn(r,e){var t=r;typeof r=="string"&&(t=z.parseSourceMapInput(r));var n=z.getArg(t,"version"),i=z.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new Pu,this._names=new Pu;var o={line:-1,column:0};this._sections=i.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=z.getArg(s,"offset"),c=z.getArg(a,"line"),u=z.getArg(a,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=a,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new Fe(z.getArg(s,"map"),e)}})}yn.prototype=Object.create(Fe.prototype);yn.prototype.constructor=Fe;yn.prototype._version=3;Object.defineProperty(yn.prototype,"sources",{get:function(){for(var r=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)r.push(this._sections[e].consumer.sources[t]);return r}});yn.prototype.originalPositionFor=function(e){var t={generatedLine:z.getArg(e,"line"),generatedColumn:z.getArg(e,"column")},n=xI.search(t,this._sections,function(o,s){var a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};yn.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};yn.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')};yn.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(n.consumer._findSourceIndex(z.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};yn.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var a=o[s],c=i.consumer._sources.at(a.source);c=z.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;a.name&&(u=i.consumer._names.at(a.name),this._names.add(u),u=this._names.indexOf(u));var l={source:c,generatedLine:a.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(i.generatedOffset.generatedLine===a.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:u};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}Mp(this.__generatedMappings,z.compareByGeneratedPositionsDeflated),Mp(this.__originalMappings,z.compareByOriginalPositions)};py.IndexedSourceMapConsumer=yn});var XB=b(YB=>{var _X=_I().SourceMapGenerator,dy=Cu(),wX=/(\r?\n)/,SX=10,Tu="$$$isSourceNode$$$";function Rr(r,e,t,n,i){this.children=[],this.sourceContents={},this.line=r??null,this.column=e??null,this.source=t??null,this.name=i??null,this[Tu]=!0,n!=null&&this.add(n)}Rr.fromStringWithSourceMap=function(e,t,n){var i=new Rr,o=e.split(wX),s=0,a=function(){var d=h(),f=h()||"";return d+f;function h(){return s<o.length?o[s++]:void 0}},c=1,u=0,l=null;return t.eachMapping(function(d){if(l!==null)if(c<d.generatedLine)p(l,a()),c++,u=0;else{var f=o[s]||"",h=f.substr(0,d.generatedColumn-u);o[s]=f.substr(d.generatedColumn-u),u=d.generatedColumn,p(l,h),l=d;return}for(;c<d.generatedLine;)i.add(a()),c++;if(u<d.generatedColumn){var f=o[s]||"";i.add(f.substr(0,d.generatedColumn)),o[s]=f.substr(d.generatedColumn),u=d.generatedColumn}l=d},this),s<o.length&&(l&&p(l,a()),i.add(o.splice(s).join(""))),t.sources.forEach(function(d){var f=t.sourceContentFor(d);f!=null&&(n!=null&&(d=dy.join(n,d)),i.setSourceContent(d,f))}),i;function p(d,f){if(d===null||d.source===void 0)i.add(f);else{var h=n?dy.join(n,d.source):d.source;i.add(new Rr(d.originalLine,d.originalColumn,h,f,d.name))}}};Rr.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[Tu]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Rr.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[Tu]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Rr.prototype.walk=function(e){for(var t,n=0,i=this.children.length;n<i;n++)t=this.children[n],t[Tu]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})};Rr.prototype.join=function(e){var t,n,i=this.children.length;if(i>0){for(t=[],n=0;n<i-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this};Rr.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[Tu]?n.replaceRight(e,t):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this};Rr.prototype.setSourceContent=function(e,t){this.sourceContents[dy.toSetString(e)]=t};Rr.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][Tu]&&this.children[t].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),t=0,n=i.length;t<n;t++)e(dy.fromSetString(i[t]),this.sourceContents[i[t]])};Rr.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e};Rr.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new _X(e),i=!1,o=null,s=null,a=null,c=null;return this.walk(function(u,l){t.code+=u,l.source!==null&&l.line!==null&&l.column!==null?((o!==l.source||s!==l.line||a!==l.column||c!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:t.line,column:t.column},name:l.name}),o=l.source,s=l.line,a=l.column,c=l.name,i=!0):i&&(n.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var p=0,d=u.length;p<d;p++)u.charCodeAt(p)===SX?(t.line++,t.column=0,p+1===d?(o=null,i=!1):i&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:t.line,column:t.column},name:l.name})):t.column++}),this.walkSourceContents(function(u,l){n.setSourceContent(u,l)}),{code:t.code,map:n}};YB.SourceNode=Rr});var QB=b(fy=>{fy.SourceMapGenerator=_I().SourceMapGenerator;fy.SourceMapConsumer=JB().SourceMapConsumer;fy.SourceNode=XB().SourceNode});var eU=b((mTe,ZB)=>{var IX=Object.prototype.toString,CI=typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function xX(r){return IX.call(r).slice(8,-1)==="ArrayBuffer"}function CX(r,e,t){e>>>=0;var n=r.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=n;else if(t>>>=0,t>n)throw new RangeError("'length' is out of bounds");return CI?Buffer.from(r.slice(e,e+t)):new Buffer(new Uint8Array(r.slice(e,e+t)))}function PX(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return CI?Buffer.from(r,e):new Buffer(r,e)}function TX(r,e,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return xX(r)?CX(r,e,t):typeof r=="string"?PX(r,e):CI?Buffer.from(r):new Buffer(r)}ZB.exports=TX});var cU=b((aa,RI)=>{var EX=QB().SourceMapConsumer,PI=require("path"),di;try{di=require("fs"),(!di.existsSync||!di.readFileSync)&&(di=null)}catch{}var RX=eU();function tU(r,e){return r.require(e)}var rU=!1,nU=!1,TI=!1,Lp="auto",sa={},Np={},AX=/^data:application\/json[^,]+base64,/,Ho=[],Go=[];function AI(){return Lp==="browser"?!0:Lp==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function kX(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function DX(){return typeof process=="object"&&process!==null?process.version:""}function OX(){if(typeof process=="object"&&process!==null)return process.stderr}function MX(r){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(r)}function hy(r){return function(e){for(var t=0;t<r.length;t++){var n=r[t](e);if(n)return n}return null}}var kI=hy(Ho);Ho.push(function(r){if(r=r.trim(),/^file:/.test(r)&&(r=r.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),r in sa)return sa[r];var e="";try{if(di)di.existsSync(r)&&(e=di.readFileSync(r,"utf8"));else{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),t.readyState===4&&t.status===200&&(e=t.responseText)}}catch{}return sa[r]=e});function EI(r,e){if(!r)return e;var t=PI.dirname(r),n=/^\w+:\/\/[^\/]*/.exec(t),i=n?n[0]:"",o=t.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+PI.resolve(t.slice(i.length),e).replace(/\\/g,"/")):i+PI.resolve(t.slice(i.length),e)}function LX(r){var e;if(AI())try{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),e=t.readyState===4?t.responseText:null;var n=t.getResponseHeader("SourceMap")||t.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=kI(r);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,s;s=i.exec(e);)o=s;return o?o[1]:null}var DI=hy(Go);Go.push(function(r){var e=LX(r);if(!e)return null;var t;if(AX.test(e)){var n=e.slice(e.indexOf(",")+1);t=RX(n,"base64").toString(),e=r}else e=EI(r,e),t=kI(e);return t?{url:e,map:t}:null});function OI(r){var e=Np[r.source];if(!e){var t=DI(r.source);t?(e=Np[r.source]={url:t.url,map:new EX(t.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var s=e.map.sourcesContent[o];if(s){var a=EI(e.url,i);sa[a]=s}})):e=Np[r.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(r);if(n.source!==null)return n.source=EI(e.url,n.source),n}return r}function oU(r){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(r);if(e){var t=OI({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+t.source+":"+t.line+":"+(t.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(r),e?"eval at "+e[1]+" ("+oU(e[2])+")":r}function NX(){var r,e="";if(this.isNative())e="native";else{r=this.getScriptNameOrSourceURL(),!r&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),r?e+=r:e+="<anonymous>";var t=this.getLineNumber();if(t!=null){e+=":"+t;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor(),c=!(this.isToplevel()||a);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var l=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,l&&o.indexOf("."+l)!=o.length-l.length-1&&(i+=" [as "+l+"]")):i+=u+"."+(l||"<anonymous>")}else a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,s=!1);return s&&(i+=" ("+e+")"),i}function iU(r){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(function(t){e[t]=/^(?:is|get)/.test(t)?function(){return r[t].call(r)}:r[t]}),e.toString=NX,e}function sU(r,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),r.isNative())return e.curPosition=null,r;var t=r.getFileName()||r.getScriptNameOrSourceURL();if(t){var n=r.getLineNumber(),i=r.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=o.test(DX())?0:62;n===1&&i>s&&!AI()&&!r.isEval()&&(i-=s);var a=OI({source:t,line:n,column:i});e.curPosition=a,r=iU(r);var c=r.getFunctionName;return r.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},r.getFileName=function(){return a.source},r.getLineNumber=function(){return a.line},r.getColumnNumber=function(){return a.column+1},r.getScriptNameOrSourceURL=function(){return a.source},r}var u=r.isEval()&&r.getEvalOrigin();return u&&(u=oU(u),r=iU(r),r.getEvalOrigin=function(){return u}),r}function FX(r,e){TI&&(sa={},Np={});for(var t=r.name||"Error",n=r.message||"",i=t+": "+n,o={nextPosition:null,curPosition:null},s=[],a=e.length-1;a>=0;a--)s.push(`
    at `+sU(e[a],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+s.reverse().join("")}function aU(r){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(r.stack);if(e){var t=e[1],n=+e[2],i=+e[3],o=sa[t];if(!o&&di&&di.existsSync(t))try{o=di.readFileSync(t,"utf8")}catch{o=""}if(o){var s=o.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return t+":"+n+`
`+s+`
`+new Array(i).join(" ")+"^"}}return null}function BX(r){var e=aU(r),t=OX();t&&t._handle&&t._handle.setBlocking&&t._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(r.stack),MX(1)}function UX(){var r=process.emit;process.emit=function(e){if(e==="uncaughtException"){var t=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(t&&!n)return BX(arguments[1])}return r.apply(this,arguments)}}var jX=Ho.slice(0),qX=Go.slice(0);aa.wrapCallSite=sU;aa.getErrorSource=aU;aa.mapSourcePosition=OI;aa.retrieveSourceMap=DI;aa.install=function(r){if(r=r||{},r.environment&&(Lp=r.environment,["node","browser","auto"].indexOf(Lp)===-1))throw new Error("environment "+Lp+" was unknown. Available options are {auto, browser, node}");if(r.retrieveFile&&(r.overrideRetrieveFile&&(Ho.length=0),Ho.unshift(r.retrieveFile)),r.retrieveSourceMap&&(r.overrideRetrieveSourceMap&&(Go.length=0),Go.unshift(r.retrieveSourceMap)),r.hookRequire&&!AI()){var e=tU(RI,"module"),t=e.prototype._compile;t.__sourceMapSupport||(e.prototype._compile=function(o,s){return sa[s]=o,Np[s]=void 0,t.call(this,o,s)},e.prototype._compile.__sourceMapSupport=!0)}if(TI||(TI="emptyCacheBetweenOperations"in r?r.emptyCacheBetweenOperations:!1),rU||(rU=!0,Error.prepareStackTrace=FX),!nU){var n="handleUncaughtExceptions"in r?r.handleUncaughtExceptions:!0;try{var i=tU(RI,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&kX()&&(nU=!0,UX())}};aa.resetRetrieveHandlers=function(){Ho.length=0,Go.length=0,Ho=jX.slice(0),Go=qX.slice(0),DI=hy(Go),kI=hy(Ho)}});var vy=S(Ge()),uU=S(require("fs")),lU=S(require("net")),pU=S(require("os")),dU=S(require("path")),gTe=S(Iy());var jU={"pwa-extensionHost":null,"node-terminal":null,"pwa-node":null,"pwa-chrome":null,"pwa-msedge":null},qU={"extension.js-debug.addCustomBreakpoints":null,"extension.js-debug.addXHRBreakpoints":null,"extension.js-debug.editXHRBreakpoints":null,"extension.pwa-node-debug.attachNodeProcess":null,"extension.js-debug.clearAutoAttachVariables":null,"extension.js-debug.setAutoAttachVariables":null,"extension.js-debug.autoAttachToProcess":null,"extension.js-debug.createDebuggerTerminal":null,"extension.js-debug.createDiagnostics":null,"extension.js-debug.getDiagnosticLogs":null,"extension.js-debug.debugLink":null,"extension.js-debug.npmScript":null,"extension.js-debug.pickNodeProcess":null,"extension.js-debug.prettyPrint":null,"extension.js-debug.removeXHRBreakpoint":null,"extension.js-debug.removeAllCustomBreakpoints":null,"extension.js-debug.revealPage":null,"extension.js-debug.startProfile":null,"extension.js-debug.stopProfile":null,"extension.js-debug.toggleSkippingFile":null,"extension.node-debug.startWithStopOnEntry":null,"extension.js-debug.requestCDPProxy":null,"extension.js-debug.openEdgeDevTools":null,"extension.js-debug.callers.add":null,"extension.js-debug.callers.goToCaller":null,"extension.js-debug.callers.gotToTarget":null,"extension.js-debug.callers.remove":null,"extension.js-debug.callers.removeAll":null,"extension.js-debug.enableSourceMapStepping":null,"extension.js-debug.disableSourceMapStepping":null,"extension.js-debug.network.viewRequest":null,"extension.js-debug.network.copyUri":null,"extension.js-debug.network.openBody":null,"extension.js-debug.network.openBodyInHex":null,"extension.js-debug.network.replayXHR":null,"extension.js-debug.network.clear":null,"extension.js-debug.completion.nodeTool":null},zX=new Set(Object.keys(qU)),KX=new Set(Object.keys(jU));var ae=r=>isFinite(r)?new Promise(e=>setTimeout(e,r)):new Promise(()=>{}),$I=(r,e)=>{let t=setTimeout(r,e);return{dispose:()=>clearTimeout(t)}};function pa(r){return new Promise((e,t)=>{let n=r.length;for(let i of r)i.then(o=>{o?(e(o),n=-1):--n===0&&e(void 0)}).catch(t)})}async function HI(r,e){for(let t=0;t<r.length;t++)if(await e(r[t]))return t;return-1}function ge(){let r=null,e=null,t=!1,n,i=new Promise((o,s)=>{r=a=>{t=!0,n=a,o(a)},e=a=>{t=!0,s(a)}});return{resolve:r,reject:e,promise:i,get settledValue(){return n},hasSettled:()=>t}}var Zg=S(Ny()),lB=S(nb()),Qg=require("fs"),ey=S($()),Kxe=S(Iy());var ul=require("fs"),gt=S($()),Rf=S(require("path"));var Ct=r=>!!r,Ca=r=>Wd(r,e=>e!==null),pP=r=>Wd(r,e=>e!==void 0),Qo=r=>e=>e instanceof r,qd=(r,e)=>{debugger;throw new Error(e.replace("{value}",JSON.stringify(r)))};function Wd(r,e){let t={};for(let n of Object.keys(r)){let i=r[n];e(i,n)&&(t[n]=i)}return t}function gi(r,e){let t={};for(let n of Object.keys(r)){let i=r[n];t[n]=e(i,n)}return t}function dP(r,e){let t={};for(let n of Object.keys(r))e(n,r[n])&&(t[n]=r[n]);return t}function fP(...r){if(r.length===0)return{};let e={},t=Object.create(null);for(let n of r)if(n)for(let i of Object.keys(n)){let o=i.toLowerCase();t[o]?e[t[o]]=n[i]:(t[o]=i,e[i]=n[i])}return e}function hP(r,e){if(r.hasOwnProperty(e))return r[e];let t=e.toLowerCase();for(let n of Object.keys(r))if(n.toLowerCase()===t)return r[n]}var Mb=Symbol("unset");function ne(r){let e=Mb,t=(...n)=>(e===Mb&&(t.value=e=r(...n)),e);return t.forget=()=>{e=Mb,t.value=void 0},t.value=void 0,t}function Zo(r){let e=new Map,t=n=>{if(e.has(n))return e.get(n);let i=r(n);return e.set(n,i),i};return t.clear=()=>e.clear(),t}function mP(r){let e,t=n=>(e?.arg===n||(e={arg:n,val:r(n)}),e.val);return t.clear=()=>e=void 0,t}function gP(r,e){let t,n=()=>{t!==void 0&&clearTimeout(t),t=setTimeout(()=>{t=void 0,e()},r)};return n.clear=()=>{t&&(clearTimeout(t),t=void 0)},n}function yP(r,e){let t,n=()=>{t===void 0&&(t=setTimeout(()=>{t=void 0,e()},r))};return n.queued=()=>!!t,n.clear=()=>{t&&(clearTimeout(t),t=void 0)},n}async function bP(r,e){let t=[],n=[];for(let i of r)await e(i)?t.push(i):n.push(i);return[t,n]}function es(r){let e=[];for(let t of r)e=e.concat(t);return e}var a5=2**31-1,Vd=()=>{let r=0;return()=>r++&a5};var A=class{constructor(){this._listeners=new Set;this.event=(e,t,n)=>{let i={listener:e,thisArg:t};this._listeners.add(i);let o={dispose:()=>{o.dispose=()=>{},this._listeners.delete(i)}};return n&&n.push(o),o}}get size(){return this._listeners.size}fire(e){let t=!this._deliveryQueue;this._deliveryQueue||(this._deliveryQueue=[]);for(let n of this._listeners)this._deliveryQueue.push({data:n,event:e});if(t){for(let n=0;n<this._deliveryQueue.length;n++){let{data:i,event:o}=this._deliveryQueue[n];i.listener.call(i.thisArg,o)}this._deliveryQueue=void 0}}dispose(){this._listeners.clear(),this._deliveryQueue&&(this._deliveryQueue=[])}},$u=class{constructor(){this.map=new Map;this.listeners=this.map}listen(e,t){let n=this.map.get(e);n||(n=new A,this.map.set(e,n));let i=n.event(t);return{dispose:ne(()=>{i.dispose(),n?.size===0&&this.map.delete(e)})}}emit(e,t){this.listeners.get(e)?.fire(t)}};var ts=S($()),Yu=S(require("path"));var vP=require("os");var on="node:",yi="<node_internals>";var le=Symbol("AnyLaunchConfiguration"),_P={type:"",name:"",request:"",trace:!1,outputCapture:"console",timeout:1e4,timeouts:{},showAsyncStacks:!0,skipFiles:[],smartStep:!0,sourceMaps:!0,sourceMapRenames:!0,pauseForSourceMap:!0,resolveSourceMapLocations:null,rootPath:"${workspaceFolder}",outFiles:["${workspaceFolder}/**/*.(m|c|)js","!**/node_modules/**"],sourceMapPathOverrides:Nb("${workspaceFolder}"),enableContentValidation:!0,cascadeTerminateToConfigurations:[],enableDWARF:!0,__workspaceFolder:"",__remoteFilePrefix:void 0,__breakOnConditionalError:!1,customDescriptionGenerator:void 0,customPropertiesGenerator:void 0},Gu={..._P,cwd:"${workspaceFolder}",env:{},envFile:null,pauseForSourceMap:!1,sourceMaps:!0,localRoot:null,remoteRoot:null,resolveSourceMapLocations:["**","!**/node_modules/**"],autoAttachChildProcesses:!0,runtimeSourcemapPausePatterns:[],skipFiles:[`${yi}/**`]},wP={...Gu,showAsyncStacks:{onceBreakpointResolved:16},type:"node-terminal",request:"launch",name:"JavaScript Debug Terminal"},c5={...Gu,type:"node-terminal",request:"attach",name:wP.name,showAsyncStacks:{onceBreakpointResolved:16},delegateId:-1},u5={...Gu,type:"pwa-extensionHost",name:"Debug Extension",request:"launch",args:["--extensionDevelopmentPath=${workspaceFolder}"],outFiles:["${workspaceFolder}/out/**/*.js"],resolveSourceMapLocations:["${workspaceFolder}/**","!**/node_modules/**"],rendererDebugOptions:{},runtimeExecutable:"${execPath}",autoAttachChildProcesses:!1,debugWebviews:!1,debugWebWorkerHost:!1,__sessionId:""},l5={...Gu,type:"pwa-node",request:"launch",program:"",cwd:"${workspaceFolder}",stopOnEntry:!1,console:"internalConsole",restart:!1,args:[],runtimeExecutable:"node",runtimeVersion:"default",runtimeArgs:[],profileStartup:!1,attachSimplePort:null,experimentalNetworking:"auto",killBehavior:"forceful"},Lb={..._P,type:"pwa-chrome",request:"attach",address:"localhost",port:0,disableNetworkCache:!0,pathMapping:{},url:null,restart:!1,urlFilter:"",sourceMapPathOverrides:Nb("${webRoot}"),webRoot:"${workspaceFolder}",server:null,browserAttachLocation:"workspace",targetSelection:"automatic",vueComponentPaths:["${workspaceFolder}/**/*.vue","!**/node_modules/**"],perScriptSourcemaps:"auto"},p5={...Lb,type:"pwa-msedge",useWebView:!1},SP={...Lb,type:"pwa-chrome",request:"launch",cwd:null,file:null,env:{},urlFilter:"*",includeDefaultArgs:!0,includeLaunchArgs:!0,runtimeArgs:null,runtimeExecutable:"*",userDataDir:!0,browserLaunchLocation:"workspace",profileStartup:!1,cleanUp:"wholeBrowser",killBehavior:"forceful"},d5={...SP,type:"pwa-msedge",useWebView:!1},f5={...Gu,type:"pwa-node",attachExistingChildren:!0,address:"localhost",port:9229,restart:!1,request:"attach",continueOnAttach:!1};function Nb(r){return{"webpack:///./~/*":`${r}/node_modules/*`,"webpack:////*":"/*","webpack://@?:*/?:*/*":`${r}/*`,"webpack://?:*/*":`${r}/*`,"webpack:///([a-z]):/(.+)":"$1:/$2","meteor://\u{1F4BB}app/*":`${r}/*`,"turbopack://[project]/*":"${workspaceFolder}/*","turbopack:///[project]/*":"${workspaceFolder}/*"}}var IP=r=>{!r.sourceMapPathOverrides&&r.cwd&&(r.sourceMapPathOverrides=Nb(r.cwd)),r.resolveSourceMapLocations===void 0&&(r.resolveSourceMapLocations=r.outFiles)};function h5({...r}){return IP(r),r.request==="attach"?{...f5,...r}:{...l5,...r}}function m5(r,e){return r.request==="attach"?{...Lb,browserAttachLocation:e,...r}:{...SP,browserLaunchLocation:e,...r}}function g5(r,e){return r.request==="attach"?{...p5,browserAttachLocation:e,...r}:{...d5,browserLaunchLocation:e,...r}}function y5(r){let e={...u5,...r};return e.skipFiles=[...e.skipFiles,"**/node_modules.asar/**","**/bootstrap-fork.js"],e}function b5(r){return IP(r),r.request==="launch"?{...wP,...r}:{...c5,...r}}function Pa(r,e){let t,n=e==="remote"?"ui":"workspace";switch(r.type){case"pwa-node":t=h5(r);break;case"pwa-msedge":t=g5(r,n);break;case"pwa-chrome":t=m5(r,n);break;case"pwa-extensionHost":t=y5(r);break;case"node-terminal":t=b5(r);break;default:throw qd(r,"Unknown config: {value}")}return _5(t)}function v5(r){let e="${workspaceFolder}",t={...r,rootPath:void 0,outFiles:r.outFiles.filter(n=>!n.includes(e)),sourceMapPathOverrides:Wd(r.sourceMapPathOverrides,n=>!n.includes("${workspaceFolder}"))};return"vueComponentPaths"in t&&(t.vueComponentPaths=t.vueComponentPaths.filter(n=>!n.includes(e))),"resolveSourceMapLocations"in t&&(t.resolveSourceMapLocations=t.resolveSourceMapLocations?.filter(n=>!n.includes(e))??null),"cwd"in t&&t.cwd?.includes(e)&&(t.cwd=t.request==="launch"&&t.type==="pwa-node"?(0,vP.homedir)():void 0),"webRoot"in t&&t.webRoot?.includes(e)&&(t.webRoot="/"),t}function _5(r){return r.__workspaceFolder||(r=v5(r)),r=Hu(r,"workspaceFolder",r.__workspaceFolder),r=Hu(r,"webRoot","webRoot"in r?r.webRoot:r.__workspaceFolder),r}function Hu(r,e,t){let n;if(typeof r=="string")n=r.replace(new RegExp(`\\$\\{${e}\\}`,"g"),()=>{if(!t)throw new Error(`Unable to resolve \${${e}} in configuration (${JSON.stringify(e)})`);return t});else if(r instanceof Array)n=r.map(i=>Hu(i,e,t));else if(typeof r=="object"&&r){let i={};for(let[o,s]of Object.entries(r))i[Hu(o,e,t)]=Hu(s,e,t);n=i}else n=r;return n}var $d="js-debug",zu="1.105.0",w5="ms-vscode",xP=$d.includes("nightly"),YZ=`${w5}.${$d}`;var TP=require("crypto"),EP=S(nb()),RP=require("os"),fe=S(require("path"));var bi=S(require("fs")),CP=S(require("util"));async function Ta({access:r},e){if(!e)return!1;try{return await r(e),!0}catch{return!1}}async function zi({stat:r},e){if(e)try{return await r(e)}catch{return}}function PP(r){return new Promise(e=>{bi.readFile(r,"utf8",async(t,n)=>{e(t?"":n)})})}var QZ=CP.promisify(bi.writeFile);var tr=Symbol("FsUtils"),sn=class{constructor(e){this.fs=e}realPath(e){return this.fs.realpath(e)}async exists(e){try{return await this.fs.access(e,bi.constants.F_OK),!0}catch{return!1}}readFile(e){return this.fs.readFile(e)}},Fb=class{constructor(e){this.dap=e}async realPath(){throw new Error("not implemented")}async exists(e){try{let{doesExists:t}=await this.dap.remoteFileExistsRequest({localFilePath:e});return t}catch{return!1}}readFile(){throw new Error("not implemented")}},Hd=class{constructor(e,t,n){this.remoteFilePrefix=e;this.localFsUtils=t;this.remoteFsUtils=n}static create(e,t,n){let i=new sn(t);return e!==void 0?new this(e.toLowerCase(),i,new Fb(n)):i}async exists(e){return this.selectFs(e).exists(e)}async readFile(e){return this.selectFs(e).readFile(e)}async realPath(e){return this.selectFs(e).realPath(e)}selectFs(e){return e.toLowerCase().startsWith(this.remoteFilePrefix)?this.remoteFsUtils:this.localFsUtils}};var S5=process.platform==="win32"?"\\\\.\\pipe\\":(0,RP.tmpdir)(),I5=0,Gd=()=>fe.join(S5,`node-cdp.${process.pid}-${(0,TP.randomBytes)(4).toString("hex")}-${I5++}.sock`);function x5(r){return process.platform!=="win32"?[""]:r.lookup("PATHEXT")?.split(";")||[".exe"]}async function zd(r,e,t){let n;if(process.platform==="win32"){let i=t.WINDIR||"C:\\Windows";n=fe.join(i,"System32","where.exe")}else n="/usr/bin/which";try{if(await zi(r,n)){let o=(await(0,EP.default)(n,[e],{env:Ca(t)})).stdout.split(/\r?\n/);if(process.platform==="win32"){let s=String(t.PATHEXT||".exe").toUpperCase().split(";");for(let a of o){let c=fe.extname(a).toUpperCase();if(c&&s.includes(c))return a}}else if(o.length>0)return o[0];return}return e}catch{}}async function Bb(r,e,t){if(e){if(process.platform==="win32"&&!fe.extname(e))for(let n of x5(t)){let i=e+n;if(await zi(r,i))return i}if(await zi(r,e))return e}}var AP=r=>r.includes(`.asar${fe.sep}`);function Ki(...r){return fe.posix.isAbsolute(r[0])?Be(fe.posix.join(...r)):fe.win32.isAbsolute(r[0])?fe.win32.join(...r):fe.join(...r)}function hr(...r){return fe.posix.isAbsolute(r[0])?fe.posix.resolve(...r):fe.win32.isAbsolute(r[0])?fe.win32.resolve(...r):fe.resolve(...r)}function Ju(r,e){return fe.posix.isAbsolute(r)?fe.posix.relative(r,e):fe.win32.isAbsolute(r)?fe.win32.relative(r,e):fe.relative(r,e)}var C5=/\/|\\/,Ku="file:///",kP=r=>r.startsWith(Ku)&&r[Ku.length+1]===":",Ub=r=>r.split(C5);function Ea(r,e=!1){if(!r)return r;if(kP(r)){let t=Ku.length;r=Ku+r[t].toLowerCase()+r.substr(t+1)}else Jd(r)&&(r=(e?r[0].toUpperCase():r[0].toLowerCase())+r.substr(1));return r}function Ve(r,e=!1){if(!r)return r;if(r=Ea(r,e),kP(r)){let t=Ku.length;r=r.substr(0,t+1)+r.substr(t+1).replace(/\//g,"\\")}else Jd(r)&&(r=r.replace(/\//g,"\\"));return r}function Be(r){return r.replace(/\\\//g,"/").replace(/\\/g,"/")}var DP=(r,e)=>{let t=fe.relative(r,e);return t.length&&!fe.isAbsolute(t)&&!t.startsWith("..")},Kd=(r,e)=>{let t=fe.relative(r,e);return!fe.isAbsolute(t)&&!t.startsWith("..")},jb=r=>r.startsWith("\\\\"),Jd=r=>/^[A-Za-z]:/.test(r)||jb(r);var Ra=class{get empty(){return this.patterns.length===0}constructor({rootPath:e,patterns:t}){!e||!t?(this.rootPath="",this.patterns=[]):(this.rootPath=e,this.patterns=t.map(n=>{let i=n.startsWith("!");return{negated:i,pattern:n.slice(i?1:0)}}))}*explode(){for(let e=0;e<this.patterns.length;e++){let{negated:t,pattern:n}=this.patterns[e];if(t)continue;let i=Yu.resolve(this.rootPath,n).split(/[\\/]/g),o=i.findIndex(c=>c.includes("*"));if(o===-1){yield{cwd:i.slice(0,-1).join("/"),pattern:i[i.length-1],negations:[]};continue}let s=i.slice(0,o).join("/"),a=[];for(let c=e+1;c<this.patterns.length;c++){let{negated:u,pattern:l}=this.patterns[c];if(u)if(l.startsWith("**"))a.push(Be(l));else{let p=Yu.relative(s,Yu.resolve(this.rootPath,l));p.startsWith("..")||a.push(Be(p))}}yield{cwd:s,negations:a,pattern:i.slice(o).join("/")}}}};Ra=C([(0,ts.injectable)()],Ra);var Ln=class extends Ra{constructor({rootPath:e,outFiles:t}){super({rootPath:e,patterns:t})}};Ln=C([(0,ts.injectable)(),g(0,(0,ts.inject)(le))],Ln);var vi=class extends Ra{constructor(e){super({rootPath:e.rootPath,patterns:"vueComponentPaths"in e?e.vueComponentPaths:[]})}};vi=C([(0,ts.injectable)(),g(0,(0,ts.inject)(le))],vi);var MP=require("crypto"),LP=require("os"),NP=S(require("path"));var Xd=require("fs"),OP=require("path"),T5=(r,e)=>e instanceof Error?{message:e.message,stack:e.stack}:typeof e=="bigint"?e.toString():e,Yd=class{constructor(e,t){this.file=e;this.dap=t;try{(0,Xd.mkdirSync)((0,OP.dirname)(e),{recursive:!0})}catch{}this.stream=(0,Xd.createWriteStream)(e)}async setup(){this.dap?.output({category:"console",output:`Verbose logs are written to:
${this.file}
`})}dispose(){this.stream&&(this.stream.end(),this.stream=void 0)}write(e){this.stream&&this.stream.write(JSON.stringify(e,T5)+`
`)}};var E5={runtime:null,"runtime.sourcecreate":null,"runtime.assertion":null,"runtime.launch":null,"runtime.target":null,"runtime.welcome":null,"runtime.exception":null,"runtime.sourcemap":null,"runtime.breakpoints":null,"sourcemap.parsing":null,"perf.function":null,"cdp.send":null,"cdp.receive":null,"dap.send":null,"dap.receive":null,internal:null,proxyActivity:null},cee=Object.keys(E5),q=Symbol("ILogger");function R5(r,e=(0,LP.tmpdir)()){if(r===!1)return{stdio:!1,logFile:null};let t={stdio:!0,logFile:NP.join(e,`vscode-debugadapter-${(0,MP.randomBytes)(4).toString("hex")}.json`)};return r===!0?t:{...t,...r}}function FP(r,e){let t=R5(e),n={sinks:[]};return t.logFile&&n.sinks.push(new Yd(t.logFile,r)),n}var A5=44;var BP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k5=new Uint8Array(64),jP=new Uint8Array(128);for(let r=0;r<BP.length;r++){let e=BP.charCodeAt(r);k5[r]=e,jP[e]=r}function Xu(r,e){let t=0,n=0,i=0;do{let s=r.next();i=jP[s],t|=(i&31)<<n,n+=5}while(i&32);let o=t&1;return t>>>=1,o&&(t=-2147483648|-t),e+t}function UP(r,e){return r.pos>=e?!1:r.peek()!==A5}var lee=1024*16;var D5=class{constructor(r){this.pos=0,this.buffer=r}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(r){let{buffer:e,pos:t}=this,n=e.indexOf(r,t);return n===-1?e.length:n}};function qP(r){let{length:e}=r,t=new D5(r),n=[],i=0,o=0,s=0,a=0,c=0;do{let u=t.indexOf(";"),l=[],p=!0,d=0;for(i=0;t.pos<u;){let f;i=Xu(t,i),i<d&&(p=!1),d=i,UP(t,u)?(o=Xu(t,o),s=Xu(t,s),a=Xu(t,a),UP(t,u)?(c=Xu(t,c),f=[i,o,s,a,c]):f=[i,o,s,a]):f=[i],l.push(f),t.pos++}p||O5(l),n.push(l),t.pos=u+1}while(t.pos<=e);return n}function O5(r){r.sort(M5)}function M5(r,e){return r[0]-e[0]}var L5=/^[\w+.-]+:\/\//,N5=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,F5=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i,Xe;(function(r){r[r.Empty=1]="Empty",r[r.Hash=2]="Hash",r[r.Query=3]="Query",r[r.RelativePath=4]="RelativePath",r[r.AbsolutePath=5]="AbsolutePath",r[r.SchemeRelative=6]="SchemeRelative",r[r.Absolute=7]="Absolute"})(Xe||(Xe={}));function B5(r){return L5.test(r)}function U5(r){return r.startsWith("//")}function $P(r){return r.startsWith("/")}function j5(r){return r.startsWith("file:")}function WP(r){return/^[.?#]/.test(r)}function Qd(r){let e=N5.exec(r);return HP(e[1],e[2]||"",e[3],e[4]||"",e[5]||"/",e[6]||"",e[7]||"")}function q5(r){let e=F5.exec(r),t=e[2];return HP("file:","",e[1]||"","",$P(t)?t:"/"+t,e[3]||"",e[4]||"")}function HP(r,e,t,n,i,o,s){return{scheme:r,user:e,host:t,port:n,path:i,query:o,hash:s,type:Xe.Absolute}}function VP(r){if(U5(r)){let t=Qd("http:"+r);return t.scheme="",t.type=Xe.SchemeRelative,t}if($P(r)){let t=Qd("http://foo.com"+r);return t.scheme="",t.host="",t.type=Xe.AbsolutePath,t}if(j5(r))return q5(r);if(B5(r))return Qd(r);let e=Qd("http://foo.com/"+r);return e.scheme="",e.host="",e.type=r?r.startsWith("?")?Xe.Query:r.startsWith("#")?Xe.Hash:Xe.RelativePath:Xe.Empty,e}function W5(r){if(r.endsWith("/.."))return r;let e=r.lastIndexOf("/");return r.slice(0,e+1)}function V5(r,e){GP(e,e.type),r.path==="/"?r.path=e.path:r.path=W5(e.path)+r.path}function GP(r,e){let t=e<=Xe.RelativePath,n=r.path.split("/"),i=1,o=0,s=!1;for(let c=1;c<n.length;c++){let u=n[c];if(!u){s=!0;continue}if(s=!1,u!=="."){if(u===".."){o?(s=!0,o--,i--):t&&(n[i++]=u);continue}n[i++]=u,o++}}let a="";for(let c=1;c<i;c++)a+="/"+n[c];(!a||s&&!a.endsWith("/.."))&&(a+="/"),r.path=a}function zP(r,e){if(!r&&!e)return"";let t=VP(r),n=t.type;if(e&&n!==Xe.Absolute){let o=VP(e),s=o.type;switch(n){case Xe.Empty:t.hash=o.hash;case Xe.Hash:t.query=o.query;case Xe.Query:case Xe.RelativePath:V5(t,o);case Xe.AbsolutePath:t.user=o.user,t.host=o.host,t.port=o.port;case Xe.SchemeRelative:t.scheme=o.scheme}s>n&&(n=s)}GP(t,n);let i=t.query+t.hash;switch(n){case Xe.Hash:case Xe.Query:return i;case Xe.RelativePath:{let o=t.path.slice(1);return o?WP(e||r)&&!WP(o)?"./"+o+i:o+i:i||"."}case Xe.AbsolutePath:return t.path+i;default:return t.scheme+"//"+t.user+t.host+t.port+t.path+i}}function H5(r){if(!r)return"";let e=r.lastIndexOf("/");return r.slice(0,e+1)}function G5(r,e){let t=H5(r),n=e?e+"/":"";return i=>zP(n+(i||""),t)}var an=0,Wb=1,Vb=2,$b=3,JP=4,YP=1,XP=2;function z5(r,e){let t=KP(r,0);if(t===r.length)return r;e||(r=r.slice());for(let n=t;n<r.length;n=KP(r,n+1))r[n]=J5(r[n],e);return r}function KP(r,e){for(let t=e;t<r.length;t++)if(!K5(r[t]))return t;return r.length}function K5(r){for(let e=1;e<r.length;e++)if(r[e][an]<r[e-1][an])return!1;return!0}function J5(r,e){return e||(r=r.slice()),r.sort(QP)}function QP(r,e){return r[an]-e[an]}function Y5(r,e){let t=e.map(()=>[]);for(let n=0;n<r.length;n++){let i=r[n];for(let o=0;o<i.length;o++){let s=i[o];if(s.length===1)continue;let a=s[Wb],c=s[Vb],u=s[$b],l=t[a];(l[c]||(l[c]=[])).push([u,n,s[an]])}}for(let n=0;n<t.length;n++){let i=t[n];for(let o=0;o<i.length;o++){let s=i[o];s&&s.sort(QP)}}return t}var rs=!1;function X5(r,e,t,n){for(;t<=n;){let i=t+(n-t>>1),o=r[i][an]-e;if(o===0)return rs=!0,i;o<0?t=i+1:n=i-1}return rs=!1,t-1}function ZP(r,e,t){for(let n=t+1;n<r.length&&r[n][an]===e;t=n++);return t}function eT(r,e,t){for(let n=t-1;n>=0&&r[n][an]===e;t=n--);return t}function tT(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function Q5(r,e,t,n){let{lastKey:i,lastNeedle:o,lastIndex:s}=t,a=0,c=r.length-1;if(n===i){if(e===o)return rs=s!==-1&&r[s][an]===e,s;e>=o?a=s===-1?0:s:c=s}return t.lastKey=n,t.lastNeedle=e,t.lastIndex=X5(r,e,a,c)}function Hb(r){return typeof r=="string"?JSON.parse(r):r}var ef=function(r,e){let t=Hb(r);if(!("sections"in t))return new tf(t,e);let n=[],i=[],o=[],s=[],a=[];rT(t,e,n,i,o,s,a,0,0,1/0,1/0);let c={version:3,file:t.file,names:s,sources:i,sourcesContent:o,mappings:n,ignoreList:a};return tG(c)};function rT(r,e,t,n,i,o,s,a,c,u,l){let{sections:p}=r;for(let d=0;d<p.length;d++){let{map:f,offset:h}=p[d],m=u,y=l;if(d+1<p.length){let w=p[d+1].offset;m=Math.min(u,a+w.line),m===u?y=Math.min(l,c+w.column):m<u&&(y=c+w.column)}Z5(f,e,t,n,i,o,s,a+h.line,c+h.column,m,y)}}function Z5(r,e,t,n,i,o,s,a,c,u,l){let p=Hb(r);if("sections"in p)return rT(...arguments);let d=new tf(p,e),f=n.length,h=o.length,m=ns(d),{resolvedSources:y,sourcesContent:w,ignoreList:k}=d;if(qb(n,y),qb(o,d.names),w)qb(i,w);else for(let D=0;D<y.length;D++)i.push(null);if(k)for(let D=0;D<k.length;D++)s.push(k[D]+f);for(let D=0;D<m.length;D++){let Q=a+D;if(Q>u)return;let F=eG(t,Q),te=D===0?c:0,H=m[D];for(let B=0;B<H.length;B++){let Z=H[B],ve=te+Z[an];if(Q===u&&ve>=l)return;if(Z.length===1){F.push([ve]);continue}let R=f+Z[Wb],Ie=Z[Vb],_e=Z[$b];F.push(Z.length===4?[ve,R,Ie,_e]:[ve,R,Ie,_e,h+Z[JP]])}}}function qb(r,e){for(let t=0;t<e.length;t++)r.push(e[t])}function eG(r,e){for(let t=r.length;t<=e;t++)r[t]=[];return r[e]}var nT="`line` must be greater than 0 (lines start at line 1)",iT="`column` must be greater than or equal to 0 (columns start at column 0)",Aa=-1,_i=1,tf=class{constructor(r,e){let t=typeof r=="string";if(!t&&r._decodedMemo)return r;let n=Hb(r),{version:i,file:o,names:s,sourceRoot:a,sources:c,sourcesContent:u}=n;this.version=i,this.file=o,this.names=s||[],this.sourceRoot=a,this.sources=c,this.sourcesContent=u,this.ignoreList=n.ignoreList||n.x_google_ignoreList||void 0;let l=G5(e,a);this.resolvedSources=c.map(l);let{mappings:p}=n;if(typeof p=="string")this._encoded=p,this._decoded=void 0;else if(Array.isArray(p))this._encoded=void 0,this._decoded=z5(p,t);else throw n.sections?new Error("TraceMap passed sectioned source map, please use FlattenMap export instead"):new Error(`invalid source map: ${JSON.stringify(n)}`);this._decodedMemo=tT(),this._bySources=void 0,this._bySourceMemos=void 0}};function ns(r){var e;return(e=r)._decoded||(e._decoded=qP(r._encoded))}function oT(r,e){let{line:t,column:n,bias:i}=e;if(t--,t<0)throw new Error(nT);if(n<0)throw new Error(iT);let o=ns(r);if(t>=o.length)return Zd(null,null,null,null);let s=o[t],a=Gb(s,r._decodedMemo,t,n,i||_i);if(a===-1)return Zd(null,null,null,null);let c=s[a];if(c.length===1)return Zd(null,null,null,null);let{names:u,resolvedSources:l}=r;return Zd(l[c[Wb]],c[Vb]+1,c[$b],c.length===5?u[c[JP]]:null)}function sT(r,e){let{source:t,line:n,column:i,bias:o}=e;return uT(r,t,n,i,o||_i,!1)}function aT(r,e){let{source:t,line:n,column:i,bias:o}=e;return uT(r,t,n,i,o||Aa,!0)}function cT(r,e){let t=ns(r),{names:n,resolvedSources:i}=r;for(let o=0;o<t.length;o++){let s=t[o];for(let a=0;a<s.length;a++){let c=s[a],u=o+1,l=c[0],p=null,d=null,f=null,h=null;c.length!==1&&(p=i[c[1]],d=c[2]+1,f=c[3]),c.length===5&&(h=n[c[4]]),e({generatedLine:u,generatedColumn:l,source:p,originalLine:d,originalColumn:f,name:h})}}}function tG(r,e){let t=new tf(rG(r,[]),e);return t._decoded=r.mappings,t}function rG(r,e){return{version:r.version,file:r.file,names:r.names,sourceRoot:r.sourceRoot,sources:r.sources,sourcesContent:r.sourcesContent,mappings:e,ignoreList:r.ignoreList||r.x_google_ignoreList}}function Zd(r,e,t,n){return{source:r,line:e,column:t,name:n}}function Qu(r,e){return{line:r,column:e}}function Gb(r,e,t,n,i){let o=Q5(r,n,e,t);return rs?o=(i===Aa?ZP:eT)(r,n,o):i===Aa&&o++,o===-1||o===r.length?-1:o}function nG(r,e,t,n,i){let o=Gb(r,e,t,n,_i);if(!rs&&i===Aa&&o++,o===-1||o===r.length)return[];let s=rs?n:r[o][an];rs||(o=eT(r,s,o));let a=ZP(r,s,o),c=[];for(;o<=a;o++){let u=r[o];c.push(Qu(u[YP]+1,u[XP]))}return c}function uT(r,e,t,n,i,o){var s,a;if(t--,t<0)throw new Error(nT);if(n<0)throw new Error(iT);let{sources:c,resolvedSources:u}=r,l=c.indexOf(e);if(l===-1&&(l=u.indexOf(e)),l===-1)return o?[]:Qu(null,null);let p=(s=r)._bySourceMemos||(s._bySourceMemos=c.map(tT)),f=((a=r)._bySources||(a._bySources=Y5(ns(r),p)))[l][t];if(f==null)return o?[]:Qu(null,null);let h=p[l];if(o)return nG(f,h,t,n,i);let m=Gb(f,h,t,n,i);if(m===-1)return Qu(null,null);let y=f[m];return Qu(y[YP]+1,y[XP])}var jn=S($());var rf=class extends Error{constructor(t,n,i){super(`Unexpected ${t} response from ${n}: ${i??"<empty body>"}`);this.statusCode=t;this.url=n;this.body=i}},is=Symbol("IResourceProvider");var Ce=S(Ge());var O=class extends Error{get cause(){return this._cause}constructor(e){super("__errorMarker"in e?e.error.format:e.format),this._cause="__errorMarker"in e?e.error:e}};function lT(r,e){r.output({category:"console",output:e+`
`})}function we(r,e=9222){return{__errorMarker:!0,error:{id:e,format:r,showUser:!1}}}function Se(r,e=9223){return{__errorMarker:!0,error:{id:e,format:r,showUser:!0}}}var zb=()=>Se(Ce.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvs', 'nvm' or 'fnm' to be installed."),9224),pT=()=>Se(Ce.t("Attribute 'runtimeVersion' with a flavor/architecture requires 'nvs' to be installed."),9225),dT=()=>Se(Ce.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvm-windows' or 'nvs'."),9226),Kb=(r,e)=>Se(Ce.t("Node.js version '{0}' not installed using version manager {1}.",r,e),9226),fT=r=>Se(Ce.t("Cannot launch debug target in terminal ({0}).",r),9227),hT=r=>Se(Ce.t("Can't load environment variables from file ({0}).",r),9228),mT=r=>Se(Ce.t("The configured `cwd` {0} does not exist.",r),9245),Jb=(r,e)=>Se(Ce.t(`Can't find Node.js binary "{0}": {1}. Make sure Node.js is installed and in your PATH, or set the "runtimeExecutable" in your launch.json`,r,e),9229),gT=(r,e)=>Se(Ce.t('The Node version in "{0}" is outdated (version {1}), we require at least Node 8.x.',e,r),9230),Yb=r=>Se(Ce.t('Invalid hit condition "{0}". Expected an expression like "> 42" or "== 2".',r),9231),ka=()=>Se(Ce.t("An error occurred taking a profile from the target."),9235),yT=()=>Se(Ce.t("Please stop the running profile before starting a new one."),9236),bT=r=>we(r,9238),nf=(r,e,t)=>Se(e==="*"&&!t.length?Ce.t('Unable to find an installation of the browser on your system. Try installing it, or providing an absolute path to the browser in the "runtimeExecutable" in your launch.json.'):Ce.t('Unable to find {0} version {1}. Available auto-discovered versions are: {2}. You can set the "runtimeExecutable" in your launch.json to one of these, or provide an absolute path to the browser executable.',r,e,JSON.stringify([...new Set(t)])),9233),Xb=r=>Se(Ce.t('Unable to launch browser: "{0}"',r.message),9240),Zu=r=>Se(r??Ce.t("Unable to attach to browser"),9242),of=()=>Se(Ce.t('Target page not found. You may need to update your "urlFilter" to match the page you want to debug.'),9241);var vT=()=>we(Ce.t("Variables not available in async stacks"),9234),Ji=(r,e)=>Se(Ce.t("Syntax error setting breakpoint with condition {0} on line {1}: {2}",JSON.stringify(r.condition),r.line,e),9237),Qb=()=>we(Ce.t("Thread not found"),9244),sf=(r,e)=>Se(Ce.t("Could not read source map for {0}: {1}",r,e)),_T=()=>Se(Ce.t("UWP webview debugging is not available on your platform.")),wT=()=>Se(Ce.t("Networking not available.")),ST=()=>Se(Ce.t("Could not connect to any UWP Webview pipe. Make sure your webview is hosted in debug mode, and that the `pipeName` in your `launch.json` is correct.")),el=()=>Se(Ce.t("Could not find a location for the variable")),IT=()=>we(Ce.t('Missing source information. Did you set "originalUrl" or "source"?')),xT=r=>typeof r=="object"&&!!r&&"__errorMarker"in r,CT=(r,e)=>r instanceof O&&r.cause.id===e,PT=r=>Se(Ce.t("The browser process exited with code {0} before connecting to the debug server. Make sure the `runtimeExecutable` is configured correctly and that it can run without errors.",r));var TT=new WeakSet;var iG="Request",oG=r=>r.endsWith("Request"),rr=Symbol("IDapApi"),Oa=Symbol("IRootDapApi"),Da=class{constructor(e,t){this.transport=e;this.logger=t;this._pendingRequests=new Map;this._requestHandlers=new Map;this._eventListeners=new Map;this.disposables=[];this._initialized=ge();this.closed=!1;this._sequence=1,this.disposables.push(this.transport.messageReceived(n=>this._onMessage(n.message,n.receivedTime))),this._dap=this._createApi()}get initializedBlocker(){return this._initialized.promise}attachTelemetry(e){this.telemetryReporter=e,e.attachDap(this._dap)}dap(){return this._dap}_createApi(){return new Proxy({},{get:(e,t)=>{if(t!=="then")return t==="on"?(n,i)=>(this._requestHandlers.set(n,i),()=>this._requestHandlers.delete(n)):t==="off"?n=>this._requestHandlers.delete(n):n=>{if(oG(t))return this.enqueueRequest(t.slice(0,-iG.length),n);this._send({seq:0,type:"event",event:t,body:n})}}})}createTestApi(){let e=(i,o)=>{let s=this._eventListeners.get(i);s||(s=new Set,this._eventListeners.set(i,s)),s.add(o)},t=(i,o)=>{let s=this._eventListeners.get(i);s&&s.delete(o)},n=(i,o)=>new Promise(s=>{let a=c=>{o&&!o(c)||(t(i,a),s(c))};e(i,a)});return new Proxy({},{get:(i,o)=>o==="on"?e:o==="off"?t:o==="once"?n:s=>this.enqueueRequest(o,s)})}enqueueRequest(e,t){return new Promise(n=>{let i={seq:0,type:"request",command:e,arguments:t||{}};this._send(i),this._pendingRequests.set(i.seq,n)})}stop(){this.closed=!0,this.transport.close()}_send(e,t){if(this.closed)this.logger.warn("dap.send","Not sending message because the connection has ended",e),t?.();else{e.seq=this._sequence++;let n=e.type!=="event"||!TT.has(e.body);this.transport.send(e,n,t)}}async _onMessage(e,t){if(e.type==="request"){let n={seq:0,type:"response",request_seq:e.seq,command:e.command,success:!0};try{let i=this._requestHandlers.get(e.command);if(!i)console.error(`Unknown request: ${e.command}`);else{let o=await i(e.arguments);if(xT(o))this._send({...n,success:!1,message:o.error.format,body:{error:o.error}});else{let s={...n,body:o};n.command==="initialize"?(this._send(s),this._initialized.resolve(this)):n.command==="disconnect"?this._send({...n,body:o},()=>{this.stop()}):this._send(s)}}this.telemetryReporter?.reportOperation("dapOperation",e.command,t.elapsed().ms)}catch(i){i instanceof O?this._send({...n,success:!1,body:{error:i.cause}}):(console.error(i),this._send({...n,success:!1,body:{error:{id:9221,format:`Error processing ${e.command}: ${i.stack||i.message}`,showUser:!1,sendTelemetry:!1}}})),this.telemetryReporter?.reportOperation("dapOperation",e.command,t.elapsed().ms,i)}}if(e.type==="event"){let n=this._eventListeners.get(e.event)||new Set;for(let i of n)i(e.body)}if(e.type==="response"){let n=this._pendingRequests.get(e.request_seq);if(!this.logger.assert(n,`Expected callback for request sequence ID ${e.request_seq}`))return;if(this._pendingRequests.delete(e.request_seq),e.success)n(e.body);else{let i=e.body?.error?.format;n(i||e.message||"Unknown error")}}}};var cf=class{constructor(e,t){this.key=e;this.value=t}toString(){return`${this.key}: ${this.value}`}},Nn=class{constructor(e,t){this.projection=e;this.initialContents=t;let n=Array.from(t||[]).map(i=>[this.projection(i[0]),new cf(i[0],i[1])]);this.projectionToKeyAndValue=new Map(n)}clear(){this.projectionToKeyAndValue.clear()}delete(e){let t=this.projection(e);return this.projectionToKeyAndValue.delete(t)}forEach(e,t){this.projectionToKeyAndValue.forEach(n=>{e.call(t,n.value,n.key,this)},t)}get(e){let t=this.projection(e),n=this.projectionToKeyAndValue.get(t);return n?n.value:void 0}has(e){return this.projectionToKeyAndValue.has(this.projection(e))}set(e,t){return this.projectionToKeyAndValue.set(this.projection(e),new cf(e,t)),this}get size(){return this.projectionToKeyAndValue.size}*entries(){for(let e of this.projectionToKeyAndValue.values())yield[e.key,e.value]}*keys(){for(let e of this.projectionToKeyAndValue.values())yield e.key}*values(){for(let e of this.projectionToKeyAndValue.values())yield e.value}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return JSON.stringify(Array.from(this.entries()))}toString(){return`MapUsingProjection<${JSON.stringify([...this.entries()])}>`}};var Pe=Symbol("ISourcePathResolver");var cE=require("dns"),gr=S(require("path")),Un=require("url");var eE=require("url");var XT=require("./vendor/acorn.js"),QT=require("crypto");var Oe=class{constructor(e,t){this.lineNumber=e;this.columnNumber=t}get base0(){return this}get base1(){return new Ue(this.lineNumber+1,this.columnNumber+1)}get base01(){return new nr(this.lineNumber,this.columnNumber+1)}compare(e){let t=e.base0;return this.lineNumber-t.lineNumber||this.columnNumber-t.columnNumber}},Ue=class{constructor(e,t){this.lineNumber=e;this.columnNumber=t}get base0(){return new Oe(this.lineNumber-1,this.columnNumber-1)}get base1(){return this}get base01(){return new nr(this.lineNumber-1,this.columnNumber)}compare(e){let t=e.base1;return this.lineNumber-t.lineNumber||this.columnNumber-t.columnNumber||0}},nr=class{constructor(e,t){this.lineNumber=e;this.columnNumber=t}get base0(){return new Oe(this.lineNumber-1,this.columnNumber)}get base1(){return new Ue(this.lineNumber,this.columnNumber+1)}get base01(){return this}compare(e){let t=e.base01;return this.lineNumber-t.lineNumber||this.columnNumber-t.columnNumber}},Ft=class r{constructor(e,t){this.begin=e;this.end=t}static{this.ZERO=new r(new Oe(0,0),new Oe(0,0))}static{this.INFINITE=new r(new Oe(0,0),new Oe(1/0,1/0))}static simplify(e){if(e.length===0)return[];let t=e.slice().sort((o,s)=>o.begin.compare(s.begin)),n=[],i=t[0];for(let o=1;o<t.length;o++){let s=t[o];i.end.compare(s.begin)>=0?i=new r(i.begin,s.end):(n.push(i),i=s)}return n.push(i),n}contains(e){return e.compare(this.begin)>=0&&e.compare(this.end)<=0}containsRange(e){return this.contains(e.begin)&&this.contains(e.end)}toString(){let e=this.begin.base0,t=this.end.base0;return`Range[${e.lineNumber}:${e.columnNumber} -> ${t.lineNumber}:${t.columnNumber}]`}};var Zb=class{constructor(){this._indexes={__proto__:null},this.array=[]}};function sG(r,e){return r._indexes[e]}function ev(r,e){let t=sG(r,e);if(t!==void 0)return t;let{array:n,_indexes:i}=r,o=n.push(e);return i[e]=o-1}var aG=0,cG=1,uG=2,lG=3,pG=4,RT=-1,AT=class{constructor({file:r,sourceRoot:e}={}){this._names=new Zb,this._sources=new Zb,this._sourcesContent=[],this._mappings=[],this.file=r,this.sourceRoot=e,this._ignoreList=new Zb}};function kT(r,e,t,n,i,o,s,a){return dG(!1,r,e,t,n,i,o,s,a)}function DT(r,e,t){let{_sources:n,_sourcesContent:i}=r,o=ev(n,e);i[o]=t}function OT(r){let{_mappings:e,_sources:t,_sourcesContent:n,_names:i,_ignoreList:o}=r;return mG(e),{version:3,file:r.file||void 0,names:i.array,sourceRoot:r.sourceRoot||void 0,sources:t.array,sourcesContent:n,mappings:e,ignoreList:o.array}}function dG(r,e,t,n,i,o,s,a,c){let{_mappings:u,_sources:l,_sourcesContent:p,_names:d}=e,f=fG(u,t),h=hG(f,n);if(!i)return r&&gG(f,h)?void 0:ET(f,h,[n]);let m=ev(l,i),y=a?ev(d,a):RT;if(m===p.length&&(p[m]=c??null),!(r&&yG(f,h,m,o,s,y)))return ET(f,h,a?[n,m,o,s,y]:[n,m,o,s])}function fG(r,e){for(let t=r.length;t<=e;t++)r[t]=[];return r[e]}function hG(r,e){let t=r.length;for(let n=t-1;n>=0;t=n--){let i=r[n];if(e>=i[aG])break}return t}function ET(r,e,t){for(let n=r.length;n>e;n--)r[n]=r[n-1];r[e]=t}function mG(r){let{length:e}=r,t=e;for(let n=t-1;n>=0&&!(r[n].length>0);t=n,n--);t<e&&(r.length=t)}function gG(r,e){return e===0?!0:r[e-1].length===1}function yG(r,e,t,n,i,o){if(e===0)return!1;let s=r[e-1];return s.length===1?!1:t===s[cG]&&n===s[uG]&&i===s[lG]&&o===(s.length===5?s[pG]:RT)}var gf=require("./vendor/acorn.js");var{stringify:vG}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");var uf={"||":2,"??":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},cn=17,_G={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:cn,ClassExpression:cn,FunctionExpression:cn,ObjectExpression:cn,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function Ma(r,e){let{generator:t}=r;if(r.write("("),e!=null&&e.length>0){t[e[0].type](e[0],r);let{length:n}=e;for(let i=1;i<n;i++){let o=e[i];r.write(", "),t[o.type](o,r)}}r.write(")")}function jT(r,e,t,n){let i=r.expressionsPrecedence[e.type];if(i===cn)return!0;let o=r.expressionsPrecedence[t.type];return i!==o?!n&&i===15&&o===14&&t.operator==="**"||i<o:i!==13&&i!==14?!1:e.operator==="**"&&t.operator==="**"?!n:i===13&&o===13&&(e.operator==="??"||t.operator==="??")?!0:n?uf[e.operator]<=uf[t.operator]:uf[e.operator]<uf[t.operator]}function lf(r,e,t,n){let{generator:i}=r;jT(r,e,t,n)?(r.write("("),i[e.type](e,r),r.write(")")):i[e.type](e,r)}function wG(r,e,t,n){let i=e.split(`
`),o=i.length-1;if(r.write(i[0].trim()),o>0){r.write(n);for(let s=1;s<o;s++)r.write(t+i[s].trim()+n);r.write(t+i[o].trim())}}function Gt(r,e,t,n){let{length:i}=e;for(let o=0;o<i;o++){let s=e[o];r.write(t),s.type[0]==="L"?r.write("// "+s.value.trim()+`
`,s):(r.write("/*"),wG(r,s.value,t,n),r.write("*/"+n))}}function SG(r){let e=r;for(;e!=null;){let{type:t}=e;if(t[0]==="C"&&t[1]==="a")return!0;if(t[0]==="M"&&t[1]==="e"&&t[2]==="m")e=e.object;else return!1}}function tv(r,e){let{generator:t}=r,{declarations:n}=e;r.write(e.kind+" ");let{length:i}=n;if(i>0){t.VariableDeclarator(n[0],r);for(let o=1;o<i;o++)r.write(", "),t.VariableDeclarator(n[o],r)}}var MT,LT,NT,FT,BT,UT,IG={Program(r,e){let t=e.indent.repeat(e.indentLevel),{lineEnd:n,writeComments:i}=e;i&&r.comments!=null&&Gt(e,r.comments,t,n);let o=r.body,{length:s}=o;for(let a=0;a<s;a++){let c=o[a];i&&c.comments!=null&&Gt(e,c.comments,t,n),e.write(t),this[c.type](c,e),e.write(n)}i&&r.trailingComments!=null&&Gt(e,r.trailingComments,t,n)},BlockStatement:UT=function(r,e){let t=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e,o=t+e.indent;e.write("{");let s=r.body;if(s!=null&&s.length>0){e.write(n),i&&r.comments!=null&&Gt(e,r.comments,o,n);let{length:a}=s;for(let c=0;c<a;c++){let u=s[c];i&&u.comments!=null&&Gt(e,u.comments,o,n),e.write(o),this[u.type](u,e),e.write(n)}e.write(t)}else i&&r.comments!=null&&(e.write(n),Gt(e,r.comments,o,n),e.write(t));i&&r.trailingComments!=null&&Gt(e,r.trailingComments,o,n),e.write("}"),e.indentLevel--},ClassBody:UT,StaticBlock(r,e){e.write("static "),this.BlockStatement(r,e)},EmptyStatement(r,e){e.write(";")},ExpressionStatement(r,e){let t=e.expressionsPrecedence[r.expression.type];t===cn||t===3&&r.expression.left.type[0]==="O"?(e.write("("),this[r.expression.type](r.expression,e),e.write(")")):this[r.expression.type](r.expression,e),e.write(";")},IfStatement(r,e){e.write("if ("),this[r.test.type](r.test,e),e.write(") "),this[r.consequent.type](r.consequent,e),r.alternate!=null&&(e.write(" else "),this[r.alternate.type](r.alternate,e))},LabeledStatement(r,e){this[r.label.type](r.label,e),e.write(": "),this[r.body.type](r.body,e)},BreakStatement(r,e){e.write("break"),r.label!=null&&(e.write(" "),this[r.label.type](r.label,e)),e.write(";")},ContinueStatement(r,e){e.write("continue"),r.label!=null&&(e.write(" "),this[r.label.type](r.label,e)),e.write(";")},WithStatement(r,e){e.write("with ("),this[r.object.type](r.object,e),e.write(") "),this[r.body.type](r.body,e)},SwitchStatement(r,e){let t=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e;e.indentLevel++;let o=t+e.indent,s=o+e.indent;e.write("switch ("),this[r.discriminant.type](r.discriminant,e),e.write(") {"+n);let{cases:a}=r,{length:c}=a;for(let u=0;u<c;u++){let l=a[u];i&&l.comments!=null&&Gt(e,l.comments,o,n),l.test?(e.write(o+"case "),this[l.test.type](l.test,e),e.write(":"+n)):e.write(o+"default:"+n);let{consequent:p}=l,{length:d}=p;for(let f=0;f<d;f++){let h=p[f];i&&h.comments!=null&&Gt(e,h.comments,s,n),e.write(s),this[h.type](h,e),e.write(n)}}e.indentLevel-=2,e.write(t+"}")},ReturnStatement(r,e){e.write("return"),r.argument&&(e.write(" "),this[r.argument.type](r.argument,e)),e.write(";")},ThrowStatement(r,e){e.write("throw "),this[r.argument.type](r.argument,e),e.write(";")},TryStatement(r,e){if(e.write("try "),this[r.block.type](r.block,e),r.handler){let{handler:t}=r;t.param==null?e.write(" catch "):(e.write(" catch ("),this[t.param.type](t.param,e),e.write(") ")),this[t.body.type](t.body,e)}r.finalizer&&(e.write(" finally "),this[r.finalizer.type](r.finalizer,e))},WhileStatement(r,e){e.write("while ("),this[r.test.type](r.test,e),e.write(") "),this[r.body.type](r.body,e)},DoWhileStatement(r,e){e.write("do "),this[r.body.type](r.body,e),e.write(" while ("),this[r.test.type](r.test,e),e.write(");")},ForStatement(r,e){if(e.write("for ("),r.init!=null){let{init:t}=r;t.type[0]==="V"?tv(e,t):this[t.type](t,e)}e.write("; "),r.test&&this[r.test.type](r.test,e),e.write("; "),r.update&&this[r.update.type](r.update,e),e.write(") "),this[r.body.type](r.body,e)},ForInStatement:MT=function(r,e){e.write(`for ${r.await?"await ":""}(`);let{left:t}=r;t.type[0]==="V"?tv(e,t):this[t.type](t,e),e.write(r.type[3]==="I"?" in ":" of "),this[r.right.type](r.right,e),e.write(") "),this[r.body.type](r.body,e)},ForOfStatement:MT,DebuggerStatement(r,e){e.write("debugger;",r)},FunctionDeclaration:LT=function(r,e){e.write((r.async?"async ":"")+(r.generator?"function* ":"function ")+(r.id?r.id.name:""),r),Ma(e,r.params),e.write(" "),this[r.body.type](r.body,e)},FunctionExpression:LT,VariableDeclaration(r,e){tv(e,r),e.write(";")},VariableDeclarator(r,e){this[r.id.type](r.id,e),r.init!=null&&(e.write(" = "),this[r.init.type](r.init,e))},ClassDeclaration(r,e){if(e.write("class "+(r.id?`${r.id.name} `:""),r),r.superClass){e.write("extends ");let{superClass:t}=r,{type:n}=t,i=e.expressionsPrecedence[n];(n[0]!=="C"||n[1]!=="l"||n[5]!=="E")&&(i===cn||i<e.expressionsPrecedence.ClassExpression)?(e.write("("),this[r.superClass.type](t,e),e.write(")")):this[t.type](t,e),e.write(" ")}this.ClassBody(r.body,e)},ImportDeclaration(r,e){e.write("import ");let{specifiers:t}=r,{length:n}=t,i=0;if(n>0){for(;i<n;){i>0&&e.write(", ");let o=t[i],s=o.type[6];if(s==="D")e.write(o.local.name,o),i++;else if(s==="N")e.write("* as "+o.local.name,o),i++;else break}if(i<n){for(e.write("{");;){let o=t[i],{name:s}=o.imported;if(e.write(s,o),s!==o.local.name&&e.write(" as "+o.local.name),++i<n)e.write(", ");else break}e.write("}")}e.write(" from ")}this.Literal(r.source,e),e.write(";")},ImportExpression(r,e){e.write("import("),this[r.source.type](r.source,e),e.write(")")},ExportDefaultDeclaration(r,e){e.write("export default "),this[r.declaration.type](r.declaration,e),e.expressionsPrecedence[r.declaration.type]!=null&&r.declaration.type[0]!=="F"&&e.write(";")},ExportNamedDeclaration(r,e){if(e.write("export "),r.declaration)this[r.declaration.type](r.declaration,e);else{e.write("{");let{specifiers:t}=r,{length:n}=t;if(n>0)for(let i=0;;){let o=t[i],{name:s}=o.local;if(e.write(s,o),s!==o.exported.name&&e.write(" as "+o.exported.name),++i<n)e.write(", ");else break}e.write("}"),r.source&&(e.write(" from "),this.Literal(r.source,e)),e.write(";")}},ExportAllDeclaration(r,e){r.exported!=null?e.write("export * as "+r.exported.name+" from "):e.write("export * from "),this.Literal(r.source,e),e.write(";")},MethodDefinition(r,e){r.static&&e.write("static ");let t=r.kind[0];(t==="g"||t==="s")&&e.write(r.kind+" "),r.value.async&&e.write("async "),r.value.generator&&e.write("*"),r.computed?(e.write("["),this[r.key.type](r.key,e),e.write("]")):this[r.key.type](r.key,e),Ma(e,r.value.params),e.write(" "),this[r.value.body.type](r.value.body,e)},ClassExpression(r,e){this.ClassDeclaration(r,e)},ArrowFunctionExpression(r,e){e.write(r.async?"async ":"",r);let{params:t}=r;t!=null&&(t.length===1&&t[0].type[0]==="I"?e.write(t[0].name,t[0]):Ma(e,r.params)),e.write(" => "),r.body.type[0]==="O"?(e.write("("),this.ObjectExpression(r.body,e),e.write(")")):this[r.body.type](r.body,e)},ThisExpression(r,e){e.write("this",r)},Super(r,e){e.write("super",r)},RestElement:NT=function(r,e){e.write("..."),this[r.argument.type](r.argument,e)},SpreadElement:NT,YieldExpression(r,e){e.write(r.delegate?"yield*":"yield"),r.argument&&(e.write(" "),this[r.argument.type](r.argument,e))},AwaitExpression(r,e){e.write("await ",r),lf(e,r.argument,r)},TemplateLiteral(r,e){let{quasis:t,expressions:n}=r;e.write("`");let{length:i}=n;for(let s=0;s<i;s++){let a=n[s],c=t[s];e.write(c.value.raw,c),e.write("${"),this[a.type](a,e),e.write("}")}let o=t[t.length-1];e.write(o.value.raw,o),e.write("`")},TemplateElement(r,e){e.write(r.value.raw,r)},TaggedTemplateExpression(r,e){lf(e,r.tag,r),this[r.quasi.type](r.quasi,e)},ArrayExpression:BT=function(r,e){if(e.write("["),r.elements.length>0){let{elements:t}=r,{length:n}=t;for(let i=0;;){let o=t[i];if(o!=null&&this[o.type](o,e),++i<n)e.write(", ");else{o==null&&e.write(", ");break}}}e.write("]")},ArrayPattern:BT,ObjectExpression(r,e){let t=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e,o=t+e.indent;if(e.write("{"),r.properties.length>0){e.write(n),i&&r.comments!=null&&Gt(e,r.comments,o,n);let s=","+n,{properties:a}=r,{length:c}=a;for(let u=0;;){let l=a[u];if(i&&l.comments!=null&&Gt(e,l.comments,o,n),e.write(o),this[l.type](l,e),++u<c)e.write(s);else break}e.write(n),i&&r.trailingComments!=null&&Gt(e,r.trailingComments,o,n),e.write(t+"}")}else i?r.comments!=null?(e.write(n),Gt(e,r.comments,o,n),r.trailingComments!=null&&Gt(e,r.trailingComments,o,n),e.write(t+"}")):r.trailingComments!=null?(e.write(n),Gt(e,r.trailingComments,o,n),e.write(t+"}")):e.write("}"):e.write("}");e.indentLevel--},Property(r,e){r.method||r.kind[0]!=="i"?this.MethodDefinition(r,e):(r.shorthand||(r.computed?(e.write("["),this[r.key.type](r.key,e),e.write("]")):this[r.key.type](r.key,e),e.write(": ")),this[r.value.type](r.value,e))},PropertyDefinition(r,e){if(r.static&&e.write("static "),r.computed&&e.write("["),this[r.key.type](r.key,e),r.computed&&e.write("]"),r.value==null){r.key.type[0]!=="F"&&e.write(";");return}e.write(" = "),this[r.value.type](r.value,e),e.write(";")},ObjectPattern(r,e){if(e.write("{"),r.properties.length>0){let{properties:t}=r,{length:n}=t;for(let i=0;this[t[i].type](t[i],e),++i<n;)e.write(", ")}e.write("}")},SequenceExpression(r,e){Ma(e,r.expressions)},UnaryExpression(r,e){if(r.prefix){let{operator:t,argument:n,argument:{type:i}}=r;e.write(t);let o=jT(e,n,r);!o&&(t.length>1||i[0]==="U"&&(i[1]==="n"||i[1]==="p")&&n.prefix&&n.operator[0]===t&&(t==="+"||t==="-"))&&e.write(" "),o?(e.write(t.length>1?" (":"("),this[i](n,e),e.write(")")):this[i](n,e)}else this[r.argument.type](r.argument,e),e.write(r.operator)},UpdateExpression(r,e){r.prefix?(e.write(r.operator),this[r.argument.type](r.argument,e)):(this[r.argument.type](r.argument,e),e.write(r.operator))},AssignmentExpression(r,e){this[r.left.type](r.left,e),e.write(" "+r.operator+" "),this[r.right.type](r.right,e)},AssignmentPattern(r,e){this[r.left.type](r.left,e),e.write(" = "),this[r.right.type](r.right,e)},BinaryExpression:FT=function(r,e){let t=r.operator==="in";t&&e.write("("),lf(e,r.left,r,!1),e.write(" "+r.operator+" "),lf(e,r.right,r,!0),t&&e.write(")")},LogicalExpression:FT,ConditionalExpression(r,e){let{test:t}=r,n=e.expressionsPrecedence[t.type];n===cn||n<=e.expressionsPrecedence.ConditionalExpression?(e.write("("),this[t.type](t,e),e.write(")")):this[t.type](t,e),e.write(" ? "),this[r.consequent.type](r.consequent,e),e.write(" : "),this[r.alternate.type](r.alternate,e)},NewExpression(r,e){e.write("new ");let t=e.expressionsPrecedence[r.callee.type];t===cn||t<e.expressionsPrecedence.CallExpression||SG(r.callee)?(e.write("("),this[r.callee.type](r.callee,e),e.write(")")):this[r.callee.type](r.callee,e),Ma(e,r.arguments)},CallExpression(r,e){let t=e.expressionsPrecedence[r.callee.type];t===cn||t<e.expressionsPrecedence.CallExpression?(e.write("("),this[r.callee.type](r.callee,e),e.write(")")):this[r.callee.type](r.callee,e),r.optional&&e.write("?."),Ma(e,r.arguments)},ChainExpression(r,e){this[r.expression.type](r.expression,e)},MemberExpression(r,e){let t=e.expressionsPrecedence[r.object.type];t===cn||t<e.expressionsPrecedence.MemberExpression?(e.write("("),this[r.object.type](r.object,e),e.write(")")):this[r.object.type](r.object,e),r.computed?(r.optional&&e.write("?."),e.write("["),this[r.property.type](r.property,e),e.write("]")):(r.optional?e.write("?."):e.write("."),this[r.property.type](r.property,e))},MetaProperty(r,e){e.write(r.meta.name+"."+r.property.name,r)},Identifier(r,e){e.write(r.name,r)},PrivateIdentifier(r,e){e.write(`#${r.name}`,r)},Literal(r,e){r.raw!=null?e.write(r.raw,r):r.regex!=null?this.RegExpLiteral(r,e):r.bigint!=null?e.write(r.bigint+"n",r):e.write(vG(r.value),r)},RegExpLiteral(r,e){let{regex:t}=r;e.write(`/${t.pattern}/${t.flags}`,r)}},xG={};var rv=class{constructor(e){let t=e??xG;this.output="",t.output!=null?(this.output=t.output,this.write=this.writeToStream):this.output="",this.generator=t.generator!=null?t.generator:IG,this.expressionsPrecedence=t.expressionsPrecedence!=null?t.expressionsPrecedence:_G,this.indent=t.indent!=null?t.indent:"  ",this.lineEnd=t.lineEnd!=null?t.lineEnd:`
`,this.indentLevel=t.startingIndentLevel!=null?t.startingIndentLevel:0,this.writeComments=t.comments?t.comments:!1,t.sourceMap!=null&&(this.write=t.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=t.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:t.sourceMap.file||t.sourceMap._file})}write(e){this.output+=e}writeToStream(e){this.output.write(e)}writeAndMap(e,t){this.output+=e,this.map(e,t)}writeToStreamAndMap(e,t){this.output.write(e),this.map(e,t)}map(e,t){if(t!=null){let{type:o}=t;if(o[0]==="L"&&o[2]==="n"){this.column=0,this.line++;return}if(t.loc!=null){let{mapping:s}=this;s.original=t.loc.start,s.name=t.name,this.sourceMap.addMapping(s)}if(o[0]==="T"&&o[8]==="E"||o[0]==="L"&&o[1]==="i"&&typeof t.value=="string"){let{length:s}=e,{column:a,line:c}=this;for(let u=0;u<s;u++)e[u]===`
`?(a=0,c++):a++;this.column=a,this.line=c;return}}let{length:n}=e,{lineEnd:i}=this;n>0&&(this.lineEndSize>0&&(i.length===1?e[n-1]===i:e.endsWith(i))?(this.line+=this.lineEndSize,this.column=0):this.column+=n)}toString(){return this.output}};function wi(r,e){let t=new rv(e);return t.generator[r.type](r,t),t.output}var qT=require("./vendor/acorn.js"),ff=require("./vendor/acorn-loose.js");var pf={ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],AwaitExpression:["argument"],BinaryExpression:["left","right"],BlockStatement:["body"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],ExportAllDeclaration:["exported","source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportExpression:["source"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXClosingFragment:[],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXFragment:["openingFragment","children","closingFragment"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes"],JSXOpeningFragment:[],JSXSpreadAttribute:["argument"],JSXSpreadChild:["expression"],JSXText:[],LabeledStatement:["label","body"],Literal:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],StaticBlock:["body"],Super:[],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},CG=Object.keys(pf);for(let r of CG)Object.freeze(pf[r]);Object.freeze(pf);var nv=pf;var iv={ecmaVersion:"latest",locations:!0,allowAwaitOutsideFunction:!0,allowImportExportEverywhere:!0,allowReserved:!0,allowReturnOutsideFunction:!0},Yi=r=>r.start,ov=r=>r.end,WT=(r,e)=>r.slice(Yi(e),ov(e)),Fn=(r,e=!1)=>(e?qT.parse:ff.parse)(r,iv),tl=r=>{let e=Fn(r);for(let t of e.body)t.type==="FunctionDeclaration"&&t.id&&(0,ff.isDummy)(t.id)&&(t.id=null);return e.body};function VT(r,e,t){return e.length>1||e[0].type!=="FunctionDeclaration"?GT(r,e,!0,t):$T(r,[{type:"ReturnStatement",argument:{type:"CallExpression",optional:!1,arguments:[{type:"ThisExpression"},...r.map(n=>({type:"Identifier",name:n}))],callee:{type:"MemberExpression",property:{type:"Identifier",name:"call"},computed:!1,optional:!1,object:{type:"FunctionExpression",params:e[0].params,body:e[0].body}}}}],!0,t)}var $T=(r,e,t,n)=>{let i={type:"Identifier",name:"e"},s=n?[{type:"TryStatement",block:{type:"BlockStatement",body:e},handler:{type:"CatchClause",param:i,body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"MemberExpression",object:i,property:{type:"Identifier",name:"stack"},computed:!1,optional:!1},operator:"||",right:{type:"MemberExpression",object:i,property:{type:"Identifier",name:"message"},computed:!1,optional:!1}},operator:"||",right:{type:"CallExpression",callee:{type:"Identifier",name:"String"},arguments:[i],optional:!1}}}]}}}]:e;return t?{type:"FunctionExpression",id:{type:"Identifier",name:"_generatedCode"},params:r.map(a=>({type:"Identifier",name:a})),body:{type:"BlockStatement",body:s}}:{type:"ArrowFunctionExpression",params:r.map(a=>({type:"Identifier",name:a})),expression:!1,body:{type:"BlockStatement",body:s}}},TG=(r,e)=>({type:"CallExpression",arguments:r.map(t=>({type:"Identifier",name:t})),callee:e,optional:!1}),HT=(r,e,t)=>TG(r,GT(r,e,t,!0));function GT(r,e,t,n){let i=e[e.length-1];if(i.type!=="ReturnStatement"){let o=EG(i);o&&(e=[...e.slice(0,-1),{type:"ReturnStatement",argument:o}])}return $T(r,e,t,n)}function EG(r){switch(r.type){case"ExpressionStatement":return r.expression;case"BlockStatement":return{type:"CallExpression",arguments:[],callee:{type:"ArrowFunctionExpression",params:[],expression:!1,body:r},optional:!1};case"ReturnStatement":return r.argument||void 0;default:return}}var Xi=(r,e)=>{df(r,e)},hf=(r,e)=>{let t=df(r,e);return t&&typeof t=="object"?t.replace:r},df=(r,e,t)=>{if(!r)return;let n=e.enter(r,t);if(n===0)return 0;if(n&&typeof n=="object")return n;if(n===1)return;let i=nv[r.type];if(i)for(let o of i){let s=r[o];if(s instanceof Array)for(let[a,c]of s.entries()){let u=df(c,e,r);if(u===0)return 0;u&&typeof u=="object"&&(s[a]=u.replace)}else if(s){let a=df(s,e,r);if(a===0)return 0;a&&typeof a=="object"&&(r[o]=a.replace)}}e.leave?.(r)};var La=class r{constructor(e,t,n,i,o){this.original=e;this.metadata=t;this.actualRoot=n;this.actualSources=i;this.hasNames=o;this.sourceActualToOriginal=new Map;this.sourceOriginalToActual=new Map;this.id=r.idCounter++;if(i.length!==e.sources.length)throw new Error("Expected actualSources.length === original.source.length");for(let s=0;s<i.length;s++){let a=i[s],c=e.sources[s];a!==null&&c!==null&&(this.sourceActualToOriginal.set(a,c),this.sourceOriginalToActual.set(c,a))}}static{this.idCounter=0}get sources(){return this.actualSources.slice()}get sourceRoot(){return this.actualRoot}computedSourceUrl(e){return Ve(mf(Tt(this.metadata.sourceMapUrl)?this.metadata.compiledPath:this.metadata.sourceMapUrl,this.sourceRoot+e))}originalPositionFor(e){let t=oT(this.original,e);return t.source&&(t.source=this.sourceOriginalToActual.get(t.source)??t.source),t}generatedPositionFor(e){let t=this.sourceActualToOriginal.get(e.source)??e.source;if(!isFinite(e.line)){let n=e.bias||_i;return this.getBestGeneratedForOriginal(t,(i,o)=>RG(i,o)*n)}return sT(this.original,{...e,source:t})}allGeneratedPositionsFor(e){return aT(this.original,{...e,source:this.sourceActualToOriginal.get(e.source)??e.source})}sourceContentFor(e){e=this.sourceActualToOriginal.get(e)??e;let t=this.original.sources.indexOf(e);return t===-1?null:this.original.sourcesContent?.[t]??null}eachMapping(e){cT(this.original,e)}decodedMappings(){return ns(this.original)}names(){return this.original.names}getBestGeneratedForOriginal(e,t){let n;return this.eachMapping(i=>{i.source===e&&(!n||t(i,n)>0)&&(n=i)}),n?{column:n.generatedColumn,line:n.generatedLine}:{column:null,line:null}}},RG=({originalLine:r,originalColumn:e},{originalLine:t,originalColumn:n})=>(r||0)-(t||0)||(e||0)-(n||0);async function KT(r,e,t,n){let i=gf.Parser.parse(e,{locations:!0,ecmaVersion:"latest"}),o=new AT({file:r}),s=wi(i,{sourceMap:{addMapping:a=>kT(o,a.original.line-1,a.original.column,r,a.generated.line-1,a.generated.column)}});return DT(o,r,s),new La(new ef(OT(o)),{sourceMapUrl:n,compiledPath:t},"",[r],!1)}function JT(r){let e;try{e=Fn(r)}catch{return}let t=(c,u)=>({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:c,right:u}}),n=!1,i=!1,o=hf(e,{enter(c,u){switch(c.type){case"ClassDeclaration":return{replace:t(c.id||{type:"Identifier",name:"_default"},{...c,type:"ClassExpression"})};case"FunctionDeclaration":return{replace:t(c.id||{type:"Identifier",name:"_default"},{...c,type:"FunctionExpression"})};case"FunctionExpression":case"ArrowFunctionExpression":case"MethodDefinition":return 1;case"AwaitExpression":n=!0;return;case"ForOfStatement":c.await&&(n=!0);return;case"ReturnStatement":i=!0;return;case"VariableDeclaration":if(!u||!("body"in u)||!(u.body instanceof Array))return;let l=u.body,p=c.declarations.map(d=>({type:"ExpressionStatement",expression:{type:"UnaryExpression",operator:"void",prefix:!0,argument:{type:"AssignmentExpression",operator:"=",left:d.id,right:d.init||{type:"Identifier",name:"undefined"}}}}));l.splice(l.indexOf(c),1,...p)}}});if(!n||i)return;let s=e.body[e.body.length-1];s.type==="ExpressionStatement"&&(e.body[e.body.length-1]={type:"ReturnStatement",argument:s.expression});let a={type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"ArrowFunctionExpression",params:[],generator:!1,expression:!1,async:!0,body:{type:"BlockStatement",body:o.body}},arguments:[],optional:!1}};return wi(a)}function rl(r){try{let e=(0,gf.parseExpressionAt)(r,0,iv);return e.end<r.length||e.type!=="ObjectExpression"?r:`(${r})`}catch{return r}}function Na(r){if(!r)return;let e="sourceMappingURL",t=r.length,n=e.length,i=t,o=0;for(;;){if(i=r.lastIndexOf(e,i),i===-1||i<4)return;if(i-=4,r[i]==="/"&&r[i+1]==="/"&&!(r[i+2]!=="#"&&r[i+2]!=="@")&&!(r[i+3]!==" "&&r[i+3]!=="	")&&(o=i+4+n,!(o<t&&r[o]!=="=")))break}let s=r.substring(o+1),a=s.indexOf(`
`);return a!==-1&&(s=s.substring(0,a)),s.trim()}function yf(r,e,t){let n=t.generatedPositionFor({source:r,line:e.lineNumber,column:e.columnNumber-1,bias:_i}),i=a=>{if(a.line===null||a.column===null)return 1e11;let c=t.originalPositionFor(a);return c.line!==null?Math.abs(e.lineNumber-c.line):1e11},o=i(n),s=t.allGeneratedPositionsFor({source:r,line:e.lineNumber,column:e.columnNumber-1}).filter(a=>a.line!==null&&a.column!==null).sort((a,c)=>a.line!==c.line?a.line-c.line:a.column-c.column).map(a=>[a,i(a)]);return s.push([n,o]),s.sort(([a,c],[u,l])=>c-l||a.line-u.line||a.column-u.column),s[0][0]}var sv=(r,e)=>!!e&&((e.type==="FunctionExpression"||e.type==="FunctionDeclaration"||e.type==="ArrowFunctionExpression")&&e.params.includes(r)||(e.type==="ForInStatement"||e.type==="ForOfStatement")&&e.left===r||e.type==="VariableDeclarator"&&e.id===r||e.type==="AssignmentPattern"&&e.left===r||e.type==="CatchClause"&&e.param===r||"kind"in e&&e.kind==="init"&&e.value===r||e.type==="RestElement"&&e.argument===r||e.type==="AssignmentPattern"&&e.left===r);function Qi(r){try{new Function(r)}catch(e){return e}}function kG(r,e){let t=Fn(r),n,i;return Xi(t,{enter:o=>{let s=o;e>=s.start&&e<s.end&&(o.type==="CallExpression"||o.type==="NewExpression"?i=o:n=o)}}),i||n}var zT=/^[^()]+/g;function YT(r,e){try{let n=kG(r,e);if(n&&"callee"in n){let i=n.callee;return{text:`${r.slice(i.start,i.end)}(...)`,start:i.start,end:i.end}}else{let i=n;return{text:r.slice(i.start,i.end),start:i.start,end:i.end}}}catch{}zT.lastIndex=e-1;let t=zT.exec(r);if(t)return{text:t[0],start:e,end:e+t[0].length}}var $e=(r=av())=>`
//# sourceURL=${r}
`,av=()=>`eval-${(0,QT.randomBytes)(4).toString("hex")}.cdp`;function Si(r,e){return DG(""+r,e)}function DG(r,e){let t=(0,XT.parseExpressionAt)(r,0,{ecmaVersion:"latest",locations:!0});if(t.type!=="FunctionExpression")throw new Error(`Could not find function declaration for:

${r}`);let n=t.params.map(a=>{if(a.type!=="Identifier")throw new Error("Parameter must be identifier");return a.name}),{start:i,end:o}=t.body,s=(a,c,u)=>{let l=c,p=[];for(let[d,f]of a.entries())l+=`let ${n[d]}=`,p.push(new Ft(new Oe(0,l.length),new Oe(0,l.length+f.length))),l+=f,l+=";";return l+=r.slice(i+1,o-1),l+=u,l+=`
${$e(e)}`,{out:l,argRanges:p}};return{expr:(...a)=>s(a,"(()=>{","})();").out,exprArgRanges:(...a)=>s(a,"(()=>{","})();").argRanges,decl:(...a)=>s(a,"function(...runtimeArgs){","}").out}}var os=class extends Error{constructor(t){super(t.text);this.details=t}},nl=class{constructor(e){this.objectId=e}};function it(r,e){let t=""+r,n=t.lastIndexOf("}");t=t.slice(0,n)+$e(e)+t.slice(n);let i=async({cdp:o,args:s,...a})=>{let c=await o.Runtime.callFunctionOn({functionDeclaration:t,arguments:s.map(u=>u instanceof nl?{objectId:u.objectId}:{value:u}),...a});if(!c)throw new os({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});if(c.exceptionDetails)throw new os(c.exceptionDetails);return c.result};return i.source=t,i}var ZT=()=>"globalThis.__jsDebugIsReady = true; "+$e();var il=new Set(["page","iframe","worker","service_worker"]),_f=new Set(["page","iframe"]),cv=new Set(["page","iframe"]),OG=cv,wf=class r{constructor(e,t,n,i,o,s,a,c,u){this._manager=e;this._targetInfo=t;this.launchConfig=s;this.sessionId=a;this.logger=c;this._attached=!1;this._onNameChangedEmitter=new A;this.onNameChanged=this._onNameChangedEmitter.event;this.entryBreakpoint=void 0;this._children=new Map;this.willWaitForDebugger=Promise.resolve();this.sourcePathResolver=this._manager._sourcePathResolver;this._cdp=n,n.pause(),this.parentTarget=i,this._waitingForDebugger=o,this._updateFromInfo(t),this._ondispose=u}get targetInfo(){return this._targetInfo}get targetId(){return this._targetInfo.targetId}get independentLifeycle(){return cv.has(this.type())}get supplementalConfig(){let e=this.type();return{__browserTargetType:e,__usePerformanceFromParent:e!=="page"}}targetOrigin(){return this._manager._targetOrigin}id(){return this.sessionId}cdp(){return this._cdp}name(){return this._computeName()}fileName(){return this._targetInfo.url}type(){return this._targetInfo.type}afterBind(){return this._cdp.resume(),Promise.resolve()}initialize(){return Promise.resolve()}async runIfWaitingForDebugger(){await Promise.all([!this._targetInfo.canAccessOpener&&this._cdp.Runtime.runIfWaitingForDebugger({}),this._cdp.Runtime.evaluate({expression:ZT()})])}parent(){return this.parentTarget&&!il.has(this.parentTarget.type())?this.parentTarget.parentTarget:this.parentTarget}children(){let e=[];for(let t of this._children.values())il.has(t.type())?e.push(t):e.push(...t.children());return e}canStop(){return OG.has(this.type())}stop(){if(this._manager.targetList().includes(this))if(this.type()==="service_worker"){if(this._manager.serviceWorkerModel.stopWorker(this.id()),!this.parentTarget)return;this._manager.serviceWorkerModel.stopWorker(this.parentTarget.id())}else this._cdp.Target.closeTarget({targetId:this._targetInfo.targetId})}canRestart(){return cv.has(this.type())}restart(){this._cdp.Page.reload({})}waitingForDebugger(){return this._waitingForDebugger}canAttach(){return!this._attached}async attach(){return this._waitingForDebugger=!1,this._attached=!0,Promise.resolve(this._cdp)}canDetach(){return this._attached}async detach(){this._attached=!1,this._manager._detachedFromTarget(this.sessionId)}executionContextName(e){let t=e.auxData,n=e.name;if(!t)return n;let i=t.frameId,o=i?this._manager.frameModel.frameForId(i):void 0;return o&&t.isDefault&&!o.parentFrame()?"top":o&&t.isDefault?o.displayName():o?`${n}`:n}supportsCustomBreakpoints(){return _f.has(this.type())}supportsXHRBreakpoints(){return _f.has(this.type())}scriptUrlToUrl(e){return Zi(this._targetInfo.url,e)||e}_updateFromInfo(e){this._targetInfo={...e,type:this._targetInfo.type},this._onNameChangedEmitter.fire()}setComputeNameFn(e){this._customNameComputeFn=e,this._onNameChangedEmitter.fire()}_computeName(){let e=this._customNameComputeFn?.(this);if(e)return e;if(this.type()==="service_worker"){let i=this._manager.serviceWorkerModel.version(this.id());if(i)return i.label()+" [Service Worker]"}let t=this._targetInfo.title;if(!(t&&this._manager.targetList().some(i=>i instanceof r&&i!==this&&i._targetInfo.title===this._targetInfo.title)))return t;try{let i=new eE.URL(this._targetInfo.url);i.protocol==="data:"?t=" <data>":i?t+=` (${this._targetInfo.url.replace(/^[a-z]+:\/\/|\/$/gi,"")})`:t+=` (${this._targetInfo.url})`}catch{t+=` (${this._targetInfo.url})`}return t}async _detached(){await this._manager.serviceWorkerModel.detached(this._cdp),this._ondispose(this)}};function ol(r){return r instanceof Array?r:[r]}function tE(r,e,t){let n=0,i=r.length-1;for(;n<=i;){let o=(n+i)/2|0,s=t(r[o],e);if(s<0)n=o+1;else if(s>0)i=o-1;else return o}return n}function rE(r,e){let t=new Map;for(let n of r){let i=e(n),o=t.get(i);o?o.push(n):t.set(i,[n])}return t}function Fa(r){return r.next().value}function Bn(r,e){return r.length<=e?r:r.substr(0,e-1)+"\u2026"}function Ba(r,e){if(r.length<=e)return r;let t=e>>1,n=e-t-1,i=r.codePointAt(r.length-n-1);i&&i>=65536&&(--n,++t);let o=r.codePointAt(t-1);return t>0&&o&&o>=65536&&--t,r.substr(0,t)+"\u2026"+r.substr(r.length-n,n)}var nE="/\\.?*()^${}|[]+",iE=r=>nE.includes(r);function zt(r,e){let t=nE.split("").filter(i=>!e||e.indexOf(i)<0).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${t}]`,"g");return r.replace(n,"\\$&")}var eo=class{constructor(e){this.source=e;this.lines=[];this.lines.push(0);for(let t=e.indexOf(`
`);t!==-1;t=e.indexOf(`
`,t+1))this.lines.push(t+1)}getLineOffset(e){return e>=this.lines.length?this.source.length:this.lines[e]}convert(e){let t=e.base0;if(t.lineNumber>this.lines.length)return this.source.length;let n=this.lines[t.lineNumber],i=this.lines[t.lineNumber+1]??this.source.length+1;return n+Math.min(i-n-1,t.columnNumber)}};var If=process.platform!=="win32";function lv(){return If}function xf(r){return If?r:r.toLowerCase()}function Cf(r,e){return If?r===e:r.toLowerCase()===e.toLowerCase()}function ss(){return lv()?new Map:new Nn(xf)}var oE=process.platform==="win32"?process.env.PATHEXT?.toLowerCase().split(";"):void 0,pv=r=>{let e=xf(gr.basename(r));if(oE){for(let t of oE)if(e.endsWith(t))return e.slice(0,-t.length)}return e},dv=async(r,e)=>{for(;;){let t=await e(r);if(t!==void 0)return t;let n=gr.dirname(r);if(n===r)return;r=n}},Pf=(r,e,t)=>dv(e,async n=>await r.exists(gr.join(n,t))?n:void 0),LG=new Set(["localhost","127.0.0.1","::1"]);var sE=r=>LG.has(r.toLowerCase()),NG=r=>{try{return new Un.URL(r).hostname.replace(/^\[|\]$/g,"")}catch{return r}};var Ua=Zo(async r=>{let e=NG(r);if(sE(e))return!0;try{let t=await cE.promises.lookup(e);return sE(t.address)}catch{return!1}});function Zi(r,e){try{return new Un.URL(e,r).href}catch{}}function fv(r){try{return new Un.URL(r).pathname}catch{return}}function mf(r,e){try{return new Un.URL(e),e}catch{}let t;try{t=new Un.URL(r||"")}catch{return e}let n=t.protocol+"//";return t.username&&(n+=t.username+":"+t.password+"@"),n+=t.host,n+=gr.dirname(t.pathname),n[n.length-1]!=="/"&&(n+="/"),n+=e,n}function Tf(r){try{return new Un.URL(r),!0}catch{return!1}}function uE(r){return r.replace(/\/$/,"").replace(/\\$/,"")}var FG=/^https:\/\/([a-z0-9\-]+)\+\.vscode-resource\.vscode-(?:webview|cdn)\.net\/(.+)/i,aE="vscode-file://vscode-app/";function He(r){let e=FG.exec(r);if(e)r=`${e[1]}:///${e[2]}`;else if(r.startsWith("vscode-webview-resource://"))r=new Un.URL(r).pathname.replace(/%2F/gi,"/").replace(/^\/([a-z0-9\-]+)(\/{1,2})/i,(n,i,o)=>o.length===1?`${i}:///`:`${i}://`);else if(r.startsWith(aE))r=r.slice(aE.length);else if(!Lr(r))return;return r=r.replace("file:///",""),r=decodeURIComponent(r),r.startsWith("/")&&process.platform==="win32"&&r[1]!=="/"&&(r="/"+r),r[0]!=="/"&&!r.match(/^[A-Za-z]:/)&&(r="/"+r),Ve(r)}function lE(r){return Lr(r)&&(r=r.replace("file:///","\\\\"),r=r.replace(/\//g,"\\"),r=decodeURIComponent(r)),r}function ye(r){return hv==="win32"?"file:///"+to(r):"file://"+to(r)}function ja(r){return r.startsWith("/")?"file://"+to(r):"file:///"+to(r)}function Bt(r){return gr.posix.isAbsolute(r)||gr.win32.isAbsolute(r)}function Tt(r){return!!r&&r.startsWith("data:")}var uv=(r,e,t)=>{if(!t||r===":"){e.add(r);return}if(r==="/"){e.add(`\\${r}`);return}iE(r)?e.add(`\\${r}`):e.add(r);let n=encodeURIComponent(r);r!=="\\"&&n!==r&&e.add(n)},BG=r=>{switch(r.size){case 0:return"";case 1:return Fa(r.values());default:let e=[...r];return e.some(t=>t.length>1)?`(?:${e.join("|")})`:`[${e.join("")}]`}},sl=new Set;function al(r,e,t,n,i=If){let o="";for(let s of r.slice(e,t))i?uv(s,sl,n):(uv(s.toLowerCase(),sl,n),uv(s.toUpperCase(),sl,n)),o+=BG(sl),sl.clear();return o}function Mr(r,[e,t]=[0,r.length]){if(t<=e)return r;let n=[],i=al(r,0,e,!1),o=al(r,t,r.length,!1),s=r.slice(e,t);for(let a of[decodeURIComponent(s),He(s)]){if(!a)continue;let c=al(a,0,a.length,!0);n.push(UG(`${i}${c}${o}`).concat("($|\\?)"))}return n.join("|")}var UG=r=>r.replace(/^(file:\\\/\\\/\\\/)?([a-z]):/i,(e,t="",n)=>`${t}[${n.toUpperCase()}${n.toLowerCase()}]:`);function Lr(r){return r.startsWith("file:///")}var hv=process.platform;function to(r){return r=Ii(r),hv==="win32"?(jb(r)&&(r=r.slice(1)),r.split(/[\\//]/g).map((e,t)=>t>0?encodeURIComponent(e):e).join("/")):r.split("/").map(encodeURIComponent).join("/")}function Ii(r){return r&&hv==="win32"&&r[1]===":"?r[0].toUpperCase()+r.substring(1):r}var ro=(r,e=[])=>{let t=r.urlFilter||"file"in r&&r.file||r.url,n=t?qG(t,...e):void 0;return i=>!i.url.startsWith("devtools://")&&n?.(i.url)!==!1},qa=r=>e=>e.type==="page"&&!e.url.startsWith("edge://force-signin")&&r(e);function jG(r){return!!r&&!gr.isAbsolute(r)&&!!(0,Un.parse)(r).protocol}var qG=(...r)=>{let e=i=>{i=i.toLowerCase();let o=He(i);o?i=o:jG(i)&&i.includes("://")&&(i=i.substr(i.indexOf("://")+3)),i.endsWith("/")&&(i=i.substr(0,i.length-1));let s=i.indexOf("#");return s!==-1&&(i=i.slice(0,i[s-1]==="/"?s-1:s)),i},t=r.map(i=>zt(e(i),"/*").replace(/(\/\*$)|\*/g,".*")),n=new RegExp("^("+t.join("|")+")$","g");return i=>(n.lastIndex=0,n.test(e(i)))};var qn=Symbol("ISourceMapFactory"),mv=Symbol("IRootSourceMapFactory"),as=class{constructor(e,t){this.root=e;this.resourceProvider=t}load(e){return this.root.load(this.resourceProvider,e)}guardSourceMapFn(e,t,n){return this.root.guardSourceMapFn(e,t,n)}};as=C([(0,jn.injectable)(),g(0,(0,jn.inject)(mv)),g(1,(0,jn.inject)(is))],as);var cl=class{constructor(e,t,n){this.pathResolve=e;this.dap=t;this.logger=n;this.hasWarnedAboutMaps=new WeakSet}async load(e,t){let n=await this.parseSourceMap(e,t.sourceMapUrl),i;"sourceRoot"in n&&(i=n.sourceRoot,n.sourceRoot=void 0);let o=!1,s=[];if("sections"in n){s=[];let a=0;for(let c of n.sections){let u=c.map;s.push(...u.sources),u.sources=u.sources.map(()=>`source${a++}.js`),o||=!!u.names?.length}}else"sources"in n&&Array.isArray(n.sources)&&(s=n.sources,n.sources=n.sources.map((a,c)=>`source${c}.js`),o=!!n.names?.length);return new La(new ef(n),t,i??"",s,o)}async parseSourceMap(e,t){let n;try{n=await this.parseSourceMapDirect(e,t)}catch(i){if(n=await this.parsePathMappedSourceMap(e,t),!n)throw i}if("sections"in n){let i=await Promise.all(n.sections.map((o,s)=>"url"in o?this.parseSourceMap(e,o.url).then(a=>({offset:o.offset,map:a})).catch(a=>{this.logger.warn("sourcemap.parsing",`Error parsing nested map ${s}: ${a}`)}):o));n.sections=i.filter(Ct)}return n}async parsePathMappedSourceMap(e,t){if(Tt(t))return;let n=await this.pathResolve.urlToAbsolutePath({url:t});if(n)try{return this.parseSourceMapDirect(e,n)}catch(i){this.logger.info("sourcemap.parsing","Parsing path mapped source map failed.",i)}}guardSourceMapFn(e,t,n){try{return t()}catch(i){if(!/error parsing/i.test(String(i.message)))throw i;if(!this.hasWarnedAboutMaps.has(e)){let o=sf(e.metadata.compiledPath,i.message).error;this.dap.output({output:o.format+`
`,category:"stderr"}),this.hasWarnedAboutMaps.add(e)}return n()}}dispose(){}async parseSourceMapDirect(e,t){let n=He(t);n&&(n=this.pathResolve.rebaseRemoteToLocal(n));let i=await e.fetch(n||t);if(!i.ok)throw i.error;let o=i.body;return o.slice(0,3)===")]}"&&(o=o.substring(o.indexOf(`
`))),JSON.parse(o)}};cl=C([(0,jn.injectable)(),g(0,(0,jn.inject)(Pe)),g(1,(0,jn.inject)(Oa)),g(2,(0,jn.inject)(q))],cl);var no=class extends cl{constructor(){super(...arguments);this.knownMaps=new Nn(t=>t.toLowerCase())}load(t,n){let i=this.knownMaps.get(n.sourceMapUrl);if(!i)return this.loadNewSourceMap(t,n);let o=n.cacheKey,s=i.metadata.cacheKey;return i.reloadIfNoMtime?o&&s&&o===s?(i.reloadIfNoMtime=!1,i.prom):this.loadNewSourceMap(t,n):s&&o&&o!==s?this.loadNewSourceMap(t,n):i.prom}loadNewSourceMap(t,n){let i=super.load(t,n);return this.knownMaps.set(n.sourceMapUrl,{metadata:n,reloadIfNoMtime:!1,prom:i}),i}dispose(){this.knownMaps.clear()}invalidateCache(){for(let t of this.knownMaps.values())t.reloadIfNoMtime=!0}};no=C([(0,jn.injectable)()],no);var pE=require("path");var Wa=Symbol("ISearchStrategy"),Ute=Symbol("ISearchStrategyFallback"),dE=async(r,e,t)=>{let n,o=`${(0,pE.basename)(r)}.map`;if(e.siblings.includes(o)&&(n=o),n||(typeof t>"u"&&(t=await PP(r)),n=Na(t)),!(!n||(Tt(n)||(n=Zi(ye(r),n)),!n))&&!(!n.startsWith("data:")&&!n.startsWith("file://")))return{compiledPath:r,sourceMapUrl:n,cacheKey:e.mtime}};var Ef=async(r,e,t,n={})=>{let i=Date.now();try{return await t()}finally{r.verbose("perf.function","",{method:e,duration:Date.now()-i,...n})}};var gv=Symbol("InlineSourceMapUrl"),fE=10*1e3,cs=class{constructor(e){e.__workspaceCachePath&&(this.path=Rf.join(e.__workspaceCachePath,"bp-predict.json"))}async load(){if(this.value||!this.path)return this.value;try{this.value=JSON.parse(await ul.promises.readFile(this.path,"utf-8"))}catch{}return this.value}async store(e){this.value=e,this.path&&(await ul.promises.mkdir(Rf.dirname(this.path),{recursive:!0}),await ul.promises.writeFile(this.path,JSON.stringify(e)))}};cs=C([(0,gt.injectable)(),g(0,(0,gt.inject)(le))],cs);var Wn=class{constructor(e,t,n,i,o,s){this.outFiles=e;this.repo=t;this.logger=n;this.sourceMapFactory=i;this.sourcePathResolver=o;this.state=s}async createMapping(e){if(this.outFiles.empty)return new Map;let t=ss(),n=await this.state.load();try{let{state:i}=await this.repo.streamChildrenWithSourcemaps({files:this.outFiles,processMap:async o=>{let s=[],a=await this.sourceMapFactory.load(o);for(let c of a.sources){if(c===null)continue;let u=this.sourcePathResolver?await this.sourcePathResolver.urlToAbsolutePath({url:c,map:a}):He(c);u&&s.push({...o,sourceMapUrl:Tt(o.sourceMapUrl)?{[gv]:o.sourceMapUrl}:o.sourceMapUrl,resolvedPath:u,sourceUrl:c})}return{discovered:s,compiledPath:Ve(o.compiledPath)}},onProcessedMap:({discovered:o})=>{for(let s of o){let a=t.get(s.resolvedPath);a||(a=new Set,t.set(s.resolvedPath,a)),a.add(s)}},lastState:n,...e});i&&this.state.store(i).catch(o=>this.logger.warn("runtime.exception","Error saving sourcemap cache",{error:o}))}catch(i){this.logger.warn("runtime.exception","Error reading sourcemaps from disk",{error:i})}return t}};Wn=C([(0,gt.injectable)(),g(0,(0,gt.inject)(Ln)),g(1,(0,gt.inject)(Wa)),g(2,(0,gt.inject)(q)),g(3,(0,gt.inject)(qn)),g(4,(0,gt.inject)(Pe)),g(5,(0,gt.inject)(cs))],Wn);var Va=class extends Wn{async getMetadataForPaths(e){this.sourcePathToCompiled||(this.sourcePathToCompiled=this.createInitialMapping());let t=await this.sourcePathToCompiled;return e.map(n=>t.get(n))}async createInitialMapping(){return Ef(this.logger,"BreakpointsPredictor.createInitialMapping",()=>this.createMapping())}};Va=C([(0,gt.injectable)()],Va);var $a=class extends Wn{constructor(){super(...arguments);this.sourcePathToCompiled=new Map}async getMetadataForPaths(t){let n=t.map(s=>this.sourcePathToCompiled.get(s)),i=t.map((s,a)=>a).filter(s=>!n[s]);if(i.length){let s=new Set(i.map(c=>Ve(t[c]))),a=this.createMapping({filter:(c,u)=>!u||u.discovered.some(l=>s.has(l.resolvedPath))});for(let c of i)this.sourcePathToCompiled.set(t[c],a),n[c]=a}return await Promise.all(n.map(async(s,a)=>(await s).get(t[a])))}};$a=C([(0,gt.injectable)()],$a);var ls=Symbol("IBreakpointsPredictor"),us=class{constructor(e,t,n,i){this.bpSearch=e;this.outFiles=t;this.logger=n;this.sourceMapFactory=i;this.predictedLocations=new Map;this.longParseEmitter=new A;this.targetedMode=!1;this.onLongParse=this.longParseEmitter.event}async predictBreakpoints(e){if(!e.source.path||!e.breakpoints?.length)return;let t=await this.getMetadataForPaths([e.source.path]).then(i=>i[0]);if(!t)return;let n=async(i,o,s)=>{let a=typeof s.sourceMapUrl=="string"?s.sourceMapUrl:s.sourceMapUrl.hasOwnProperty(gv)?s.sourceMapUrl[gv]:await ul.promises.readFile(s.compiledPath,"utf8").then(Na);if(!a)return[];let c=await this.sourceMapFactory.load({...s,sourceMapUrl:a}),u=this.sourceMapFactory.guardSourceMapFn(c,()=>yf(s.sourceUrl,{lineNumber:i,columnNumber:o||1},c),()=>null);if(!u||u.line===null)return[];let l=await this.getMetadataForPaths([s.compiledPath]).then(p=>p[0]);return l?(await Promise.all([...l].map(d=>n(u.line,u.column,d)))).flat():[{absolutePath:s.compiledPath,lineNumber:u.line||1,columnNumber:u.column?u.column+1:1}]};for(let i of e.breakpoints??[]){let o=`${e.source.path}:${i.line}:${i.column||1}`;if(this.predictedLocations.has(o))return;let s=[];this.predictedLocations.set(o,s);for(let a of t)s.push(...await n(i.line,i.column||0,a))}}async getPredictionForSource(e){return this.getMetadataForPaths([e]).then(t=>t[0])}async getMetadataForPaths(e){let t=setTimeout(()=>{this.longParseEmitter.fire(),this.logger.warn("runtime.sourcemap","Long breakpoint predictor runtime",{longPredictionWarning:fE,patterns:[...this.outFiles.explode()].join(", ")})},fE),n=await this.bpSearch.getMetadataForPaths(e);return clearTimeout(t),n}predictedResolvedLocations(e){let t=`${e.absolutePath}:${e.lineNumber}:${e.columnNumber||1}`;return this.predictedLocations.get(t)??[]}};us=C([(0,gt.injectable)(),g(0,(0,gt.inject)(Wn)),g(1,(0,gt.inject)(Ln)),g(2,(0,gt.inject)(q)),g(3,(0,gt.inject)(qn))],us);var Xn=S($());var Af=class{constructor(e=!1,t=!1){this.verified=e;this.hit=t}},kf=class{constructor(){this._statisticsById=new Map}registerBreakpoints(e){e.forEach(t=>{t.id!==void 0&&!this._statisticsById.has(t.id)&&this._statisticsById.set(t.id,new Af(t.verified,!1))})}registerResolvedBreakpoint(e){this.getStatistics(e).verified=!0}registerBreakpointHit(e){this.getStatistics(e).hit=!0}getStatistics(e){let t=this._statisticsById.get(e);if(t!==void 0)return t;{let n=new Af;return this._statisticsById.set(e,n),n}}statistics(){let e=0,t=0,n=0;for(let i of this._statisticsById.values())e++,i.hit&&n++,i.verified&&t++;return{set:e,verified:t,hit:n}}};var Za=S($());var VE=require("crypto"),Ya=S($());var WG=0,je=Symbol("ICdpApi"),ps=class extends Error{constructor(t){super("<<message>>");this.method=t}setCause(t,n){return this.cause={code:t,message:n},this.message=`CDP error ${t} calling method ${this.method}: ${n}`,this.stack=this.stack?.replace("<<message>>",this.message),this}},ot=class{constructor(e,t,n){this.logger=t;this.telemetryReporter=n;this._connectionId=WG++;this._lastId=1e3;this._disposedSessions=new Map;this._onDisconnectedEmitter=new A;this.waitWrapper=$G();this.onDisconnected=this._onDisconnectedEmitter.event;this._transport=e,this._transport.onMessage(([i,o])=>this._onMessage(i,o)),this._transport.onEnd(()=>this._onTransportClose()),this._sessions=new Map,this._closed=!1,this._rootSession=new Df(this,"",this.logger),this._sessions.set("",this._rootSession)}rootSession(){return this._rootSession.cdp()}_send(e,t={},n){let i=++this._lastId,o={id:i,method:e,params:t};n&&(o.sessionId=n);let s=JSON.stringify(o);return this.logger.verbose("cdp.send",void 0,{connectionId:this._connectionId,message:o}),this._transport.send(s),i}_onMessage(e,t){let n=JSON.parse(e),i=n;n.result&&n.result.scriptSource?i={...n,result:{...n.result,scriptSource:"<script source>"}}:n.method==="Debugger.scriptParsed"&&n.params&&Tt(n.params.sourceMapURL)&&(i={...n,params:{...n.params,sourceMapURL:"<data source map url>"}}),this.logger.verbose("cdp.receive",void 0,{connectionId:this._connectionId,message:i});let o=this._sessions.get(n.sessionId||"");if(!o){let c=this._disposedSessions.get(n.sessionId);if(c){let u=(Date.now()-c.getTime())/1e3;this.logger.warn("internal",`Got message for a session disposed ${u} seconds ago`,{sessionId:n.sessionId,disposeOn:c});return}else throw new Error(`Unknown session id: ${n.sessionId} while processing: ${n.method}`)}let s=n.method,a;try{o._onMessage(n)}catch(c){a=c}s&&this.telemetryReporter.reportOperation("cdpOperation",s,t.elapsed().ms,a)}_onTransportClose(){if(!this._closed){this._closed=!0,this._transport.dispose(),this.logger.info("cdp.receive","Connection closed",{connectionId:this._connectionId});for(let e of this._sessions.values())e._onClose();this._sessions.clear(),this._onDisconnectedEmitter.fire()}}close(){this._onTransportClose()}isClosed(){return this._closed}createSession(e){let t=new Df(this,e,this.logger);return this._sessions.set(e,t),t.cdp()}disposeSession(e){let t=this._sessions.get(e);t&&(t._onClose(),this._disposedSessions.set(t.sessionId(),new Date),this._sessions.delete(t.sessionId()))}},VG=+process.version.substring(1).split(".")[0]<11,Df=class{constructor(e,t,n){this.logger=n;this._queue=[];this._prefixListeners=new $u;this._directListeners=new $u;this.paused=!1;this._callbacks=new Map,this._connection=e,this._sessionId=t,this._cdp=this._createApi()}pause(){this.paused=!0}resume(){if(!this.paused)return;this.paused=!1;let e=this._queue;this._queue=[],this.logger.verbose("cdp.receive","Dequeue messages",{message:e});for(let t of e)this._processResponse(t)}cdp(){return this._cdp}sessionId(){return this._sessionId}_createApi(){return new Proxy({},{get:(e,t)=>t==="pause"?()=>this.pause():t==="resume"?()=>this.resume():t==="session"?this:new Proxy({},{get:(n,i)=>{if(i!=="then")return i==="on"?(o,s)=>this.on(`${t}.${o}`,s):o=>this.send(`${t}.${i}`,o)}})})}on(e,t){return this._directListeners.listen(e,t)}onPrefix(e,t){return this._prefixListeners.listen(e,t)}send(e,t={}){return this.sendOrDie(e,t).catch(()=>{})}sendOrDie(e,t={}){if(!this._connection)return Promise.reject(new ps(e).setCause(0,"Connection is closed"));let n=this._connection._send(e,t,this._sessionId);return new Promise((i,o)=>{this._callbacks.set(n,{resolve:i,reject:o,from:new ps(e),method:e})})}_onMessage(e){if(this.paused&&e.id){this._processResponse(e);return}if(this._queue.length>0){this._queue.push(e);return}if(!VG&&!this.paused){this._processResponse(e);return}this._queue.push(e),this.paused||this._processQueue()}_processQueue(){this._connection?.waitWrapper(()=>{if(this.paused)return;let e=this._queue.shift();e&&(this._processResponse(e),this._queue.length&&this._processQueue())})}_processResponse(e){if(e.id===void 0){let n=e;this._directListeners.emit(n.method,n.params);for(let[i,o]of this._prefixListeners.listeners)n.method.startsWith(i)&&o.fire(n);return}let t=this._callbacks.get(e.id);t&&(this._callbacks.delete(e.id),"error"in e?t.reject(t.from.setCause(e.error.code,e.error.message)):"result"in e&&t.resolve(e.result))}async detach(){if(!this._connection)throw new Error("Session already detached. Most likely the target has been closed.");this._connection._send("Target.detachFromTarget",{},this._sessionId)}isClosed(){return!this._connection}_onClose(){for(let e of this._callbacks.values())e.reject(e.from.setCause(0,"Connection is closed"));this._callbacks.clear(),this._connection=void 0}};function $G(){if(parseInt(process.versions.node,10)>=11)return setImmediate;let r=!1,e=[],t=()=>{let n=e.shift();if(!n){r=!1;return}setImmediate(t),n()};return n=>{e.push(n),r||(r=!0,setImmediate(t))}}var Ka=S($());var DE=S(Ge()),OE=require("path"),ME=require("url");var AE=require("fs");var TE=require("path"),EE=require("worker_threads");var io=S(xE()),qf=require("crypto"),_v=require("fs"),wv=require("worker_threads");var a3=r=>(0,qf.createHash)("sha256").update(r).digest("hex"),c3=Buffer.from("(function (exports, require, module, __filename, __dirname) { "),u3=Buffer.from(`
});`),l3=Buffer.from("(function (exports, require, module, __filename, __dirname, process, global, Buffer) { return function (exports, require, module, __filename, __dirname) { "),p3=Buffer.from(`
}.call(this, exports, require, module, __filename, __dirname); });`),d3=Buffer.from("#!"),f3=Buffer.from("\r")[0],h3=Buffer.from(`
`)[0],m3=(r,e)=>r.slice(0,e.length).equals(e),jf=(r,...e)=>{if(r.length!==64)return(0,io.hash)(e.length===1?e[0]:Buffer.concat(e))===r;let t=(0,qf.createHash)("sha256");for(let o of e)t.update(o);if(t.digest("hex")===r)return!0;let n=e.length===1?e[0]:Buffer.concat(e),i=(0,io.normalizeShaBuffer)(n);return n===i?!1:(0,qf.createHash)("sha256").update(i).digest("hex")===r},CE=(r,e,t)=>{if(jf(e,r))return!0;if(t){if(m3(r,d3)){let n=r.indexOf(h3);return r[n-1]===f3&&n--,jf(e,r.subarray(n))}if(jf(e,c3,r,u3))return!0}return!!jf(e,l3,r,p3)},PE=r=>r instanceof Buffer?r:Buffer.from(r,"utf-8");async function g3(r){switch(r.type){case 0:try{let e=await _v.promises.readFile(r.file);return{id:r.id,hash:r.mode===0?(0,io.hash)(e):r.mode===2?a3(e):(0,io.shaHash)(e)}}catch{return{id:r.id}}case 1:try{return{id:r.id,hash:(0,io.hash)(PE(r.data))}}catch{return{id:r.id}}case 2:try{let e=await _v.promises.readFile(r.file);return{id:r.id,matches:CE(e,r.expected,r.checkNode)}}catch{return{id:r.id,matches:!1}}case 3:try{return{id:r.id,matches:CE(PE(r.data),r.expected,r.checkNode)}}catch{return{id:r.id,matches:!1}}}}function y3(r){r.on("message",e=>{g3(e).then(t=>r.postMessage(t))})}wv.parentPort&&y3(wv.parentPort);var Wf=class{constructor(e=3,t=(0,TE.join)(__dirname,"hash.js")){this.maxFailures=e;this.hasherScriptPath=t;this.idCounter=0;this.failureCount=0;this.deferredMap=new Map;this.deferCleanup=gP(3e4,()=>this.cleanup())}async hashBytes(e,t){return(await this.send({type:1,data:t,mode:e,id:this.idCounter++})).hash}async hashFile(e,t){return(await this.send({type:0,file:t,mode:e,id:this.idCounter++})).hash}async verifyBytes(e,t,n){return(await this.send({type:3,data:e,id:this.idCounter++,expected:t,checkNode:n})).matches}async verifyFile(e,t,n){return(await this.send({type:2,file:e,id:this.idCounter++,expected:t,checkNode:n})).matches}dispose(){this.cleanup(),this.deferCleanup.clear()}send(e){let t=this.getProcess();if(!t)throw new Error("hash.js process unexpectedly exited");this.deferCleanup();let n=ge();return this.deferredMap.set(e.id,{deferred:n,request:e}),t.postMessage(e),n.promise}cleanup(){this.instance&&(this.instance.removeAllListeners("exit"),this.instance.terminate(),this.instance=void 0,this.failureCount=0)}getProcess(){if(this.instance)return this.instance;if(this.failureCount>this.maxFailures)return;let e=this.instance=new EE.Worker(this.hasherScriptPath);return e.setMaxListeners(1/0),e.on("message",t=>{let n=t,i=this.deferredMap.get(n.id);i&&(i.deferred.resolve(n),this.deferredMap.delete(n.id))}),e.on("exit",()=>{this.instance=void 0,this.failureCount++;let t=this.getProcess();if(t){this.deferCleanup();for(let{request:n}of this.deferredMap.values())t.postMessage(n)}else{for(let{deferred:n}of this.deferredMap.values())n.reject(new Error("hash.js process unexpectedly exited"));this.deferredMap.clear(),this.deferCleanup.clear()}}),e}};var RE=new Wf;async function kE(r,e,t){return!r||AP(r)?void 0:e?(typeof t=="string"?await RE.verifyBytes(t,e,!0):await RE.verifyFile(r,e,!0))?r:void 0:await new sn(AE.promises).exists(r)?r:void 0}var fs=class{constructor(e,t,n,i,o,s,a,c){this.url=t;this.inlineScriptOffset=s;this.runtimeScriptOffset=a;this.contentHash=c;this._scripts=[];this.hasBeenAnnounced=!1;this.sourceReference=e.getSourceReference(t),this._contentGetter=ne(i),this._container=e,this.absolutePath=n||"",this._fqname=this._fullyQualifiedName(),this._name=this._humanName(),this.setSourceMapUrl(o),this._existingAbsolutePath=this.checkContentHash(c)}get sendLazy(){return!this.url}checkContentHash(e){return kE(this.absolutePath,this.inlineScriptOffset||this.runtimeScriptOffset?void 0:e,this._container._fileContentOverridesForTest.get(this.absolutePath))}offsetScriptToSource(e){return this.runtimeScriptOffset?{...e,lineNumber:Math.max(1,e.lineNumber-this.runtimeScriptOffset.lineOffset),columnNumber:e.columnNumber-this.runtimeScriptOffset.columnOffset}:e}offsetSourceToScript(e){return this.runtimeScriptOffset?{...e,lineNumber:e.lineNumber+this.runtimeScriptOffset.lineOffset,columnNumber:e.columnNumber+this.runtimeScriptOffset.columnOffset}:e}async equalsDap(e){let t=await this._existingAbsolutePath;return t?!e.sourceReference&&t===e.path:e.sourceReference===this.sourceReference}setSourceMapUrl(e){if(!e){this.sourceMap=void 0;return}this.sourceMap={type:0,sourceByUrl:new Map,value:ge(),metadata:e}}addScript(e){this._scripts.push(e)}filterScripts(e){this._scripts=this._scripts.filter(e)}get scripts(){return this._scripts}get getSuggestedMimeType(){if(this.url.endsWith(".wat"))return"text/wat";if(!/\.[^/]+$/.test(this.url)||this.url.includes("?"))return"text/javascript"}async content(){let e=await this._contentGetter();return this.inlineScriptOffset?.lineOffset&&(e=`
`.repeat(this.inlineScriptOffset.lineOffset)+e),e}async prettyPrint(){if(!this._container)return;if(hs(this)&&this.sourceMap.metadata.sourceMapUrl.endsWith("-pretty.map")){let c=this.sourceMap.value.settledValue;return c&&{map:c,source:[...this.sourceMap.sourceByUrl.values()][0]}}let e=await this.content();if(!e)return;let t=this.url||`eval://${this.sourceReference}.js`,n=t+"-pretty.map",o=t.split(/[\/\\]/).pop()+"-pretty.js",s=await KT(o,e,t,n);if(!s)return;this.setSourceMapUrl({compiledPath:this.absolutePath,sourceMapUrl:""}),this.sourceMap.value.resolve(s);let a=this;return await this._container._addSourceMapSources(a,s),{map:s,source:[...a.sourceMap.sourceByUrl.values()][0]}}async toDap(){let e=await this._existingAbsolutePath,t={name:this._name,path:this._fqname,sourceReference:this.sourceReference,presentationHint:this.blackboxed()?"deemphasize":void 0,origin:this.blackboxed()?DE.t("Skipped by skipFiles"):void 0};return e&&(t.sourceReference=0,t.path=e),this.hasBeenAnnounced||(this.hasBeenAnnounced=!0,this._container.emitLoadedSource(this)),t}existingAbsolutePath(){return this._existingAbsolutePath}async prettyName(){let e=await this._existingAbsolutePath;return e||this._fqname}_humanName(){if(Bt(this._fqname)){for(let e of this._container.rootPaths)if(DP(e,this._fqname))return Be((0,OE.relative)(e,this._fqname))}return this._fqname}_fullyQualifiedName(){if(!this.url)return"<eval>/VM"+this.sourceReference;if(this.url.endsWith(".repl"))return"repl";if(this.url.startsWith(on))return yi+"/"+this.url.slice(on.length);if(this.absolutePath.startsWith(yi))return this.absolutePath;if(Bt(this.url))return this.url;let e=He(this.url);if(e)return e;let t=this.url;try{let n=[],i=new ME.URL(this.url);if(i.protocol==="data:")return"<eval>/VM"+this.sourceReference;i.hostname&&n.push(i.hostname),i.port&&n.push("\uA789"+i.port),i.pathname&&n.push(/^\/[a-z]:/.test(i.pathname)?i.pathname.slice(1):i.pathname);let o=i.searchParams?.toString();o&&n.push("?"+o),t=n.join("")}catch{}return t.endsWith("/")&&(t+="(index)"),this.inlineScriptOffset&&(t+=`\uA789${this.inlineScriptOffset.lineOffset+1}:${this.inlineScriptOffset.columnOffset+1}`),t}blackboxed(){return this._container.isSourceSkipped(this.url)}};var pl;(n=>{async function r(i){return i.value.promise}n.waitForValue=r;function e(i,o){return i.type===0&&i.value.settledValue?Promise.resolve(i.value.settledValue):Promise.race([r(i),ae(o)])}n.waitForValueWithTimeout=e;async function t(i){return await r(i),i.sourceByUrl}n.waitForSources=t})(pl||={});var Qe=class extends fs{constructor(){super(...arguments);this.compiledToSourceUrl=new Map}},Vf=class extends fs{constructor(t,n,i){super(t,n.url,i,()=>Promise.resolve("Binary content not shown, see the decompiled WAT file"),void 0,void 0,void 0,void 0);this.event=n;this.sourceMap={type:1,value:ge(),sourceByUrl:new Map}}checkContentHash(){return Promise.resolve(void 0)}offsetScriptToSource(t){return t}offsetSourceToScript(t){return t}},Kt=r=>!!r&&r instanceof fs&&!!r.sourceMap,hs=r=>Kt(r)&&r.sourceMap.type===0,ms=r=>Kt(r)&&r.sourceMap.type===1,Sv=r=>!!r&&typeof r.getDisassembly=="function";function LE(r,e){if(!e)return r;let{lineNumber:t,columnNumber:n}=r;return e&&(t+=e.lineOffset,t<=1&&(n+=e.columnOffset)),{...r,lineNumber:t,columnNumber:n}}function NE(r,e){if(!e)return r;let{lineNumber:t,columnNumber:n}=r;return e&&(t=Math.max(1,t-e.lineOffset),t<=1&&(n=Math.max(1,n-e.columnOffset))),{...r,lineNumber:t,columnNumber:n}}var FE=r=>({lineNumber:r.lineNumber+1,columnNumber:r.columnNumber+1}),Ci=r=>({lineNumber:r.lineNumber-1,columnNumber:r.columnNumber-1});var BE=require("worker_threads");var Ha=require("worker_threads");function Iv(r){let e=Fn(r),t=[],n=(s,{loc:a}=s,{loc:c}=s)=>{if(!a||!c)throw new Error("should include locations");t.push({start:a.start,end:c.end,depth:o.length}),o.push(s)},i=new Set,o=[];return Xi(e,{enter:s=>{switch(s.type){case"FunctionDeclaration":case"ArrowFunctionExpression":n(s,s.params[0]||s.body,s.body),i.add(s.body);break;case"Program":n(s);break;case"ForStatement":case"ForOfStatement":case"ForInStatement":n(s),i.add(s.body);break;case"BlockStatement":i.has(s)||n(s);break}},leave:s=>{s===o[o.length-1]&&o.pop()}}),t}Ha.isMainThread||Ha.parentPort?.postMessage(Iv(Ha.workerData));var Ga=class r{constructor(e){this.range=e}static hydrate(e,t){let n=new r(new Ft(new nr(e[0].start.line,e[0].start.column),new nr(e[0].end.line,e[0].end.column))),i=[n],o=1;for(let s=1;s<e.length;s++){let a=e[s];for(;a.depth<o;)o--,i[o].data=t(i[o]);let c=new r(new Ft(new nr(a.start.line,a.start.column),new nr(a.end.line,a.end.column))),u=i[o-1];u.children??=[],u.children.push(c),i[o++]=c}for(let s=o-1;s>=0;s--)i[s].data=t(i[s]);return n}search(e){if(this.range.contains(e)){if(!this.children)return this;for(let t of this.children){let n=t.search(e);if(n)return n}return this}}findDeepest(e,t){if(this.range.contains(e)){if(this.children)for(let n of this.children){let i=n.findDeepest(e,t);if(i!==void 0)return i}return t(this)}}filterHoist(e){if(this.children)for(let t=0;t<this.children.length;t++){let n=this.children[t];if(n.filterHoist(e),!e(n)){let i=n.children||[];this.children.splice(t,1,...i),t--}}}forEach(e){e(this),this.children?.forEach(t=>t.forEach(e))}forEachDepthFirst(e){this.children?.forEach(t=>t.forEach(e)),e(this)}toJSON(){return{range:this.range,children:this.children}}},b3=1024*512;function UE(r,e){return r.length<b3?Ga.hydrate(Iv(r),e):new Promise((t,n)=>{let i=new BE.Worker(`${__dirname}/renameWorker.js`,{workerData:r});i.on("message",o=>t(Ga.hydrate(o,e))),i.on("error",n),i.on("exit",()=>n("rename worker exited"))})}var jE=/[$a-z_][$0-9A-Z_$]*/iy,qE=async(r,e)=>{let t=new eo(r),n=new Set,i=e.decodedMappings(),o=e.names(),s=(u,l,p)=>{let d=u*2147483647+l;if(n.has(d))return;n.add(d);let f=new Oe(u,l),h=t.convert(f);jE.lastIndex=h;let m=jE.exec(r);if(!m)return;let y=m[0];if(y!==p)return y},c=await UE(r,u=>{let l=u.range.begin.base0,p=u.range.end.base0,d;for(let f=l.lineNumber;f<=p.lineNumber;f++){let h=i[f];if(h)for(let m=0;m<h.length;m++){let y=h[m];if(y.length<=4)continue;let w=f,k=y[0];if(w===l.lineNumber&&l.columnNumber>k||w===p.lineNumber&&p.columnNumber<k)continue;let D=o[y[4]],Q=s(w,k,D);Q&&(d??=[],d.some(F=>F.compiled==Q)||d.push({compiled:Q,original:D}))}}return d});return c.filterHoist(u=>!!u.data),c};var oo=Symbol("IRenameProvider"),za=class{constructor(e,t,n){this.logger=e;this.sourceMapFactory=t;this.launchConfig=n;this.renames=new Map}provideOnStackframe(e){if(!this.launchConfig.sourceMapRenames)return Nr.None;let t=e.uiLocation();return t===void 0?Nr.None:"then"in t?t.then(n=>this.provideForSource(n?.source)):this.provideForSource(t?.source)}provideForSource(e){if(!this.launchConfig.sourceMapRenames||!(e instanceof Qe))return Nr.None;let t=Fa(e.compiledToSourceUrl.keys());if(!t)throw new Error("unreachable");if(!hs(t))return Nr.None;let n=this.renames.get(t.url);if(n)return n;let i=this.sourceMapFactory.load(t.sourceMap.metadata).then(async o=>{if(!o?.hasNames)return Nr.None;let s=await t.content();return s?await this.createFromSourceMap(o,s):Nr.None}).catch(()=>Nr.None);return this.renames.set(t.url,i),i}async createFromSourceMap(e,t){let n=Date.now(),i;try{i=await qE(t,e)}catch(s){return this.logger.info("runtime",`Error parsing content for source tree: ${s}}`,{url:e.metadata.compiledPath}),Nr.None}let o=Date.now();return this.logger.info("runtime",`renames calculated in ${o-n}ms`,{url:e.metadata.compiledPath}),new Nr(i)}};za=C([(0,Ka.injectable)(),g(0,(0,Ka.inject)(q)),g(1,(0,Ka.inject)(qn)),g(2,(0,Ka.inject)(le))],za);var Nr=class r{constructor(e){this.renames=e}static{this.None=new r(new Ga(Ft.ZERO))}getOriginalName(e,t){return this.getClosestRename(t,n=>n.compiled===e)?.original}getCompiledName(e,t){return this.getClosestRename(t,n=>n.original===e)?.compiled}getClosestRename(e,t){return this.renames.findDeepest(e,n=>n.data?.find(t))}};var Pi="$returnValue",v3="__js_debug_hoisted_",WE=()=>v3+(0,VE.randomBytes)(8).toString("hex"),Fr=Symbol("IEvaluator"),Ja=class{constructor(e,t,n){this.cdp=e;this.renameProvider=t;this.logger=n}get hasReturnValue(){return!!this.returnValue}setReturnedValue(e){this.returnValue=e}prepare(e,{isInternalScript:t,hoist:n,renames:i,transformRanges:o}={}){t!==!1&&(e+=$e());let s=new Map;s.set(Pi,WE());for(let u of n??[])s.set(u,WE());let{transformed:a,hoisted:c}=this.replaceVariableInExpression(e,s,i,o);return c.size?{canEvaluateDirectly:!1,invoke:(u,l)=>Promise.all([...s].map(async([p,d])=>{await this.hoistValue(p===Pi?this.returnValue:await l?.(p),d)||(a=a.replaceAll(d,p))})).then(()=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:a}))}:{canEvaluateDirectly:!0,invoke:u=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:a})}}async evaluate(e,t={}){if(!("callFrameId"in e))return this.cdp.Runtime.evaluate(e);let n={...t},{location:i,stackFrame:o}=t,s;if(i)await Promise.all([Promise.resolve(this.renameProvider.provideForSource(i.source)).then(a=>{n.renames={mapping:a,position:i.position}}),o&&this.setupShadowedVariableHoisting(i,o).then(a=>{a&&(s=a.doHoist,n.hoist=[...a.hoistable])})]);else if(o){let a=await this.renameProvider.provideOnStackframe(o);n.renames={mapping:a,position:o.rawPosition}}return this.prepare(e.expression,n).invoke(e,s)}async hoistValue(e,t){if(e===void 0)return!1;let n=e?.objectId,i=`setTimeout(() => { delete globalThis.${t} }, 0)`,o;return n?o=await this.cdp.Runtime.callFunctionOn({objectId:n,functionDeclaration:`function() { globalThis.${t} = this; ${i}; ${$e()} }`}):o=await this.cdp.Runtime.evaluate({expression:`globalThis.${t} = ${JSON.stringify(e?.value)};${i};`+$e()}),!!o&&!o.exceptionDetails}async setupShadowedVariableHoisting({position:e,source:t,variables:n},i){let{scopes:o}=await i.scopes(),s=await HI(o,async u=>u.source&&u.line&&u.endLine&&new Ft(new Ue(u.line,u.column||1),new Ue(u.endLine,u.endColumn||1/0)).contains(e)&&await t.equalsDap(u.source));if(s===-1)return;this.logger.verbose("runtime",`Evaluating expression in scope ${o[s].name}`);let a=new Set;return await Promise.all(o.slice(0,s).map(async u=>{let l=await n.getVariableNames({variablesReference:u.variablesReference});for(let{name:p}of l)a.add(p)})),{hoistable:a,doHoist:async u=>{for(let l=s;l<o.length;l++)return(await n.getVariableNames({variablesReference:o[l].variablesReference})).find(d=>d.name===u)?.remoteObject}}}replaceVariableInExpression(e,t,n,i){let o=new Set,s=!1,a=(d,f)=>({type:"ConditionalExpression",test:{type:"BinaryExpression",left:{type:"UnaryExpression",operator:"typeof",prefix:!0,argument:{type:"Identifier",name:d}},operator:"!==",right:{type:"Literal",value:"undefined"}},consequent:{type:"Identifier",name:d},alternate:f}),c=[],u=Fn(e),l=hf(u,{enter(d,f){let h=d;if(d.type!=="Identifier"||e[h.start-1]===".")return;if(i){if(!d.loc)throw new Error("Node should have location");let w=new Ft(new nr(d.loc.start.line,d.loc.start.column),new nr(d.loc.end.line,d.loc.end.column));if(!i.some(k=>k.containsRange(w)))return}let m=t.get(d.name);if(m)return o.add(d.name),s=!0,{replace:sv(d,f)?{type:"Identifier",name:m}:a(m,_3)};let y=n?.mapping.getCompiledName(d.name,n.position);if(y)return s=!0,{replace:sv(d,f)?{type:"Identifier",name:y}:a(y,d)}},leave:()=>{c.pop()}});if(!s)return{hoisted:o,transformed:e};let p=u.body[u.body.length-1].end;return{hoisted:o,transformed:wi(l)+e.slice(p)}}};Ja=C([(0,Ya.injectable)(),g(0,(0,Ya.inject)(je)),g(1,(0,Ya.inject)(oo)),g(2,(0,Ya.inject)(q))],Ja);var _3={type:"Identifier",name:"undefined"};var $f=class r{static parse(e,t,n,i){t=xv(t,n);let o=t&&Qi(t);if(o)throw new O(Ji(e,o.message));let{canEvaluateDirectly:s,invoke:a}=i.prepare(t);return new r(s?t:a)}constructor(e){typeof e=="function"?this.invoke=e:this.breakCondition=e}async shouldStayPaused(e){return this.invoke?(await this.invoke({callFrameId:e.callFrames[0].callFrameId,returnByValue:!0}))?.result.value===!0:Promise.resolve(!0)}},xv=(r,e)=>`(()=>{try{return ${r};}catch(e){console.error(\`Breakpoint condition error: \${e.message||e}\`);return ${!!e}}})()`;var w3=/^(>|>=|={1,3}|<|<=|%)?\s*([0-9]+)$/,Xa=class r{constructor(e){this.predicate=e;this.hits=0;this.breakCondition=void 0}shouldStayPaused(){return Promise.resolve(this.predicate(++this.hits))}static parse(e){let t=w3.exec(e);if(!t)throw new O(Yb(e));let[,n="=",i]=t;return new r(S3(e,n,Number(i)))}},S3=(r,e,t)=>{switch(e){case"=":case"==":case"===":return n=>n===t;case">":return n=>n>t;case">=":return n=>n>=t;case"<":return n=>n<t;case"<=":return n=>n<=t;case"%":return n=>n%t===0;default:throw new O(Yb(r))}};var $E=require("crypto"),Gf=S($());var Hf=class{constructor(e){this.invoke=e;this.breakCondition=void 0}async shouldStayPaused(e){return await this.invoke({callFrameId:e.callFrames[0].callFrameId}),!1}};var gs=class{constructor(e,t){this.breakCondition=t;let n=t&&Qi(t);if(n)throw new O(Ji(e,n.message))}shouldStayPaused(){return Promise.resolve(!0)}};var so=class{constructor(e){this.evaluator=e}compile(e,t){let n=this.logMessageToExpression(t),i=Qi(n);if(i)throw new O(Ji(e,i.message));let{canEvaluateDirectly:o,invoke:s}=this.evaluator.prepare(n);return o?new gs(e,this.logMessageToExpression(t)):new Hf(s)}serializeLogStatements(e){return HT([],e,!1)}logMessageToExpression(e){let t=u=>u.replace(/%/g,"%%"),n=[],i=[],o=0;for(;;){let u=e.indexOf("{",o);if(u===-1){n.push(t(e.slice(o)));break}n.push(t(e.slice(o,u)));let[l]=tl(e.slice(u));if(o=u+l.end,o-1===u+1||e[o-1]!=="}"){n.push(t(e.slice(u,o)));continue}if(l.type!=="BlockStatement")break;l.body.length===1&&l.body[0].type==="BlockStatement"&&(l.body=tl(`(${e.slice(u+1,o-2)}})`)),i.push(wi(this.serializeLogStatements(l.body))),n.push("%O")}let a=`console.log(${[JSON.stringify(n.join("")),...i].join(", ")}), false`,c=(0,$E.createHash)("sha256").update(a).digest("hex").slice(0,7);return a+`
//# sourceURL=logpoint-${c}.cdp`}};so=C([(0,Gf.injectable)(),g(0,(0,Gf.inject)(Fr))],so);var I3=new gs({line:0},void 0),$ne=new gs({line:0},"false"),zf=Symbol("IBreakpointConditionFactory"),Qa=class{constructor(e,t,n){this.logPointCompiler=e;this.evaluator=t;this.breakOnError=n.__breakOnConditionalError}getConditionFor(e){return e.condition?$f.parse(e,e.condition,this.breakOnError,this.evaluator):e.logMessage?this.logPointCompiler.compile(e,e.logMessage):e.hitCondition?Xa.parse(e.hitCondition):I3}};Qa=C([(0,Za.injectable)(),g(0,(0,Za.inject)(so)),g(1,(0,Za.inject)(Fr)),g(2,(0,Za.inject)(le))],Qa);var Yf=require("path");var Kf=(r,e)=>r.lineNumber===e.lineNumber&&r.columnNumber===e.columnNumber;var Jf=r=>!("location"in r),HE=r=>"location"in r,x3=(r,e)=>r.url&&e===r.url||r.urlRegex&&new RegExp(r.urlRegex).test(e),ec=class{constructor(e,t,n){this._manager=e;this._source=t;this._originalPosition=n;this.isEnabled=!1;this.setInCdpScriptIds=new Set;this.cdpScriptIds=this.setInCdpScriptIds;this.cdpBreakpoints=[];this._cdpIds=new Set}get enabled(){return this.isEnabled}get cdpIds(){return this._cdpIds}get source(){return this._source}get originalPosition(){return this._originalPosition}async updateSourceLocation(e,t,n){this._source=t,this._originalPosition=n;let i=[];for(let o of this.cdpBreakpoints)o.state===1&&i.push(this.updateUiLocations(e,o.cdpId,o.locations));await Promise.all(i)}async refreshUiLocations(e){await Promise.all(this.cdpBreakpoints.filter(t=>t.state===1).map(t=>this.updateUiLocations(e,t.cdpId,t.locations)))}async enable(e){if(this.isEnabled)return;this.isEnabled=!0;let t=[this._setPredicted(e)],n=this._manager._sourceContainer.source(this.source);if((!n||!(n instanceof Qe))&&t.push(this._setByPath(e,n?.offsetSourceToScript(this.originalPosition)||this.originalPosition)),await Promise.all(t),n&&this.isEnabled){let i=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:n});await Promise.all(i.map(o=>this._setByUiLocation(e,n.offsetSourceToScript(o))))}}async updateUiLocations(e,t,n){this.updateExistingCdpRef(t,a=>({...a,locations:n}));let i=(await Promise.all(n.map(a=>e.rawLocationToUiLocation(e.rawLocation(a))))).find(a=>!!a);if(!i)return;let o=this._manager._sourceContainer.source(this.source);if(!o)return;let s=await this._manager._sourceContainer.currentSiblingUiLocations(i);this.updateExistingCdpRef(t,a=>{let c=s.filter(u=>u.source===o);return{...a,locations:n,uiLocations:c.length?c:s}})}compare(e){let t=this.originalPosition,n=e.originalPosition;return t.lineNumber!==n.lineNumber?t.lineNumber-n.lineNumber:t.columnNumber-n.columnNumber}async disable(){if(!this.isEnabled)return;this.isEnabled=!1;let e=this.cdpBreakpoints.map(t=>this.removeCdpBreakpoint(t));await Promise.all(e)}async updateForNewLocations(e,t){let n=this._manager._sourceContainer.source(this.source);if(!n)return[];let i=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:n},await t.source);if(!i.length)return[];let o=[];for(let s of i)o.push(this._setForSpecific(e,t,n.offsetSourceToScript(s)));for(let s of this.cdpBreakpoints){if(!Jf(s.args)||!x3(s.args,t.url))continue;let a=s.args;i.some(c=>c.columnNumber-1===a.columnNumber&&c.lineNumber-1===a.lineNumber)||(this._manager.logger.verbose("runtime.sourcemap","Adjusted breakpoint due to overlaid sourcemap",{url:n.url}),o.push(this.removeCdpBreakpoint(s)))}return await Promise.all(o),i}executionContextWasCleared(){this.updateCdpRefs(e=>e.filter(t=>Jf(t.args)))}hasResolvedAt(e,t){let{lineNumber:n,columnNumber:i}=t.base0;return this.cdpBreakpoints.some(o=>o.state===1&&o.locations.some(s=>s.scriptId===e&&s.lineNumber===n&&(s.columnNumber===void 0||s.columnNumber===i)))}getBreakCondition(){}updateExistingCdpRef(e,t){this.updateCdpRefs(n=>n.map(i=>i.state!==1||i.cdpId!==e?i:t(i)))}updateCdpRefs(e){let t=this;t.cdpBreakpoints=e(this.cdpBreakpoints);let n=new Set;this.setInCdpScriptIds.clear();for(let i of this.cdpBreakpoints)if(i.state===1){n.add(i.cdpId);for(let o of i.locations)this.setInCdpScriptIds.add(o.scriptId)}this._cdpIds=n}async _setPredicted(e){if(!this.source.path||!this._manager._breakpointsPredictor)return;let t=this._manager._breakpointsPredictor.predictedResolvedLocations({absolutePath:this.source.path,lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber}),n=[];for(let i of t){let o=this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(i.absolutePath);o!==void 0&&(typeof o=="string"?n.push(this._setByUrlRegexp(e,o,i)):n.push(o.then(s=>s?this._setByUrlRegexp(e,s,i):void 0)))}await Promise.all(n)}async _setByUiLocation(e,t){await Promise.all(t.source.scripts.map(n=>this._setForSpecific(e,n,t)))}async _setByPath(e,t){let n=this._manager._sourceContainer.source({path:this.source.path});if(!(n instanceof Qe&&[...n.compiledToSourceUrl.keys()].some(o=>o.absolutePath===this.source.path)))if(this.source.path){let i=await this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(this.source.path);if(!i)return;await this._setByUrlRegexp(e,i,t)}else{let o=this._manager._sourceContainer.source(this.source)?.url;if(!o)return;await this._setByUrl(e,o,t),this.source.path!==o&&this.source.path!==void 0&&await this._setByUrl(e,ye(this.source.path),t)}}hasSetOnLocation(e,t){return this.cdpBreakpoints.find(n=>e.scriptId&&HE(n.args)&&n.args.location.scriptId===e.scriptId&&Kf(n.args.location,t)||e.url&&!e.hasSourceURL&&Jf(n.args)&&(n.args.urlRegex?new RegExp(n.args.urlRegex).test(e.url):e.url===n.args.url)&&Kf(n.args,t))}hasSetOnLocationByUrl(e,t,n){return this.cdpBreakpoints.find(i=>{if(Jf(i.args))return Kf(i.args,n)?e==="url"?i.args.urlRegex?new RegExp(i.args.urlRegex).test(t):i.args.url===t:e==="re"&&i.args.urlRegex===t:!1;let o=this._manager._sourceContainer.getScriptById(i.args.location.scriptId);if(o)return Kf(i.args.location,n)&&e==="re"?new RegExp(t).test(o.url):o.url===t})}async _setForSpecific(e,t,n){return t.url&&!t.hasSourceURL&&(!t.embedderName||t.embedderName===t.url)?this._setByUrl(e,t.url,n):this._setByScriptId(e,t,n)}async _setByUrl(e,t,n){n=Ci(n);let i=this.hasSetOnLocationByUrl("url",t,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{url:t,condition:this.getBreakCondition(),...n})}async _setByUrlRegexp(e,t,n){n=Ci(n);let i=this.hasSetOnLocationByUrl("re",t,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{urlRegex:t,condition:this.getBreakCondition(),...n})}async _setByScriptId(e,t,n){n=Ci(n);let i=this.hasSetOnLocation(t,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{condition:this.getBreakCondition(),location:{scriptId:t.scriptId,...n}})}async _setAny(e,t){if(!this.isEnabled)return;let n={state:0,args:t,deadletter:!1};n.done=(async()=>{let i=HE(t)?await e.cdp().Debugger.setBreakpoint(t):await e.cdp().Debugger.setBreakpointByUrl(t);if(!i)return;if(n.deadletter){await e.cdp().Debugger.removeBreakpoint({breakpointId:i.breakpointId});return}let o="actualLocation"in i?[i.actualLocation]:i.locations;this._manager._resolvedBreakpoints.set(i.breakpointId,this);let s={state:1,cdpId:i.breakpointId,args:t,locations:o,uiLocations:[]};return this.updateCdpRefs(a=>a.map(c=>c===n?s:c)),await this.updateUiLocations(e,i.breakpointId,o),s})(),this.updateCdpRefs(i=>[...i,n]),await n.done}async removeCdpBreakpoint(e){this.updateCdpRefs(t=>t.filter(n=>n!==e)),e.state===0?(e.deadletter=!0,await e.done):(await this._manager._thread?.cdp().Debugger.removeBreakpoint({breakpointId:e.cdpId}),this._manager._resolvedBreakpoints.delete(e.cdpId))}};var $n=class r extends ec{constructor(t,n,i){super(t,n,{lineNumber:1,columnNumber:1});this.mode=i}static getModeKeyForSource(t,n){return t===1?(0,Yf.basename)(n,(0,Yf.extname)(n)||void 0):n}_setPredicted(){return Promise.resolve()}_setByPath(t,n){if(!this.source.path)return Promise.resolve();let i=r.getModeKeyForSource(this.mode,this.source.path);return this.mode===1?super._setByUrlRegexp(t,zt(i),n):super._setByPath(t,n)}};var zE=S(Ge());var Br=class extends ec{constructor(t,n,i,o,s){super(t,i,{lineNumber:o.line,columnNumber:o.column||1});this.dapId=n;this.dapParams=o;this.condition=s;this.completedSet=ge()}equivalentTo(t){return t.dapParams.column===this.dapParams.column&&t.dapParams.line===this.dapParams.line&&t.dapParams.hitCondition===this.dapParams.hitCondition&&t.dapParams.condition===this.dapParams.condition&&t.dapParams.logMessage===this.dapParams.logMessage}untilSetCompleted(){return this.completedSet.promise}markSetCompleted(){this.completedSet.resolve()}testHitCondition(t){return this.condition.shouldStayPaused(t)}async toDap(){let t=this.getResolvedUiLocation();this.lastAnnouncedUiLocation=t;let n=this.enabled&&t;return n?{id:this.dapId,verified:!0,source:await n.source.toDap(),line:n.lineNumber,column:n.columnNumber}:{id:this.dapId,verified:!1,message:zE.t("Unbound breakpoint")}}diagnosticDump(){return{source:this.source,params:this.dapParams,cdp:this.cdpBreakpoints}}getBreakCondition(){return this.condition.breakCondition}updateCdpRefs(t){super.updateCdpRefs(t),this.getResolvedUiLocation()!==this.lastAnnouncedUiLocation&&this.notifyResolved()}getResolvedUiLocation(){for(let t of this.cdpBreakpoints)if(t.state===1&&t.uiLocations.length)return t.uiLocations[0]}async notifyResolved(){await this.completedSet.promise,await this._manager.notifyBreakpointChange(this,!0)}};var Xf=class extends Br{constructor(e,t,n,i){super(e,t,n,i,new Xa(()=>!1))}getResolvedUiLocation(){}};var eA=S(gl());var yl=class extends $n{constructor(t,n){super(t,{path:n},1);this.pattern=n}async enable(t){if(this.isEnabled)return;this.isEnabled=!0;let n=(0,eA.makeRe)(Be(this.pattern),{contains:!0,lookbehinds:!1});await this._setAny(t,{urlRegex:n.source.replace(/([a-z]):/i,(i,o)=>`[${o.toLowerCase()}${o.toUpperCase()}]:`),lineNumber:0,columnNumber:0})}};var ic=S($());var nc={dispose:()=>{}},Te=class{constructor(e){this.disposed=!1;this.items=[];e&&(this.items=e.slice())}get isDisposed(){return this.disposed}callback(...e){for(let t of e)this.push({dispose:t})}push(...e){return this.disposed?(e.forEach(t=>t.dispose()),e[0]):(this.items.push(...e),e[0])}disposeObject(e){this.items=this.items.filter(t=>t!==e),e.dispose()}clear(){let e=Promise.all(this.items.map(t=>t.dispose()));return this.items=[],e}dispose(){let e=Promise.all(this.items.map(t=>t.dispose()));return this.items=[],this.disposed=!0,e}};var oh=Symbol("IExperimentationService");var yt=Symbol("ITelemetryReporter");var j4=/\/node_modules\/|^node\:/,q4=2,tA=5e3,W4=tA/2,qe=class{constructor(e,t,n){this.telemetry=t;this.experimentation=n;this.disposable=new Te;this.hadBreakpoint=!1;this.didVerifyBreakpoint=!1;this.hadNonModuleSourcemap=!1;this.startedAt=Date.now();this.disposable.push(qe.didVerifyEmitter.event(()=>{this.didVerifyBreakpoint=!0})),qe.consecutiveQualifyingSessions>=q4&&this.disposable.push($I(async()=>{this.currentlyQualifying&&await this.experimentation.getTreatment("diagnosticPrompt",!0)&&(t.report("diagnosticPrompt",{event:"suggested"}),qe.didSuggest=!0,e.suggestDiagnosticTool({}))},tA))}get currentlyQualifying(){return this.hadBreakpoint&&!this.didVerifyBreakpoint&&this.hadNonModuleSourcemap}notifyHadBreakpoint(){this.hadBreakpoint=!0}notifyVerifiedBreakpoint(){this.didVerifyBreakpoint||(qe.didVerifyEmitter.fire(),qe.didSuggest&&(qe.didSuggest=!1,this.telemetry.report("diagnosticPrompt",{event:"resolved"})))}attach(e){if(!this.hadNonModuleSourcemap){let t=this.disposable.push(e.Debugger.on("scriptParsed",n=>{n.sourceMapURL&&!j4.test(n.url)&&(this.hadNonModuleSourcemap=!0,this.disposable.disposeObject(t))}))}}dispose(){this.currentlyQualifying&&Date.now()-W4>this.startedAt?qe.consecutiveQualifyingSessions++:qe.consecutiveQualifyingSessions=0,this.disposable.dispose()}};qe.consecutiveQualifyingSessions=0,qe.didVerifyEmitter=new A,qe.didSuggest=!1,qe=C([(0,ic.injectable)(),g(0,(0,ic.inject)(Oa)),g(1,(0,ic.inject)(yt)),g(2,(0,ic.inject)(oh))],qe);var jr=S($());function V4(r){let e=[];for(let t=0,n=r.length;t<n;++t){let i=r.charCodeAt(t);if(i<128)e.push(i);else if(i<2048)e.push(192|i>>6,128|i&63);else if(i<55296||i>=57344)e.push(224|i>>12,128|i>>6&63,128|i&63);else{let o=65536+((i&1023)<<10|r.charCodeAt(++t)&1023);e.push(240|o>>18&7,128|o>>12&63,128|o>>6&63,128|o&63)}}return new Uint8Array(e)}var rA=V4;var oc=2654435761,sc=2246822519,sh=3266489917,nA=668265263,iA=374761393;function Wv(r,e=0){r=typeof r=="string"?rA(r):r;let t=r,n=e+iA&4294967295,i=0;if(t.length>=16){let s=[e+oc+sc&4294967295,e+sc&4294967295,e+0&4294967295,e-oc&4294967295],a=r,c=a.length-16,u=0;for(i=0;(i&4294967280)<=c;i+=4){let l=i,p=a[l+0]+(a[l+1]<<8),d=a[l+2]+(a[l+3]<<8),f=p*sc+(d*sc<<16),h=s[u]+f&4294967295;h=h<<13|h>>>19;let m=h&65535,y=h>>>16;s[u]=m*oc+(y*oc<<16)&4294967295,u=u+1&3}n=(s[0]<<1|s[0]>>>31)+(s[1]<<7|s[1]>>>25)+(s[2]<<12|s[2]>>>20)+(s[3]<<18|s[3]>>>14)&4294967295}n=n+r.length&4294967295;let o=r.length-4;for(;i<=o;i+=4){let s=i,a=t[s+0]+(t[s+1]<<8),c=t[s+2]+(t[s+3]<<8),u=a*sh+(c*sh<<16);n=n+u&4294967295,n=n<<17|n>>>15,n=(n&65535)*nA+((n>>>16)*nA<<16)&4294967295}for(;i<t.length;++i){let s=t[i];n=n+s*iA,n=n<<11|n>>>21,n=(n&65535)*oc+((n>>>16)*oc<<16)&4294967295}return n=n^n>>>15,n=((n&65535)*sc&4294967295)+((n>>>16)*sc<<16),n=n^n>>>13,n=((n&65535)*sh&4294967295)+((n>>>16)*sh<<16),n=n^n>>>16,n<0?n+4294967296:n}var ac=Symbol("IContainer"),zn=Symbol("StoragePath"),or=Symbol("IInitializeParams"),Kn=Symbol("VSCodeApi"),vs=Symbol("IsVSCode"),oA=Symbol("ExtensionContext"),Vv=Symbol("ProcessEnv"),$v=Symbol("execa"),Ae=Symbol("FS"),Ei="ExtensionLocation",_s=Symbol("IBrowserFinder"),Xie=Symbol("DwarfDebugging"),ch=Symbol("SessionSubStates"),ah=new WeakMap,ze=(r,e)=>{if(!(typeof e=="object"&&e&&"dispose"in e))return e;let t=e,n=ah.get(r.container);return n?n.push(t):ah.set(r.container,[t]),e},uh=r=>{ah.get(r)?.forEach(e=>e.dispose()),ah.delete(r)},Qie=Symbol("IExtensionContribution"),Zie=Symbol("IDebugTerminalOptionsProviders");var ph=S($());var sA=S(require("fs")),lh=S(require("path")),aA=r=>{let e={};f(e);function t(m,y){return r({category:"telemetry",output:m,data:y})}let n=m=>t("js-debug/dap/operation",{...e,...m}),i=m=>t("js-debug/cdp/operation",{...e,...m}),o=m=>t("js-debug/error",{...e,...m}),s=m=>t("blazor-debug/blazorDebugException",{...e,...m}),a=m=>{e.browser=(m.targetProject||m.targetProject)+"/"+m.targetVersion,t("js-debug/browserVersion",{...e,...m})},c=m=>t("js-debug/breakpointStats",{...e,...m}),u=m=>t("js-debug/statistics",{...e,...m}),l=m=>{e.nodeVersion=m.version,t("js-debug/nodeRuntime",{...e,...m})},p=m=>{t("js-debug/launch",{...e,...m,parameters:JSON.stringify(m.parameters)})},d=m=>{t("js-debug/diagnosticPrompt",{...e,...m})};function f(m){try{let y=lh.resolve(lh.dirname(__filename),"..","..",".gitcommit");m.jsDebugCommitId=sA.readFileSync(y,"utf8")}catch{}}return{breakpointStats:c,statistics:u,browserVersion:a,cdpOperation:i,dapOperation:n,error:o,launch:p,nodeRuntime:l,diagnosticPrompt:d,setGlobalMetric:(m,y)=>{e[m]=y},blazorDebugException:s}};var bl=class{constructor(e=!0){this.isVSCode=e;this.measurements=Object.create(null)}add(e,t,n){let i=this.measurements[e];i||(i=this.measurements[e]={times:[],errors:[]}),i.times.push(t),n&&i.errors.push(n)}flush(){let e={errors:[]};for(let t in this.measurements){let{times:n,errors:i}=this.measurements[t],o={operation:t,totalTime:0,max:0,avg:0,stddev:0,count:n.length,failed:i.length};for(let s of n)o.totalTime+=s,o.max=Math.max(o.max,s);o.avg=o.totalTime/o.count;for(let s of n)o.stddev+=(s-o.avg)**2;o.stddev=Math.sqrt(o.stddev/(n.length-1)),e[o.operation]=o,e[`!${o.operation}.errors`]=i,this.isVSCode||(e[`${o.operation}.errors`]=i)}return this.measurements=Object.create(null),e}};var Jn=class{constructor(e=!0){this.isVsCode=e;this.target=[];this.flushEmitter=new A;this.loggers=aA(e=>this.pushOutput(e));this.batchFlushTimeout={};this.batchers={dapOperation:new bl(this.isVsCode),cdpOperation:new bl(this.isVsCode)};this.onFlush=this.flushEmitter.event;this.setGlobalMetric=this.loggers.setGlobalMetric}report(e,...t){let n=this.loggers[e];n(...t)}reportOperation(e,t,n,i){this.batchers[e].add(t,n,i),this.batchFlushTimeout[e]===void 0&&(this.batchFlushTimeout[e]=setTimeout(()=>{this.report(e,this.batchers[e].flush()),this.batchFlushTimeout[e]=void 0},Jn.batchFlushInterval))}attachDap(e){this.target instanceof Array&&this.target.forEach(t=>e.output(t)),this.target=e}flush(){this.flushEmitter.fire();let e=Object.entries(this.batchFlushTimeout);for(let[t,n]of e){let i=this.batchers[t].flush();i.length&&this.report(t,i),this.batchFlushTimeout[t]=void 0,clearTimeout(n)}}dispose(){for(let e of Object.values(this.batchFlushTimeout))e&&clearTimeout(e)}pushOutput(e){e.data=Hv(e.data),this.target instanceof Array?this.target.push(e):this.target.output(e)}};Jn.batchFlushInterval=5e3,Jn=C([(0,ph.injectable)(),g(0,(0,ph.inject)(vs))],Jn);var Hv=r=>typeof r=="number"?Number(r.toFixed(1)):typeof r!="object"||!r?r:r instanceof Error?Gv(r):r instanceof Array?r.map(Hv):gi(r,Hv),cA=/(?:[A-z]:)?(?:[\\/][^:]*)+[\\/]([^:]*:)/g;function Gv(r){let e=String(r.message),t=String(r.name);cA.lastIndex=0;let n=typeof r.stack=="string"?r.stack.replace(cA,"$1"):void 0;return{error:{message:e,name:t,stack:n}}}var pA=require("crypto"),Yn=S($());var vl=Symbol("IDwarfModuleProvider");var hh=Symbol("IWasmSymbolProvider"),Kv=Symbol("IWasmWorkerFactory"),mh=r=>r.replace(/\.wasm$/i,"")+".wat",cc=class{constructor(e,t){this.dwarf=e;this.launchConfig=t;this.cdpCounter=0;this.cdp=new Map;this.prompt=ne(()=>this.dwarf.prompt())}async spawn(e){if(!this.launchConfig.enableDWARF)return null;this.worker??=this.dwarf.load().then(i=>{if(!i)return null;let o=i.spawn({getWasmGlobal:(s,a)=>this.loadWasmValue(`globals[${s}]`,a),getWasmLocal:(s,a)=>this.loadWasmValue(`locals[${s}]`,a),getWasmOp:(s,a)=>this.loadWasmValue(`stack[${s}]`,a),getWasmLinearMemory:(s,a,c)=>this.loadWasmValue(`[].slice.call(new Uint8Array(memories[0].buffer, ${+s}, ${+a}))`,c).then(u=>new Uint8Array(u).buffer)});return o.rpc.sendMessage("hello",[],!1),o});let t=await this.worker;if(!t)return null;let n=this.cdpCounter++;return this.cdp.set(n,e),{rpc:t.rpc,getStopId:i=>`${n}:${i}`,dispose:()=>(this.cdp.delete(n),this.cdp.size>0?Promise.resolve():(this.worker=void 0,t.dispose()))}}async dispose(){await this.worker?.then(e=>e?.dispose()),this.worker=Promise.resolve(null)}async loadWasmValue(e,t){let n=t,i=n.indexOf(":"),o=n.substring(0,i),s=n.substring(i+1),a=await this.cdp.get(+o)?.Debugger.evaluateOnCallFrame({callFrameId:s,expression:e+$e(),silent:!0,returnByValue:!0,throwOnSideEffect:!0});if(!a||a.exceptionDetails)throw new Error(`evaluate failed: ${a?.exceptionDetails?.text||"unknown"}`);return a.result.value}};cc=C([(0,Yn.injectable)(),g(0,(0,Yn.inject)(vl)),g(1,(0,Yn.inject)(le))],cc);var uc=class{constructor(e,t,n,i){this.dwarf=e;this.cdp=t;this.logger=n;this.launchConfig=i;this.worker=ne(()=>this.dwarf.spawn(this.cdp))}async loadWasmSymbols(e){if(!this.launchConfig.enableDWARF)return this.defaultSymbols(e);let t=await this.worker();if(!t){let l=this.defaultSymbols(e);return l.onDidDisassemble=this.dwarf.prompt,l}let{rpc:n}=t,i=(0,pA.randomUUID)(),o;try{let l=e.debugSymbols;if($4(l)&&l.externalURL)o=new URL(l.externalURL);else if(Array.isArray(l)){let p=e.debugSymbols?.find(d=>(d.type==="EmbeddedDWARF"||d.type==="ExternalDWARF")&&d.externalURL);p?.externalURL&&(o=new URL(p.externalURL))}}catch{}let s=new URL(e.url),a=s.hostname==="localhost"?["127.0.0.1","[::1]","localhost"]:[s.hostname],c=o?.hostname==="localhost",u;for(let l of a){s.hostname=l,o&&c&&(o.hostname=l);try{u=await n.sendMessage("addRawModule",i,o?.toString(),{url:s.toString(),code:!o&&s.protocol.startsWith("wasm:")?await this.getBytecode(e.scriptId):void 0});break}catch(p){this.logger.warn("sourcemap.parsing",`failed to load wasm symbols for ${s}`,{error:p})}}return u?!(u instanceof Array)||u.length===0?(n.sendMessage("removeRawModule",i),this.defaultSymbols(e)):(this.logger.info("sourcemap.parsing","parsed files from wasm",{files:u}),new zv(e,this.cdp,i,t,u)):this.defaultSymbols(e)}async dispose(){await this.worker.value?.then(e=>e?.dispose())}defaultSymbols(e){return new dh(e,this.cdp,[])}async getBytecode(e){let n=(await this.cdp.Debugger.getScriptSource({scriptId:e}))?.bytecode;return n?Buffer.from(n,"base64").buffer:void 0}};uc=C([(0,Yn.injectable)(),g(0,(0,Yn.inject)(Kv)),g(1,(0,Yn.inject)(je)),g(2,(0,Yn.inject)(q)),g(3,(0,Yn.inject)(le))],uc);var $4=r=>!!r?.externalURL;var dh=class{constructor(e,t,n){this.event=e;this.cdp=t;this.doDisassemble=ne(async()=>{let e=[],t;for await(let n of this.getDisassembledStream()){e=e.concat(n.lines);let i;if(t){let o=new Uint32Array(t.length+n.lines.length);i=t.length,o.set(t),t=o}else t=new Uint32Array(n.lines.length),i=0;for(let o=0;o<n.lines.length;o++)t[i+o]=n.bytecodeOffsets[o]}return t??=new Uint32Array(0),{lines:e,byteOffsetsOfLines:t}});this.decompiledUrl=mh(e.url),n.push(this.decompiledUrl),this.files=n}async getDisassembly(){let{lines:e}=await this.doDisassemble();return this.onDidDisassemble?.(),e.join(`
`)}originalPositionFor(e){return this.disassembledPositionFor(e)}async disassembledPositionFor(e){let{byteOffsetsOfLines:t}=await this.doDisassemble(),n=tE(t,e.base0.columnNumber,(i,o)=>i-o);if(n!==t.length)return{url:this.decompiledUrl,position:new Oe(n,0)}}async compiledPositionFor(e,t){if(e!==this.decompiledUrl)return[];let{byteOffsetsOfLines:n}=await this.doDisassemble(),{lineNumber:i}=t.base0;if(i>=n.length)return[];let o=n[t.base0.lineNumber];return[new Oe(0,o)]}dispose(){}async*getDisassembledStream(){let{scriptId:e}=this.event,t=await this.cdp.Debugger.disassembleWasmModule({scriptId:e});if(t)for(yield t.chunk;t.streamId;){let n=await this.cdp.Debugger.nextWasmDisassemblyChunk({streamId:t.streamId});if(!n)return;yield n.chunk}}},zv=class extends dh{constructor(t,n,i,o,s){super(t,n,s);this.moduleId=i;this.worker=o;this.mappedLines=new Map}get codeOffset(){return this.event.codeOffset||0}async originalPositionFor(t){let n=await this.worker.rpc.sendMessage("rawLocationToSourceLocation",{codeOffset:t.base0.columnNumber-this.codeOffset,inlineFrameIndex:t.base0.lineNumber,rawModuleId:this.moduleId});return n.length?{position:new Oe(n[0].lineNumber,n[0].columnNumber),url:n[0].sourceFileURL}:super.originalPositionFor(t)}async compiledPositionFor(t,n){if(t===this.decompiledUrl)return super.compiledPositionFor(t,n);let{lineNumber:i,columnNumber:o}=n.base0,s=await this.worker.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:i,columnNumber:o===0?-1:o,rawModuleId:this.moduleId,sourceFileURL:t});if(o===0&&s.length===0){let a=await this.getMappedLines(t),c=a.find(u=>u>i);if(!a.includes(i)&&c)return this.compiledPositionFor(t,new Oe(c,0))}return s.filter(a=>a.rawModuleId===this.moduleId).map(a=>new Oe(0,this.codeOffset+a.startOffset))}dispose(){return this.worker.rpc.sendMessage("removeRawModule",this.moduleId)}async getVariablesInScope(t,n){let i={codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId};return(await this.worker.rpc.sendMessage("listVariablesInScope",i)).map(s=>({name:s.name,scope:s.scope,type:s.type,evaluate:async()=>{let a=await this.worker.rpc.sendMessage("evaluate",s.name,i,this.worker.getStopId(t));return a?new fh(a,this.worker.rpc):uA}}))}async getFunctionStack(t){let n=await this.worker.rpc.sendMessage("getFunctionInfo",{codeOffset:t.base0.columnNumber-this.codeOffset,inlineFrameIndex:t.base0.lineNumber,rawModuleId:this.moduleId});return"frames"in n?n.frames:[]}async getStepSkipList(t,n,i,o){if(i===this.decompiledUrl)return[];let s={codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId},a=()=>o&&i?this.worker.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:o.base0.lineNumber,columnNumber:-1,rawModuleId:this.moduleId,sourceFileURL:i}):[],c;switch(t){case 2:{c=await this.worker.rpc.sendMessage("getInlinedFunctionRanges",s);break}case 1:{let u=await Promise.all([this.worker.rpc.sendMessage("getInlinedCalleesRanges",s),a()]);c=es(u);break}case 0:c=await a();break;default:c=[];break}return c.map(u=>new Ft(new Oe(0,u.startOffset+this.codeOffset),new Oe(0,u.endOffset+this.codeOffset)))}async evaluate(t,n,i){try{let o=await this.worker.rpc.sendMessage("evaluate",i,{codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId},this.worker.getStopId(t));return o?new fh(o,this.worker.rpc):uA}catch(o){throw new O(we(o.message))}}getMappedLines(t){let n=this.mappedLines.get(t);if(n)return n;let i=(async()=>{try{let o=await this.worker.rpc.sendMessage("getMappedLines",this.moduleId,t);return new Uint32Array(o?.sort((s,a)=>s-a)||[])}catch{return new Uint32Array}})();return this.mappedLines.set(t,i),i}},uA={type:"null",description:"no properties"},fh=class r{constructor(e,t){if(this.type=e.type,this.description=e.description,this.linearMemoryAddress=e.linearMemoryAddress,this.linearMemorySize=e.linearMemoryAddress,e.objectId&&e.hasChildren){let n=e.objectId;this.getChildren=ne(()=>this._getChildren(t,n))}}async _getChildren(e,t){return(await e.sendMessage("getProperties",t)).map(i=>({name:i.name,value:new r(i.value,e)}))}};var ao=Symbol("IScriptSkipper");function dA(r){return typeof r.lineNumber=="number"&&typeof r.columnNumber=="number"&&!!r.source}var fA=()=>({source:null,line:null,column:null,name:null,lastColumn:null,isSourceMapLoadFailure:!0}),H4=/\?t=[0-9]+$/,G4=r=>r.endsWith(".hot-update.js")||H4.test(r),z4={load:0,resolveLocation:2e3,sourceMapMinPause:1e3,output:1e3,sourceMapCumulativePause:1e4},hA=(r,e)=>e instanceof Qe&&e.compiledToSourceUrl.has(r);var mA=2**31-1,bt=class{constructor(e,t,n,i,o,s,a,c,u){this.sourceMapFactory=t;this.logger=n;this.launchConfig=i;this.initializeConfig=o;this.sourcePathResolver=s;this.scriptSkipper=a;this.resourceProvider=c;this.wasmSymbols=u;this.rootPaths=[];this.scriptsById=new Map;this.onSourceMappedSteppingChangeEmitter=new A;this.onScriptEmitter=new A;this._sourceByOriginalUrl=new Nn(e=>e.toLowerCase());this._sourceByReference=new Map;this._sourceMapSourcesByUrl=new Map;this._sourceByAbsolutePath=ss();this._sourceMapTimeouts=z4;this._fileContentOverridesForTest=new Map;this._temporarilyDisabledSourceMaps=new Set;this._permanentlyDisabledSourceMaps=new Set;this.onScript=this.onScriptEmitter.event;this._statistics={fallbackSourceMapCount:0};this._doSourceMappedStepping=this.launchConfig.sourceMaps;this.onSourceMappedSteppingChange=this.onSourceMappedSteppingChangeEmitter.event;this._dap=e;let l="webRoot"in i?i.webRoot:i.rootPath;l&&(this.rootPaths=[l,hr(l,"..","ClientApp")]),a.setSourceContainer(this),this.setSourceMapTimeouts({...this.sourceMapTimeouts(),...i.timeouts})}get sources(){return this._sourceByReference.values()}statistics(){return this._statistics}get doSourceMappedStepping(){return this._doSourceMappedStepping}set doSourceMappedStepping(e){e!==this._doSourceMappedStepping&&(this._doSourceMappedStepping=e,this.onSourceMappedSteppingChangeEmitter.fire(e))}setSourceMapTimeouts(e){this._sourceMapTimeouts=e}sourceMapTimeouts(){return this._sourceMapTimeouts}setFileContentOverrideForTest(e,t){t===void 0?this._fileContentOverridesForTest.delete(e):this._fileContentOverridesForTest.set(e,t)}async loadedSources(){let e=[];for(let t of this._sourceByReference.values())e.push(t.toDap());return await Promise.all(e)}source(e){if(e.sourceReference)return this._sourceByReference.get(e.sourceReference);if(e.path)return this._sourceByAbsolutePath.get(e.path)}isSourceSkipped(e){return this.scriptSkipper.isScriptSkipped(e)}addScriptById(e){this.scriptsById.set(e.scriptId,e),"source"in e&&this.onScriptEmitter.fire(e)}getSourceScriptById(e){return this.scriptsById.get(e)}getScriptById(e){let t=this.scriptsById.get(e);return t&&"source"in t?t:void 0}getSourceByOriginalUrl(e){return this._sourceByOriginalUrl.get(e)}getSourceReference(e){let t=Wv(e)&mA;for(let n=0;n<65535;n++){if(!this._sourceByReference.has(t))return t;t===mA&&(t=0),t++}return this.logger.assert(!1,"Max iterations exceeding for source reference assignment"),t}async preferredUiLocation(e){let t=!1,n=4;for(;;){let i=await this._originalPositionFor(e);if(!dA(i)){n=t?void 0:i;break}e=i,t=!0,n=void 0}return{...e,isMapped:t,unmappedReason:n}}async currentSiblingUiLocations(e,t){let n=await this._uiLocations(e);return t?n.filter(i=>i.source===t):n}clear(e){this.scriptsById.clear();for(let t of this._sourceByReference.values())this.removeSource(t,e);this._sourceByReference.clear(),this.sourceMapFactory instanceof no&&this.sourceMapFactory.invalidateCache()}async _uiLocations(e){let[t,n]=await Promise.all([this.getSourceMapUiLocations(e),this.getCompiledLocations(e)]);return[...t,e,...n]}async getSourceMapUiLocations(e){let t=await this._originalPositionFor(e);if(!dA(t))return[];let n=await this.getSourceMapUiLocations(t);return n.push(t),n}async _originalPositionFor(e){if(!Kt(e.source))return 1;let t=await pl.waitForValueWithTimeout(e.source.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!t)return 2;if(this._doSourceMappedStepping)return this._originalPositionForMap(e,t);if(Sv(t)){let n=await t.disassembledPositionFor(new Ue(e.lineNumber,e.columnNumber)),i=n&&e.source.sourceMap.sourceByUrl.get(n.url);if(i)return i?{columnNumber:n.position.base1.lineNumber,lineNumber:n.position.base1.lineNumber,source:i}:3}return 0}async _originalPositionForMap(e,t){let n=e.source;if(!Kt(n))return 1;if(this._temporarilyDisabledSourceMaps.has(n)||this._permanentlyDisabledSourceMaps.has(n))return 0;let i=await this.getOptiminalOriginalPosition(t,NE(e,n.inlineScriptOffset));if(!i)return 3;let o=n.sourceMap.sourceByUrl.get(i.url);if(!o)return 3;let s=i.position.base1;return{lineNumber:s.lineNumber,columnNumber:s.columnNumber,source:o}}async getCompiledLocations(e){if(!(e.source instanceof Qe))return[];let t=[];for(let[n,i]of e.source.compiledToSourceUrl){let o=await pl.waitForValueWithTimeout(n.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!o)continue;let s;if("decompiledUrl"in o){let a=await o.compiledPositionFor(i,new Ue(e.lineNumber,e.columnNumber));if(!a)continue;s=a.map(c=>({lineNumber:c.base1.lineNumber,columnNumber:c.base1.columnNumber,source:n}))}else{let a=this.sourceMapFactory.guardSourceMapFn(o,()=>yf(i,e,o),fA);if(!a||a.line===null)continue;let{lineNumber:c,columnNumber:u}=LE({lineNumber:a.line||1,columnNumber:(a.column||0)+1},n.inlineScriptOffset),l={lineNumber:c,columnNumber:u,source:n};s=[l,...await this.getCompiledLocations(l)]}t=t.concat(s)}return t}async getOptiminalOriginalPosition(e,t){if(Sv(e))return await e.originalPositionFor(new Ue(t.lineNumber,t.columnNumber));let n=this.sourceMapFactory.guardSourceMapFn(e,()=>{let i=e.originalPositionFor({line:t.lineNumber,column:t.columnNumber-1,bias:_i});return i.line!==null?i:e.originalPositionFor({line:t.lineNumber,column:t.columnNumber-1,bias:Aa})},fA);if(!(n.column===null||n.line===null||n.source===null))return{position:new nr(n.line,n.column),url:n.source}}async addSource(e,t,n,i,o,s){let a=await this.sourcePathResolver.urlToAbsolutePath({url:e.url});this.logger.verbose("runtime.sourcecreate","Creating source from url",{inputUrl:e.url,absolutePath:a});let c;return e.scriptLanguage==="WebAssembly"?c=new Vf(this,e,a):c=new fs(this,e.url,a,t,n&&this.sourcePathResolver.shouldResolveSourceMap({sourceMapUrl:n,compiledPath:a||e.url})?{sourceMapUrl:n,compiledPath:a||e.url,cacheKey:e.hash}:void 0,i,o,s),this._addSource(c),c}async _addSource(e){let t=e.url&&this._sourceByOriginalUrl.get(e.url);t&&!hA(t,e)&&this.removeSource(t,!0),this._sourceByOriginalUrl.set(e.url,e),this._sourceByReference.set(e.sourceReference,e),e instanceof Qe&&this._sourceMapSourcesByUrl.set(e.url,e);let n=this._sourceByAbsolutePath.get(e.absolutePath);(n===void 0||n.url.length>=e.url.length||hA(n,e))&&this._sourceByAbsolutePath.set(e.absolutePath,e),this.scriptSkipper.initializeSkippingValueForSource(e),e.sendLazy||this.emitLoadedSource(e),hs(e)?this._finishAddSourceWithSourceMap(e):ms(e)&&this._finishAddSourceWithWasm(e)}async _finishAddSourceWithWasm(e){let t=await this.wasmSymbols.loadWasmSymbols(e.event),n=[];for(let i of t.files){let o,s,a;i===t.decompiledUrl?(o=mh(e.absolutePath),s=mh(e.url),a=()=>t.getDisassembly()):(o=await this.sourcePathResolver.urlToAbsolutePath({url:i}),s=o?ye(o):i,a=()=>this.resourceProvider.fetch(s).then(u=>u.body)),this.logger.verbose("runtime.sourcecreate","Creating wasm source from source map",{inputUrl:i,absolutePath:o,resolvedUrl:s});let c=new Qe(this,s,o,a);c.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,c),n.push(this._addSource(c))}await Promise.all(n),e.sourceMap.value.resolve(t)}async _finishAddSourceWithSourceMap(e){let t=e.sourceMap.value,n;try{n=await this.sourceMapFactory.load(e.sourceMap.metadata)}catch(i){if(this.initializeConfig.clientID==="visualstudio"){let o=e.sourceMap.metadata.sourceMapUrl;try{let s=await this.sourcePathResolver.urlToAbsolutePath({url:o});s&&(e.sourceMap.metadata.sourceMapUrl=ye(s)),n=await this.sourceMapFactory.load(e.sourceMap.metadata),this._statistics.fallbackSourceMapCount++,this.logger.info("sourcemap.parsing","Failed to process original source-map; falling back to storage source-map",{fallbackSourceMapUrl:e.sourceMap.metadata.sourceMapUrl,originalSourceMapUrl:o,originalSourceMapError:Gv(i)})}catch{}}if(n===void 0)return this._dap.output({output:sf(e.url,i.message).error.format+`
`,category:"stderr"}),t.resolve(void 0)}if(this._sourceByReference.get(e.sourceReference)!==e)return t.resolve(void 0);this.logger.verbose("sourcemap.parsing","Creating sources from source map",{sourceMapId:n.id,metadata:n.metadata});try{await this._addSourceMapSources(e,n)}finally{t.resolve(n)}this.scriptSkipper.initializeSkippingValueForSource(e)}removeSource(e,t=!1){let n=this._sourceByReference.get(e.sourceReference);if(n!==void 0){if(this.logger.assert(e===n,"Expected source to be the same as the existing reference"),this._sourceByReference.delete(e.sourceReference),this._sourceByOriginalUrl.get(e.url)===e&&this._sourceByOriginalUrl.delete(e.url),e instanceof Qe){this._sourceMapSourcesByUrl.delete(e.url);for(let[i,o]of e.compiledToSourceUrl)i.sourceMap.sourceByUrl.delete(o)}this._sourceByAbsolutePath.delete(e.absolutePath),Kt(e)&&(this._permanentlyDisabledSourceMaps.delete(e),this._temporarilyDisabledSourceMaps.delete(e)),!t&&e.hasBeenAnnounced&&e.toDap().then(i=>this._dap.loadedSource({reason:"removed",source:i})),ms(e)&&e.sourceMap.value.promise.then(i=>i?.dispose()),Kt(e)&&this._removeSourceMapSources(e,t)}}emitLoadedSource(e){return e.hasBeenAnnounced=!0,e.toDap().then(t=>this._dap.loadedSource({reason:"new",source:t}))}async _addSourceMapSources(e,t){let n=[];for(let i of t.sources){if(i===null)continue;let o=await this.sourcePathResolver.urlToAbsolutePath({url:i,map:t}),s=o?ye(o):t.computedSourceUrl(i),a=this._sourceMapSourcesByUrl.get(s);if(e===a)continue;if(a)if(G4(e.url))this.removeSource(a);else{a.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,a);continue}this.logger.verbose("runtime.sourcecreate","Creating source from source map",{inputUrl:i,sourceMapId:t.id,absolutePath:o,resolvedUrl:s});let c=o&&ye(o),u=this.sourceMapFactory.guardSourceMapFn(t,()=>t.sourceContentFor(i),()=>null),l;if(u){let d=Na(u);if(d&&(!Tt(d)&&o?l=Zi(o?ye(o):i,d):l=d),o&&l){let f={sourceMapUrl:l,compiledPath:o};this.sourcePathResolver.shouldResolveSourceMap(f)||(l=void 0)}}let p=new Qe(this,s,o,u!==null?()=>Promise.resolve(u):c?()=>this.resourceProvider.fetch(c).then(d=>d.body):()=>e.content(),l?{compiledPath:o||s,sourceMapUrl:l,cacheKey:t.metadata.cacheKey}:void 0,void 0,e.runtimeScriptOffset);p.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,p),n.push(this._addSource(p))}await Promise.all(n)}_removeSourceMapSources(e,t){for(let n of e.sourceMap.sourceByUrl.keys()){let i=e.sourceMap.sourceByUrl.get(n);i&&(e.sourceMap.sourceByUrl.delete(n),i.compiledToSourceUrl.delete(e),!i.compiledToSourceUrl.size&&this.removeSource(i,t))}}async waitForSourceMapSources(e){return Kt(e)?[...(await pl.waitForSources(e.sourceMap)).values()]:[]}async revealUiLocation(e){this._dap.revealLocationRequested({source:await e.source.toDap(),line:e.lineNumber,column:e.columnNumber})}disableSourceMapForSource(e,t=!1){t?this._permanentlyDisabledSourceMaps.add(e):this._temporarilyDisabledSourceMaps.add(e)}clearDisabledSourceMaps(e){e?this._temporarilyDisabledSourceMaps.delete(e):this._temporarilyDisabledSourceMaps.clear()}};bt=C([(0,jr.injectable)(),g(0,(0,jr.inject)(rr)),g(1,(0,jr.inject)(qn)),g(2,(0,jr.inject)(q)),g(3,(0,jr.inject)(le)),g(4,(0,jr.inject)(or)),g(5,(0,jr.inject)(Pe)),g(6,(0,jr.inject)(ao)),g(7,(0,jr.inject)(is)),g(8,(0,jr.inject)(hh))],bt);var gA=r=>r.originalPosition.columnNumber===1&&r.originalPosition.lineNumber===1,yA=500,bA=Symbol("DontCompare");var qr=class{constructor(e,t,n,i,o,s,a){this.logger=n;this.launchConfig=i;this.conditionFactory=o;this.suggester=s;this._breakpointsPredictor=a;this._resolvedBreakpoints=new Map;this._totalBreakpointsCount=0;this._launchBlocker=new Set;this._predictorDisabledForTest=!1;this._breakpointsStatisticsCalculator=new kf;this.entryBreakpointMode=0;this._enabledFilter=()=>!0;this._byDapId=new Map;this._byPath=ss();this._byRef=new Map;this.moduleEntryBreakpoints=ss();this._dap=e,this._sourceContainer=t,a?.onLongParse(()=>e.longPrediction({})),t.onScript(c=>{c.source.then(u=>{let l=this._thread;l&&this._byRef.get(u.sourceReference)?.forEach(p=>p.updateForNewLocations(l,c))})}),t.onSourceMappedSteppingChange(()=>{if(this._thread)for(let c of this._byDapId.values())c.refreshUiLocations(this._thread)}),this._scriptSourceMapHandler=async(c,u)=>{if(!n.assert(this._thread,"Expected thread to be set for the breakpoint source map handler"))return[];let l=[],p=[u];for(let d=0;d<p.length;d++)for(let f of p[d]){let h=f.absolutePath,m=h?this._byPath.get(h):void 0;for(let w of m||[])l.push(w.updateForNewLocations(this._thread,c));let y=this._byRef.get(f.sourceReference);for(let w of y||[])l.push(w.updateForNewLocations(this._thread,c));f.sourceMap&&p.push(f.sourceMap.sourceByUrl.values())}return es(await Promise.all(l))}}get appliedByPath(){return this._byPath}get appliedByRef(){return this._byRef}hasAtLocation(e){let t=this._byPath.get(e.source.absolutePath)||[],n=this._byRef.get(e.source.sourceReference)||[];return t.concat(n).some(i=>i.originalPosition.columnNumber===e.columnNumber&&i.originalPosition.lineNumber===e.lineNumber)}async moveBreakpoints(e,t,n,i){let o=l=>bP(l,async p=>{let d=await this._sourceContainer.getOptiminalOriginalPosition(n,p.originalPosition);if(!d)return!1;let f=d.position.base1;return p.updateSourceLocation(e,{path:i.absolutePath,sourceReference:i.sourceReference},{lineNumber:f.lineNumber,columnNumber:f.columnNumber,source:i}),!1}),s=t.absolutePath,a=i.absolutePath,c=s?this._byPath.get(s):void 0;if(c&&a){let[l,p]=await o(c);this._byPath.set(s,l),this._byPath.set(a,p)}let u=this._byRef.get(t.sourceReference);if(u){let[l,p]=await o(u);this._byRef.set(t.sourceReference,l),this._byRef.set(i.sourceReference,p)}}async updateEntryBreakpointMode(e,t){if(t===this.entryBreakpointMode)return;let n=[...this.moduleEntryBreakpoints.values()];this.moduleEntryBreakpoints.clear(),this.entryBreakpointMode=t,await Promise.all(n.map(i=>this.ensureModuleEntryBreakpoint(e,i.source)))}async applyEnabledFilter(e,t=bA){if(t!==bA&&this._enabledFilter!==t)return;this._enabledFilter=e||(()=>!0);let n=this._thread;n&&await Promise.all([...this._byDapId.values()].map(i=>this._enabledFilter(i)?i.enable(n):i.disable()))}async getBreakpointLocations(e,t,n,i){let o=n.base1,s=i.base1,[a,c]=await Promise.all([this._sourceContainer.currentSiblingUiLocations({source:t,lineNumber:o.lineNumber,columnNumber:o.columnNumber}),this._sourceContainer.currentSiblingUiLocations({source:t,lineNumber:s.lineNumber,columnNumber:s.columnNumber})]);if(a.length!==c.length)return this.logger.warn("internal","Expected to have the same number of start and end locations"),[];let u=[],l=[];for(let p=0;p<a.length;p++){let d=a[p],f=c[p];if(d.source!==f.source){this.logger.warn("internal","Expected to have the same number of start and end scripts");continue}let h=d.source;if(!h.scripts.length)continue;let{scriptId:m}=h.scripts[h.scripts.length-1];u.push(e.cdp().Debugger.getPossibleBreakpoints({restrictToFunction:!1,start:{scriptId:m,...h.offsetSourceToScript(Ci(d))},end:{scriptId:m,...h.offsetSourceToScript(Ci(f))}}).then(y=>{if(y?.locations)return Promise.all(y.locations.map(async w=>{let{lineNumber:k,columnNumber:D=0}=w,Q=await this._sourceContainer.currentSiblingUiLocations({source:h,...h.offsetScriptToSource(FE({lineNumber:k,columnNumber:D}))});l.push({breakLocation:w,uiLocations:Q})}))}))}return await Promise.all(u),l}setThread(e){this._thread=e,this._thread.cdp().Debugger.on("breakpointResolved",async t=>{let n=this._resolvedBreakpoints.get(t.breakpointId)||await ae(0).then(()=>this._resolvedBreakpoints.get(t.breakpointId));n&&n.updateUiLocations(e,t.breakpointId,[t.location])}),this._thread.setSourceMapDisabler(t=>{let n=[];for(let i of t){let o=this._resolvedBreakpoints.get(i);if(o){let s=this._sourceContainer.source(o.source);Kt(s)&&n.push(s)}}return n});for(let t of this._byPath.values())t.forEach(n=>this._setBreakpoint(n,e)),this.ensureModuleEntryBreakpoint(e,t[0]?.source);for(let t of this._byRef.values())t.forEach(n=>this._setBreakpoint(n,e));"runtimeSourcemapPausePatterns"in this.launchConfig&&this.launchConfig.runtimeSourcemapPausePatterns.length&&this.setRuntimeSourcemapPausePatterns(e,this.launchConfig.runtimeSourcemapPausePatterns),this._byDapId.size>0&&this._installSourceMapHandler(this._thread)}async launchBlocker(){Ef(this.logger,"BreakpointManager.launchBlocker",async()=>{this._predictorDisabledForTest||await Promise.all([...this._launchBlocker])})}setRuntimeSourcemapPausePatterns(e,t){return Promise.all(t.map(n=>this._setBreakpoint(new yl(this,n),e)))}addLaunchBlocker(...e){for(let t of e)this._launchBlocker.add(t),t.finally(()=>this._launchBlocker.delete(t))}setPredictorDisabledForTest(e){this._predictorDisabledForTest=e}_installSourceMapHandler(e){let t=this.launchConfig.perScriptSourcemaps==="yes",n;t?n=Promise.all([this.updateEntryBreakpointMode(e,1),e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler)]).then(()=>!0):this._breakpointsPredictor&&!this.launchConfig.pauseForSourceMap?n=e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler):n=e.setScriptSourceMapHandler(!0,this._scriptSourceMapHandler),this._sourceMapHandlerInstalled={entryBpSet:n}}async _uninstallSourceMapHandler(e){e.setScriptSourceMapHandler(!1),this._sourceMapHandlerInstalled=void 0}_setBreakpoint(e,t){this._enabledFilter(e)&&this.addLaunchBlocker(Promise.race([ae(yA),e.enable(t)]))}async setBreakpoints(e,t){!this._sourceMapHandlerInstalled&&this._thread&&e.breakpoints?.length&&this._installSourceMapHandler(this._thread);let n=await this._sourceMapHandlerInstalled?.entryBpSet;e.source.path=Ve(e.source.path,!0);let i=this._sourceContainer.source(e.source);if(!n&&this._breakpointsPredictor&&!i){let l=this._breakpointsPredictor.predictBreakpoints(e);this.addLaunchBlocker(l),await l}let o=this._thread;if(o?.debuggerReady.hasSettled()===!1){let l=o.debuggerReady.promise;this.addLaunchBlocker(l),await l}let s=l=>{let p={unbound:l.slice(),new:[],list:[]};if(!e.breakpoints)return p;for(let d=0;d<e.breakpoints.length;d++){let f=e.breakpoints[d],h;try{h=new Br(this,t[d],e.source,f,this.conditionFactory.getConditionFor(f))}catch(w){if(!(w instanceof O))throw w;this._dap.output({category:"stderr",output:w.message}),h=new Xf(this,t[d],e.source,f)}let m=p.unbound.findIndex(w=>w.equivalentTo(h)),y=p.unbound[m];y?.equivalentTo?.(h)?(p.list.push(y),p.unbound.splice(m,1)):(p.new.push(h),p.list.push(h),this._byDapId.set(h.dapId,h))}return p},a=()=>e.source.sourceReference?this._byRef.get(e.source.sourceReference):e.source.path?this._byPath.get(e.source.path):void 0,c=s(a()??[]);if(e.source.sourceReference)this._byRef.set(e.source.sourceReference,c.list);else if(e.source.path)this._byPath.set(e.source.path,c.list);else return{breakpoints:[]};if(c.unbound.length===0&&c.new.length===0)return{breakpoints:[]};if(this._totalBreakpointsCount-=c.unbound.length,await Promise.all(c.unbound.map(l=>(this._byDapId.delete(l.dapId),l.disable()))),this._totalBreakpointsCount+=c.new.length,this._thread&&(this._totalBreakpointsCount===0&&this._sourceMapHandlerInstalled?this._uninstallSourceMapHandler(this._thread):this._totalBreakpointsCount>0&&!this._sourceMapHandlerInstalled&&this._installSourceMapHandler(this._thread)),o&&c.new.length){this.ensureModuleEntryBreakpoint(o,e.source);let l=a(),p=Promise.all(c.new.filter(this._enabledFilter).filter(d=>l?.includes(d)).map(d=>d.enable(o)));this.addLaunchBlocker(Promise.race([ae(yA),p])),await p}let u=await Promise.all(c.list.map(l=>l.toDap()));return this._breakpointsStatisticsCalculator.registerBreakpoints(u),ae(0).then(()=>c.new.forEach(l=>l.markSetCompleted())),{breakpoints:u}}async notifyBreakpointChange(e,t){if(!this._byDapId.has(e.dapId))return;let n=await e.toDap();n.verified&&(this._breakpointsStatisticsCalculator.registerResolvedBreakpoint(e.dapId),this.suggester.notifyVerifiedBreakpoint()),t&&this._dap.breakpoint({reason:"changed",breakpoint:n})}isEntrypointBreak(e,t){return[...this.moduleEntryBreakpoints.values()].some(i=>i.enabled&&i.cdpScriptIds.has(t))?!0:e.some(i=>{let o=this._resolvedBreakpoints.get(i);return o&&(o instanceof $n||gA(o))})}async disableEntrypointBreaks(e){await Promise.all([...this.moduleEntryBreakpoints.values()].map(t=>{if(t.enabled&&t.cdpScriptIds.has(e))return t.disable()}))}isEntrypointCdpBreak(e){return this._resolvedBreakpoints.get(e)instanceof $n}async shouldPauseAt(e,t,n,i=!1){if(!t.length)return e.reason!=="instrumentation";let o=0,s=i?1:0;return await Promise.all(t.map(async a=>{if(n?.cdpId===a){o++;return}let c=this._resolvedBreakpoints.get(a);if(c instanceof $n){this.entryBreakpointMode===0&&!(c instanceof yl)&&c.disable(),s++;return}c instanceof Br&&(await c.testHitCondition(e)?o++:s++)})),o>0||s===0}registerBreakpointsHit(e){for(let t of e){let n=this._resolvedBreakpoints.get(t);n instanceof Br&&this._breakpointsStatisticsCalculator.registerBreakpointHit(n.dapId)}}statisticsForTelemetry(){return this._breakpointsStatisticsCalculator.statistics()}ensureModuleEntryBreakpoint(e,t){if(!t.path||(this._byPath.get(t.path)??[]).some(gA))return;let i=$n.getModeKeyForSource(this.entryBreakpointMode,t.path);if(!t.path||this.moduleEntryBreakpoints.has(i))return;let o=new $n(this,t,this.entryBreakpointMode);this.moduleEntryBreakpoints.set(t.path,o),this._setBreakpoint(o,e)}executionContextWasCleared(){for(let e of this._byDapId.values())e.executionContextWasCleared()}async reapply(){let e=[...this._byDapId.values()];if(await Promise.all(e.map(t=>t.disable())),this._thread){let t=this._thread;await Promise.all(e.map(n=>n.enable(t)))}}};qr=C([(0,Xn.injectable)(),g(0,(0,Xn.inject)(rr)),g(1,(0,Xn.inject)(bt)),g(2,(0,Xn.inject)(q)),g(3,(0,Xn.inject)(le)),g(4,(0,Xn.inject)(zf)),g(5,(0,Xn.inject)(qe)),g(6,(0,Xn.inject)(ls))],qr);var kk=require("crypto"),yc=S($());var ke=class r{static{this.Undefined=new r(void 0)}constructor(e){this.element=e,this.next=r.Undefined,this.prev=r.Undefined}},_l=class{constructor(){this._first=ke.Undefined;this._last=ke.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===ke.Undefined}clear(){let e=this._first;for(;e!==ke.Undefined;){let t=e.next;e.prev=ke.Undefined,e.next=ke.Undefined,e=t}this._first=ke.Undefined,this._last=ke.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let n=new ke(e);if(this._first===ke.Undefined)this._first=n,this._last=n;else if(t){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==ke.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==ke.Undefined){let e=this._last.element;return this._remove(this._last),e}}applyFilter(e){let t=this._first;for(;t!==ke.Undefined;){let n=t.next;e(t.element)||this._remove(t),t=n}}_remove(e){if(e.prev!==ke.Undefined&&e.next!==ke.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===ke.Undefined&&e.next===ke.Undefined?(this._first=ke.Undefined,this._last=ke.Undefined):e.next===ke.Undefined?(this._last=this._last.prev,this._last.next=ke.Undefined):e.prev===ke.Undefined&&(this._first=this._first.next,this._first.prev=ke.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==ke.Undefined;)yield e.element,e=e.next}};var Ah=S($()),Tk=S(require("net"));var Qn=class extends O{constructor(e){super({id:9243,format:e,showUser:!0}),this._cause={id:9243,format:e,showUser:!0}}};function Zn(r,e,t){if(e.isCancellationRequested)return Promise.reject(new Qn(t||"Task cancelled"));let n=ge(),i=e.onCancellationRequested(n.resolve);return Promise.race([n.promise.then(()=>{throw new Qn(t||"Task cancelled")}),r.then(o=>(i.dispose(),o)).catch(o=>{throw i.dispose(),o})])}function vA(r,e){let t=new pt(e),n=r.map(async i=>{try{return await i(t.token)}finally{t.cancel()}});return Promise.race(n)}var _A=Object.freeze(function(r,e){let t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}}),Ut=Object.freeze({isCancellationRequested:!1,onCancellationRequested:()=>({dispose:()=>{}})}),J4=Object.freeze({isCancellationRequested:!0,onCancellationRequested:_A}),pt=class r{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static withTimeout(e,t){let n=new r(t),i=n._token=new lc,o=setTimeout(()=>i.cancel(),e);return i.onCancellationRequested(()=>clearTimeout(o)),n}get token(){return this._token||(this._token=new lc),this._token}cancel(){this._token?this._token instanceof lc&&this._token.cancel():this._token=J4}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof lc&&this._token.dispose():this._token=Ut}},lc=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?_A:(this._emitter||(this._emitter=new A),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}};var y_=S(require("net"));var oz=S(xA(),1),sz=S(o_(),1),az=S(a_(),1),Sk=S(h_(),1),g_=S(wk(),1);var Ik=Sk.default;var xk=(r,e)=>r+Math.floor(Math.random()*(e-r));async function kl({min:r=53e3,max:e=54e3,attempts:t=1e3,tester:n=uz}={},i=Ut){let o=xk(r,e);for(let s=Math.min(t,e-r);;s--)try{return await n(o,i)}catch(a){if(s===0||a instanceof Qn)throw a;o=o===e-1?r:o+1}}function uz(r,e=Ut){let t;return new Promise((n,i)=>{let o=y_.createServer();o.listen(r,"127.0.0.1",()=>{let s=o.address();o.close(()=>n(s.port))}),o.on("error",i),t=e.onCancellationRequested(()=>{o.close(),i(new Qn("Port open lookup cancelled"))})}).finally(()=>t?.dispose())}var Ck=(r,e)=>(t,n)=>{let i=y_.createServer(r);return i.listen(t,e),Rh(i,n)},Pk=r=>(e,t)=>Rh(new g_.default({host:"127.0.0.1",...r,port:e}),t),Rh=(r,e)=>{let t;return new Promise((n,i)=>{r.on("error",i),r.on("listening",()=>n(r)),t=e.onCancellationRequested(()=>{r.close(),i(new Qn("Port open lookup cancelled"))})}).finally(()=>t?.dispose())};var Ek=async(r,e,t,n,i=Ut)=>{let o=t?await Rh(Tk.createServer(e).listen(t,n),i):await kl({tester:Ck(e,n)},i),s=r.register(o.address().port);return o.on("close",()=>s.dispose()),o.on("error",()=>s.dispose()),o},kh=async(r,e,t)=>{let n=await kl({tester:Pk(e)},t),i=r.register(n.address().port);return n.on("close",()=>i.dispose()),n.on("error",()=>i.dispose()),n},sr=Symbol("IPortLeaseTracker"),mc=class{constructor(e){this.usedPorts=new Set;this.onRegistered=new A;this.isMandated=e==="remote"}register(e){return this.usedPorts.add(e),this.onRegistered.fire(e),{dispose:()=>this.usedPorts.delete(e)}}isRegistered(e,t=2e3){return this.usedPorts.has(e)?Promise.resolve(!0):e<53e3||e>=54e3?Promise.resolve(!1):vA([()=>ae(t).then(()=>!1),n=>new Promise(i=>{let o=this.onRegistered.event(s=>{s===e&&i(!0)});n.onCancellationRequested(()=>o.dispose())})])}};mc=C([(0,Ah.injectable)(),g(0,(0,Ah.inject)(Ei))],mc);var Rk="JsDebug",Ak="*";var b_=class{constructor(){this.replays=new Map}addReplay(e,t,n){let i=this.replays.get(e);return i||(i=new _l,this.replays.set(e,i)),i.push({event:`${e}.${t}`,params:n})}capture(e,t,n,i){let o=e[t];if(i===0)o.on(n,s=>this.addReplay(t,n,s));else if(i===2){let s;o.on(n,a=>{s?.(),s=this.addReplay(t,n,a)})}else{let s=new _l;o.on(n,a=>{s.size===i.cap&&s.shift()?.(),s.push(this.addReplay(t,n,a))})}}filter(e,t){let n=this.replays.get(e);n&&n.applyFilter(t)}clearEvent(e,t){let n=`${e}.${t}`;this.filter(e,i=>i.event!==n)}clearDomain(e){this.replays.delete(e)}read(e){return this.replays.get(e)??[]}},Dh=Symbol("ICdpProxyProvider"),gc=class{constructor(e,t,n){this.cdp=e;this.portTracker=t;this.logger=n;this.disposables=new Te;this.replay=new b_;this.jsDebugApi={subscribe:(e,{events:t})=>{for(let n of t)n.endsWith(Ak)?e.pushDisposable(this.cdp.session.onPrefix(n.slice(0,-Ak.length),i=>e.send({method:i.method,params:i.params}))):e.pushDisposable(this.cdp.session.on(n,i=>e.send({method:n,params:i})));return{}}};this.replay.capture(e,"CSS","styleSheetAdded",0),this.replay.capture(e,"Debugger","paused",2),this.replay.capture(e,"Runtime","executionContextCreated",{cap:50,type:1}),this.replay.capture(e,"Runtime","consoleAPICalled",{cap:50,type:1}),e.Debugger.on("resumed",()=>{this.replay.clearEvent("Debugger","paused")}),e.CSS.on("fontsUpdated",i=>{i.font&&this.replay.addReplay("CSS","fontsUpdated",i)}),e.CSS.on("styleSheetRemoved",i=>this.replay.filter("CSS",o=>o.params.styleSheetId!==i.styleSheetId))}async proxy(){this.server||(this.server=this.createServer());let{server:e,path:t}=await this.server,n=e.address();return{host:n.address,port:n.port,path:t}}async createServer(){let e=`/${(0,kk.randomBytes)(20).toString("hex")}`,t=await kh(this.portTracker,{perMessageDeflate:!0,path:e});return this.logger.info("proxyActivity","activated cdp proxy"),t.on("connection",n=>{let i=new v_(n,this.logger);this.logger.info("proxyActivity","accepted proxy connection",{id:i.id}),n.on("close",()=>{this.logger.verbose("proxyActivity","closed proxy connection",{id:i.id}),this.disposables.disposeObject(i)}),n.on("message",async o=>{let s;try{s=JSON.parse(o.toString())}catch(d){return i.send({id:0,error:{code:-32700,message:d.message}})}this.logger.verbose("proxyActivity","received proxy message",s);let{method:a,params:c,id:u=0}=s,[l,p]=a.split(".");try{let d=l===Rk?await this.invokeJsDebugDomainMethod(i,p,c):await this.invokeCdpMethod(i,l,p,c);i.send({id:u,result:d})}catch(d){let f=d instanceof ps&&d.cause?d.cause:{code:0,message:d.message};i.send({id:u,error:f})}})}),{server:t,path:e}}dispose(){this.disposables.dispose(),this.server?.then(e=>e.server.close()),this.server=void 0}invokeCdpMethod(e,t,n,i){let o=this.cdp.session.sendOrDie(`${t}.${n}`,i);switch(n){case"enable":for(let s of this.replay.read(t))e.send({method:s.event,params:s.params});break;case"disable":this.replay.clearDomain(t);break;default:}return o}invokeJsDebugDomainMethod(e,t,n){if(!this.jsDebugApi.hasOwnProperty(t))throw new ps(t).setCause(-32601,`${Rk}.${t} not found`);return this.jsDebugApi[t](e,n)}};gc=C([(0,yc.injectable)(),g(0,(0,yc.inject)(je)),g(1,(0,yc.inject)(sr)),g(2,(0,yc.inject)(q))],gc);var lz=0,v_=class{constructor(e,t){this.webSocket=e;this.logger=t;this.disposables=new Te;this.id=lz++}pushDisposable(e){this.disposables.push(e)}dispose(){this.disposables.dispose(),this.webSocket.close()}send(e){this.logger.verbose("proxyActivity","send proxy message",e),this.webSocket.send(JSON.stringify(e))}};var Dk=S($());var Dl=Symbol("IClientCapabilies"),po=class{};po=C([(0,Dk.injectable)()],po);var Mk=require("./vendor/acorn-loose.js"),Ol=S($());var __=it(function(r,e,t){let n=t?"variable":"property",i=(l,p,d)=>{if(p!=="function")return n;if(l==="constructor")return"class";let f=String(d);return f.startsWith("class ")||f.includes("[native code]")&&/^[A-Z]/.test(l)?"class":t?"function":"method"},o=l=>{switch(typeof l){case"number":case"boolean":return`${l}`;case"object":return l===null?"null":l.constructor.name||"object";case"function":return`fn(${new Array(l.length).fill("?").join(", ")})`;default:return typeof l}},s=[],a=new Set,c="~",u=r===void 0?this:r;for(;u!=null;u=u.__proto__){c+="~";let l=Object.getOwnPropertyNames(u).filter(p=>p.startsWith(e)&&!p.match(/^\d+$/));for(let p of l){if(a.has(p))continue;a.add(p);let d=Object.getOwnPropertyDescriptor(u,p),f=n,h;try{let m=u[p];f=i(p,typeof d?.value,m),h=o(m)}catch{}s.push({label:p,sortText:c+p.replace(/^_+/,m=>"{".repeat(m.length)),type:f,detail:h})}t=!1}return{result:s,isArray:this instanceof Array}}),Ok=Si(__.source);var pz=r=>{switch(r.type){case"ClassDeclaration":case"ClassExpression":return{type:"class",id:r.id};case"MethodDefinition":return{type:r.key?.type==="Identifier"&&r.key.name==="constructor"?"constructor":"method",id:r.key};case"VariableDeclarator":return{type:r.init?.type==="FunctionExpression"||r.init?.type==="ArrowFunctionExpression"?"function":"variable",id:r.id}}};function dz(r){let e=!1;return Xi(r,{enter(t){if(t.type==="CallExpression"||t.type==="NewExpression"||t.type==="UnaryExpression"&&t.operator==="delete"||t.type==="ClassBody")return e=!0,0}}),e}var Oh=Symbol("ICompletions"),bc=class{constructor(e,t){this.evaluator=e;this.cdp=t}async completions(e){let t=Fn(e.expression),n=new eo(e.expression).convert(e.position),i=()=>Promise.resolve([]);return Xi(t,{enter:(o,s)=>{let a=o;if(a.start<n&&n<=a.end){if(o.type==="MemberExpression"||o.type==="Identifier"&&s?.type==="MemberExpression"&&!s.computed&&s.object!==o){let c=o.type==="MemberExpression"?o:s;i=c.computed?()=>this.elementAccessCompleter(e,c,n):()=>this.propertyAccessCompleter(e,c,n)}else o.type==="Identifier"&&(i=()=>this.identifierCompleter(e,t,o,n));s=o}}}),i().then(o=>o.sort((s,a)=>s.sortText>a.sortText?1:-1))}async elementAccessCompleter(e,t,n){if(t.property.type!=="Literal"||typeof t.property.value!="string")return[];let i=e.expression.slice(Yi(t.property)+1,n);return(await this.defaultCompletions(e,i)).filter(s=>s.sortText!=="~~[").map(s=>({...s,text:JSON.stringify(s.text??s.label)+"]",start:Yi(t.property),length:ov(t.property)-Yi(t.property)}))}async identifierCompleter(e,t,n,i){let o=[],s=Yi(n);Xi(t,{enter(u){let l=pz(u);l?.id?.type==="Identifier"&&o.push({label:l.id.name,type:l.type,sortText:l.id.name})}});let a=e.expression.slice(s,i),c=[...o,...await this.defaultCompletions(e,a)];this.evaluator.hasReturnValue&&e.executionContextId!==void 0&&Pi.startsWith(a)&&c.push({sortText:`~${Pi}`,label:Pi,type:"variable"});for(let u of c)u.start=s,u.length=i-s;return c}async propertyAccessCompleter(e,t,n){let{result:i,isArray:o}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:WT(e.expression,t.object),prefix:(0,Mk.isDummy)(t.property)?"":e.expression.slice(Yi(t.property),n),throwOnSideEffect:dz(t)}),s=Yi(t.property)-1,a=/^[$a-z_][0-9a-z_$]*$/i;for(let c of i)a.test(c.label)||(c.text=`[${JSON.stringify(c.label)}]`,c.start=s,c.length=1);if(o){let c="index";i.unshift({label:`[${c}]`,text:`[${c}]`,type:"property",sortText:"~~[",start:s,selectionStart:1,selectionLength:c.length,length:1})}return i}async completePropertyAccess({executionContextId:e,stackFrame:t,expression:n,prefix:i,isInGlobalScope:o=!1,throwOnSideEffect:s=!1}){let a={expression:`(${n})`,objectGroup:"console",silent:!0,throwOnSideEffect:s},c=t&&t.callFrameId(),u=await this.evaluator.evaluate(c?{...a,callFrameId:c}:{...a,contextId:e},{stackFrame:t});if(!u||u.exceptionDetails)return{result:[],isArray:!1};if(!u.result.objectId){let l={...a,returnByValue:!0,throwOnSideEffect:!1,expression:Ok.expr(`(${n})`,JSON.stringify(i),JSON.stringify(o))},p=await this.evaluator.evaluate(c?{...l,callFrameId:c}:{...l,contextId:e});return!p||p.exceptionDetails?{result:[],isArray:!1}:p.result.value}try{return(await __({cdp:this.cdp,args:[void 0,i,o],objectId:u.result.objectId,returnByValue:!0})).value}catch{return{result:[],isArray:!1}}finally{this.cdp.Runtime.releaseObject({objectId:u.result.objectId})}}async defaultCompletions(e,t=""){for(let n of["self","global","this"]){let{result:i}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:n,prefix:t,isInGlobalScope:!0});if(e.stackFrame){let o=t.toLowerCase(),s=new Set(i.map(a=>a.label));for(let a of await e.stackFrame.completions())s.has(a.label)||!a.label.toLowerCase().includes(o)||(s.add(a.label),i.push(a))}return i.push(...this.syntheticCompletions(e,t)),i}return this.syntheticCompletions(e,t)}syntheticCompletions(e,t){return this.evaluator.hasReturnValue&&Pi.startsWith(t)?[{sortText:`~${Pi}`,label:Pi,type:"variable"}]:[]}};bc=C([(0,Ol.injectable)(),g(0,(0,Ol.inject)(Fr)),g(1,(0,Ol.inject)(je))],bc);var Lk=/^(\W*at .*\()(.*):(\d+):(\d+)(\))$/,Nk=/^(\W*at )(.*):(\d+):(\d+)$/,fo=class{constructor(e){this.stack=e}static isStackLike(e){return Lk.test(e)||Nk.test(e)}*[Symbol.iterator](){for(let e of this.stack.split(`
`)){let t=Lk.exec(e)||Nk.exec(e);if(!t){yield e+`
`;continue}let[,n,i,o,s,a]=t;n&&(yield n),yield new w_(i,new Ue(Number(o),Number(s))),a&&(yield a),yield`
`}}},w_=class{constructor(e,t){this.path=e;this.position=t}toString(){return`${this.path}:${this.position.lineNumber}:${this.position.columnNumber}`}};var ti=class{constructor(e,t){this._tokens=[];this._separator=t||"",this._budget=e-1-this._separator.length}append(e){if(e.length>this.budget()){this.appendEllipsis();return}this._append(e)}_append(e){this._tokens.length&&(this._budget-=this._separator.length),this._tokens.push(e),this._budget-=e.length}appendEllipsis(){this._tokens[this._tokens.length-1]!=="\u2026"&&this._append("\u2026")}checkBudget(){return this._budget<=0&&this.appendEllipsis(),this._budget>0}budget(){return this._budget-(this._tokens.length?this._separator.length:0)}build(){return this._tokens.join(this._separator)}isEmpty(){return!this._tokens.length}};var sD=S(iD());var Ez=1e4;function Rz(r,e){if(!r.includes("%"))return[{type:"string",value:r}];let t=[];function n(c){if(!c)return;let u=t[t.length-1];u?.type==="string"?u.value+=c:t.push({type:"string",value:c})}function i(c,u,l){t.push({type:"specifier",specifier:c,precision:u,substitutionIndex:l})}let o=0,s=0,a=new RegExp(`%%|%(?:(\\d+)\\$)?(?:\\.(\\d*))?([${e.join("")}])`,"g");for(let c=a.exec(r);c;c=a.exec(r)){let u=c.index;if(u>o&&n(r.substring(o,u)),c[0]==="%%")n("%");else{let[,l,p,d]=c;l&&Number(l)>0&&(s=Number(l)-1);let f=p?Number(p):void 0;i(d,f,s),++s}o=u+c[0].length}return n(r.substring(o)),t}function P_(r,e,t){let n=Rz(r,Array.from(t.keys())),i=new Set,o=t.get("");if(!o)throw new Error("Expected to hav a default formatter");let s=new ti(Ez),a=!1;for(let c=0;s.checkBudget()&&c<n.length;++c){let u=n[c];if(u.type==="string"){s.append(u.value);continue}let l=u.substitutionIndex;if(l>=e.length){s.append("%"+(u.precision||"")+u.specifier);continue}i.add(l),u.specifier==="c"&&(a=!0);let p=t.get(u.specifier)||o;s.append(p(e[l],{budget:s.budget(),quoted:!1,ansi:!0}))}a&&s.append("\x1B[0m");for(let c=0;s.checkBudget()&&c<e.length;++c)i.has(c)||(i.add(c),(r||c)&&s.append(" "),s.append(o(e[c],{budget:s.budget(),quoted:!1,ansi:!0})));return{result:s.build(),usedAllSubs:i.size===e.length}}function oD(r){try{return new sD.default(r).ansi256().object().ansi256}catch{}}function aD(r){let e=/\s*(.*?)\s*:\s*(.*?)\s*(?:;|$)/g,t="\x1B[0m",n=e.exec(r);for(;n!==null;){if(n.length===3)switch(n[1]){case"color":let i=oD(n[2]);i&&(t+=`\x1B[38;5;${i}m`);break;case"background":case"background-color":let o=oD(n[2]);o&&(t+=`\x1B[48;5;${o}m`);break;case"font-weight":n[2]==="bold"&&(t+="\x1B[1m");break;case"font-style":n[2]==="italic"&&(t+="\x1B[3m");break;case"text-decoration":n[2]==="underline"&&(t+="\x1B[4m");break;default:}n=e.exec(r)}return t}var uD=r=>r.replace(/\n/gm,"\\n").replace(/\r/gm,"\\r").replace(/\t/gm,"\\t"),kz={budget:1e5,quoted:!0},cD={budget:1e3,quoted:!0,postProcess:uD},Dz={budget:1/0,quoted:!1},Oz={budget:1e3,quoted:!0,postProcess:uD},Mz={budget:1e5,quoted:!0},Bh=r=>{switch(r){case"repl":return kz;case"hover":return cD;case"propertyValue":return cD;case"watch":return Oz;case"copy":case"clipboard":return Dz;default:return Mz}};var Lz=30,Nz=100,T_=20,Fz=1e4,Bz=3,lD=120,E_=new Set(["null","regexp","date"]);function Cs(r){return r.type==="function"||r.type==="object"&&!E_.has(r.subtype)}function R_(r){return r.subtype==="array"||r.subtype==="typedarray"}function Ps(r,e,t){let n=Bh(e),i=Uh(r,n,t);return r.preview?.subtype==="regexp"?i:n.postProcess?.(i)??i}function Uh(r,e,t){return r.type==="function"?r.description?gD(r.description,e.budget):"<function>":r.type==="object"&&r.subtype==="node"?r.description:"preview"in r&&r.preview?jh(r.preview,e.budget,t):mD(r,e,t)}function jh(r,e,t){return R_(r)?Uz(r,e):r.subtype==="internal#entry"?Bn(r.description||"",e):r.type==="function"?gD(r.description,e):Cs(r)?jz(r,e,t):Wz(r,e,t)}function Uz(r,e){let t=new ti(e),n=r.description,i=n.match(/[^(]*\(([\d]+)\)/);if(!i)return n;let o=parseInt(i[1],10);n.startsWith("Array(")&&(n=n.substring(5)),t.append(Bn(n,t.budget())),t.append(" ");let s=new ti(t.budget()-2,", "),a=-1;for(let c of r.properties){if(!s.checkBudget())break;if(isNaN(c.name))continue;let u=parseInt(c.name,10);u>a+1&&s.appendEllipsis(),a=u,s.append(Fl(c,s.budget()))}o>a+1&&s.appendEllipsis();for(let c of r.properties){if(!s.checkBudget())break;isNaN(c.name)&&s.append(Fl(c,s.budget(),c.name))}return r.overflow&&s.appendEllipsis(),t.append("["+s.build()+"]"),t.build()}function jz(r,e,t){let n=new ti(e," ");r.description!=="Object"&&n.append(Bn(r.description,n.budget()));let i=new Map,o=r.properties||[];for(let d of o)i.set(d.name,d);let s=i.get("[[PrimitiveValue]]");if(s)return n.append(`(${Fl(s,n.budget()-2)})`),n.build();let a=i.get("[[PromiseStatus]]"),c=i.get("[[PromiseValue]]");if(a&&c)return a.value==="pending"?n.append(`{<${a.value}>}`):n.append(`{${Fl(c,n.budget()-2,`<${a.value}>`)}}`),n.build();let u=i.get("[[GeneratorStatus]]");if(u)return n.append(`{<${u.value}>}`),n.build();let l=new ti(n.budget()-2,", ");for(let d of o){if(!l.checkBudget())break;l.append(Fl(d,l.budget(),d.name))}for(let d of r.entries||[]){if(!l.checkBudget())break;if(d.key){let f=jh(d.key,Math.min(T_,l.budget()),t),h=jh(d.value,Math.min(T_,l.budget()-f.length-4),t);l.append(wc(f," => ",h,l.budget()))}else l.append(jh(d.value,Math.min(T_,l.budget()),t))}r.overflow&&l.appendEllipsis();let p=l.build();return p?n.append("{"+p+"}"):n.isEmpty()&&n.append("{}"),n.build()}function pD(r,e){return r.length<=e?r:"\u2026"}function qz(r,e){return r.length>=e?r.slice(0,e-1)+"\u2026":r}function Wz(r,e,t){if(r.type==="object"&&r.subtype==="null")return pD("null",e);if(r.type==="undefined")return pD("undefined",e);if(r.type==="string"){let n=r.description??r.value;return t?.hex&&(n=Buffer.from(n,"utf8").toString("hex")),Ba(n,e)}return r.type==="number"||r.type==="bigint"?Bl(r,!1,e,t):qz(r.description||"",e)}function wc(r,e,t,n){return r===void 0?Ba(t,n):r.length+e.length>n?Bn(r,n):fD(`${r}${e}${Ba(t,n-r.length-e.length)}`)}function Fl(r,e,t){return e=Math.min(e,Nz),r.type==="function"?wc(t,": ","\u0192",e):r.type==="object"&&r.value==="Object"?wc(t,": ","{\u2026}",e):typeof r.value>"u"?wc(t,": ",`<${r.type}>`,e):r.type==="string"?wc(t,": ",hD(r.value),e):wc(t,": ",r.value??"unknown",e)}function fD(r){return r.replaceAll("\x1B","\\x1b")}function hD(r){let e=r.includes("'")?r.includes('"')?r.includes("`")?"'":"`":'"':"'",t=new RegExp(`[${e}\\\\]`,"g");return`${e}${r.replace(t,"\\$&")}${e}`}function mD(r,{budget:e,quoted:t,ansi:n},i){if(r.type==="string"){let o=r.value||(r.description?r.description:"");i?.hex&&(o=Buffer.from(o,"utf8").toString("hex"),t=!1);let s=Ba(o,t?e-2:e);return t&&(s=hD(s)),n?s:fD(s)}return r.type==="undefined"?"undefined":r.subtype==="null"?"null":r.type==="bigint"||r.type==="number"?Bl(r,!1,e,i):r.description?Bn(r.description,Math.max(e,1e5)):Bn(String("value"in r?r.value:r.description),e)}function gD(r,e){let t=new ti(e),n=r.replace(/^function [gs]et /,"function ").replace(/^function [gs]et\(/,"function(").replace(/^[gs]et /,""),i=n.match(/^(async\s+function)/),o=n.startsWith("function*"),s=n.startsWith("*"),a=!o&&n.startsWith("function"),c=n.startsWith("class ")||n.startsWith("class{"),u=n.indexOf("=>"),l=!i&&!o&&!a&&!c&&u>0,p;if(c){p=n.substring(5);let h=/^[^{\s]+/.exec(p.trim()),m="";h&&(m=h[0].trim()||""),f("class",p,m)}else if(i)p=n.substring(i[1].length),f("async \u0192",p,d(p));else if(o)p=n.substring(9),f("\u0192*",p,d(p));else if(s)p=n.substring(1),f("\u0192*",p,d(p));else if(a)p=n.substring(8),f("\u0192",p,d(p));else if(l){let h=n;n.length>Lz&&(h=n.substring(0,u+2)+" {\u2026}"),f("",n,h)}else f("\u0192",n,d(n));return t.build();function d(h){let m=h.indexOf("("),y=h.match(/\)\s*{/),w=y&&y.index||0;if(m!==-1&&y&&w>m){let k=h.substring(0,m).trim()||"",D=h.substring(m,w+1);return k+D}return"()"}function f(h,m,y){t.checkBudget()&&(h.length&&t.append(h+" "),m=m.trim(),m.endsWith(" { [native code] }")&&(m=m.substring(0,m.length-18)),t.budget()>=m.length?t.append(m):t.append(y.replace(/\n/g," ")))}}function Ts(r){let e=r;if(e.type!=="object"||e.subtype==="null")return{title:mD(e,{budget:Fz,quoted:!1},void 0)};let t=e.description??e.className??"Error",n=/^\s+at\s/m.exec(t);if(!n){let i=t.lastIndexOf(`
`);return i===-1?{title:t}:{title:t.substring(0,i)}}return{title:t.substring(0,n.index-1),stackTrace:t.substring(n.index+2)}}function Bl(r,e,t,n){if(r.type==="number"){if("unserializableValue"in r)return r.unserializableValue;let s=r.value!==void 0?r.value:+r.description;return n?.hex?s.toString(16):String(s)}if(r.type==="bigint"){let s=r.unserializableValue||r.description;return n?.hex?BigInt(s.slice(0,-1)).toString(16):s}let i=r,o=typeof i.value=="number"?i.value:+String(i.description);return Bn(String(e?Math.floor(o):o),t)}function Vz(r,e){return Ba(String(typeof r.value<"u"?r.value:r.description),e)}function yD(r){let e=[],t=new Set([void 0]),n=new Map;for(let l of r.properties.filter(p=>p.valuePreview)){let p=new Map;p.set(void 0,l.name),n.set(void 0,Math.max(n.get(void 0)||0,l.name.length)),e.push(p),l.valuePreview?.properties.map(d=>{d.value&&(t.add(d.name),p.set(d.name,d.value),n.set(d.name,Math.max(n.get(d.name)||0,d.value.length)))})}for(let l of t.values())l&&n.set(l,Math.max(n.get(l)||0,l.length));let i=Array.from(n.values()).reduce((l,p)=>l+p,0),o=lD-4-(t.size-1)*3;if(i>o){let l=o/i;for(let p of n.keys()){let d=Math.max(Bz,n.get(p)*l|0);n.set(p,d)}}let s=[];for(let l of t.values())s.push("-".repeat(n.get(l)));let a="[-"+s.join("-|-")+"-]",c=[];c.push(a.replace("[","\u256D").replace(/\|/g,"\u252C").replace("]","\u256E").replace(/-/g,"\u2504"));let u=[];for(let l of t.values())u.push(dD(l||"",n.get(l)));c.push("\u250A "+u.join(" \u250A ")+" \u250A"),c.push(a.replace("[","\u251C").replace(/\|/g,"\u253C").replace("]","\u2524").replace(/-/g,"\u2504"));for(let l of e){let p=[];for(let d of t.values())p.push(dD(l.get(d)||"",n.get(d)));c.push("\u250A "+p.join(" \u250A ")+" \u250A")}return c.push(a.replace("[","\u2570").replace(/\|/g,"\u2534").replace("]","\u256F").replace(/-/g,"\u2504")),c.map(l=>Bn(l,lD)).join(`
`)}var A_=new Map([["",(r,e)=>Uh(r,e)],["s",(r,e)=>Vz(r,e.budget)],["i",(r,e)=>Bl(r,!0,e.budget,void 0)],["d",(r,e)=>Bl(r,!0,e.budget,void 0)],["f",(r,e)=>Bl(r,!1,e.budget,void 0)],["c",r=>aD(r.value)],["o",(r,e)=>Uh(r,e)],["O",(r,e)=>Uh(r,e)]]);function dD(r,e){return r.length===e?r:r.length<e?r+" ".repeat(e-r.length):Bn(r,e)}var ar=S(Ge());var Ul=S($());async function k_(r){let e=await r.uiLocation();return e?e.source.blackboxed()?2:Kt(e.source)&&!e.isMapped&&e.unmappedReason===3?1:0:0}var $z=new Set(["breakpoint","exception","entry"]),Hz=256,mo=class{constructor(e,t){this.launchConfig=e;this.logger=t;this._smartStepCount=0}resetSmartStepCount(){this._smartStepCount>0&&(this.logger.verbose("internal",`smartStep: skipped ${this._smartStepCount} steps`),this._smartStepCount=0)}async getSmartStepDirection(e,t){if(!this.launchConfig.smartStep||$z.has(e.reason))return;let n=(await e.stackTrace.loadFrames(1)).find(Qo(qt));if((n&&await k_(n))===0){this.resetSmartStepCount();return}return this._smartStepCount++>Hz?2:t?.reason==="step"?t.direction:0}};mo=C([(0,Ul.injectable)(),g(0,(0,Ul.inject)(le)),g(1,(0,Ul.inject)(q))],mo);var vD=it(function(){return[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")]}),_D=Si(function(r,e){let t={},n="<<default preview>>";if(typeof this!="object"||!this)return t;for(let i of Object.keys(this)){let o;try{o=this[i]}catch{continue}if(e)try{let s=e.call(o,n);if(s!==n){t[i]=String(s);continue}}catch(s){t[i]=`<<indescribable>>${JSON.stringify([String(s),i])}`;continue}if(typeof o=="object"&&o){let s;for(let a of runtimeArgs[0])if(typeof o[a]=="function")try{s=o[a](2);break}catch{}!s&&!String(o.toString).includes("[native code]")&&(s=String(o)),s&&!s.startsWith("[object ")&&(t[i]=s.length>=r?s.slice(0,r)+"\u2026":s)}}return t}),qh=Si(function(r,e){if(e)try{let t="<<default preview>>",n=e.call(this,t);if(n!==t)return String(n)}catch(t){return`<<indescribable>>${JSON.stringify([String(t),"object"])}`}if(typeof this=="object"&&this){let t;for(let n of[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")])if(typeof this[n]=="function")try{t=this[n](2);break}catch{}if(!t&&!String(this.toString).includes("[native code]")&&(t=String(this)),t&&!t.startsWith("[object "))return t.length>=r?t.slice(0,r)+"\u2026":t}});var he=S(Ge()),FD=require("crypto");var Vr=class r{constructor(e=process.hrtime()){this.value=e}get ms(){return this.s*1e3}get s(){return this.value[0]+this.value[1]/1e9}elapsed(){return new r().subtract(this)}subtract(e){let t=this.value[1]-e.value[1],n=this.value[0]-e.value[0];return t<0&&(t+=1e9,n--),new r([n,t])}};var Sc=class{constructor(e,t,n,i,o,s){this.launchConfig=e;this.targetInfo=t;this.parentTarget=n;this.targetOriginValue=i;this.cdp=o;this.logger=s;this.onNameChanged=new A().event;this.attached=!1;this.isWaitingForDebugger=!0;o.pause()}id(){return this.targetInfo.targetId}name(){return this.targetInfo.title}fileName(){return this.targetInfo.url}type(){return"node"}parent(){return this.parentTarget}children(){return[]}canStop(){return!1}stop(){}canRestart(){return!1}restart(){}canAttach(){return!this.attached}async attach(){return await this.cdp.Runtime.enable({}),this.launchConfig.noDebug||await this.cdp.Debugger.enable({}),this.attached=!0,this.cdp}canDetach(){return this.attached}async detach(){await this.cdp.Debugger.resume({}),await this.cdp.NodeWorker.detach({sessionId:this.targetInfo.targetId}),this.attached=!1}targetOrigin(){return this.targetOriginValue}afterBind(){return this.cdp.resume(),Promise.resolve()}async runIfWaitingForDebugger(){this.isWaitingForDebugger=!1,await this.cdp.Runtime.runIfWaitingForDebugger({})}initialize(){return Promise.resolve()}waitingForDebugger(){return this.isWaitingForDebugger}supportsCustomBreakpoints(){return!1}supportsXHRBreakpoints(){return!1}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?ye(e):e}executionContextName(){return this.targetInfo.title}};var Le=S(Ge()),Wh=new Map;function Vh(){if(Wh.size)return Wh;function r(o,s){for(let a of s)a.group=o,Wh.set(a.id,a)}function e(o,s){let a=s||o;return{id:"instrumentation:"+o,title:a,group:"",details:c=>{if(o==="webglErrorFired"){let u=c.webglErrorName;return u=u.replace(/^.*(0x[0-9a-f]+).*$/i,"$1"),{short:u,long:Le.t('Paused on WebGL Error instrumentation breakpoint, error "{0}"',u)}}return o==="scriptBlockedByCSP"&&c.directiveText?{short:Le.t('CSP violation "{0}"',c.directiveText),long:Le.t('Paused on Content Security Policy violation instrumentation breakpoint, directive "{0}"',c.directiveText)}:{short:a,long:Le.t('Paused on instrumentation breakpoint "{0}"',a)}},apply:async(c,u)=>(u?await c.EventBreakpoints.setInstrumentationBreakpoint({eventName:o}):await c.EventBreakpoints.removeInstrumentationBreakpoint({eventName:o}))?!0:!!(u?await c.DOMDebugger.setInstrumentationBreakpoint({eventName:o}):await c.DOMDebugger.removeInstrumentationBreakpoint({eventName:o}))}}function t(o,s,a){let c=s===void 0?"*":typeof s=="string"?[s]:s;return{id:"listener:"+o,title:a||o,group:"",details:u=>{let l=(u.targetName||"*").toLowerCase();return{short:l+"."+o,long:Le.t('Paused on event listener breakpoint "{0}", triggered on "{1}"',o,l)}},apply:async(u,l)=>{let p=!0;for(let d of c)l?p=p&&!!await u.DOMDebugger.setEventListenerBreakpoint({eventName:o,targetName:d}):p=p&&!!await u.DOMDebugger.removeEventListenerBreakpoint({eventName:o,targetName:d});return p}}}r("Ad Auction Worklet",[e("beforeBidderWorkletBiddingStart",Le.t("Bidder Bidding Phase Start")),e("beforeBidderWorkletReportingStart",Le.t("Bidder Reporting Phase Start")),e("beforeSellerWorkletScoringStart",Le.t("Seller Scoring Phase Start")),e("beforeSellerWorkletReportingStart",Le.t("Seller Reporting Phase Start"))]),r("Animation",[e("requestAnimationFrame",Le.t("Request Animation Frame")),e("cancelAnimationFrame",Le.t("Cancel Animation Frame")),e("requestAnimationFrame.callback",Le.t("Animation Frame Fired"))]),r("Canvas",[e("canvasContextCreated",Le.t("Create canvas context")),e("webglErrorFired",Le.t("WebGL Error Fired")),e("webglWarningFired",Le.t("WebGL Warning Fired"))]),r("Clipboard",[t("copy"),t("cut"),t("paste"),t("beforecopy"),t("beforecut"),t("beforepaste")]),r("Control",[t("resize"),t("scroll"),t("scrollend"),t("zoom"),t("focus"),t("blur"),t("select"),t("change"),t("submit"),t("reset")]),r("Device",[t("deviceorientation"),t("devicemotion")]),r("DOM Mutation",[t("DOMActivate"),t("DOMFocusIn"),t("DOMFocusOut"),t("DOMAttrModified"),t("DOMCharacterDataModified"),t("DOMNodeInserted"),t("DOMNodeInsertedIntoDocument"),t("DOMNodeRemoved"),t("DOMNodeRemovedFromDocument"),t("DOMSubtreeModified"),t("DOMContentLoaded")]),r("Drag / Drop",[t("drag"),t("dragstart"),t("dragend"),t("dragenter"),t("dragover"),t("dragleave"),t("drop")]),r("Geolocation",[e("Geolocation.getCurrentPosition","getCurrentPosition"),e("Geolocation.watchPosition","watchPosition")]),r("Keyboard",[t("keydown"),t("keyup"),t("keypress"),t("input")]),r("Load",[t("load"),t("beforeunload"),t("unload"),t("abort"),t("error"),t("hashchange"),t("popstate"),t("navigate"),t("navigatesuccess"),t("navigateerror"),t("currentchange"),t("nagivateto"),t("navigatefrom"),t("finish"),t("dispose")]);let n=["audio","video"];r("Media",[t("play",n),t("pause",n),t("playing",n),t("canplay",n),t("canplaythrough",n),t("seeking",n),t("seeked",n),t("timeupdate",n),t("ended",n),t("ratechange",n),t("durationchange",n),t("volumechange",n),t("loadstart",n),t("progress",n),t("suspend",n),t("abort",n),t("error",n),t("emptied",n),t("stalled",n),t("loadedmetadata",n),t("loadeddata",n),t("waiting",n)]),r("Mouse",[t("auxclick"),t("click"),t("dblclick"),t("mousedown"),t("mouseup"),t("mouseover"),t("mousemove"),t("mouseout"),t("mouseenter"),t("mouseleave"),t("mousewheel"),t("wheel"),t("contextmenu")]),r("Notification",[e("Notification.requestPermission","requestPermission")]),r("Parse",[e("Element.setInnerHTML",Le.t("Set innerHTML")),e("Document.write","document.write")]),r("Picture-in-Picture",[t("enterpictureinpicture","video"),t("leavepictureinpicture","video"),t("resize","PictureInPictureWindow"),t("enter","documentPictureInPicture")]),r("Pointer",[t("pointerover"),t("pointerout"),t("pointerenter"),t("pointerleave"),t("pointerdown"),t("pointerup"),t("pointermove"),t("pointercancel"),t("gotpointercapture"),t("lostpointercapture"),t("pointerrawupdate")]),r("Script",[e("scriptFirstStatement",Le.t("Script First Statement")),e("scriptBlockedByCSP",Le.t("Script Blocked by Content Security Policy"))]),r("Timer",[e("setTimeout"),e("clearTimeout"),e("setInterval"),e("clearInterval"),e("setTimeout.callback",Le.t("setTimeout fired")),e("setInterval.callback",Le.t("setInterval fired"))]),r("Touch",[t("touchstart"),t("touchmove"),t("touchend"),t("touchcancel")]),r("WebAudio",[e("audioContextCreated",Le.t("Create AudioContext")),e("audioContextClosed",Le.t("Close AudioContext")),e("audioContextResumed",Le.t("Resume AudioContext")),e("audioContextSuspended",Le.t("Suspend AudioContext"))]),r("Window",[e("DOMWindow.close","window.close")]),r("Worker",[t("message"),t("messageerror")]);let i=["xmlhttprequest","xmlhttprequestupload"];return r("XHR",[t("readystatechange",i),t("load",i),t("loadstart",i),t("loadend",i),t("abort",i),t("error",i),t("progress",i),t("timeout",i)]),Wh}var D_=av(),wD=Si(function(){let r=["instantiate","instantiateStreaming","compile","compileStreaming"];for(let e of r){let t=WebAssembly[e];WebAssembly[e]=function(...n){return t.apply(this,n).then(i=>{if(!(n[0]instanceof WebAssembly.Module))debugger;return i})}}},D_);var $h=Si(function(r,e){let t=" ".repeat(e),n=`
`;function i(s){if(s instanceof Uint8Array)return Uint8Array;if(s instanceof Uint8ClampedArray)return Uint8ClampedArray;if(s instanceof Uint16Array)return Uint16Array;if(s instanceof Uint32Array)return Uint32Array;if(s instanceof BigUint64Array)return BigUint64Array;if(s instanceof Int8Array)return Int8Array;if(s instanceof Int32Array)return Int32Array;if(s instanceof BigInt64Array)return BigInt64Array;if(s instanceof Float32Array)return Float32Array;if(s instanceof Float64Array)return Float64Array}function o(s,a=0,c=[]){switch(typeof s){case"bigint":return`${s}n`;case"boolean":return s.toString();case"function":{let p=s.toString().replace(/^[^\s]+\(/,"function(").split(/\r?\n/g),d=/^$/;for(let f of p){let h=/^[ \t]+/.exec(f);if(h){d=new RegExp(`^[ \\t]{0,${h[0].length}}`);break}}return p.map((f,h)=>h===0?f:(f=f.replace(d,""),h===p.length-1?t.repeat(a)+f:t.repeat(a+1)+f)).join(n)}case"number":return`${s}`;case"object":if(s===null)return"null";if(c.includes(s))return"[Circular]";if(s instanceof Date)return`"${s.toISOString()}"`;if(typeof Node<"u"&&r instanceof Node)return r.outerHTML;let u=i(s);if(u)return`new ${u.name}([${s.join(", ")}])`;if(s instanceof ArrayBuffer)return`new Uint8Array([${new Uint8Array(s).join(", ")}]).buffer`;if(s instanceof Array)return["[",...s.map(p=>t.repeat(a+1)+o(p,a+1,[...c,s])+","),t.repeat(a)+"]"].join(n);let l=s;return["{",...Object.keys(l).map(p=>t.repeat(a+1)+(/^[$a-z_][0-9a-z_$]*$/i.test(p)?p:JSON.stringify(p))+": "+o(l[p],a+1,[...c,s])+","),t.repeat(a)+"}"].join(n);case"string":return s.includes(`
`)?"`"+s.replace(/[`\\\\]|\${/g,"\\$&")+"`":JSON.stringify(s);case"symbol":return s.toString();case"undefined":return"undefined";default:return String(s)}}try{return o(r)}catch{return""+r}}),SD=it(`
  function(spaces2) {
    const result = ${$h.expr("this","spaces2")};
    return result;
  }
`);var $r=S(Ge());var go=S($());var ID=it(function(){let r={__proto__:this.__proto__},e=Object.getOwnPropertyNames(this);for(let t=0;t<e.length;++t){let n=e[t],i=n>>>0;if(String(i>>>0)===n&&i>>>0!==4294967295)continue;let o=Object.getOwnPropertyDescriptor(this,n);o&&Object.defineProperty(r,n,o)}return r});var xD=it(function(r,e){let t={},n=r===-1?0:r,i=e===-1?this.length:r+e;for(let o=n;o<i&&o<this.length;++o){let s=Object.getOwnPropertyDescriptor(this,o);s&&Object.defineProperty(t,o,s)}return t});var CD=it(function(r,e){let t={},n=r===-1?0:r,i=e===-1?this.childNodes.length:r+e;for(let o=n;o<i&&o<this.childNodes.length;++o){let s=this.childNodes[o];s.nodeName==="#comment"?t[o]=`<!-- ${s.textContent} -->`:s.nodeName==="#text"?t[o]=s.textContent||"":t[o]=s}return t});var PD=it(function(r){return r.call(this)});var O_=it(function(r,e){let{buffer:t,byteLength:n,byteOffset:i}=this instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&this instanceof SharedArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,o=i+Math.min(r,n),s=Math.max(0,Math.min(e,n-r));return a(new Uint8Array(t,o,s));function a(c){let u="0123456789abcdef",l="";for(let p=0;p<c.length;p++){let d=c[p];l+=u[d>>>4]+u[d&15]}return l}});var M_=it(function(r,e){let t=c(e),{buffer:n,byteLength:i,byteOffset:o}=this instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&this instanceof SharedArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,s=o+Math.min(r,i),a=Math.max(0,Math.min(t.length,i-r));return new Uint8Array(n,s,a).set(t.subarray(0,a)),a;function c(u){let l=new Uint8Array(u.length>>>1);for(let p=0;p<u.length;p+=2)l[p>>>1]=parseInt(u.slice(p,p+2),16);return l}});var xc=(()=>{let r=0,e=2147483646;return()=>r++%e+1})(),K_=r=>{if(typeof r=="string")return{value:r};let e=r;return e.objectId?{objectId:e.objectId}:e.unserializableValue?{unserializableValue:e.unserializableValue}:{value:e.value}},zz=new Set(["typedarray","dataview","arraybuffer","webassemblymemory"]);var DD=1024,Kz=/^[$a-z_][0-9a-z_$]*$/i,Jz=/^#[0-9a-z_$]+$/i,Yz=r=>r.hasOwnProperty("configurable"),TD=(r,e,t)=>{let n=VT(r,tl(e),t);return wi(n)},ED="<<indescribable>>",OD=r=>{if(!r.startsWith(ED))return r;let e,t;try{[e,t]=JSON.parse(r.slice(ED.length))}catch{return r}return $r.t("{0} (couldn't describe: {1})",e,t)},L_=r=>!!r&&typeof r=="object"&&"readMemory"in r&&"writeMemory"in r,RD={PARAMETER:{name:$r.t("Parameters"),sortOrder:-10},LOCAL:{name:$r.t("Locals"),sortOrder:-9},GLOBAL:{name:$r.t("Globals"),sortOrder:-8}},jl=class r{constructor(e,t,n,i,o,s,a,c){this.cdp=e;this.parent=t;this.vars=i;this.locationProvider=o;this.currentRef=s;this.settings=a;this.clientCapabilities=c;this.name=n.name,this.presentationHint=n.presentationHint,this.sortOrder=n.sortOrder||0}get customDescriptionGenerator(){return this.settings.customDescriptionGenerator}createVariable(e,t,...n){let i=new e(new r(this.cdp,this.currentRef?.(),t,this.vars,this.locationProvider,()=>i,this.settings,this.clientCapabilities),...n);return i.id>0&&this.vars.add(i),i}createVariableByType(e,t,n){if(R_(t))return this.createVariable(Kh,e,t);if(t.objectId){if(t.type==="function")return this.createVariable(q_,e,t,n);if(t.subtype==="map"||t.subtype==="set")return this.createVariable(W_,e,t,n);if(t.subtype==="node")return this.createVariable(j_,e,t,n);if(!E_.has(t.subtype))return this.createVariable(Es,e,t,n)}return this.createVariable(Ir,e,t)}createWasmVariable(e,t,n){return this.createVariable(Wl,e,t,n)}async getDescriptionSymbols(e){return this.settings.descriptionSymbols??=vD({cdp:this.cdp,args:[],objectId:e}).then(t=>({objectId:t.objectId}),()=>({value:[]})),await this.settings.descriptionSymbols}async createObjectPropertyVars(e,t){let n=[];if(this.settings.customPropertiesGenerator){let{result:u,errorDescription:l}=await this.evaluateCodeForObject(e,this.settings.customPropertiesGenerator,[]);u&&u.type!=="undefined"?e=u:n.push([this.createVariable(B_,{name:"",sortOrder:-1},u,u?.description||l||$r.t("Unknown error"))])}if(!e.objectId)return[];t&&this.cdp.DotnetDebugger.setEvaluationOptions({options:t,type:"variable"});let[i,o,s]=await Promise.all([this.cdp.Runtime.getProperties({objectId:e.objectId,accessorPropertiesOnly:!0,ownProperties:!1,generatePreview:!0}),this.cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0,generatePreview:!0}),this.cdp.Runtime.callFunctionOn({functionDeclaration:_D.decl(`${DD}`,this.settings.customDescriptionGenerator||"null"),arguments:[await this.getDescriptionSymbols(e.objectId)],objectId:e.objectId,throwOnSideEffect:!0,returnByValue:!0}).then(u=>u?.result.value||{}).catch(()=>({}))]);if(!i||!o)return[];let a=new Map,c=[];for(let u of i.result){if(u.symbol){c.push(u);continue}u.name==="__proto__"&&o.internalProperties?.some(l=>l.name==="[[Prototype]]")||a.set(u.name,u)}for(let u of o.result)u.get||u.set||(u.symbol?c.push(u):a.set(u.name,u));for(let u of[a.values(),c.values()])for(let l of u)n.push(this.createPropertyVar(l,e,s?.hasOwnProperty(l.name)?OD(s[l.name]):void 0));for(let u of o.privateProperties??[])n.push(this.createPropertyVar(u,e,void 0,{presentationHint:{visibility:"private"},sortOrder:1}));for(let u of o.internalProperties||[]){if(u.name==="[[StableObjectId]]")continue;let l;LD(u)?l=this.createFunctionLocationVariable(u):u.value!==void 0&&(l=this.createVariableByType({name:u.name,presentationHint:{visibility:"internal"},sortOrder:2},u.value)),l&&n.push([l])}return es(await Promise.all(n))}createFunctionLocationVariable(e){return this.createVariable(Gh,{name:e.name,presentationHint:{visibility:"internal",attributes:["readOnly"]},sortOrder:2},e.value)}async createPropertyVar(e,t,n,i){let o=[],s=e.get&&e.get.type!=="undefined",a=e.set&&e.set.type!=="undefined",c={name:e.name,presentationHint:{},sortOrder:0,...i};return i||(Yz(e)?(e.enumerable===!1&&!s&&(c.presentationHint.visibility="internal",c.sortOrder=1),(e.writable===!1||s&&!a)&&(c.presentationHint.attributes=["readOnly"])):(c.presentationHint.visibility="private",c.sortOrder=1)),"value"in e&&e.value&&o.push(this.createVariableByType(c,e.value,n)),s?o.push(this.createVariable(H_,c,e.get,t)):a&&o.push(this.createVariable($_,c,e.set)),o}async evaluateCodeForObject(e,t,n){try{let i=await this.cdp.Runtime.callFunctionOn({objectId:e.objectId,functionDeclaration:t,arguments:n.map(K_)});if(i){if(i.exceptionDetails===void 0)return{result:i.result};if(i&&i.result.description)return{errorDescription:i.result.description}}return{errorDescription:$r.t("Unknown error")}}catch(i){return{errorDescription:i.stack||i.message||String(i)}}}},Xz=r=>typeof r=="number"||/^[0-9]+$/.test(r),Ir=class r{constructor(e,t){this.context=e;this.remoteObject=t;this.id=xc()}get name(){return this.context.name}get sortOrder(){return this.context.sortOrder}get accessor(){let{parent:e,name:t}=this.context;if(e instanceof ql)return e.accessor;if(!(e instanceof r))return this.context.name;let n=e.context.parent;if(n instanceof r){if(this.remoteObject.subtype==="internal#entry")return`[...${n.accessor}.entries()][${+t}]`;if(e.remoteObject.subtype==="internal#entry")return`${e.accessor}[${this.name==="key"?0:1}]`}return Xz(t)?`${e.accessor}[${t}]`:Kz.test(t)?`${e.accessor}.${t}`:e.accessor==="this"&&Jz.test(t)?`${e.accessor}.${t}`:`${e.accessor}[${JSON.stringify(t)}]`}async toDap(e,t){let n=this.context.name;return this.context.parent instanceof Ic&&(n=await this.context.parent.getRename(n)),Promise.resolve({name:n,value:Ps(this.remoteObject,e,t),evaluateName:this.accessor,type:this.remoteObject.type,variablesReference:0,presentationHint:this.context.presentationHint})}async setProperty(e,t){let n=await this.context.cdp.Runtime.callFunctionOn({objectId:this.remoteObject.objectId,functionDeclaration:`function(a) { return this[a] = ${t}; ${$e()} }`,arguments:[K_(e)],silent:!0});if(!n)throw new O(we($r.t("Unable to set variable value")));if(n.exceptionDetails)throw new O(MD(n.exceptionDetails));return this.context.createVariableByType({name:e},n.result)}async getChildren(e){return Promise.resolve([])}},Hh=class{constructor(e){this.child=e;this.id=xc()}getChildren(){return Promise.resolve([this.child])}},N_=class extends Ir{constructor(t,n,i,o){super(t,{type:i[0]?.type??"string"});this.value=n;this.args=i;this.stackTrace=o}toDap(){return Promise.resolve({name:this.context.name,value:this.value,variablesReference:this.stackTrace||this.args.some(Cs)?this.id:0})}getChildren(t){let n=[],{args:i,stackTrace:o}=this;for(let s=0;s<i.length;++s)Cs(i[s])&&n.push(this.context.createVariableByType({name:`arg${s}`,sortOrder:s},i[s]));return o&&n.push(this.context.createVariable(F_,{name:"",sortOrder:Number.MAX_SAFE_INTEGER},this.remoteObject,o)),Promise.resolve(n)}},F_=class extends Ir{constructor(t,n,i){super(t,n);this.stacktrace=i}async toDap(){return{name:"",value:await this.stacktrace.format(),variablesReference:0}}},Gh=class extends Ir{constructor(e,t){super(e,t),this.location=t.value}async toDap(){return{name:this.context.name,value:await this.context.locationProvider.renderDebuggerLocation(this.location),variablesReference:0,presentationHint:{visibility:"internal"}}}},B_=class extends Ir{constructor(t,n,i){super(t,n);this.message=i}get accessor(){if(!(this.context.parent instanceof Ir))throw new Error("ErrorVariable must have a parent Variable");return this.context.parent.accessor}toDap(){return Promise.resolve({name:this.context.name,value:this.message,variablesReference:0})}},zh=Symbol("NoStringRepr"),Es=class extends Ir{constructor(t,n,i){super(t,n);this.customStringRepr=i}async toDap(t,n){let[i,o]=await Promise.all([await super.toDap(t,n),await this.getValueRepresentation(t)]);return{...i,type:this.remoteObject.className||this.remoteObject.subtype||this.remoteObject.type,variablesReference:this.id,memoryReference:zz.has(this.remoteObject.subtype)?String(this.id):void 0,value:o}}async getValueRepresentation(t){if(typeof this.customStringRepr=="string")return this.customStringRepr;if(!this.context.parent&&this.remoteObject.objectId&&this.customStringRepr!==zh)try{let n=await this.context.cdp.Runtime.callFunctionOn({functionDeclaration:qh.decl(`${DD}`,this.context.customDescriptionGenerator||"null"),objectId:this.remoteObject.objectId,returnByValue:!0});if(n?.result.value)return this.customStringRepr=OD(n.result.value)}catch{this.customStringRepr=zh}return this.context.name==="__proto__"&&this.remoteObject.description||Ps(this.remoteObject,t)}async readMemory(t,n){let i=await O_({cdp:this.context.cdp,args:[t,n],objectId:this.remoteObject.objectId,returnByValue:!0});return Buffer.from(i.value,"hex")}async writeMemory(t,n){return(await M_({cdp:this.context.cdp,args:[t,n.toString("hex")],objectId:this.remoteObject.objectId,returnByValue:!0})).value}getChildren(t){return this.context.createObjectPropertyVars(this.remoteObject,t.evaluationOptions)}},U_=class extends Es{constructor(){super(...arguments);this.id=xc()}get accessor(){return this.context.parent.accessor}async toDap(t,n){return Promise.resolve({...await super.toDap(t,n),value:"..."})}},j_=class extends Ir{constructor(){super(...arguments);this.description=ne(()=>this.context.cdp.DOM.describeNode({objectId:this.remoteObject.objectId}))}async toDap(t,n){let o=(await this.description())?.node?.childNodeCount||0;return{...await super.toDap(t,n),value:await this.getValuePreview(t),variablesReference:this.id,indexedVariables:o>100?o:void 0,namedVariables:o>100?1:void 0}}async getChildren(t){switch(t?.filter){case"indexed":return this.getNodeChildren(t.start,t.count);case"named":return[this.getAttributesVar()];default:return[this.getAttributesVar(),...await this.getNodeChildren()]}}getAttributesVar(){return this.context.createVariable(U_,{name:$r.t("Node Attributes"),presentationHint:{visibility:"internal"},sortOrder:Number.MAX_SAFE_INTEGER},this.remoteObject,void 0)}async getNodeChildren(t=-1,n=-1){let i;try{i=await CD({cdp:this.context.cdp,generatePreview:!1,args:[t,n],objectId:this.remoteObject.objectId})}catch{return[]}let o=await this.context.createObjectPropertyVars(i);return i.objectId&&await this.context.cdp.Runtime.releaseObject({objectId:i.objectId}),o}async getValuePreview(t){let n=await this.description();if(!n?.node)return"";let{localName:i,attributes:o,childNodeCount:s}=n.node,a=this.context.clientCapabilities.value?.supportsANSIStyling?!0:"",c=(a&&"\x1B[34m")+`<${i}`;if(o)for(let u=0;u<o.length;u+=2){let l=o[u],p=o[u+1];c+=` ${a&&"\x1B[34;1m"}${l}${a&&"\x1B[2m"}=${a&&"\x1B[33m"}${JSON.stringify(p)}`}return c+=(a&&"\x1B[34m")+">",s&&(c+=`${a&&"\x1B[2m"}...${a&&"\x1B[34m"}`),c+=`</${i}>${a&&"\x1B[0m"}`,c}},q_=class extends Es{async toDap(e){let[t,n]=await Promise.all([super.toDap(e),this.context.cdp.Runtime.getProperties({objectId:this.remoteObject.objectId,ownProperties:!0,nonIndexedPropertiesOnly:!0})]),i=n?.internalProperties?.find(LD);return i&&(t.valueLocationReference=this.context.createFunctionLocationVariable(i).id),t}},AD="[[Entries]]",W_=class extends Es{constructor(t,n){super(t,n,zh);this.baseChildren=ne(()=>super.getChildren({variablesReference:this.id}));this.isMap=n.subtype==="map";let i=n.preview;this.size=Number(i?.properties.find(o=>o.name==="size")?.value)??void 0}async toDap(t){let n=await super.toDap(t);return this.size&&this.size>100&&(n.indexedVariables=this.size),n}async getChildren(t){let n=await this.baseChildren();return[...(await n.find(o=>o.name===AD)?.getChildren(t)||[]).filter(o=>o.sortOrder===0),...n.filter(o=>o.name!==AD)]}},Kh=class extends Es{constructor(t,n){super(t,n,zh);this.length=0;let i=String(n.description).match(/\(([0-9]+)\)/);this.length=i?+i[1]:0}async toDap(t){return{...await super.toDap(t),indexedVariables:this.length>100?this.length:void 0,namedVariables:this.length>100?1:void 0}}async getChildren(t){switch(t?.filter){case"indexed":return this.getArraySlots(t);case"named":return this.getArrayProperties();default:return Promise.all([this.getArrayProperties(),this.getArraySlots()]).then(es)}}async getArrayProperties(){try{let t=await ID({cdp:this.context.cdp,args:[],objectId:this.remoteObject.objectId,generatePreview:!0});return this.context.createObjectPropertyVars(t)}catch{return[]}}async getArraySlots(t){let n=t&&typeof t.start<"u"?t.start:-1,i=t&&typeof t.count<"u"?t.count:-1,o;try{o=await xD({cdp:this.context.cdp,generatePreview:!1,args:[n,i],objectId:this.remoteObject.objectId})}catch{return[]}let s=await this.context.createObjectPropertyVars(o);return o.objectId&&await this.context.cdp.Runtime.releaseObject({objectId:o.objectId}),s}},V_=class extends Kh{async toDap(e){return this.remoteObject.preview?{...await super.toDap(e),name:yD(this.remoteObject.preview)}:super.toDap(e)}},ql=class extends Ir{constructor(e,t){super(e,t)}getChildren(e){return this.context.createObjectPropertyVars(this.remoteObject)}},$_=class extends ql{async toDap(e,t){return{...await super.toDap(e,t),value:"write-only",variablesReference:this.id}}},H_=class extends ql{constructor(t,n,i){super(t,n);this.parentObject=i}async toDap(t,n){let i=await super.toDap(t,n);return i.variablesReference=this.id,i.presentationHint={...i.presentationHint,lazy:!0},i}async getChildren(t){try{let n=await PD({cdp:this.context.cdp,objectId:this.parentObject.objectId,args:[new nl(this.remoteObject.objectId)]});return[this.context.createVariableByType({name:this.name,presentationHint:this.context.presentationHint},n)]}catch(n){if(!(n instanceof os))throw n}return super.getChildren(t)}},Wl=class r{constructor(e,t,n){this.context=e;this.variable=t;this.scopeRef=n;this.id=xc();this.sortOrder=0}static{this.presentationHint={attributes:["readOnly"]}}toDap(){return Promise.resolve({name:this.context.name,value:this.variable.description||"",variablesReference:this.variable.getChildren?this.id:0,memoryReference:this.variable.linearMemoryAddress?String(this.id):void 0,presentationHint:this.context.presentationHint})}async getChildren(){return(await this.variable.getChildren?.()||[]).map(t=>this.context.createVariable(r,{name:t.name,presentationHint:r.presentationHint},t.value,this.scopeRef))}async readMemory(e,t){let n=this.variable.linearMemoryAddress;if(n===void 0)return;let i=await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${O_.source}).call(memories[0].buffer, ${+n+e}, ${+t}) ${$e()}`,returnByValue:!0});if(!i)throw new os({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});return Buffer.from(i.result.value,"hex")}async writeMemory(e,t){let n=this.variable.linearMemoryAddress;return n===void 0?0:(await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${M_.source}).call(memories[0].buffer, ${+n+e}, ${JSON.stringify(t.toString("hex"))}) ${$e()}`,returnByValue:!0}))?.result.value||0}},G_=class{constructor(e,t,n,i){this.context=e;this.kind=t;this.variables=n;this.scopeRef=i;this.id=xc();this.sortOrder=RD[this.kind]?.sortOrder||0}toDap(){return Promise.resolve({name:RD[this.kind]?.name||this.kind,value:"",variablesReference:this.id})}getChildren(){return Promise.all(this.variables.map(async e=>{let t=await e.evaluate();return this.context.createVariable(Wl,{name:e.name,presentationHint:Wl.presentationHint},t,this.scopeRef)}))}},Ic=class{constructor(e,t,n,i,o){this.remoteObject=e;this.context=t;this.ref=n;this.extraProperties=i;this.renameProvider=o;this.id=xc()}async getChildren(e){let t=await this.context.createObjectPropertyVars(this.remoteObject),n=new Set(t.map(i=>i.name));for(let i of this.extraProperties)n.has(i.name)||t.push(this.context.createVariableByType({name:i.name},i.value));return t}async getRename(e){return(await this.renameProvider.provideOnStackframe(this.ref.stackFrame)).getOriginalName(e,this.ref.stackFrame.rawPosition)||e}async setProperty(e,t){let n=await this.context.cdp.Debugger.evaluateOnCallFrame({expression:`${t} ${$e()}`,callFrameId:this.ref.callFrameId});if(!n)throw new O(Se($r.t("Invalid expression")));if(n.exceptionDetails)throw new O(MD(n.exceptionDetails));return await this.context.cdp.Debugger.setVariableValue({callFrameId:this.ref.callFrameId,scopeNumber:this.ref.scopeNumber,variableName:e,newValue:K_(n.result)}),this.context.createVariableByType({name:e},n.result)}},z_=class{constructor(){this.value=new Map}get(e){return this.value.get(e)}add(e){this.value.set(e.id,e)}clear(){this.value.clear()}},yo=class{constructor(e,t,n,i,o,s){this.renameProvider=e;this.cdp=t;this.dap=n;this.launchConfig=i;this.clientCapabilities=o;this.locationProvider=s;this.vars=new z_;this.contextSettings={customDescriptionGenerator:i.customDescriptionGenerator&&TD(["defaultValue"],i.customDescriptionGenerator,!1),customPropertiesGenerator:i.customPropertiesGenerator&&TD([],i.customPropertiesGenerator,!1)}}createDetached(){return new yo(this.renameProvider,this.cdp,this.dap,this.launchConfig,this.clientCapabilities,this.locationProvider)}clear(){this.vars.clear()}createFloatingVariable(e,t){return this.createFloatingContext().createVariableByType({name:e},t)}createFloatingWasmVariable(e,t,n,i){let o=this.createFloatingContext(),s={stackFrame:n,callFrameId:i,scopeNumber:0};return o.createWasmVariable({name:e},t,s)}createVariableForOutput(e,t,n,i){let o=this.createFloatingContext(),s=t.length===1&&i==="table"?o.createVariable(V_,{name:""},t[0]):t.length===1&&Cs(t[0])&&!n?o.createVariableByType({name:""},t[0]):o.createVariable(N_,{name:""},e,t,n),a=new Hh(s);return this.vars.add(a),a}createScope(e,t,n){let i=new Ic(e,new jl(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>i,this.contextSettings,this.clientCapabilities),t,n,this.renameProvider);return this.vars.add(i),i}createWasmScope(e,t,n){let i=new G_(new jl(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>i,this.contextSettings,this.clientCapabilities),e,t,n);return this.vars.add(i),i}hasVariable(e){return!!this.vars.get(e)}hasMemory(e){return L_(this.vars.get(Number(e)))}async readMemory(e,t,n){let i=this.vars.get(Number(e));return L_(i)?i.readMemory(t,n):void 0}async writeMemory(e,t,n){let i=this.vars.get(Number(e)),o=L_(i)?await i.writeMemory(t,n):0;return o>0&&this.dap.invalidated({areas:["variables"]}),o}async getVariableNames(e){let t=this.vars.get(e.variablesReference);return t?(await t.getChildren(e)).filter(Qo(Ir)):[]}async getVariables(e){let t=this.vars.get(e.variablesReference);if(!t)return[];let n=await t.getChildren(e);return(await Promise.all(n.map(o=>o.toDap(t instanceof Ic||t instanceof Hh?"repl":"propertyValue",e.format).then(s=>({v:o,dap:s}))))).sort((o,s)=>o.v.sortOrder-s.v.sortOrder||+o.dap.name-+s.dap.name||o.dap.name.localeCompare(s.dap.name)).map(o=>o.dap)}async getLocations(e){let t=this.vars.get(e);if(!t||!(t instanceof Gh))throw el();return t.location}async setVariable(e){let t=this.vars.get(e.variablesReference);if(!e.value)throw new O(Se($r.t("Cannot set an empty value")));if(t instanceof Ic||t instanceof Ir)return await(await t.setProperty(e.name,e.value)).toDap("propertyValue",e.format);throw new O(we($r.t("Variable not found")))}createFloatingContext(){return new jl(this.cdp,void 0,{name:"<unnamed>"},this.vars,this.locationProvider,void 0,this.contextSettings,this.clientCapabilities)}};yo=C([(0,go.injectable)(),g(0,(0,go.inject)(oo)),g(1,(0,go.inject)(je)),g(2,(0,go.inject)(rr)),g(3,(0,go.inject)(le)),g(4,(0,go.inject)(po))],yo);function MD(r){let e=r.exception&&Ts(r.exception).title||r.text;return Se(e)}function LD(r){return r.name==="[[FunctionLocation]]"&&!!r.value&&r.value.subtype==="internal#location"}var J_=class{constructor(e){this.description=e;this.sourceMapLoads=new Map;this.scripts=[]}get isDefault(){return this.description.auxData&&this.description.auxData.isDefault}async remove(e){await Promise.all(this.scripts.map(async t=>{let n=await t.source;n.filterScripts(i=>i.executionContextId!==this.description.id),n.scripts.length||e.removeSource(n)}))}},Y_=class{constructor(e){this._obj=e;this._dapDeferred=ge()}resolve(){this._dapDeferred.resolve(this._obj)}with(e){return this._dapDeferred.hasSettled()?e(this._obj):this._dapDeferred.promise.then(t=>e(t))}},Zz=50,ND=(r,e)=>r.sourceReference===e.sourceReference&&Cf(r.path||"",e.path||""),e8=()=>`
//# sourceURL=eval-${(0,FD.randomBytes)(4).toString("hex")}.repl
`,X_=class{async enqueue(e,t){if(this.queue?.operation===e&&await new Promise(n=>setTimeout(n)),!this.queue||this.queue.operation!==e){let n=this.queue?.result.then(t,t)??t(),i=this.queue={operation:e,result:n.finally(()=>{this.queue===i&&(this.queue=void 0)})}}return this.queue.result}};var Cc=class r{constructor(e,t,n,i,o,s,a,c,u,l,p,d,f,h,m){this.target=i;this.logger=s;this.evaluator=a;this.completer=c;this.launchConfig=u;this._breakpointManager=l;this.console=p;this.exceptionPause=d;this._smartStepper=f;this.shutdown=h;this._executionContexts=new Map;this._excludedCallers=[];this.stateQueue=new X_;this._onPausedEmitter=new A;this.disposed=!1;this.debuggerReady=ge();this.onPaused=this._onPausedEmitter.event;this._dap=new Y_(n),this._sourceContainer=e,this._cdp=t,this.id=r._lastThreadId++,this.replVariables=new yo(o,this._cdp,n,u,m,this),e.onSourceMappedSteppingChange(()=>this.refreshStackTrace()),this._initialize()}static{this._lastThreadId=0}static{this._allThreadsByDebuggerId=new Map}setExcludedCallers(e){this._excludedCallers=e}cdp(){return this._cdp}name(){return this.target.name()}pausedDetails(){return this._pausedDetails}pausedVariables(){return this._pausedVariables}defaultExecutionContext(){for(let e of this._executionContexts.values())if(e.isDefault)return e}resume(){return this.stateQueue.enqueue("resume",async()=>(this._sourceContainer.clearDisabledSourceMaps(),!await this._cdp.Debugger.resume({})&&this._pausedDetails!==void 0?we(he.t("Unable to resume")):{allThreadsContinued:!1}))}pause(){return this.stateQueue.enqueue("pause",async()=>(this._expectedPauseReason={reason:"pause"},await this._cdp.Debugger.pause({})?{}:we(he.t("Unable to pause"))))}stepOver(){return this.stateQueue.enqueue("stepOver",async()=>{this._expectedPauseReason={reason:"step",direction:1};let e=await this.getCurrentSkipList(1);return await this._cdp.Debugger.stepOver({skipList:e})?{}:we(he.t("Unable to step next"))})}stepInto(e){return this.stateQueue.enqueue("stepInto",async()=>{this._waitingForStepIn={lastDetails:this._pausedDetails},this._expectedPauseReason={reason:"step",direction:0};let t=this._pausedDetails?.stepInTargets?.[e];if(t){let n=await this._cdp.Debugger.setBreakpoint({location:t.breakLocation});if(this._waitingForStepIn.intoTargetBreakpoint=n?.breakpointId,await this._cdp.Debugger.resume({}))return{}}else{let n=await this.getCurrentSkipList(0);if(await this._cdp.Debugger.stepInto({breakOnAsyncCall:!0,skipList:n}))return{}}return we(he.t("Unable to step in"))})}stepOut(){return this.stateQueue.enqueue("stepOut",async()=>(this._expectedPauseReason={reason:"step",direction:2},await this._cdp.Debugger.stepOut({})?{}:we(he.t("Unable to step out"))))}async getCurrentSkipList(e){if(!this._pausedDetails)return;let[t]=await this._pausedDetails.stackTrace.loadFrames(1);if(!t||!BD(t))return;let n=await t.getStepSkipList(e);if(n)return Ft.simplify(n).map(i=>({start:i.begin.base0,end:i.end.base0,scriptId:t.root.scriptId}))}_stackFrameNotFoundError(){return we(he.t("Stack frame not found"))}_evaluateOnAsyncFrameError(){return we(he.t("Unable to evaluate on async stack frame"))}async restartFrame(e){let t=this._pausedDetails?.stackTrace.frame(e.frameId)?.root;if(!t)return this._stackFrameNotFoundError();let n=t.callFrameId();return n?await this._cdp.Debugger.restartFrame({callFrameId:n,mode:"StepInto"})?(this._expectedPauseReason={reason:"frame_entry",description:he.t("Paused on frame entry")},t.canExplicitlyBeRestarted||await this._cdp.Debugger.stepInto({}),{}):Se(he.t("Frame could not be restarted")):Se(he.t("Cannot restart asynchronous frame"))}async stackTrace(e){return this._pausedDetails?this._pausedDetails.stackTrace.toDap(e):we(he.t("Thread is not paused"))}async scopes(e){let t=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0;return t?t.scopes():this._stackFrameNotFoundError()}async exceptionInfo(){let e=this._pausedDetails&&this._pausedDetails.exception;if(!e)return we(he.t("Thread is not paused on exception"));let t=Ts(e);return{exceptionId:t.title,breakMode:"all",details:{stackTrace:t.stackTrace,evaluateName:void 0}}}async revealPage(){return this._cdp.Page.bringToFront({}),{}}async completions(e){let t;if(e.frameId!==void 0){if(t=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId)?.root:void 0,!t)return this._stackFrameNotFoundError();if(!t.callFrameId())return this._evaluateOnAsyncFrameError()}if(e.line===1&&e.text.startsWith("cd "))return{targets:this.getExecutionContextCompletions(e)};let n=await this.completer.completions({executionContextId:this._selectedContext?this._selectedContext.description.id:void 0,stackFrame:t,expression:e.text,position:new Ue(e.line||1,e.column)});return{targets:[...this.getExecutionContextCompletions(e),...n]}}getExecutionContextCompletions(e){if(e.line&&e.line>1)return[];let t=e.text.slice(0,e.column).trim();return[...this._executionContexts.values()].map(n=>`cd ${this.target.executionContextName(n.description)}`).filter(n=>n.startsWith(t)).map(n=>({label:n,start:0,length:e.text.length}))}async _evaluteWasm(e,t,n){if(!e)return;let i=e.root,o=i.callFrameId(),s=await i.scriptSource?.source;if(!ms(s)||!o)return;let a=await s.sourceMap.value.promise;if(!a.evaluate)return;let c=new Oe(e instanceof $l?e.inlineFrameIndex:0,i.rawPosition.base0.columnNumber),u=await a.evaluate(o,c,t.expression);return await n.createFloatingWasmVariable(t.expression,u,i,o).toDap(t.context,t.format)}async _evaluteJs(e,t,n){let i,o;if(t.context==="clipboard"?(o=$h.exprArgRanges(t.expression,"2"),i={expression:$h.expr(t.expression,"2"),includeCommandLineAPI:!0,returnByValue:!0,objectGroup:"console"}):i={expression:t.expression,includeCommandLineAPI:!0,objectGroup:"console",generatePreview:!0,timeout:t.context==="hover"?this.getHoverEvalTimeout():void 0},t.context==="repl"){if(i.expression=rl(i.expression),i.expression.indexOf("await")!==-1){let l=JT(i.expression);l&&(i.expression=l,i.awaitPromise=!0)}i.expression+=e8()}t.evaluationOptions&&this.cdp().DotnetDebugger.setEvaluationOptions({options:t.evaluationOptions,type:"evaluation"});let s;if(t.source&&t.line&&t.column){let l=this._pausedVariables,p=this._sourceContainer.source(t.source);p&&l&&(s={source:p,position:new Ue(t.line,t.column),variables:l})}let a=e?.root.callFrameId(),c=this.evaluator.evaluate(a?{...i,callFrameId:a}:{...i,contextId:this._selectedContext?this._selectedContext.description.id:void 0},{isInternalScript:!1,stackFrame:e?.root,location:s,transformRanges:o});if(t.context==="repl")return await this._evaluateRepl(t,c,t.format);let u=await c;if(!u)throw new O(we(he.t("Unable to evaluate")));if(u.exceptionDetails){let l=u.exceptionDetails.exception?Ts(u.exceptionDetails.exception).title:u.exceptionDetails.text;throw l.startsWith("Uncaught")||(l="Uncaught "+l),new O(we(l))}return n.createFloatingVariable(i.expression,u.result).toDap(t.context,t.format)}async evaluate(e){let t,n;if(e.frameId!==void 0){if(n=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0,!n)throw new O(this._stackFrameNotFoundError());if(t=n.root.callFrameId(),!t)throw new O(this._evaluateOnAsyncFrameError())}if(e.context==="repl"&&e.expression.startsWith("cd ")){let s=e.expression.substring(3).trim();for(let a of this._executionContexts.values())if(this.target.executionContextName(a.description)===s)return this._selectedContext=a,{result:`[${s}]`,variablesReference:0}}let i=t?this._pausedVariables:this.replVariables;if(!i)throw new O(we(he.t("Unable to evaluate")));let o=await this._evaluteWasm(n,e,i)??await this._evaluteJs(n,e,i);return{type:o.type,result:o.value,variablesReference:o.variablesReference,namedVariables:o.namedVariables,indexedVariables:o.indexedVariables,memoryReference:o.memoryReference,valueLocationReference:o.valueLocationReference}}getHoverEvalTimeout(){let e=this.launchConfig.timeouts?.hoverEvaluation;if(e===void 0)return 500;if(!(e<=0))return e}async _evaluateRepl(e,t,n){let i=await t;if(!i)return{name:e.expression,value:"",variablesReference:0};if(i.exceptionDetails){let c=await new Vl(i.exceptionDetails).toDap(this);throw new O(bT(c.output))}let o=this._selectedContext&&this.defaultExecutionContext()!==this._selectedContext?`\x1B[33m[${this.target.executionContextName(this._selectedContext.description)}] `:"",s=await this.replVariables.createFloatingVariable(e.expression,i.result).toDap("repl",n),a=Bh("repl").budget;return s.variablesReference===0&&s.value.length===a&&setImmediate(()=>this.console.enqueue(this,{toDap:()=>({output:he.t("Output has been truncated to the first {0} characters. Run `{1}` to copy the full output.",a,`copy(${e.expression.trim()})`),category:"stdout"})})),{...s,value:`${o}${s.value}`}}_initialize(){this._cdp.Runtime.on("executionContextCreated",e=>{this._executionContextCreated(e.context)}),this._cdp.Runtime.on("executionContextDestroyed",e=>{this._executionContextDestroyed(e.executionContextId)}),this._cdp.Runtime.on("executionContextsCleared",()=>{this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.replVariables.clear(),this._executionContextsCleared()}),this._cdp.Inspector.on("targetReloadedAfterCrash",()=>{this._breakpointManager.reapply()}),this.launchConfig.outputCapture==="console"&&(this._cdp.Runtime.on("consoleAPICalled",e=>{this.console.dispatch(this,e)}),this._cdp.Runtime.on("exceptionThrown",e=>{this.console.enqueue(this,new Vl(e.exceptionDetails))})),this._cdp.Runtime.on("inspectRequested",e=>{e.hints.copyToClipboard?this._copyObjectToClipboard(e.object):e.hints.queryObjects?this.console.enqueue(this,new Jh(e.object,this.cdp())):this._revealObject(e.object)}),this._cdp.Debugger.on("paused",async e=>this._onPaused(e)),this._cdp.Debugger.on("resumed",()=>this.onResumed()),this._cdp.Debugger.on("scriptParsed",e=>this._onScriptParsed(e)),this._cdp.Debugger.on("scriptFailedToParse",e=>this._onScriptParsed(e)),this._cdp.Runtime.enable({}),this._cdp.Profiler.enable({}),this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.launchConfig.noDebug&&this.logger.info("runtime.launch","Running with noDebug, so debug domains are disabled"),this.target.initialize(),this._dap.with(e=>e.thread({reason:"started",threadId:this.id}))}dapInitialized(){this._dap.resolve()}async enableNetworking({mirrorEvents:e}){if(!await this._cdp.Network.enable({}))throw wT();return this._dap.with(n=>{for(let i of e)this._cdp.Network.on(i,o=>n.networkEvent({data:o,event:i}))}),{}}async getStepInTargets(e){let t=this._pausedDetails;if(!t)return[];let n=t.stackTrace.frames.find(l=>l.frameId===e);if(!(n instanceof qt))return[];let i=await n.uiLocation();if(!i)return[];let o=t.event.callFrames[0].location,[s,a]=await Promise.all([this._breakpointManager.getBreakpointLocations(this,i.source,new Ue(i.lineNumber,1),new Ue(i.lineNumber+1,1)).then(l=>l.filter(p=>p.breakLocation.lineNumber!==o.lineNumber||p.breakLocation.columnNumber!==o.columnNumber)),i.source.content()]),c=t.stepInTargets?.length||0;t.stepInTargets=t.stepInTargets?.concat(s)||s;let u=a&&new eo(a);return s.map((l,p)=>{let d=l.uiLocations.find(h=>h.source===i.source);if(!d)return;if(!u)return{id:c+p,label:`Column ${d}`,line:d.lineNumber,column:d.columnNumber};let f=YT(a.slice(u.getLineOffset(d.lineNumber-1),u.getLineOffset(d.lineNumber)),d.columnNumber-1);if(f)return{id:c+p,label:f.text,line:d.lineNumber,column:f.start+1,endLine:d.lineNumber,endColumn:f.end+1}}).filter(Ct)}async refreshStackTrace(){this._pausedDetails&&(this._pausedDetails=await this._createPausedDetails(this._pausedDetails.event),this._onThreadResumed(),await this._onThreadPaused(this._pausedDetails))}_executionContextCreated(e){let t=new J_(e);return this._executionContexts.set(e.id,t),this._scriptWithSourceMapHandler&&this._installWasmPauseHandler(e.id),t}_installWasmPauseHandler(e){return this._cdp.Runtime.evaluate({expression:wD.expr(),silent:!0,contextId:e})}async _executionContextDestroyed(e){let t=this._executionContexts.get(e);t&&(this._executionContexts.delete(e),await this.shutdown.shutdownContext(),t.remove(this._sourceContainer))}async _executionContextsCleared(){let e=[...this._executionContexts.values()],t=this._pausedDetails;this._executionContexts.clear(),await this.shutdown.shutdownContext();for(let n of e)n.remove(this._sourceContainer);this._breakpointManager.executionContextWasCleared(),t&&t===this._pausedDetails&&!this.disposed&&this.onResumed()}_ensureDebuggerEnabledAndRefreshDebuggerId(){if(this.launchConfig.noDebug)return this.debuggerReady.resolve();this._cdp.Debugger.enable({}).then(e=>{this.debuggerReady.resolve(),e&&r._allThreadsByDebuggerId.set(e.debuggerId,this)}),this.exceptionPause.apply(this._cdp)}async _onPaused(e){let t=e.hitBreakpoints??[],n=e.reason==="Break on start"||e.reason==="debugCommand",i=e.callFrames[0]?.location,o=e.data?.scriptId||i?.scriptId,s=o&&this._sourceContainer.getSourceScriptById(o)?.url===D_,a=o&&(e.reason==="instrumentation"||this._breakpointManager.isEntrypointBreak(t,o)||t.some(p=>this._pauseOnSourceMapBreakpointIds?.includes(p))||s);if(this.evaluator.setReturnedValue(e.callFrames[0]?.returnValue),a){this.launchConfig.perScriptSourcemaps==="auto"&&this._shouldEnablePerScriptSms(e)&&await this._enablePerScriptSourcemaps(),e.data&&!n&&(e.data.__rewriteAs="breakpoint");let p=this._expectedPauseReason;if(s){let d=this._lastParsedWasmScriptIds;return this._lastParsedWasmScriptIds=void 0,d&&await Promise.all(d.map(f=>this._handleSourceMapPause(f,i))),this.resume()}else if(!(o&&await this._handleSourceMapPause(o,i))){if(!n){if(await this.isCrossThreadStep(e))e.data={...e.data,__rewriteAs:"step"};else if(!await this._breakpointManager.shouldPauseAt(e,t,this.target.entryBreakpoint,!0))if(p?.reason==="step"){if(p.direction!==0)return this._cdp.Debugger.resume({})}else return this.resume()}}}else if(!(e.reason==="exception"||e.reason==="promiseRejection"?await this.exceptionPause.shouldPauseAt(e):await this._breakpointManager.shouldPauseAt(e,t,this.target.entryBreakpoint,!1)))return this.resume();let c=this._waitingForStepIn?.intoTargetBreakpoint;if(c){e.hitBreakpoints?.includes(c)?(this._waitingForStepIn.intoTargetBreakpoint=void 0,await this._cdp.Debugger.removeBreakpoint({breakpointId:c}),await this._cdp.Debugger.stepInto({breakOnAsyncCall:!1})):this.resume();return}if(n&&("continueOnAttach"in this.launchConfig&&this.launchConfig.continueOnAttach||this.launchConfig.type==="pwa-extensionHost"||this.target instanceof Sc)){this.resume();return}let u=this._pausedDetails=await this._createPausedDetails(e);if(this._excludedCallers.length&&await this._matchesExcludedCaller(this._pausedDetails.stackTrace)){this.logger.info("runtime","Skipping pause due to excluded caller"),this.resume();return}let l=await this._smartStepper.getSmartStepDirection(u,this._expectedPauseReason);if(this._pausedDetails===u){switch(l){case 0:return this.stepInto();case 2:return this.stepOut();case 1:return this.stepOver();default:}this._waitingForStepIn=void 0,this._pausedVariables=this.replVariables.createDetached(),await this._onThreadPaused(u)}}async _matchesExcludedCaller(e){if(!this._excludedCallers.length)return!1;let t=e.frames[0],n=t instanceof qt&&await t.uiLocation();if(!n)return!1;let i,o,s=[];for(let{caller:a,target:c}of this._excludedCallers)if(!(c.line!==n.lineNumber||c.column!==n.columnNumber)&&(i??=await n.source.toDap(),!!ND(i,c.source))){o||(o=await e.loadFrames(Zz).then(l=>Promise.all(l.slice(1).filter(Qo(qt)).map(p=>p.uiLocation()))));for(let u=0;u<o.length;u++){let l=o[u];if(!l||l.lineNumber!==a.line||l.columnNumber!==a.column)continue;let p=s[u]??=await l.source.toDap();if(ND(p,a.source))return!0}}return!1}onResumed(){this._pausedDetails=void 0,this._pausedVariables=void 0,this.evaluator.setReturnedValue(void 0),this._onThreadResumed()}async dispose(){await this.shutdown.shutdownAll(),this.disposed=!0;for(let[e,t]of r._allThreadsByDebuggerId)t===this&&r._allThreadsByDebuggerId.delete(e);this._removeAllScripts(!0),this._executionContextsCleared(),await this._dap.with(e=>e.thread({reason:"exited",threadId:this.id}))}rawLocation(e){if("location"in e){let t=e;return{lineNumber:Math.max(0,t.location.lineNumber)+1,columnNumber:Math.max(0,t.location.columnNumber||0)+1,scriptId:t.location.scriptId}}return{lineNumber:Math.max(0,e.lineNumber)+1,columnNumber:Math.max(0,e.columnNumber||0)+1,scriptId:e.scriptId}}rawLocationToUiLocation(e){if(!e.scriptId||this.disposed||this.launchConfig.noDebug)return;let t=this._sourceContainer.getScriptById(e.scriptId);return t?t.resolvedSource?this._sourceContainer.preferredUiLocation({...t.resolvedSource.offsetScriptToSource(e),source:t.resolvedSource}):t.source.then(n=>this._sourceContainer.preferredUiLocation({...n.offsetSourceToScript(e),source:n})):this.rawLocationToUiLocationWithWaiting(e)}async rawLocationToUiLocationWithWaiting(e){let t=e.scriptId?await this.getScriptByIdOrWait(e.scriptId):void 0;if(!t)return;let n=await t.source;return this._sourceContainer.preferredUiLocation({...n.offsetScriptToSource(e),source:n})}getScriptById(e){return this._sourceContainer.getScriptById(e)}getScriptByIdOrWait(e,t=500){return this._sourceContainer.getScriptById(e)||this.waitForScriptId(e,t)}waitForScriptId(e,t){return new Promise(n=>{let i=this._sourceContainer.onScript(s=>{s.scriptId===e&&(n(s),i.dispose(),clearTimeout(o))}),o=setTimeout(()=>{n(void 0),i.dispose()},t)})}async renderDebuggerLocation(e){let t=this.rawLocation(e),n=await this.rawLocationToUiLocation(t);return n?`@ ${await n.source.prettyName()}:${n.lineNumber}`:`@ VM${t.scriptId||"XX"}:${t.lineNumber}`}async updateCustomBreakpoints(e,t){if(!this.target.supportsCustomBreakpoints())return;this._enabledCustomBreakpoints??=new Set;let n=new Set;for(let o of e)n.add("x"+o);for(let o of t)n.add("e"+o);let i=[];for(let o of n)if(!this._enabledCustomBreakpoints.has(o)){let s=o.slice(1);i.push(o.startsWith("x")?this._cdp.DOMDebugger.setXHRBreakpoint({url:s}):Vh().get(s)?.apply(this._cdp,!0))}for(let o of this._enabledCustomBreakpoints)if(!n.has(o)){let s=o.slice(1);i.push(o.startsWith("x")?this._cdp.DOMDebugger.removeXHRBreakpoint({url:s}):Vh().get(s)?.apply(this._cdp,!1))}this._enabledCustomBreakpoints=n,await Promise.all(i)}async _createPausedDetails(e){let t=e.reason==="assert"||e.reason==="exception"||e.reason==="promiseRejection"||e.reason==="other"||e.reason==="ambiguous",n=e.hitBreakpoints?.filter(o=>!this._breakpointManager.isEntrypointCdpBreak(o))||[];if((n.length||!t)&&this._sourceContainer.clearDisabledSourceMaps(),e.hitBreakpoints&&this._sourceMapDisabler)for(let o of this._sourceMapDisabler(e.hitBreakpoints))this._sourceContainer.disableSourceMapForSource(o);let i=Di.fromDebugger(this,e.callFrames,e.asyncStackTrace,e.asyncStackTraceId);if(e.data?.__rewriteAs==="breakpoint")return{thread:this,event:e,stackTrace:i,reason:"breakpoint",description:he.t("Paused on breakpoint")};if(e.data?.__rewriteAs==="step")return{thread:this,event:e,stackTrace:i,reason:"step",description:he.t("Paused")};switch(e.reason){case"assert":return{thread:this,event:e,stackTrace:i,reason:"exception",description:he.t("Paused on assert")};case"debugCommand":return{thread:this,event:e,stackTrace:i,reason:"pause",description:he.t("Paused on debug() call")};case"DOM":return{thread:this,event:e,stackTrace:i,reason:"data breakpoint",description:he.t("Paused on DOM breakpoint")};case"EventListener":return this._resolveEventListenerBreakpointDetails(i,e);case"exception":return{thread:this,event:e,stackTrace:i,reason:"exception",description:he.t("Paused on exception"),exception:e.data};case"promiseRejection":return{thread:this,event:e,stackTrace:i,reason:"exception",description:he.t("Paused on {0}","promise rejection"),exception:e.data};case"instrumentation":return e.data&&e.data.scriptId?{thread:this,event:e,stackTrace:i,reason:"step",description:he.t("Paused")}:{thread:this,event:e,stackTrace:i,reason:"function breakpoint",description:he.t("Paused on instrumentation breakpoint")};case"XHR":return{thread:this,event:e,stackTrace:i,reason:"data breakpoint",description:he.t("Paused on XMLHttpRequest or fetch")};case"OOM":return{thread:this,event:e,stackTrace:i,reason:"exception",description:he.t("Paused before Out Of Memory exception")};default:if(n.length){let o=!1,s=this.target.entryBreakpoint;if(s&&n.includes(s.cdpId)){o=!0;let a=this._sourceContainer.source({path:He(s.path)});a!==void 0&&(o=!(await this._sourceContainer.currentSiblingUiLocations({lineNumber:e.callFrames[0].location.lineNumber+1,columnNumber:(e.callFrames[0].location.columnNumber||0)+1,source:a}))?.some(u=>this._breakpointManager.hasAtLocation(u)))}return o||this._breakpointManager.registerBreakpointsHit(n),{thread:this,event:e,stackTrace:i,hitBreakpoints:e.hitBreakpoints,reason:o?"entry":"breakpoint",description:he.t("Paused on breakpoint")}}return this._expectedPauseReason?{thread:this,event:e,stackTrace:i,description:he.t("Paused"),...this._expectedPauseReason}:{thread:this,event:e,stackTrace:i,reason:"pause",description:he.t("Paused on debugger statement")}}}_resolveEventListenerBreakpointDetails(e,t){let n=t.data,i=n&&n.eventName||"",o=Vh().get(i);if(o){let s=o.details(n);return{thread:this,event:t,stackTrace:e,reason:"function breakpoint",description:s.short,text:s.long}}return{thread:this,event:t,stackTrace:e,reason:"function breakpoint",description:he.t("Paused on event listener")}}_clearDebuggerConsole(){return{category:"console",output:"\x1B[2J"}}_removeAllScripts(e=!1){this._sourceContainer.clear(e)}_onScriptParsed(e){let t={url:e.url,hasSourceURL:!!e.hasSourceURL,embedderName:e.embedderName,scriptId:e.scriptId,executionContextId:e.executionContextId};Bt(e.url)&&(e.url=ye(e.url));let n=this._sourceContainer.getScriptById(e.scriptId);if(n&&this._executionContexts.has(n.executionContextId))return;if(e.url.endsWith(".cdp")){this._sourceContainer.addScriptById(t);return}e.url&&(e.url=this.target.scriptUrlToUrl(e.url));let i=this._executionContexts.get(e.executionContextId);i||(this.logger.info("internal","Creating missing execution context id",e),i=this._executionContextCreated({id:e.executionContextId,name:"<autofilled>",origin:"",uniqueId:String(e.executionContextId)}));let s={...t,source:(async()=>{let a=this._sourceContainer.getSourceByOriginalUrl(e.url);if(e.hash&&a?.contentHash===e.hash)return a.addScript({scriptId:e.scriptId,url:e.url,embedderName:e.embedderName,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),a;let c=async()=>{let f=await this._cdp.Debugger.getScriptSource({scriptId:e.scriptId});return f?f.scriptSource:void 0},u=e.startLine||e.startColumn?{lineOffset:e.startLine,columnOffset:e.startColumn}:void 0,l=e.url.endsWith("#vscode-extension")?{lineOffset:2,columnOffset:0}:void 0,p;e.sourceMapURL&&(p=Tt(e.sourceMapURL)?e.sourceMapURL:e.url&&Zi(e.url,e.sourceMapURL)||e.url,p||this._dap.with(f=>lT(f,`Could not load source map from ${e.sourceMapURL}`))),e.scriptLanguage==="WebAssembly"&&(this._lastParsedWasmScriptIds??=[],this._lastParsedWasmScriptIds.push(e.scriptId));let d=await this._sourceContainer.addSource(e,c,p,u,l,!e.hasSourceURL&&this.launchConfig.enableContentValidation?e.hash:void 0);return d.addScript({scriptId:e.scriptId,url:e.url,embedderName:e.embedderName,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),d})()};s.source.then(a=>s.resolvedSource=a),i.scripts.push(s),this._sourceContainer.addScriptById(s),(e.sourceMapURL||e.scriptLanguage==="WebAssembly")&&this._getOrStartLoadingSourceMaps(s)}async _handleSourceMapPause(e,t){this._pausedForSourceMapScriptId=e;let n=this._sourceContainer.sourceMapTimeouts().sourceMapMinPause,i=n+this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause,o=this._sourceContainer.getScriptById(e);if(!o)return this._pausedForSourceMapScriptId=void 0,!1;let s=new Vr,a=this._breakpointManager.disableEntrypointBreaks(e),c=await Promise.race([this._getOrStartLoadingSourceMaps(o),ae(i)]),u=s.elapsed().ms,l=this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause-Math.max(u-n,0);this._sourceContainer.setSourceMapTimeouts({...this._sourceContainer.sourceMapTimeouts(),sourceMapCumulativePause:l}),this.logger.verbose("internal","Blocked execution waiting for source-map",{timeSpentWallClockInMs:u,sourceMapCumulativePause:l}),c||this._dap.with(f=>f.output({category:"stderr",output:he.t("WARNING: Processing source-maps of {0} took longer than {1} ms so we continued execution without waiting for all the breakpoints for the script to be set.",o.url||o.scriptId,i)})),console.assert(this._pausedForSourceMapScriptId===e),this._pausedForSourceMapScriptId=void 0,await a;let p=t?.lineNumber||0,d=t?.columnNumber;return!!c?.map(Ci).some(f=>f.lineNumber===p&&(d===void 0||d===f.columnNumber))}_getOrStartLoadingSourceMaps(e){let t=this._executionContexts.get(e.executionContextId);if(!t)return Promise.resolve([]);let n=t.sourceMapLoads.get(e.scriptId);if(n)return n;let i=e.source.then(o=>this._sourceContainer.waitForSourceMapSources(o)).then(o=>o.length&&this._scriptWithSourceMapHandler?this._scriptWithSourceMapHandler(e,o):[]);return t.sourceMapLoads.set(e.scriptId,i),i}async _revealObject(e){if(e.type!=="function"||e.objectId===void 0)return;let t=await this._cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0});if(t)for(let n of t.internalProperties||[]){if(n.name!=="[[FunctionLocation]]"||!n.value||n.value.subtype!=="internal#location")continue;let i=await this.rawLocationToUiLocation(this.rawLocation(n.value.value));i&&this._sourceContainer.revealUiLocation(i);break}}async _copyObjectToClipboard(e){if(!e.objectId){this._dap.with(t=>t.copyRequested({text:Ps(e,"copy")}));return}try{let t=await SD({cdp:this.cdp(),objectId:e.objectId,args:[2],silent:!0,returnByValue:!0});this._dap.with(n=>n.copyRequested({text:t.value}))}catch{}finally{this.cdp().Runtime.releaseObject({objectId:e.objectId}).catch(()=>{})}}async _onThreadPaused(e){this._expectedPauseReason=void 0,this._onPausedEmitter.fire(e);let t;e.hitBreakpoints&&(t=await Promise.race([ae(1e3).then(()=>{}),Promise.all(e.hitBreakpoints.map(n=>this._breakpointManager._resolvedBreakpoints.get(n)).filter(Qo(Br)).map(n=>n.untilSetCompleted().then(()=>n.dapId)))])),await ae(0),this._dap.with(n=>n.stopped({reason:e.reason,description:e.description,threadId:this.id,text:e.text,hitBreakpointIds:t,allThreadsStopped:!1}))}_onThreadResumed(){this._dap.with(e=>e.continued({threadId:this.id,allThreadsContinued:!1}))}isCrossThreadStep(e){if(!e.asyncStackTraceId||!e.asyncStackTraceId.debuggerId)return!1;let t=r.threadForDebuggerId(e.asyncStackTraceId.debuggerId);if(!t||!t._waitingForStepIn?.lastDetails)return!1;let n=t._waitingForStepIn.lastDetails.stackTrace;return t._cdp.Debugger.getStackTrace({stackTraceId:e.asyncStackTraceId}).then(i=>!i||!i.stackTrace.callFrames.length||!qt.fromRuntime(t,i.stackTrace.callFrames[0],!1).equivalentTo(n.frames[0])?!1:(t._waitingForStepIn=void 0,!0))}async setScriptSourceMapHandler(e,t){this._scriptWithSourceMapHandler=t;let n=e&&this._sourceContainer.sourceMapTimeouts().sourceMapMinPause&&t;if(n&&!this._pauseOnSourceMapBreakpointIds?.length){await this.debuggerReady.promise;let i=await Promise.all([this._cdp.Debugger.setInstrumentationBreakpoint({instrumentation:"beforeScriptWithSourceMapExecution"})]);this._pauseOnSourceMapBreakpointIds=i.map(o=>o?.breakpointId).filter(Ct)}else if(!n&&this._pauseOnSourceMapBreakpointIds?.length){let i=this._pauseOnSourceMapBreakpointIds;this._pauseOnSourceMapBreakpointIds=void 0,await Promise.all(i.map(o=>this._cdp.Debugger.removeBreakpoint({breakpointId:o})))}if(t){let i=Promise.all([...this._executionContexts.keys()].map(o=>this._installWasmPauseHandler(o)));await Promise.race([i,ae(100)])}return!!this._pauseOnSourceMapBreakpointIds?.length}async _enablePerScriptSourcemaps(){await this._breakpointManager.updateEntryBreakpointMode(this,1),await this.setScriptSourceMapHandler(!1,this._scriptWithSourceMapHandler)}_shouldEnablePerScriptSms(e){let t=this._sourceContainer.getScriptById(e.callFrames[0]?.location.scriptId);return t?t.url.includes("@vite/client")?!0:e.reason!=="instrumentation"||!Tt(e.data?.sourceMapURL)?!1:t.url.startsWith("webpack")||t.url.startsWith("ng:"):!1}setSourceMapDisabler(e){this._sourceMapDisabler=e}static threadForDebuggerId(e){return r._allThreadsByDebuggerId.get(e)}async replacePathsInStackTrace(e){let t=[];for(let i of new fo(e)){if(typeof i=="string"){t.push(i);continue}let o=this._sourceContainer.getSourceByOriginalUrl(ye(i.path))||this._sourceContainer.getSourceByOriginalUrl(i.path);if(!o){t.push(i.toString());continue}t.push(this._sourceContainer.preferredUiLocation({columnNumber:i.position.base1.columnNumber,lineNumber:i.position.base1.lineNumber,source:o}).then(({source:s,lineNumber:a,columnNumber:c})=>`${s.absolutePath}:${a}:${c}`))}return(await Promise.all(t)).join("")}};var BD=r=>typeof r.uiLocation=="function",Di=class r{constructor(e){this.thread=e;this.frames=[];this._frameById=new Map;this._lastInlineWasmExpanded=Promise.resolve(0);this._lastFrameThread=e}static fromRuntime(e,t){let n=new r(e);for(let i of t.callFrames)i.url.endsWith(".cdp")||n.frames.push(qt.fromRuntime(e,i,!1));return t.parentId?(n._asyncStackTraceId=t.parentId,console.assert(!t.parent)):n._appendStackTrace(e,t.parent),n}static fromDebugger(e,t,n,i){let o=new r(e);for(let s of t)o._appendFrame(qt.fromDebugger(e,s));return i?(o._asyncStackTraceId=i,console.assert(!n)):o._appendStackTrace(e,n),o}async loadFrames(e,t){return await this.expandAsyncStack(e,t),await this.expandWasmFrames(),this.frames}async expandAsyncStack(e,t){for(;this.frames.length<e&&this._asyncStackTraceId;){if(this._asyncStackTraceId.debuggerId&&(this._lastFrameThread=Cc.threadForDebuggerId(this._asyncStackTraceId.debuggerId)),!this._lastFrameThread){this._asyncStackTraceId=void 0;break}t&&this._lastFrameThread.cdp().DotnetDebugger.setEvaluationOptions({options:{noFuncEval:t},type:"stackFrame"});let n=await this._lastFrameThread.cdp().Debugger.getStackTrace({stackTraceId:this._asyncStackTraceId});this._asyncStackTraceId=void 0,n&&this._appendStackTrace(this._lastFrameThread,n.stackTrace)}}expandWasmFrames(){return this._lastInlineWasmExpanded=this._lastInlineWasmExpanded.then(async e=>{for(;e<this.frames.length;e++){let t=this.frames[e];if(!(t instanceof qt))continue;let n=t.scriptSource?.resolvedSource;if(!ms(n))continue;let i=await n.sourceMap.value.promise;if(!i.getFunctionStack)continue;let o=await i.getFunctionStack(t.rawPosition);if(o.length===0)continue;let s=[];for(let a=0;a<o.length;a++){let c=new $l({source:n,thread:this.thread,inlineFrameIndex:a,name:o[a].name,root:t});this._frameById.set(c.frameId,c),s.push(c)}this._spliceFrames(e,1,...s),e+=o.length-1}return e})}frame(e){return this._frameById.get(e)}_appendStackTrace(e,t){for(console.assert(!t||!this._asyncStackTraceId);t;){if(t.description==="async function"&&t.callFrames.length&&t.callFrames.shift(),t.callFrames.length){this._appendFrame(new Yh(t.description||"async"));for(let n of t.callFrames)this._appendFrame(qt.fromRuntime(e,n,!0))}t.parentId&&(this._asyncStackTraceId=t.parentId,console.assert(!t.parent)),t=t.parent}}_spliceFrames(e,t,...n){this.frames.splice(e,t,...n);for(let i of n)i instanceof Yh||this._frameById.set(i.frameId,i)}_appendFrame(e){this._spliceFrames(this.frames.length,0,e)}async formatAsNative(){return await this.formatWithMapper(e=>e.formatAsNative())}async format(){return await this.formatWithMapper(e=>e.format())}async formatWithMapper(e){let t=await this.loadFrames(50);for(let i=t.length-1;i>=0;i--){let o=t[i];if(o instanceof qt&&o.isReplEval){t=t.slice(0,i+1);break}}let n=t.map(e);return(await Promise.all(n)).join(`
`)+`
`}async toDap(e){let t=e.startFrame||0,n=(e.levels||50)+t,i=await this.loadFrames(n,e.noFuncEval);n=Math.min(i.length,e.levels?n:i.length);let o=[];for(let s=t;s<n;s++)o.push(i[s].toDap(e.format));return{stackFrames:await Promise.all(o),totalFrames:this._asyncStackTraceId?1e6:i.length}}},Z_=Vd(),Yh=class{constructor(e="async"){this.label=e;this.frameId=Z_()}async toDap(){return{name:this.label,id:this.frameId,line:0,column:0,presentationHint:"label"}}async formatAsNative(){return`    --- ${this.label} ---`}async format(){return`\u25C0 ${this.label} \u25B6`}},UD="<anonymous>",t8=/^class\s+(.+) {($|\n)/;async function r8(r,e,t){if(!e.functionName)return UD;if(e.functionName.includes("."))return e.functionName;let n;if(e.this.objectId&&t&&(n=(await r.cdp().Runtime.callFunctionOn({functionDeclaration:qh.decl("64","null"),objectId:e.this.objectId,returnByValue:!0}))?.result.value),!n&&e.this.description){n=e.this.description;let s=t8.exec(n);s&&(n=s[1])}if(!n)return e.functionName;let i=n.indexOf(`
`);i!==-1&&(n=n.slice(0,i).trim());let o=e.functionName;return n===o?`${n}.constructor`:n?`${n}.${o}`:o}function n8(r){return r.functionName||UD}var qt=class r{constructor(e,t,n,i=!1){this.callFrame=t;this.isAsync=i;this.frameId=Z_();this.root=this;this.getLocationInfo=ne(async()=>{let e=this.uiLocation(),t=await k_(this),n=this.overrideName||("this"in this.callFrame?await r8(this._thread,this.callFrame,t===0):n8(this.callFrame));return{isSmartStepped:t,name:n,uiLocation:await e}});this.completions=ne(async()=>{if(!this._scope)return[];let e=this._thread.pausedVariables();if(!e)return[];let t=[];for(let i=0;i<this._scope.chain.length;i++){let o=this._scopeVariable(i,this._scope);o&&t.push(e.getVariableNames({variablesReference:o.id}).then(s=>s.map(({name:a})=>({label:a,type:"property"}))))}let n=await Promise.all(t);return[].concat(...n)});this._rawLocation=n,this.uiLocation=ne(()=>e.rawLocationToUiLocation(n)),this._thread=e;let o=n.scriptId?e.getScriptById(n.scriptId):void 0;this.isReplEval=o?o.url.endsWith(".repl"):!1}get rawPosition(){return new Ue(this._rawLocation.lineNumber,this._rawLocation.columnNumber)}get rawScopeChain(){return this._scope?.chain||[]}static fromRuntime(e,t,n){return new r(e,t,e.rawLocation(t),n)}static fromDebugger(e,t){let n=new r(e,t,e.rawLocation(t));return n._scope={chain:t.scopeChain,thisObject:t.this,returnValue:t.returnValue,variables:new Array(t.scopeChain.length).fill(void 0),callFrameId:t.callFrameId},n}get scriptId(){return"scriptId"in this.callFrame?this.callFrame.scriptId:this.callFrame.location.scriptId}get scriptSource(){return this._thread._sourceContainer.getScriptById(this.scriptId)}get canExplicitlyBeRestarted(){return!!this.callFrame.canBeRestarted}equivalentTo(e){return e instanceof r&&e._rawLocation.columnNumber===this._rawLocation.columnNumber&&e._rawLocation.lineNumber===this._rawLocation.lineNumber&&e._rawLocation.scriptId===this._rawLocation.scriptId}callFrameId(){return this._scope?this._scope.callFrameId:void 0}async scopes(){let e=this._scope;if(!e)throw new O(vT());return{scopes:(await Promise.all(e.chain.map(async(n,i)=>{let o="",s;switch(n.type){case"global":o=ar.t("Global");break;case"local":o=ar.t("Local"),s="locals";break;case"with":o=ar.t("With Block"),s="locals";break;case"closure":o=ar.t("Closure"),s="arguments";break;case"catch":o=ar.t("Catch Block"),s="locals";break;case"block":o=ar.t("Block"),s="locals";break;case"script":o=ar.t("Script");break;case"eval":o=ar.t("Eval");break;case"module":o=ar.t("Module");break;default:o=n.type.substr(0,1).toUpperCase()+n.type.substr(1);break}n.name&&n.type==="closure"?o=ar.t("Closure ({0})",n.name):n.name&&(o=`${o}: ${n.name}`);let a=this._scopeVariable(i,e);if(!a)return;let c={name:o,presentationHint:s,expensive:n.type==="global",variablesReference:a.id};if(n.startLocation){let u=this._thread.rawLocation(n.startLocation),l=await this._thread.rawLocationToUiLocation(u);if(c.line=(l||u).lineNumber,c.column=(l||u).columnNumber,l&&(c.source=await l.source.toDap()),n.endLocation){let p=this._thread.rawLocation(n.endLocation),d=await this._thread.rawLocationToUiLocation(p);c.endLine=(d||p).lineNumber,c.endColumn=(d||p).columnNumber}}return c}))).filter(Ct)}}getStepSkipList(e){return Promise.resolve(void 0)}async toDap(e){let{isSmartStepped:t,name:n,uiLocation:i}=await this.getLocationInfo(),o=i?await i.source.toDap():void 0,s=t?"deemphasize":"normal";t&&o&&(o.origin=t===1?ar.t("Skipped by smartStep"):ar.t("Skipped by skipFiles"));let a=(i||this._rawLocation).lineNumber,c=(i||this._rawLocation).columnNumber,u=n;return o&&e&&(e.module&&(u+=` [${o.name}]`),e.line&&(u+=` Line ${a}`)),{id:this.frameId,name:u,line:a,column:c,source:o,presentationHint:s,canRestart:this.callFrame.canBeRestarted??!this.isAsync}}async formatAsNative(){let{name:e,uiLocation:t}=await this.getLocationInfo(),n=await t?.source.existingAbsolutePath()||await t?.source.prettyName()||this.callFrame.url,{lineNumber:i,columnNumber:o}=t||this._rawLocation;return`    at ${e} (${n}:${i}:${o})`}async format(){let{name:e,uiLocation:t}=await this.getLocationInfo(),n=await t?.source.prettyName()||"<unknown>",i=t||this._rawLocation,o=`${e} @ ${n}:${i.lineNumber}`;return i.columnNumber>1&&(o+=`:${i.columnNumber}`),o}_scopeVariable(e,t){let n=t.variables[e];if(n)return n;let i={stackFrame:this,callFrameId:t.callFrameId,scopeNumber:e},o=[];e===0&&(t.thisObject&&o.push({name:"this",value:t.thisObject}),t.returnValue&&o.push({name:ar.t("Return value"),value:t.returnValue}));let s=this._thread.pausedVariables();if(!s)return;let a=s.createScope(t.chain[e].object,i,o);return t.variables[e]=a}},Q_={scopes:[]},$l=class{constructor(e){this.frameId=Z_();this.name=e.name,this.root=e.root,this.thread=e.thread,this.source=e.source,this.inlineFrameIndex=e.inlineFrameIndex,this.wasmPosition=new Oe(this.inlineFrameIndex,this.root.rawPosition.base0.columnNumber),this.uiLocation=ne(()=>e.thread._sourceContainer.preferredUiLocation({columnNumber:e.root.rawPosition.base1.columnNumber,lineNumber:e.inlineFrameIndex+1,source:e.source}))}async formatAsNative(){let{columnNumber:e,lineNumber:t,source:n}=await this.uiLocation();return`    at ${this.name} (${n.url}:${t}:${e})`}async format(){let{columnNumber:e,lineNumber:t,source:n}=await this.uiLocation(),i=await n.prettyName()||"<unknown>";return`${this.name} @ ${i}:${t}:${e}`}async toDap(){let{columnNumber:e,lineNumber:t,source:n}=await this.uiLocation();return Promise.resolve({id:this.frameId,name:this.name,column:e,line:t,source:await n.toDap()})}async getStepSkipList(e){let t=this.source.sourceMap.value.settledValue;if(!t?.getStepSkipList)return;let n=await this.uiLocation();return n?t.getStepSkipList(e,this.wasmPosition,n.source.compiledToSourceUrl.get(this.source),new Ue(n.lineNumber,n.columnNumber)):t.getStepSkipList(e,this.root.rawPosition)}async scopes(){let e=this.source.sourceMap.value.settledValue,t=this.root.callFrameId();if(!e||!t)return Q_;let n=await e.getVariablesInScope?.(t,this.wasmPosition);if(!n)return Q_;let i=this.thread.pausedVariables();if(!i)return Q_;let o={stackFrame:this.root,callFrameId:t,scopeNumber:0};return{scopes:await Promise.all([...rE(n,s=>s.scope)].map(([s,a])=>i.createWasmScope(s,a,o).toDap("propertyValue").then(c=>({name:c.name,variablesReference:c.variablesReference,expensive:s!=="LOCAL"}))))}}};var jD=S(Ge());var Rs=class{constructor(e){this.event=e;this.stackTrace=ne(e=>this.event.stackTrace?Di.fromRuntime(e,this.event.stackTrace):void 0);this.getUiLocation=ne(async e=>{let t=this.stackTrace(e);if(!t)return;let n;for(let i of t.frames){if(!(i instanceof qt))continue;let o=await i.uiLocation();if(o&&(n||(n=o),!o.source.blackboxed()))return{source:await o.source.toDap(),line:o.lineNumber,column:o.columnNumber}}if(n)return{source:await n.source.toDap(),line:n.lineNumber,column:n.columnNumber}})}formatDefaultString(e,t,n=!1){let o=t.length>1&&t[0].type==="string"?P_(t[0].value,t.slice(1),A_):P_("",t,A_),s=o.result+`
`;return o.usedAllSubs&&!t.some(Cs)?{output:s}:this.formatComplexStringOutput(e,s,t,n)}async formatComplexStringOutput(e,t,n,i){(n.some(s=>s.subtype==="error")||fo.isStackLike(t))&&(await this.getUiLocation(e),t=await e.replacePathsInStackTrace(t),i=!0);let o=e.replVariables.createVariableForOutput(t,n,i?this.stackTrace(e):void 0);return{output:t,variablesReference:o.id}}},Xh=class extends Rs{async toDap(e){return this.event.args[0]?.value==="console.assert"&&(this.event.args[0].value=jD.t("Assertion failed")),{category:"stderr",...await this.formatDefaultString(e,this.event.args,!0),...await this.getUiLocation(e)}}},As=class extends Rs{constructor(t,n,i){super(t);this.includeStack=n;this.category=i}async toDap(t){return{category:this.category,...await this.formatDefaultString(t,this.event.args,this.includeStack),...await this.getUiLocation(t)}}},bo=class extends As{constructor(e){super(e,!1,"stdout")}},Qh=class extends As{constructor(e){super(e,!0,"stdout")}},Zh=class extends As{constructor(e){super(e,!0,"stderr")}},em=class extends As{constructor(e){super(e,!0,"stderr")}},tm=class extends Rs{async toDap(e){return{category:"stdout",group:this.event.type==="startGroupCollapsed"?"startCollapsed":"start",...await this.formatDefaultString(e,this.event.args),...await this.getUiLocation(e)}}},rm=class extends As{constructor(e){super(e,!1,"stdout")}async toDap(e){return this.event.args[0]?.preview?{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput("",this.event.args,void 0,this.event.type).id,...await this.getUiLocation(e)}:super.toDap(e)}};var Vl=class extends Rs{constructor(){super(...arguments);this.stackTrace=ne(t=>{if(this.event.stackTrace)return Di.fromRuntime(t,this.event.stackTrace);if(this.event.scriptId)return Di.fromRuntime(t,{callFrames:[{functionName:"(program)",lineNumber:this.event.lineNumber,columnNumber:this.event.columnNumber,scriptId:this.event.scriptId,url:this.event.url||""}]})})}async toDap(t){let n=this.event.exception?Ts(this.event.exception):{title:""},i=n.title;i.startsWith("Uncaught")||(i=`Uncaught ${this.event.exception?.className??"Error"} `+i);let o=this.stackTrace(t),s=this.event.exception&&!n.stackTrace?[this.event.exception]:[];return fo.isStackLike(i)?i=await t.replacePathsInStackTrace(i):o&&(i+=`
`+await o.formatAsNative()),{category:"stderr",output:i,variablesReference:o||s.length?t.replVariables.createVariableForOutput(i,s,o).id:void 0,...await this.getUiLocation(t)}}};var nm=S(Ge());var qD=it(function(){return this});var Jh=class{constructor(e,t){this.protoObj=e;this.cdp=t}async toDap(e){if(!this.protoObj.objectId)return{category:"stderr",output:nm.t("Only objects can be queried")};let t=await this.cdp.Runtime.queryObjects({prototypeObjectId:this.protoObj.objectId,objectGroup:"console"});if(await this.cdp.Runtime.releaseObject({objectId:this.protoObj.objectId}),!t)return{category:"stderr",output:nm.t("Could not query the provided object")};let n;try{n=await qD({cdp:this.cdp,args:[],objectId:t.objects.objectId,objectGroup:"console",generatePreview:!0})}catch(s){return{category:"stderr",output:nm.t(s.message)}}let i="\x1B[32mobjects: "+Ps(n,"repl")+"\x1B[0m";return{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput(i,[n]).id}}};var im=Symbol("IConsole");var Gl=S($());var WD=S($());var vo=Symbol("IShutdownParticipants"),Pc=class{constructor(){this.participants=[]}register(e,t){if(this.shutdownStage!==void 0&&this.shutdownStage>=e)return t(!0),nc;for(;this.participants.length<=e;)this.participants.push(new Set);return this.participants[e].add(t),{dispose:()=>this.participants[e].delete(t)}}async shutdownContext(){(this.shutdownStage===void 0||this.shutdownStage<0)&&await Promise.all([...this.participants[0]].map(e=>e(!1)))}async shutdownAll(){for(this.shutdownStage=0;this.shutdownStage<this.participants.length;this.shutdownStage++)await Promise.all([...this.participants[this.shutdownStage]].map(e=>e(!0)))}};Pc=C([(0,WD.injectable)()],Pc);var Hl=class{toDap(){return{category:"console",output:"\x1B[2J"}}},om=class{toDap(){return{category:"stdout",output:"",group:"end"}}};var sm=class{constructor(e){this.sink=e;this.q=[];this.disposed=!1;this.onDrainedEmitter=new A;this.onDrained=this.onDrainedEmitter.event}get length(){return this.q.length}enqueue(e){this.disposed||(this.q.push(new ew(e)),this.q.length===1&&this.process())}dispose(){this.disposed=!0,this.q=[]}async process(){let e=this.q.findIndex(t=>t.value===$D);e===0?await this.q[0].wait:e===-1?(this.sink(VD(this.q)),this.q=[]):(this.sink(VD(this.q.slice(0,e))),this.q=this.q.slice(e)),this.q.length?this.process():this.onDrainedEmitter.fire()}},VD=r=>r.map(e=>e.value).filter(e=>e!==HD),$D=Symbol("unsettled"),HD=Symbol("unsettled"),ew=class{constructor(e){this.value=$D;e instanceof Promise?this.wait=e.then(t=>{this.value=t},()=>{this.value=HD}):(this.value=e,this.wait=Promise.resolve())}};var o8=new Set(["group","assert","count"]),Tc=class{constructor(e,t){this.dap=e;this.isDirty=!1;this.queue=new sm(e=>{for(let t of e)this.dap.output(t)});this.onDrained=this.queue.onDrained;t.register(0,async n=>{this.length&&await new Promise(i=>this.onDrained(i)),n&&this.dispose()})}get length(){return this.queue.length}dispose(){this.queue.dispose()}dispatch(e,t){let n=this.parse(t);n&&this.enqueue(e,n)}enqueue(e,t){if(!(t instanceof Hl))this.isDirty=!0;else if(this.isDirty)this.isDirty=!1;else return;this.queue.enqueue(t.toDap(e))}parse(e){if(e.type==="log"){let t=e.stackTrace?.callFrames[0];if(t&&t.url==="internal/console/constructor.js"&&o8.has(t.functionName))return}switch(e.type){case"clear":return new Hl;case"endGroup":return new om;case"assert":return new Xh(e);case"table":return new rm(e);case"startGroup":case"startGroupCollapsed":return new tm(e);case"debug":case"log":case"info":return new bo(e);case"trace":return new Qh(e);case"error":return new em(e);case"warning":return new Zh(e);case"dir":case"dirxml":return new bo(e);case"count":return new bo(e);case"profile":case"profileEnd":return new bo(e);case"timeEnd":return new bo(e);default:try{qd(e.type,"unknown console message type")}catch{}}}};Tc=C([(0,Gl.injectable)(),g(0,(0,Gl.inject)(rr)),g(1,(0,Gl.inject)(vo))],Tc);var ks=S($()),KD=require("os"),JD=require("path");var tw=require("path"),GD=(0,tw.join)(__dirname,"diagnosticTool.js"),zD=(0,tw.join)(__dirname,"diagnosticTool.css");var ri=Symbol("ITarget"),Jt=Symbol("ILauncher");var _o=class{constructor(e,t,n,i){this.fs=e;this.sources=t;this.breakpoints=n;this.target=i}async generateObject(){let[e]=await Promise.all([this.dumpSources()]);return{breakpoints:this.dumpBreakpoints(),sources:e,config:this.target.launchConfig}}async generateHtml(e=(0,JD.join)((0,KD.tmpdir)(),"js-debug-diagnostics.html")){return await this.fs.writeFile(e,`<!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <style>${await this.fs.readFile(zD,"utf-8")}<</style>
      </head>
      <body>
        <script>window.DUMP=${JSON.stringify(await this.generateObject())}</script>
        <script>${await this.fs.readFile(GD,"utf-8")}</script>
      </body>
      </html>`),e}dumpBreakpoints(){let e=[];for(let t of[this.breakpoints.appliedByPath,this.breakpoints.appliedByRef])for(let n of t.values())for(let i of n){let o=i.diagnosticDump();e.push({source:o.source,params:o.params,cdp:o.cdp.map(s=>s.state===1?{...s,uiLocations:s.uiLocations.map(a=>this.dumpUiLocation(a))}:{...s,done:void 0})})}return e}dumpSources(){let e=[],t=0;for(let n of this.sources.sources)e.push((async()=>({uniqueId:t++,url:n.url,sourceReference:n.sourceReference,absolutePath:n.absolutePath,actualAbsolutePath:await n.existingAbsolutePath(),scriptIds:n.scripts.map(i=>i.scriptId),prettyName:await n.prettyName(),compiledSourceRefToUrl:n instanceof Qe?[...n.compiledToSourceUrl.entries()].map(([i,o])=>[i.sourceReference,o]):void 0,sourceMap:hs(n)?{url:n.sourceMap.metadata.sourceMapUrl,metadata:n.sourceMap.metadata,sources:gi(Object.fromEntries(n.sourceMap.sourceByUrl),i=>i.sourceReference)}:void 0}))());return Promise.all(e)}dumpUiLocation(e){return{lineNumber:e.lineNumber,columnNumber:e.columnNumber,sourceReference:e.source.sourceReference}}};_o=C([(0,ks.injectable)(),g(0,(0,ks.inject)(Ae)),g(1,(0,ks.inject)(bt)),g(2,(0,ks.inject)(qr)),g(3,(0,ks.inject)(ri))],_o);var XD=S(Ge()),am=S($());var YD="@vscode/dwarf-debugging",Ec=class{constructor(e){this.dap=e;this.didPrompt=!1}async load(){try{return await import(YD)}catch{return}}prompt(){this.didPrompt||(this.didPrompt=!0,this.dap.output({output:XD.t("You may install the `{}` module via npm for enhanced WebAssembly debugging",YD),category:"console"}))}};Ec=C([(0,am.injectable)(),g(0,(0,am.inject)(rr))],Ec);var wo=S($());var Ac=Symbol("IExceptionPauseService");var Rc=class{constructor(e,t,n,i,o){this.evaluator=e;this.scriptSkipper=t;this.dap=n;this.sourceContainer=o;this.state={cdp:"none"};this.blocker=ge();this.noDebug=!!i.noDebug,this.breakOnError=i.__breakOnConditionalError,this.blocker.resolve()}get launchBlocker(){return this.blocker.promise}async setBreakpoints(e){if(!this.noDebug){try{this.state=this.parseBreakpointRequest(e)}catch(t){if(!(t instanceof O))throw t;this.dap.output({category:"stderr",output:t.message});return}this.cdp?await this.sendToCdp(this.cdp):this.state.cdp!=="none"&&this.blocker.hasSettled()&&(this.blocker=ge())}}async shouldPauseAt(e){if(e.reason!=="exception"&&e.reason!=="promiseRejection"||this.state.cdp==="none"||e.callFrames.some(n=>this.sourceContainer.getSourceScriptById(n.location.scriptId)?.url.endsWith(".cdp"))||this.shouldScriptSkip(e))return!1;let t=this.state.condition;if(e.data?.uncaught){if(t.uncaught&&!await this.evalCondition(e,t.uncaught))return!1}else if(t.caught&&!await this.evalCondition(e,t.caught))return!1;return!0}async apply(e){this.cdp=e,this.state.cdp!=="none"&&await this.sendToCdp(e)}async sendToCdp(e){await e.Debugger.setPauseOnExceptions({state:this.state.cdp}),this.blocker.resolve()}async evalCondition(e,t){return!!(await t({callFrameId:e.callFrames[0].callFrameId},i=>i==="error"?e.data:void 0))?.result.value}shouldScriptSkip(e){if(e.data?.uncaught||!e.callFrames.length)return!1;let t=this.sourceContainer.getScriptById(e.callFrames[0].location.scriptId);return!!t&&this.scriptSkipper.isScriptSkipped(t.url)}parseBreakpointRequest(e){let t=(e.filterOptions??[]).concat(e.filters.map(a=>({filterId:a}))),n="none",i=[],o=[];for(let{filterId:a,condition:c}of t)a==="all"?(n="all",c&&i.push(a)):a==="uncaught"&&(n==="none"&&(n="uncaught"),c&&o.push(a));let s=a=>{if(a.length===0)return;let c="!!("+t.map(p=>p.condition).filter(Ct).join(") || !!(")+")",u=Qi(c);if(u)throw new O(Ji({line:0,condition:c},u.message));let l=xv(c,this.breakOnError);return this.evaluator.prepare(l,{hoist:["error"]}).invoke};return n==="none"?{cdp:n}:{cdp:n,condition:{caught:s(i),uncaught:s(o)}}}};Rc=C([(0,wo.injectable)(),g(0,(0,wo.inject)(Fr)),g(1,(0,wo.inject)(ao)),g(2,(0,wo.inject)(rr)),g(3,(0,wo.inject)(le)),g(4,(0,wo.inject)(bt))],Rc);var lm=S($());var cm=class{constructor(){this.didEnable=new WeakSet}async retrieve(e){this.didEnable.has(e)||(this.didEnable.add(e),await e.Performance.enable({}));let t=await e.Performance.getMetrics({});if(!t)return{error:"Error in CDP"};let n={};for(let i of t.metrics)n[i.name]=i.value;return{metrics:n}}};var um=class{async retrieve(e){let t=await e.Runtime.evaluate({expression:`({
        memory: process.memoryUsage(),
        cpu: process.cpuUsage(),
        timestamp: Date.now(),
        resourceUsage: process.resourceUsage && process.resourceUsage(),
      })${$e()}`,returnByValue:!0});return t?t.exceptionDetails?{error:t.exceptionDetails.text}:{metrics:t.result.value}:{error:"No response from CDP"}}};var pm=Symbol("IPerformanceProvider"),Ds=class{constructor(e){this.target=e}create(){return this.target.type()==="node"?new um:new cm}};Ds=C([(0,lm.injectable)(),g(0,(0,lm.inject)(ri))],Ds);var aw=S(Ge()),t1=require("crypto"),So=S($()),r1=require("os"),n1=require("path");var hm=S($());var rw=S(Ge()),Os=S($()),dm=require("path");var kc=class{constructor(e){this.sources=e;this.locationIdCounter=0;this.locationsByRef=new Map}getLocationIdFor(e){let t=[e.functionName,e.url,e.scriptId,e.lineNumber,e.columnNumber].join(":"),n=this.locationsByRef.get(t);if(n)return n.id;let i=this.locationIdCounter++;return this.locationsByRef.set(t,{id:i,callFrame:e,locations:(async()=>{let o=await this.sources.getScriptById(e.scriptId)?.source;if(!o)return[];let s=await this.sources.currentSiblingUiLocations({lineNumber:e.lineNumber+1,columnNumber:e.columnNumber+1,source:o});return Promise.all(s.map(async a=>({...a,source:await a.source.toDap()})))})()}),i}getLocations(){return Promise.all([...this.locationsByRef.values()].sort((e,t)=>e.id-t.id).map(async e=>({callFrame:e.callFrame,locations:await e.locations})))}};var _t=class{constructor(e,t,n,i){this.cdp=e;this.fs=t;this.sources=n;this.launchConfig=i}static canApplyTo(){return!0}async start(e,t){if(!await this.cdp.Profiler.start({}))throw new O(ka());return new nw(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,t)}async save(e,t){let n=await QD(e,this.sources,this.launchConfig.__workspaceFolder);(0,dm.isAbsolute)(t)||(t=(0,dm.join)(this.launchConfig.__workspaceFolder,t)),await this.fs.writeFile(t,JSON.stringify(n))}};_t.type="cpu",_t.extension=".cpuprofile",_t.label=rw.t("CPU Profile"),_t.description=rw.t("Generates a .cpuprofile file you can open in VS Code or the Edge/Chrome devtools"),_t.editable=!0,_t=C([(0,Os.injectable)(),g(0,(0,Os.inject)(je)),g(1,(0,Os.inject)(Ae)),g(2,(0,Os.inject)(bt)),g(3,(0,Os.inject)(le))],_t);var nw=class{constructor(e,t,n,i,o){this.cdp=e;this.fs=t;this.sources=n;this.workspaceFolder=i;this.file=o;this.stopEmitter=new A;this.disposed=!1;this.onUpdate=new A().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,this.stopEmitter.fire())}async stop(){let e=await this.cdp.Profiler.stop({});if(!e)throw new O(ka());await this.dispose();let t=await QD(e.profile,this.sources,this.workspaceFolder);await this.fs.writeFile(this.file,JSON.stringify(t))}};async function QD(r,e,t){let n=new kc(e),i=r.nodes.map(o=>({...o,locationId:n.getLocationIdFor(o.callFrame),positionTicks:o.positionTicks?.map(s=>({...s,startLocationId:n.getLocationIdFor({...o.callFrame,lineNumber:s.line-1,columnNumber:0}),endLocationId:n.getLocationIdFor({...o.callFrame,lineNumber:s.line,columnNumber:0})}))}));return{...r,nodes:i,$vscode:{rootPath:t,locations:await n.getLocations()}}}var iw=S(Ge()),Ms=S($());var xr=class{constructor(e,t,n,i){this.cdp=e;this.fs=t;this.sources=n;this.launchConfig=i}static canApplyTo(){return!0}async start(e,t){if(await this.cdp.HeapProfiler.enable({}),!await this.cdp.HeapProfiler.startSampling({}))throw new O(ka());return new ow(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,t)}};xr.type="heap",xr.extension=".heapprofile",xr.label=iw.t("Heap Profile"),xr.description=iw.t("Generates a .heapprofile file you can open in VS Code or the Edge/Chrome devtools"),xr.editable=!0,xr=C([(0,Ms.injectable)(),g(0,(0,Ms.inject)(je)),g(1,(0,Ms.inject)(Ae)),g(2,(0,Ms.inject)(bt)),g(3,(0,Ms.inject)(le))],xr);var ow=class{constructor(e,t,n,i,o){this.cdp=e;this.fs=t;this.sources=n;this.workspaceFolder=i;this.file=o;this.stopEmitter=new A;this.disposed=!1;this.onUpdate=new A().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,await this.cdp.HeapProfiler.disable({}),this.stopEmitter.fire())}async stop(){let e=await this.cdp.HeapProfiler.stopSampling({});if(!e)throw new O(ka());await this.dispose();let t=await this.annotateSources(e.profile);await this.fs.writeFile(this.file,JSON.stringify(t))}async annotateSources(e){let t=new kc(this.sources),n=(o,s)=>{s.locationId=t.getLocationIdFor(o.callFrame);for(let a of o.children){let c={...a,children:[]};s.children.push(c),n(a,c)}},i={...e.head,children:[]};return n(e.head,i),{...e,head:i,$vscode:{rootPath:this.workspaceFolder,locations:await t.getLocations()}}}};var sw=S(Ge()),ZD=require("fs"),fm=S($());var Cr=class{constructor(e){this.cdp=e;this.cdp.HeapProfiler.on("addHeapSnapshotChunk",({chunk:t})=>this.currentWriter?.stream.write(t))}static canApplyTo(){return!0}async start(e,t){return{onStop:new A().event,onUpdate:new A().event,dispose:()=>{},stop:async()=>{await this.cdp.HeapProfiler.enable({}),await this.dumpToFile(t),await this.cdp.HeapProfiler.disable({})}}}async dumpToFile(e){let{stream:t,promise:n}=this.currentWriter={stream:(0,ZD.createWriteStream)(e),promise:this.cdp.HeapProfiler.takeHeapSnapshot({})};await n,t.end(),this.currentWriter=void 0}};Cr.type="memory",Cr.extension=".heapsnapshot",Cr.label=sw.t("Heap Snapshot"),Cr.description=sw.t("Generates a .heapsnapshot file you can open in VS Code or the Edge/Chrome devtools"),Cr.instant=!0,Cr=C([(0,fm.injectable)(),g(0,(0,fm.inject)(je))],Cr);var mm=Symbol("IProfilerFactory"),e1=()=>{let r=new Date;return["vscode-profile",r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()].map(e=>String(e).padStart(2,"0")).join("-")},Oi=class{constructor(e){this.container=e}get(e){let t=Oi.ctors.find(n=>n.type===e);if(!t)throw new Error(`Invalid profilter type ${e}`);return this.container.get(t)}};Oi.ctors=[_t,xr,Cr],Oi=C([(0,hm.injectable)(),g(0,(0,hm.inject)(ac))],Oi);var gm=Symbol("IProfileController"),Dc=class{constructor(e,t,n,i,o){this.cdp=e;this.factory=t;this.basicCpuProfiler=n;this.breakpoints=i;this.shutdown=o;this.seenConsoleProfileNames=Object.create(null)}connect(e,t){e.on("startProfile",async n=>(await this.start(e,t,n),{})),e.on("stopProfile",()=>this.stopProfiling(e)),this.cdp.Profiler.on("consoleProfileStarted",()=>{e.output({output:aw.t("Console profile started")+`
`,category:"console"})}),this.cdp.Profiler.on("consoleProfileFinished",async n=>{let i=this.saveConsoleProfile(e,n),o=this.shutdown.register(0,()=>i);await i,o.dispose()}),t.onPaused(()=>this.stopProfiling(e))}async start(e,t,n){if(this.profile)throw new O(yT());this.profile=this.startProfileInner(e,t,n).catch(i=>{throw this.profile=void 0,i}),await this.profile}async saveConsoleProfile(e,t){let n;if(t.title){n=t.title.replace(/[\/\\]/g,"-");let i=this.seenConsoleProfileNames[t.title]||0;this.seenConsoleProfileNames[t.title]=i+1,i>0&&(n+=`-${i}`)}else n=e1();n+=_t.extension,await this.basicCpuProfiler.save(t.profile,n),e.output({output:aw.t('CPU profile saved as "{0}" in your workspace folder',n)+`
`,category:"console"})}async startProfileInner(e,t,n){let i=!1,o;if(n.stopAtBreakpoint?.length){let l=new Set(n.stopAtBreakpoint);i=!0,o=p=>!(p instanceof Br)||l.has(p.dapId)}else o=()=>!1;await this.breakpoints.applyEnabledFilter(o);let s=(0,n1.join)((0,r1.tmpdir)(),`vscode-js-profile-${(0,t1.randomBytes)(4).toString("hex")}`),a=await this.factory.get(n.type).start(n,s),c={file:s,profile:a,enableFilter:o,keptDebuggerOn:i};a.onUpdate(l=>e.profilerStateUpdate({label:l,running:!0})),a.onStop(()=>this.disposeProfile(c));let u=!!t.pausedDetails();return i?await t.resume():u&&(await this.cdp.Debugger.disable({}),u&&t.onResumed()),e.profileStarted({file:c.file,type:n.type}),c}async stopProfiling(e){let t=await this.profile?.catch(()=>{});return!t||!this.profile?{}:(this.profile=void 0,await t?.profile.stop(),e.profilerStateUpdate({label:"",running:!1}),{})}async disposeProfile({profile:e,enableFilter:t,keptDebuggerOn:n}){n||await this.cdp.Debugger.enable({}),await this.breakpoints.applyEnabledFilter(void 0,t),e.dispose()}};Dc=C([(0,So.injectable)(),g(0,(0,So.inject)(je)),g(1,(0,So.inject)(mm)),g(2,(0,So.inject)(_t)),g(3,(0,So.inject)(qr)),g(4,(0,So.inject)(vo))],Dc);var Kr=S($());var RM=S(i1()),AM=require("dns"),zm=S(EM()),Bs=S($());var Gm=Symbol("IRequestOptionsProvider");var To=class{constructor(e,t){this.fs=e;this.options=t;this.autoLocalhostPortFallbacks={}}async fetch(e,t=Ut,n){try{let o=(0,RM.dataUriToBuffer)(e);return{ok:!0,url:e,body:new TextDecoder().decode(o.buffer),statusCode:200}}catch{}let i=Bt(e)?e:He(e);if(i)try{return{ok:!0,url:e,body:await this.fs.readFile(i,"utf-8"),statusCode:200}}catch(o){return{ok:!1,url:e,error:o,statusCode:200}}return this.fetchHttp(e,t,n)}async fetchJson(e,t,n){let i=await this.fetch(e,t,{Accept:"application/json",...n});if(!i.ok)return i;try{return{...i,body:JSON.parse(i.body)}}catch(o){return{...i,ok:!1,url:e,error:o}}}async fetchHttp(e,t,n){let i=new URL(e),o=i.protocol!=="http:",s=Number(i.port)??(o?443:80),a={headers:n,followRedirect:!0};o&&await Ua(e)&&(a.rejectUnauthorized=!1),this.options?.provideOptions(a,e);let c=i.hostname==="localhost";if(c&&this.autoLocalhostPortFallbacks[s]){let p=await this.requestHttp(i.toString(),a,t);return p.statusCode!==503?p:(delete this.autoLocalhostPortFallbacks[s],this.requestHttp(e,a,t))}let l=await this.requestHttp(e,a,t);if(l.statusCode===503&&c){let p;try{p=await AM.promises.lookup(i.hostname)}catch{return l}i.hostname=p.family===6?"127.0.0.1":"[::1]",l=await this.requestHttp(i.toString(),a,t),l.statusCode!==503&&(this.autoLocalhostPortFallbacks[s]=i.hostname)}return l}async requestHttp(e,t,n){this.options?.provideOptions(t,e);let i=new Te;try{let o=(0,zm.default)(e,t);i.push(n.onCancellationRequested(()=>o.cancel()));let s=await o;return{ok:!0,url:e,body:s.body,statusCode:s.statusCode}}catch(o){if(!(o instanceof zm.RequestError))throw o;let s=o.response?String(o.response?.body):o.message,a=o.response?.statusCode??503;return{ok:!1,body:s,statusCode:a,url:e,error:new rf(a,e,s)}}finally{i.dispose()}}};To=C([(0,Bs.injectable)(),g(0,(0,Bs.inject)(Ae)),g(1,(0,Bs.optional)()),g(1,(0,Bs.inject)(Gm))],To);var Us=class extends To{constructor(t,n,i,o,s){super(t,s);this.logger=n;this.target=i;this.cdp=o;this.disposables=new Te}dispose(){this.disposables.dispose()}async fetchHttp(t,n,i={}){let o=await super.fetchHttp(t,n,i);return o.ok?o:(this.logger.info("runtime","Network load failed, falling back to CDP",{url:t,res:o}),this.fetchOverBrowserNetwork(t,o))}async fetchOverBrowserNetwork(t,n){if(!this.cdp)return n;let i=await this.cdp.Network.loadNetworkResource({frameId:this.target?.targetInfo.targetId,url:t,options:{includeCredentials:!0,disableCache:!0}});if(!i||!i.resource.success||!i.resource.httpStatusCode||i.resource.httpStatusCode>=400||!i.resource.stream)return n;let o=Number(i.resource.headers?.["Content-Length"]);isNaN(o)&&(o=1/0);let s=[],a=0;for(;;){let c=await this.cdp.IO.read({handle:i.resource.stream,offset:a});if(!c)return this.logger.info("runtime","Stream error encountered in middle, falling back",{url:t}),n;let u=c.base64Encoded?Buffer.from(c.data,"base64").toString():c.data;if(a+=Buffer.byteLength(u,"utf-8"),s.push(u),a>=o){this.cdp.IO.close({handle:i.resource.stream});break}if(c.eof)break}return{ok:!0,body:s.join(""),statusCode:i.resource.httpStatusCode,url:t}}};Us=C([(0,Kr.injectable)(),g(0,(0,Kr.inject)(Ae)),g(1,(0,Kr.inject)(q)),g(2,(0,Kr.optional)()),g(2,(0,Kr.inject)(ri)),g(3,(0,Kr.optional)()),g(3,(0,Kr.inject)(je)),g(4,(0,Kr.optional)()),g(4,(0,Kr.inject)(Gm))],Us);var Eo=S($()),OM=S(gl());function DM(r,e=zt){let t=[];for(let n=0;n<r.length;n++){let i=r[n];if(i.startsWith("!")){let o=kM(i.slice(1),e);for(let s=0;s<t.length;s++)t[s]=`^(?!${o.slice(1)})${t[s].slice(1)}`}else t.push(kM(i,e))}return t.map(n=>new RegExp(n,"i"))}function kM(r,e=zt){let t=r.split("/"),n=[];for(let i=0;i<t.length;i++){let o=t[i];if(o==="**")i===0?n.push("(.+/)?"):i===t.length-1||n.push(".*/");else{if(o.includes("*")){let s=o.split("*");n.push(s.map(a=>e(a)).join("[^\\/]*"))}else n.push(e(o));n.push(i<t.length-1?"\\/":"$")}}return`^${n.join("")}`}function p7(r){let e=/^<node_internals>[\/\\](.*)$/,t=r.map(n=>{n=n.trim();let i=e.exec(n);return i?i[1]:null}).filter(Ct);return t.length>0?t:void 0}function d7(r,e){return e.filter(n=>!n.includes(yi)).map(n=>Bt(n)?ja(r.rebaseLocalToRemote(n)):Be(n)).map(xf)}var ni=class{constructor({skipFiles:e},t,n,i,o){this.logger=n;this.cdp=i;this._regexForAuthored=mP(e=>DM(e,t=>al(t,0,t.length,!0,!0)));this._scriptsWithSkipping=new Set;this._targetId=o.id(),this._rootTargetId=MM(o).id(),this._isUrlFromSourceMapSkipped=new Nn(s=>this._normalizeUrl(s)),this._authoredGlobs=d7(t,e),this._nodeInternalsGlobs=p7(e),this._initNodeInternals(o),this._updateSkippedDebounce=yP(500,()=>this._updateGeneratedSkippedSources()),e.length&&this._updateGeneratedSkippedSources(),this._sharedSkipListener=ni.sharedSkipsEmitter.event(s=>{s.rootTargetId===this._rootTargetId&&s.targetId!==this._targetId&&this._toggleSkippingFile(s.params)})}dispose(){this._sharedSkipListener.dispose()}setSourceContainer(e){this._sourceContainer=e}_testSkipNodeInternal(e){return this._nodeInternalsGlobs?(e.startsWith(on)&&(e=e.slice(on.length)),(0,OM.default)([e],this._nodeInternalsGlobs).length>0):!1}_testSkipAuthored(e){return this._regexForAuthored(this._authoredGlobs).some(t=>t.test(e))}_isNodeInternal(e,t){return e.startsWith(on)?!0:t?.has(e)||/^internal\/.+\.js$/.test(e)}async _updateGeneratedSkippedSources(){let e=this._regexForAuthored(this._authoredGlobs).map(n=>n.source),t=this._allNodeInternals?.settledValue;if(t){e.push(`^(${on})?internal\\/`);for(let n of t)this._testSkipNodeInternal(n)&&e.push(`^(${on})?${zt(n)}$`)}await this.cdp.Debugger.setBlackboxPatterns({patterns:e})}_normalizeUrl(e){return Be(e.toLowerCase())}isScriptSkipped(e){return this._isNodeInternal(e,this._allNodeInternals?.settledValue)?this._testSkipNodeInternal(e):(e=this._normalizeUrl(e),this._isUrlFromSourceMapSkipped.get(e)===!0?!0:this._testSkipAuthored(e))}async _updateSourceWithSkippedSourceMappedSources(e,t){let n=this.isScriptSkipped(e.url),i=[],o=n;for(let a of e.sourceMap.sourceByUrl.values()){let c=this.isScriptSkipped(a.url);if(typeof c>"u"&&(c=n),c!==o){let[[u],[l]]=await Promise.all([this._sourceContainer.currentSiblingUiLocations({source:a,lineNumber:1,columnNumber:1},e),this._sourceContainer.currentSiblingUiLocations({source:a,lineNumber:1/0,columnNumber:1},e)]);u&&l?(i.push({lineNumber:u.lineNumber-1,columnNumber:u.columnNumber-1},{lineNumber:l.lineNumber-1,columnNumber:l.columnNumber-1}),o=!o):this.logger.error("internal","Could not map script beginning for "+a.sourceReference)}}let s=t;i.length||(s=s.filter(a=>this._scriptsWithSkipping.has(a.scriptId)),s.forEach(a=>this._scriptsWithSkipping.delete(a.scriptId))),s.map(({scriptId:a})=>this.cdp.Debugger.setBlackboxedRanges({scriptId:a,positions:i}))}initializeSkippingValueForSource(e){this._initializeSkippingValueForSource(e)}_initializeSkippingValueForSource(e,t=e.scripts){let n=e.url,i=this.isScriptSkipped(n);if(!i&&e.absolutePath&&this._testSkipAuthored(ye(e.absolutePath))&&(this.setIsUrlBlackboxSkipped(n,!0),i=!0,this._updateSkippedDebounce()),Kt(e)){if(i)for(let o of e.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(o.url,!0);for(let o of e.sourceMap.sourceByUrl.values())this._initializeSkippingValueForSource(o,t);this._updateSourceWithSkippedSourceMappedSources(e,t)}}async _initNodeInternals(e){if(e.type()!=="node"||!this._nodeInternalsGlobs||this._allNodeInternals)return;let t=this._allNodeInternals=ge(),n=await this.cdp.Runtime.evaluate({expression:"require('module').builtinModules"+$e(),returnByValue:!0,includeCommandLineAPI:!0});n&&!n.exceptionDetails?t.resolve(new Set(n.result.value.map(i=>i+".js"))):t.resolve(new Set),await this._updateGeneratedSkippedSources()}async _toggleSkippingFile(e){let t;e.resource&&Bt(e.resource)&&(t=e.resource);let n={path:t,sourceReference:e.sourceReference},i=this._sourceContainer.source(n);if(!i)return{};let o=!this.isScriptSkipped(i.url);if(i instanceof Qe){this._isUrlFromSourceMapSkipped.set(i.url,o);let s=Array.from(i.compiledToSourceUrl.keys());await Promise.all(s.map(a=>this._updateSourceWithSkippedSourceMappedSources(a,a.scripts)))}else{if(Kt(i))for(let s of i.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(s.url,o);this.setIsUrlBlackboxSkipped(i.url,o),await this._updateGeneratedSkippedSources()}return{}}setIsUrlBlackboxSkipped(e,t){let n=e,i=`!${n}`,o=this._authoredGlobs.filter(s=>s!==n&&s!==i);this._regexForAuthored(o).some(s=>s.test(e))!==t&&(o.push(t?n:i),this._regexForAuthored.clear()),this._authoredGlobs=o}async toggleSkippingFile(e){let t=await this._toggleSkippingFile(e);return ni.sharedSkipsEmitter.fire({params:e,rootTargetId:this._rootTargetId,targetId:this._targetId}),t}};ni.sharedSkipsEmitter=new A,ni=C([(0,Eo.injectable)(),g(0,(0,Eo.inject)(le)),g(1,(0,Eo.inject)(Pe)),g(2,(0,Eo.inject)(q)),g(3,(0,Eo.inject)(je)),g(4,(0,Eo.inject)(ri))],ni);function MM(r){let e=r.parent();return e?MM(e):r}var ip=S($()),NM=require("path");var LM=/^webpack:\/{3}([^/]+?\.vue)(\?[0-9a-z]*)?$/i,f7=/^webpack:\/{3}\.\/.+\.vue\?[0-9a-z]+$/i,$c=Symbol("IVueFileMapper");var Vc=class{constructor(e,t){this.files=e;this.search=t;this.getMapping=ne(async()=>{let e=new Map;return await this.search.streamAllChildren(this.files,t=>e.set((0,NM.basename)(t),t)),e})}async lookup(e){let t=LM.exec(e);return t?(await this.getMapping()).get(t[1]):void 0}getVueHandling(e){return this.files.empty?0:LM.test(e)?1:f7.test(e)?2:0}};Vc=C([(0,ip.injectable)(),g(0,(0,ip.inject)(vi)),g(1,(0,ip.inject)(Wa))],Vc);var ii=class{constructor(){this.changeEmitter=new A;this.addEmitter=new A;this.removeEmitter=new A;this.targetMap=new Map;this.onChanged=this.changeEmitter.event;this.onAdd=this.addEmitter.event;this.onRemove=this.removeEmitter.event}get size(){return this.targetMap.size}add(e,t){this.targetMap.set(e,t),this.addEmitter.fire([e,t]),this.changeEmitter.fire()}get(e){return this.targetMap.get(e)}remove(e){let t=this.targetMap.get(e);return t===void 0?!1:(this.targetMap.delete(e),this.removeEmitter.fire([e,t]),this.changeEmitter.fire(),!0)}value(){return this.targetMap.values()}};var js=S($());var eL=Symbol("IDefaultBrowserProvider"),Hc=class{constructor(e,t){this.location=e;this.vscode=t;this.lookup=ne(async()=>{let e;return this.location==="remote"&&this.vscode?e=await this.vscode.commands.executeCommand("js-debug-companion.defaultBrowser"):e=(await Promise.resolve().then(()=>(ZM(),QM)).then(n=>n.default())).name,["chrome","edge"].find(n=>e.toLowerCase().includes(n))??"other"})}};Hc=C([(0,js.injectable)(),g(0,(0,js.inject)(Ei)),g(1,(0,js.optional)()),g(1,(0,js.inject)(Kn))],Hc);var rL=S($()),Xm=S(require("os"));var Ym=class{async setup(){}dispose(){}write(e){if(e.level>2)throw new Error(e.message);console.log(JSON.stringify(e))}};var _S=class{constructor(e=512){this.size=e;this.items=[];this.i=0}write(e){this.items[this.i]=e,this.i=(this.i+1)%this.size}read(){return this.items.slice(this.i).concat(this.items.slice(0,this.i))}},Jr=class{constructor(){this.logTarget={queue:[]};this.logBuffer=new _S(1)}static async test(){let e=new Jr;return e.setup({sinks:[new Ym],showWelcome:!1}),e}info(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:1})}verbose(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:0})}warn(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:2})}error(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:3})}fatal(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:4})}assert(e,t){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",t,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(t);debugger;return!1}return!0}log(e){if(this.logBuffer.write(e),"queue"in this.logTarget){this.logTarget.queue.push(e);return}for(let t of this.logTarget.sinks)t.write(e)}getRecentLogs(){return this.logBuffer.read()}dispose(){if("sinks"in this.logTarget){for(let e of this.logTarget.sinks)e.dispose();this.logTarget={queue:[]}}}forTarget(){return this}async setup(e){if(await Promise.all(e.sinks.map(n=>n.setup())),e.showWelcome!==!1){let n=_7();for(let i of e.sinks)i.write(n)}let t=this.logTarget;this.logTarget={sinks:e.sinks.slice()},"sinks"in t?t.sinks.forEach(n=>n.dispose()):t.queue.forEach(n=>this.log(n))}};Jr.null=(()=>{let e=new Jr;return e.setup({sinks:[]}),e})(),Jr=C([(0,rL.injectable)()],Jr);var _7=()=>({timestamp:Date.now(),tag:"runtime.welcome",level:1,message:`${$d} v${zu} started`,metadata:{os:`${Xm.platform()} ${Xm.arch()}`,nodeVersion:process.version,adapterVersion:zu}});var op=Symbol("MutableLaunchConfig"),nL=r=>{let e=new A;return new Proxy({},{ownKeys(){return Object.keys(r)},get(t,n){switch(n){case"update":return i=>{r=i,e.fire()};case"onChange":return e.event;default:return r[n]}}})};var CN=S(aN()),ug=S($());var Gs=Symbol("touched"),ko;(c=>{function r(){return{children:{},[Gs]:1}}c.root=r;function e(u,l){return u[Gs]=1,a(u,s(l),0)}c.getPath=e;function t(u){u[Gs]=1}c.touch=t;function n(u){u[Gs]=2}c.touchAll=n;function i(u,l){let p=u.children[l]??={children:{}};return p[Gs]=1,p}c.getOrMakeChild=i;function o(u){if(u[Gs]){for(let[l,p]of Object.entries(u.children))switch(p[Gs]){case 1:o(p);break;case 2:break;default:delete u.children[l]}return u}}c.prune=o;function s(u){let l=u.split(/\/|\\/);return l[0]===""&&l.unshift(),l}function a(u,l,p){let d=i(u,l[p]);return p===l.length-1?d:a(d,l,p+1)}})(ko||={});var $S=require("fs"),HS=S(gl()),zs=require("path"),xN=S(IN());var nY=/\//g,cg=class{constructor(e){this.stat=Zo(e=>$S.promises.lstat(e));this.readdir=Zo(e=>$S.promises.readdir(e,{withFileTypes:!0}));this.alreadyProcessedFiles=new Set;this.fileEmitter=new A;this.onFile=this.fileEmitter.event;this.errorEmitter=new A;this.onError=this.errorEmitter.event;this.processor=e.fileProcessor,this.filter=e.filter,this.ignore=e.ignore.map(i=>HS.default.matcher((0,xN.default)(Be(i),{cwd:e.cwd})));let t=(0,zs.isAbsolute)(e.pattern)?(0,zs.relative)(e.cwd,e.pattern):e.pattern,n=HS.default.parse(Be(t),{ignore:e.ignore,cwd:e.cwd,expand:!0});this.done=Promise.all(n.map(i=>{let o=[];for(let u=1;u<i.tokens.length;){let l=u+1;for(;l<i.tokens.length&&i.tokens[l].type!=="slash";)l++;let p=i.tokens[u];p.type==="globstar"?o.push("**"):l===u+1&&p.type==="text"?o.push(p.value):o.push(new RegExp("^"+i.tokens.slice(u,l).map(d=>d.output||d.value).join("")+"$")),u=l+1}let s=o[0]==="**"?[0,1]:[0],a=ko.getPath(e.cache,e.cwd),c={elements:o,seen:new Set};return Promise.all(s.map(u=>this.readSomething(c,u,e.cwd,[],a)))})).then(()=>{})}async readSomething(e,t,n,i,o){if(this.alreadyProcessedFiles.has(o))return;let s=`${t}:${n}`;if(e.seen.has(s))return;e.seen.add(s);let a;try{a=await this.stat(n)}catch(u){this.errorEmitter.fire({path:n,error:u});return}if(this.alreadyProcessedFiles.has(o))return;let c=o.data;if(c&&a.mtimeMs===c.mtime){if(c.type===0){let u=[],p=Object.entries(o.children).filter(([,d])=>d.data?.type!==0).map(([d])=>d);for(let[d,f]of Object.entries(o.children))u.push(f.data!==void 0?this.handleDirectoryEntry(e,t,n,{name:d,type:f.data.type},p,o):this.stat(n).then(h=>this.handleDirectoryEntry(e,t,n,{name:d,type:h.isFile()?1:0},p,o),()=>{}));await Promise.all(u)}else c.type===1&&(this.alreadyProcessedFiles.add(o),this.fileEmitter.fire(c.extracted));return}a.isDirectory()?await this.handleDir(e,t,a.mtimeMs,n,o):(this.alreadyProcessedFiles.add(o),await this.handleFile(a.mtimeMs,n,i,o))}applyFilterToFile(e,t,n){let i=n.children[e];if(this.alreadyProcessedFiles.has(i))return!1;if(!this.filter)return!0;let o=i.data?.type===1?i.data.extracted:void 0;return ko.touch(i),this.filter(t,o)}handleDirectoryEntry(e,t,n,i,o,s){let a=n+"/"+i.name,c=this.getDirectoryReadDescends(e,t,n,i);if(c===void 0)return;let u=ko.getOrMakeChild(s,i.name);if(!(i.type===1&&!this.applyFilterToFile(i.name,a,s)))return typeof c=="number"?this.readSomething(e,t+c,a,o,u):Promise.all(c.map(l=>this.readSomething(e,t+l,a,o,u)))}getDirectoryReadDescends(e,t,n,i){let o=n+"/"+i.name;if(this.ignore.some(c=>c(o)))return;let s=t===e.elements.length-1,a=e.elements[t];if(a==="**")return i.type===1?s?0:this.getDirectoryReadDescends(e,t+1,n,i):s?0:[0,1];if((a instanceof RegExp&&a.test(i.name)||a===i.name)&&(i.type===0?!s:s))return 1}async handleFile(e,t,n,i){let o=zs.sep==="/"?t:t.replace(nY,zs.sep),s;try{s=await this.processor(o,{siblings:n,mtime:e})}catch(a){this.errorEmitter.fire({path:o,error:a});return}i.data={type:1,mtime:e,extracted:s},this.fileEmitter.fire(s)}async handleDir(e,t,n,i,o){let s;try{s=await this.readdir(i)}catch(u){this.errorEmitter.fire({path:i,error:u});return}let a=[],c=s.filter(u=>u.isFile()).map(u=>u.name);for(let u of s){if(u.name.startsWith("."))continue;let l;if(u.isDirectory())l=0;else if(u.isFile())l=1;else continue;a.push(this.handleDirectoryEntry(e,t,i,{name:u.name,type:l},c,o))}await Promise.all(a),o.data={type:0,mtime:n}}};var Xc=class{constructor(e){this.logger=e}async streamAllChildren(e,t){let n=[];return await this.globForFiles(e,o=>n.push(t(Ve(o.path)))),(await Promise.all(n)).filter(o=>o!==void 0)}async streamChildrenWithSourcemaps(e){let t=[],n=e.lastState||{},i={};return await Promise.all([...e.files.explode()].map(async s=>{let a=JSON.stringify(s),c=n[a]||ko.root();await this._streamChildrenWithSourcemaps(c,e,t,s);let u=ko.prune(c);u&&(i[a]=u)})),this.logger.info("sourcemap.parsing",`turboGlobStream search found ${t.length} files`),{values:(await Promise.all(t)).filter(Ct),state:i}}async _streamChildrenWithSourcemaps(e,t,n,i){let o=new cg({pattern:i.pattern,ignore:i.negations,cwd:i.cwd,cache:e,filter:t.filter,fileProcessor:(s,a)=>dE(s,a).then(c=>c&&t.processMap(c))});o.onError(({path:s,error:a})=>{this.logger.warn("sourcemap.parsing","Error parsing source map",{error:a,path:s})}),o.onFile(s=>s&&n.push(t.onProcessedMap(s))),await o.done}async globForFiles(e,t){await Promise.all([...e.explode()].map(n=>new Promise((i,o)=>(0,CN.default)([n.pattern,"!**/*.asar/**"],{ignore:n.negations,cwd:n.cwd}).on("data",t).on("end",i).on("error",o))))}};Xc=C([(0,ug.injectable)(),g(0,(0,ug.inject)(q))],Xc);var wg=S(Ge()),No=S($());var PN=S(require("path")),TN=require("url");var lg=class{constructor(){this._onFrameAddedEmitter=new A;this._onFrameRemovedEmitter=new A;this._onFrameNavigatedEmitter=new A;this.onFrameAdded=this._onFrameAddedEmitter.event;this.onFrameRemoved=this._onFrameRemovedEmitter.event;this.onFrameNavigated=this._onFrameNavigatedEmitter.event;this._frames=new Map}attached(e,t){e.Page.enable({}),e.Page.getResourceTree({}).then(n=>{this._processCachedResources(e,n?n.frameTree:void 0,t)})}mainFrame(){return this._mainFrame}_processCachedResources(e,t,n){t&&this._addFramesRecursively(e,t,t.frame.parentId,n),e.Page.on("frameAttached",i=>{this._frameAttached(e,n,i.frameId,i.parentFrameId)}),e.Page.on("frameNavigated",i=>{this._frameNavigated(e,n,i.frame)}),e.Page.on("frameDetached",i=>{this._frameDetached(e,n,i.frameId)})}_addFrame(e,t,n){let i=new zS(this,e,t,n);return this._frames.set(i.id,i),i.isMainFrame()&&(this._mainFrame=i),this._onFrameAddedEmitter.fire(i),i}_frameAttached(e,t,n,i){let o=this._frames.get(n);return o||(o=this._addFrame(e,n,i)),o._ref(t),o}_frameNavigated(e,t,n){let i=this._frames.get(n.id);i||(i=this._frameAttached(e,t,n.id,n.parentId)),i._navigate(n,t),this._onFrameNavigatedEmitter.fire(i)}_frameDetached(e,t,n){let i=this._frames.get(n);i&&i._unref(t)}frameForId(e){return this._frames.get(e)}frames(){return Array.from(this._frames.values())}_addFramesRecursively(e,t,n,i){let o=t.frame,s=this._frames.get(o.id);s?(s._navigate(o,i),this._onFrameNavigatedEmitter.fire(s)):(s=this._addFrame(e,o.id,n),s._navigate(o,i));for(let a=0;t.childFrames&&a<t.childFrames.length;++a)this._addFramesRecursively(e,t.childFrames[a],s.id,i)}},zS=class{constructor(e,t,n,i){this._targets=new Set;this.cdp=t,this.model=e,this._parentFrameId=i,this.id=n,this._url=""}_ref(e){this._targets.add(e)}_navigate(e,t){this._name=e.name,this._url=e.url,this._securityOrigin=e.securityOrigin,this._unreachableUrl=e.unreachableUrl||"",this._ref(t),this._unrefChildFrames(t)}name(){return this._name||""}url(){return this._url}securityOrigin(){return this._securityOrigin}unreachableUrl(){return this._unreachableUrl}isMainFrame(){return!this._parentFrameId}parentFrame(){return this._parentFrameId?this.model.frameForId(this._parentFrameId):void 0}childFrames(){return this.model.frames().filter(e=>e._parentFrameId===this.id)}_unrefChildFrames(e){for(let t of this.childFrames())t._unref(e)}_unref(e){this._targets.delete(e),!this._targets.size&&(this._unrefChildFrames(e),this.model._frames.delete(this.id),this.model._onFrameRemovedEmitter.fire(this))}displayName(){return this._name?this._name:iY(this._url)||`<iframe ${this.id}>`}};function GS(r,e){return r.length<=e?r:r.substr(0,e-1)+"\u2026"}function iY(r){let e;try{e=new TN.URL(r)}catch{return GS(r,20)}if(e.protocol==="data")return GS(r,20);if(e.protocol==="blob"||r==="about:blank")return r;let t=PN.basename(e.pathname);return t||(t=(e.host||"")+"/"),t==="/"&&(t=GS(r,20)),t}var EN=require("url");var KS=class{constructor(e){this.versions=new Map;this.id=e.registrationId,this.scopeURL=e.scopeURL}},JS=class{constructor(e,t){this.revisions=[];this.registration=e,this.id=t.versionId,this.scriptURL=t.scriptURL,this._targetId=t.targetId,this._status=t.status,this._runningStatus=t.runningStatus}addRevision(e){this._targetId&&e.targetId&&this._targetId!==e.targetId&&console.error(`${this._targetId} !== ${e.targetId}`),e.targetId&&(this._targetId=e.targetId),this._status=e.status,this._runningStatus=e.runningStatus,this.revisions.unshift(e)}status(){return this._status}runningStatus(){return this._runningStatus}targetId(){return this._targetId}label(){let e=new EN.URL(this.registration.scopeURL),t=e.pathname.substr(1);t.endsWith("/")&&(t=t.substring(0,t.length-1));let n=t||`${e.host}`,i=this._status==="activated"?"":` ${this._status}`,o=this._runningStatus==="running"?"":` ${this._runningStatus}`;return`${n} #${this.id}${i}${o}`}},pg=class r{constructor(e){this._registrations=new Map;this._versions=new Map;this._onDidChangeUpdater=new A;this.onDidChange=this._onDidChangeUpdater.event;this._targets=new Set;this._frameModel=e,r._instances.add(this)}static{this._instances=new Set}dispose(){r._instances.delete(this)}attached(e){this._targets.add(e),!this._cdp&&(this._cdp=e,e.ServiceWorker.enable({}),e.ServiceWorker.on("workerRegistrationUpdated",t=>this._workerRegistrationsUpdated(t.registrations)),e.ServiceWorker.on("workerVersionUpdated",t=>this._workerVersionsUpdated(t.versions)),r._mode!=="normal"&&this.setMode(r._mode))}async detached(e){this._targets.delete(e)}version(e){return this._versions.get(e)}registrations(){let e=[],t=this._frameModel.frames().map(n=>n.url());for(let n of this._registrations.values())for(let i of t)if(i.startsWith(n.scopeURL)){e.push(n);break}return e}registration(e){return this._registrations.get(e)}_workerVersionsUpdated(e){for(let t of e){let n=this._registrations.get(t.registrationId);if(!n)continue;let i=n.versions.get(t.versionId);i||(i=new JS(n,t),n.versions.set(t.versionId,i)),t.targetId&&this._versions.set(t.targetId,i),i.addRevision(t),i.status()==="redundant"&&i.runningStatus()==="stopped"&&(t.targetId&&this._versions.delete(t.targetId),n.versions.delete(i.id))}this._onDidChangeUpdater.fire()}_workerRegistrationsUpdated(e){for(let t of e)if(t.isDeleted){if(!this._registrations.has(t.registrationId))debugger;this._registrations.delete(t.registrationId)}else{if(this._registrations.has(t.registrationId))return;this._registrations.set(t.registrationId,new KS(t))}this._onDidChangeUpdater.fire()}static setModeForAll(e){r._mode=e;for(let t of r._instances)t.setMode(e)}setMode(e){if(this._cdp){this._cdp.ServiceWorker.setForceUpdateOnPageLoad({forceUpdateOnPageLoad:e==="force"});for(let t of this._targets.values())e==="bypass"?(t.Network.enable({}),t.Network.setBypassServiceWorker({bypass:!0})):t.Network.disable({})}}async stopWorker(e){if(!this._cdp)return;let t=this.version(e);t&&await this._cdp.ServiceWorker.stopWorker({versionId:t.id})}};var Do=class{constructor(e,t,n,i,o,s,a,c){this.process=t;this.logger=o;this.telemetry=s;this.launchParams=a;this._targets=new Map;this._detachedTargets=new Set;this.frameModel=new lg;this.serviceWorkerModel=new pg(this.frameModel);this._lifecycleQueue=Promise.resolve();this._onTargetAddedEmitter=new A;this._onTargetRemovedEmitter=new A;this.onTargetAdded=this._onTargetAddedEmitter.event;this.onTargetRemoved=this._onTargetRemovedEmitter.event;this._connection=e,this._sourcePathResolver=i,this._browser=n,this._targetOrigin=c,this.serviceWorkerModel.onDidChange(()=>{for(let u of this._targets.values())u.type()==="service_worker"&&u._onNameChangedEmitter.fire()})}static async connect(e,t,n,i,o,s,a){let u=await e.rootSession().Target.attachToBrowserTarget({});if(!u)return;let l=e.createSession(u.sessionId);return new this(e,t,l,n,o,s,i,a)}dispose(){this.serviceWorkerModel.dispose()}targetList(){return Array.from(this._targets.values()).filter(e=>il.has(e.type()))}async getCandiateInfo(e){let t=await this._browser.Target.getTargets({});return t?e?t.targetInfos.filter(e):t.targetInfos:[]}async closeBrowser(){if(this.launchParams.request==="launch"){if(this.launchParams.cleanUp==="wholeBrowser")await this._browser.Browser.close({}),this.process?.kill();else for(let e of this._targets.values())await this._browser.Target.closeTarget({targetId:e.targetId}),this._connection.close();this.process=void 0}}waitForMainTarget(e){let t,n=new Promise(o=>t=o),i=async o=>{if([...this._targets.values()].some(c=>c.targetId===o.targetId)||this._detachedTargets.has(o.targetId)||e&&!e(o))return;let s=this._browser.Target.on("targetInfoChanged",c=>{c.targetInfo.targetId===o.targetId&&(o=c.targetInfo)}),a;try{a=await this._browser.Target.attachToTarget({targetId:o.targetId,flatten:!0})}finally{s.dispose()}if(!a){t(void 0);return}t(this.attachedToTarget(o,a.sessionId,!0))};return this._browser.Target.setDiscoverTargets({discover:!0}),this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(o=>i(o.targetInfo))),this._browser.Target.on("targetInfoChanged",o=>this._targetInfoChanged(o.targetInfo,this.enqueueLifecycleFn(i))),this._browser.Target.on("detachedFromTarget",this.enqueueLifecycleFn(async o=>{o.targetId&&await this._detachedFromTarget(o.sessionId,!1)})),n}enqueueLifecycleFn(e){return t=>this._lifecycleQueue=this._lifecycleQueue.then(()=>e(t))}attachedToTarget(e,t,n,i,o=!0){let s=this._targets.get(t);if(s)return s;let a=this._connection.createSession(t),c=new wf(this,e,a,i,n,this.launchParams,t,this.logger,()=>{this._connection.disposeSession(t),this._detachedFromTarget(t)});this._targets.set(t,c),i&&i._children.set(e.targetId,c),a.Target.on("attachedToTarget",async l=>{this.attachedToTarget(l.targetInfo,l.sessionId,l.waitingForDebugger,c)}),a.Target.on("detachedFromTarget",async l=>{l.targetId&&this._detachedFromTarget(l.sessionId,!1)}),a.Target.setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:o,flatten:!0}),a.Network.setCacheDisabled({cacheDisabled:this.launchParams.disableNetworkCache}).catch(l=>this.logger.info("runtime.target","Error setting network cache state",l)),i||this.retrieveBrowserTelemetry(a);let u=e.type;return _f.has(u)&&this.frameModel.attached(a,e.targetId),this.serviceWorkerModel.attached(a),this._onTargetAddedEmitter.fire(c),!il.has(u)||u==="service_worker"?c.runIfWaitingForDebugger():u==="page"&&o&&!e.canAccessOpener&&a.Page.waitForDebugger({}),c}async retrieveBrowserTelemetry(e){try{let t=await e.Browser.getVersion({});if(!t)throw new Error("Undefined return from getVersion()");let n={targetCRDPVersion:t.protocolVersion,targetRevision:t.revision,targetUserAgent:t.userAgent,targetV8:t.jsVersion,targetVersion:"",targetProject:"",targetProduct:""};this.logger.verbose("runtime.target","Retrieved browser information",t);let i=(t.product||"").split("/");i.length===2?(n.targetProject=i[0],n.targetVersion=i[1]):n.targetProduct=t.product,this.telemetry.report("browserVersion",n)}catch(t){this.logger.warn("runtime.target","Error getting browser telemetry",t)}}async _detachedFromTarget(e,t=!0){let n=this._targets.get(e);if(n){this._targets.delete(e),n.parentTarget?._children.delete(e);try{await n._detached()}catch{}if(this._onTargetRemovedEmitter.fire(n),t&&(this._detachedTargets.add(n.targetId),await this._browser.Target.detachFromTarget({sessionId:e})),!this._targets.size&&this.launchParams.request==="launch")try{this.launchParams.cleanUp==="wholeBrowser"?await this._browser.Browser.close({}):(await this._browser.Target.closeTarget({targetId:n.id()}),this._connection.close())}catch{}}}async _targetInfoChanged(e,t){let n=[...this._targets.values()].filter(i=>i.targetId===e.targetId);if(!e.attached||!n.length)return n.length&&await Promise.all(n.map(i=>this._detachedFromTarget(i.sessionId,!1))),t(e);for(let i of n)i._updateFromInfo(e);for(let i of this._targets.values())i.targetId!==e.targetId&&i._onNameChangedEmitter.fire()}};var WN=S(require("child_process")),VN=require("fs");var oY=50,Xt=class r{constructor(e){this.messageEmitter=new A;this.endEmitter=new A;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this._ws=e,this._ws.addEventListener("message",t=>{this.messageEmitter.fire([t.data.toString("utf-8"),new Vr])}),this._ws.addEventListener("close",()=>{this.endEmitter.fire(),this._ws=void 0}),this._ws.addEventListener("error",()=>{})}static async create(e,t,n){let i=!e.startsWith("ws://"),o=await Ua(e);for(;;){let s=Date.now()+oY;try{let a={headers:{host:n??"localhost"},perMessageDeflate:!1,maxPayload:268435456,rejectUnauthorized:!(i&&o),followRedirects:!0},c=new Ik(e,[],a);return await Zn(new Promise((u,l)=>{c.addEventListener("open",()=>u(new r(c))),c.addEventListener("error",p=>{let d=e===c.url?e:c.url.replace(/^http(s?):/,"ws$1:");if(d===e){l(p.error);return}this.create(d,t,n).then(u,l)})}),pt.withTimeout(2e3,t).token,`Could not open ${e}`).catch(u=>{throw c.close(),u})}catch(a){if(t.isCancellationRequested)throw a;let c=s-Date.now();c>0&&await ae(c)}}}send(e){this._ws?.send(e)}dispose(){return new Promise(e=>{if(!this._ws)return e();this._ws.addEventListener("close",()=>e()),this._ws.close()})}};var dg=S(require("path"));function sY(r){let e=[/^APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL$/i,/^ELECTRON_.+$/i,/^GOOGLE_API_KEY$/i,/^VSCODE_.+$/i,/^SNAP(|_.*)$/i,/^GDK_PIXBUF_.+$/i];return new wt(r).map((t,n)=>e.some(i=>i.test(t))?void 0:n)}var wt=class r{constructor(e){this.defined=ne(()=>Ca(this.value));this.value=e?pP(e):{}}static{this.platform=process.platform}static{this.empty=new r({})}static{this.processEnv=ne(()=>sY(process.env))}lookup(e){return r.platform==="win32"?hP(this.value,e):this.value[e]}addToPath(e,t="append",n=!1){let i=r.platform==="win32"?"Path":"PATH",o=r.platform==="win32"?dg.win32.delimiter:dg.posix.delimiter,s=this.lookup(i);return n&&!s&&(s=`\${env:${i}}`),s?t==="append"?s=s+o+e:s=e+o+s:s=e,this.update(i,s)}addNodeOption(e){let t=this.lookup("NODE_OPTIONS");return this.update("NODE_OPTIONS",t?`${t} ${e}`:e)}update(e,t){return r.merge(this,{[e]:t})}merge(...e){return r.merge(this,...e)}map(e){return new r(gi(this.value,(t,n)=>e(n,t)))}static merge(...e){let t=e.map(i=>i instanceof r?i.value:i),n=r.platform==="win32"?fP(...t):Object.assign({},...t);return new r(n)}};var RN=require("child_process");var yp=class r extends Error{constructor(t,n,i,o,s){super(`${t} exited with code ${o||-1}: ${n}`);this.command=t;this.stderr=n;this.stdout=i;this.code=o;this.innerError=s}static fromExeca(t){return new r(t.command,t.stderr.toString(),t.stdout.toString(),t.exitCode)}};function fg(r,e,t){return new Promise((n,i)=>{let o=bp(r,e,t?.cwd),s=(0,RN.spawn)(o.executable,o.args,{...t,cwd:o.cwd,shell:o.shell,stdio:"pipe"}),a=[],c=[];s.stderr.on("data",l=>a.push(l)),s.stdout.on("data",l=>c.push(l));let u=(l,p)=>i(new yp(r,Buffer.concat(a).toString(),Buffer.concat(c).toString(),l,p));s.on("error",l=>u(void 0,l)),s.on("close",l=>l?u(l):n({stdout:Buffer.concat(c).toString(),stderr:Buffer.concat(a).toString()}))})}var aY=/\.(bat|cmd)$/i,bp=(r,e,t)=>(process.platform==="win32"&&(r=Ii(r),t&&(t=Ii(t.toString())),r.endsWith(".ps1")&&(e=["-File",r,...e],r="powershell.exe")),process.platform!=="win32"||!aY.test(r)?{executable:r,args:e,shell:!1,cwd:t}:{executable:`"${r}"`,args:e.map(n=>n.includes(" ")?`"${n}"`:n),shell:!0,cwd:t});var AN=r=>{let e={};for(let t of r){let n=t.indexOf("=");n===-1?e[t]=null:e[t.slice(0,n)]=t.slice(n+1)}return e},vp=r=>{let e=[];for(let t of Object.keys(r)){let n=r[t];n!==void 0&&e.push(n===null?t:`${t}=${n}`)}return e},hg=class r{constructor(e=[]){this.args=e;this.argMap=ne(()=>AN(this.args))}add(e,t=null){return this.newThis(vp({...this.argMap(),[e]:t}))}get(e){let t=this.argMap();return t.hasOwnProperty(e)?t[e]:void 0}remove(e){return this.newThis(vp({...this.argMap(),[e]:void 0}))}merge(e){return this.newThis(vp({...this.argMap(),...e instanceof r?e.argMap():AN(e)}))}filter(e){let t=this.argMap(),n=[];for(let i of Object.keys(t)){let o=t[i];e(i,o)&&n.push(o===null?i:`${i}=${o}`)}return this.newThis(n)}toArray(){return this.args.slice()}newThis(e){return new this.constructor(e)}};var kN="--remote-debugging-port",DN="--remote-debugging-pipe",Oo=class r extends hg{static{this.default=new r(["--disable-background-networking","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-default-apps","--disable-dev-shm-usage","--disable-renderer-backgrounding","--disable-sync","--metrics-recording-only","--no-first-run","--no-default-browser-check"])}setConnection(e){return new r(vp({...this.argMap(),[DN]:e==="pipe"?null:void 0,[kN]:e!=="pipe"?String(e):void 0}))}getSuggestedConnection(){let e=this.argMap();if(e.hasOwnProperty(DN))return"pipe";let t=e[kN];if(t!==void 0)return t&&Number(t)||0}};var YS=require("url");function mg(r,e,t){let n=Zo(s=>{if(s)return new YS.URL(s);throw new Error(`A valid url wasn't supplied: <${s}>`)}),i={"url.hostname":()=>{let s=n(e).hostname;return s.endsWith(".localhost")?"localhost":s},"url.port":()=>n(e).port,browserInspectUri:()=>encodeURIComponent(t),browserInspectUriPath:()=>new YS.URL(t).pathname,wsProtocol:()=>n(e).protocol==="https:"?"wss":"ws"};return r.replace(/{([^\}]+)}/g,(s,a)=>i.hasOwnProperty(a)?i[a]():s)}var UN=S(require("readline"));var ON=require("stream"),Mo=class extends ON.Transform{constructor(t){super();this.prefix=[];this.splitSuffix=Buffer.alloc(0);if(typeof t=="string"&&t.length===1)this.splitter=t.charCodeAt(0);else if(typeof t=="number")this.splitter=t;else throw new Error("not implemented here")}_transform(t,n,i){let o=0;for(;o<t.length;){let s=t.indexOf(this.splitter,o);if(s===-1)break;let a=t.subarray(o,s),c=this.prefix.length||this.splitSuffix.length?Buffer.concat([...this.prefix,a,this.splitSuffix]):a;this.push(c),this.prefix.length=0,o=s+1}o<t.length&&this.prefix.push(t.subarray(o)),i()}_flush(t){this.prefix.length&&this.push(Buffer.concat([...this.prefix,this.splitSuffix])),t()}};var oi=class{constructor(e,t,n){this.logger=e;this.pipeWrite=t;this.pipeRead=n;this.messageEmitter=new A;this.endEmitter=new A;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this.onceEnded=ne(()=>{this.streams&&(this.beforeClose(),this.streams.read.removeAllListeners(),this.pipeRead?.destroy(),this.streams.write.removeListener("end",this.onceEnded),this.streams.write.removeListener("error",this.onWriteError),this.streams.write.on("error",()=>{}),this.streams.write.end(),this.streams=void 0,this.endEmitter.fire())});this.onWriteError=e=>{this.logger.error("internal","pipeWrite error",{error:e})};let i=n||t;this.streams={read:i.on("error",o=>this.logger.error("internal","pipeRead error",{error:o})).pipe(new Mo(0)).on("data",o=>this.messageEmitter.fire([o.toString(),new Vr])).on("end",this.onceEnded),write:t.on("end",this.onceEnded).on("error",this.onWriteError)}}send(e){this.streams?.write.write(e+"\0")}dispose(){this.onceEnded()}beforeClose(){}};var Lo=class{constructor(e,t,n){this.pid=e;this.onExit=t;this.updateInterval(n)}dispose(){clearInterval(this.timer)}updateInterval(e=200){this.timer&&clearInterval(this.timer),this.timer=setInterval(()=>{cY(this.pid)||(this.onExit(!0),this.dispose())},e)}};function cY(r){try{return process.kill(r,0),!0}catch{return!1}}var gg=require("child_process"),XS=require("path");function dn(r,e,t="forceful"){if(t==="none")return!0;if(process.platform==="win32"){let n=process.env.WINDIR||"C:\\Windows",i=(0,XS.join)(n,"System32","taskkill.exe");try{return(0,gg.execSync)(`${i} ${t==="forceful"?"/F":""} /T /PID ${r}`,{stdio:"pipe"}),!0}catch(o){return e.error("runtime.exception","Error running taskkill.exe",o),!1}}else try{let n=(0,XS.join)(__dirname,"./targets/node/terminateProcess.sh"),i=(0,gg.spawnSync)("sh",[n,r.toString(),t==="forceful"?"9":"15"]);return i.stderr&&i.status?(e.error("runtime.exception","Error running terminateProcess",i),!1):!0}catch(n){return e.error("runtime.exception","Error running terminateProcess",n),!1}}var FN=require("fs");async function QS(r,e,t,n,i){let o=new To(FN.promises),[s,a]=await Promise.all([LN(o,new URL("/json/version",r),e,i),n?LN(o,new URL("/json/list",r),e,i):Promise.resolve(void 0)]);if(!s.ok)t.verbose("runtime.launch","Error looking up /json/version",s);else if(s.body.webSocketDebuggerUrl){let c=NN(s.url,s.body.webSocketDebuggerUrl);return t.verbose("runtime.launch","Discovered target URL from /json/version",{url:s.body.webSocketDebuggerUrl,fixed:c}),c}if(a)if(!a.ok)t.verbose("runtime.launch","Error looking up /json/list",a);else{let c=NN(a.url,a.body[0].webSocketDebuggerUrl);return t.verbose("runtime.launch","Discovered target URL from /json/list",{url:a.body[0].webSocketDebuggerUrl,fixed:c}),c}throw new Error("Could not find any debuggable target")}async function LN(r,e,t,n){if(e.hostname!=="localhost")return r.fetchJson(e.toString(),t,{host:n??"localhost"});e.hostname="127.0.0.1";let i=e.toString();e.hostname="[::1]";let o=e.toString(),s=new pt(t);try{let a;return await pa([i,o].map(async u=>(a=await r.fetchJson(u,s.token),a.ok&&a)))||a}finally{s.cancel()}}var BN=r=>async(e,t,n,i)=>{for(;;)try{return await QS(e,t,n,r,i)}catch(o){if(t.isCancellationRequested)throw new Error(`Could not connect to debug target at ${e}: ${o.message}`);await ae(200)}},Qc=BN(!0),yg=BN(!1);function NN(r,e){let t=new URL(r),n=new URL(e);return n.host=t.host,n.toString()}var ZS=async(r,e,t,n)=>{let i=t.connection===0?await uY(e,n):await yg(`http://localhost:${t.connection}`,n,r),o=t.inspectUri?mg(t.inspectUri,t.url,i):i;for(;;)try{return await Xt.create(o,n)}catch(s){if(n.isCancellationRequested)throw s;await ae(200)}},bg=class{constructor(e){this.logger=e;this.pid=void 0;this.onExit=new A().event;this.onError=new A().event}async transport(e,t){return ZS(this.logger,this,e,t)}kill(){}},vg=class{constructor(e,t){this.pid=e;this.logger=t;this.stderr=void 0;this.stdout=void 0;this.exitEmitter=new A;this.onExit=this.exitEmitter.event;this.errorEmitter=new A;this.onError=this.errorEmitter.event;this.liveness=new Lo(e,()=>this.exitEmitter.fire(0),1e3)}async transport(e,t){return ZS(this.logger,this,e,t)}kill(){try{process.kill(this.pid)}catch{}this.liveness.updateInterval(200)}},_g=class{constructor(e,t,n){this.cp=e;this.logger=t;this.killBehavior=n;this.pid=void 0;this.exitEmitter=new A;this.onExit=this.exitEmitter.event;this.errorEmitter=new A;this.onError=this.errorEmitter.event;e.on("exit",i=>this.exitEmitter.fire(i||0)),e.on("error",i=>this.errorEmitter.fire(i))}get stderr(){return this.cp.stderr}get stdio(){return this.cp.stdio}async transport(e,t){return e.connection==="pipe"?new oi(this.logger,this.cp.stdio[3],this.cp.stdio[4]):ZS(this.logger,this,e,t)}kill(){dn(this.cp.pid,this.logger,this.killBehavior)}};function uY(r,e){if(!r.stderr)throw new Error("Cannot wait for a websocket for a target that lacks stderr");return new Promise((t,n)=>{let i=UN.createInterface({input:r.stderr}),o="",s=()=>u();i.on("line",l),i.on("close",s);let a=new Te([r.onExit(()=>u()),r.onError(u)]),c=e.onCancellationRequested(()=>{p(),n(new Qn(`Timed out after ${c} ms while trying to connect to the browser!`))});function u(d){p(),n(new Error(["Failed to launch browser!"+(d?" "+d.message:""),o,"","TROUBLESHOOTING: https://github.com/GoogleChrome/puppeteer/blob/master/docs/troubleshooting.md",""].join(`
`)))}function l(d){o+=d+`
`;let f=d.match(/^DevTools listening on (ws:\/\/.*)$/);f&&(p(),t(f[1]))}function p(){c.dispose(),i.removeListener("line",l),i.removeListener("close",s),a.dispose()}})}async function jN(r,e,t,n){let i=r.launchUnelevatedRequest({process:e,args:t});return await Zn(i,n,"Could not launch browser unelevated")}var qN=()=>{};async function $N(r,e,t,n,i,o,s={}){let{onStderr:a=qN,onStdout:c=qN,args:u=[],dumpio:l=!1,cwd:p=process.cwd(),env:d=wt.empty,connection:f="pipe",cleanUp:h="wholeBrowser",url:m,killBehavior:y="forceful",inspectUri:w}=s,k=new Oo(u),D=k.getSuggestedConnection();s.includeLaunchArgs!==!1?(k=eI(k,s),D===void 0&&(k=k.setConnection(f),D=f)):D===void 0&&(D="pipe");let Q=["pipe","pipe","pipe"];D==="pipe"&&(l?Q=["ignore","pipe","pipe","pipe","pipe"]:Q=["ignore","ignore","ignore","pipe","pipe"]);let F;if(!!(i.supportsLaunchUnelevatedProcessRequest&&s.launchUnelevated)&&typeof D=="number"&&D!==0){let B=await jN(r,e,k.toArray(),o);F=B.pid?new vg(B.pid,t):new bg(t)}else{t.info("runtime.launch",`Launching Chrome from ${e}`);let B=bp(e,k.toArray(),await Ta(VN.promises,p)?p:process.cwd()),Z=WN.spawn(B.executable,B.args,{detached:!0,env:d.defined(),shell:B.shell,cwd:B.cwd,stdio:Q});if(Z.pid===void 0)throw await Promise.race([ae(1e3).then(()=>new Error("Unable to launch the executable (undefined pid)")),new Promise(ve=>Z.once("error",ve))]);F=new _g(Z,t,y)}l?(F.stderr?.on("data",B=>a(B.toString())),F.stdout?.on("data",B=>c(B.toString()))):(F.stderr?.resume(),F.stdout?.resume());let H=()=>{h==="wholeBrowser"&&F.kill()};process.on("exit",H),F.onExit(()=>process.removeListener("exit",H));try{if(s.promisedPort){let B;D=await Promise.race([s.promisedPort,new Promise((Z,ve)=>{B=F.onExit(R=>{ve(new O(PT(R)))})})]).finally(()=>B.dispose())}return{process:F,canReconnect:typeof D=="number",createConnection:async B=>{let Z=await F.transport({connection:D,inspectUri:w||void 0,url:m||void 0},B);return new ot(Z,t,n)}}}catch(B){throw F.kill(),B}}function eI(r,e={}){let{userDataDir:t=null,ignoreDefaultArgs:n=!1}=e,i=n===!0?new Oo:Oo.default;return n instanceof Array&&(i=i.filter(o=>!n.includes(o))),t&&(i=i.add("--user-data-dir",t)),i=i.merge(r),r.toArray().every(o=>o.startsWith("-"))&&e.hasUserNavigation&&(i=i.add("about:blank")),i}async function HN(r,e,t,n){let{browserWSEndpoint:i,browserURL:o}=r;if(i){let s=await Xt.create(i,e);return new ot(s,t,n)}else if(o){let s=await yg(o,e,t),a=r.inspectUri?mg(r.inspectUri,r.pageURL,s):s,c=await Xt.create(a,e);return new ot(c,t,n)}throw new Error("Either browserURL or browserWSEndpoint needs to be specified")}var Xr=class{constructor(e,t,n){this.logger=e;this.pathResolver=t;this.vscode=n;this._disposables=[];this._onTerminatedEmitter=new A;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new A;this.onTargetListChanged=this._onTargetListChangedEmitter.event;this.closeWhenTargetsEmpty=!0}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[],this._attemptTimer&&clearTimeout(this._attemptTimer),this._targetManager&&this._targetManager.dispose()}resolveParams(e){return e.request==="attach"&&(e.type==="pwa-chrome"||e.type==="pwa-msedge"&&typeof e.useWebView!="object")&&e.browserAttachLocation==="workspace"}async launch(e,t){return this.resolveParams(e)?(this._lastLaunchParams={...e,timeout:1/0},await this.attemptToAttach(this._lastLaunchParams,t),{blockSessionTermination:!0}):{blockSessionTermination:!1}}_scheduleAttach(e,t){this._attemptTimer=setTimeout(()=>{this._attemptTimer=void 0,this.attemptToAttach(e,{...t,cancellationToken:Ut})},1e3)}createTargetManager(e,t,n){return Do.connect(e,void 0,this.pathResolver,t,this.logger,n.telemetryReporter,n.targetOrigin)}async attemptToAttach(e,t){let n=await this.acquireConnectionForBrowser(t,e);this._connection=n,n.onDisconnected(()=>{this._connection=void 0,this._targetManager&&(this._targetManager.dispose(),this._targetManager=void 0,this._onTargetListChangedEmitter.fire()),this._lastLaunchParams===e&&e.restart?this._scheduleAttach(e,t):this._onTerminatedEmitter.fire({killed:!0,code:0})},void 0,this._disposables);let i=this._targetManager=await this.createTargetManager(n,e,t);if(!i)return;i.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),i.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),i.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),i.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire(),!i.targetList().length&&this.closeWhenTargetsEmpty&&(this._onTerminatedEmitter.fire({killed:!0,code:0}),this._connection?.close())});let o=await Promise.race([i.waitForMainTarget(await this.getTargetFilter(i,e)),ae(e.timeout).then(()=>{throw new O(of())})]);return typeof o=="string"?o:void 0}async getTargetFilter(e,t){let n=ro(t),i=qa(n);if(t.targetSelection!=="pick")return i;let o=await e.getCandiateInfo(i);if(o.length===0)return i;if(o.length===1||!this.vscode)return c=>c.targetId===o[0].targetId;let s=wg.t("Select a tab"),a=await this.vscode.window.showQuickPick(o.map(c=>({label:c.title,detail:c.url,targetId:c.targetId})),{matchOnDescription:!0,matchOnDetail:!0,placeHolder:s});return a?c=>c.targetId===a.targetId:i}async acquireConnectionForBrowser({telemetryReporter:e,cancellationToken:t},n){for(;this._lastLaunchParams===n;)try{return await this.acquireConnectionInner(e,n,t)}catch(i){if(t.isCancellationRequested)throw new O(Zu(wg.t("Cannot connect to the target at {0}: {1}",`${n.address}:${n.port}`,i.message)));await ae(1e3)}throw new O(Zu(wg.t("Cannot connect to the target at {0}: {1}",`${n.address}:${n.port}`,"Cancelled")))}async acquireConnectionInner(e,t,n){let i=`http://${t.address}:${t.port}`;return await HN({browserURL:i,inspectUri:t.inspectUri,pageURL:t.url},n,this.logger,e)}async terminate(){this._lastLaunchParams=void 0,this._connection?.close()}async restart(){if(this._targetManager)for(let e of this._targetManager.targetList())e.type()==="page"&&!e.name().startsWith("devtools://")&&e.restart()}targetList(){let e=this._targetManager;return e?e.targetList():[]}};Xr=C([(0,No.injectable)(),g(0,(0,No.inject)(q)),g(1,(0,No.inject)(Pe)),g(2,(0,No.optional)()),g(2,(0,No.inject)(Kn))],Xr);var fn=S($());var zN=S(Ny()),KN=S(Ge()),_p=S(require("fs")),Fo=S($()),Zc=S(require("path"));var si=class{constructor(e,t,n,i,o){this.storagePath=e;this.logger=t;this.pathResolver=n;this.initializeParams=i;this.fs=o;this._disposables=new Te;this._onTerminatedEmitter=new A;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new A;this.onTargetListChanged=this._onTargetListChangedEmitter.event;this._terminatedCts=new pt}dispose(){this._disposables.dispose()}async launchBrowser({runtimeExecutable:e,trace:t,includeDefaultArgs:n,includeLaunchArgs:i,runtimeArgs:o,userDataDir:s,env:a,cwd:c,port:u,url:l,file:p,inspectUri:d,webRoot:f,cleanUp:h,launchUnelevated:m,killBehavior:y},w,k,D,Q){let F=await this.findBrowserPath(e||"stable"),te;return typeof s=="string"?te=Zc.resolve(s):s&&(te=Zc.resolve(Zc.join(this.storagePath,o?.includes("--headless")?".headless-profile":".profile"))),_p.mkdirSync(this.storagePath,{recursive:!0}),te&&(_p.mkdirSync(te,{recursive:!0}),te=_p.realpathSync(te)),await $N(w,F,this.logger,D,this.initializeParams,k,{onStdout:H=>w.output({category:"stdout",output:H}),onStderr:H=>w.output({category:"stderr",output:H}),dumpio:typeof t=="boolean"?t:t.stdio,cleanUp:h,hasUserNavigation:!!(l||p),cwd:c||f||void 0,env:wt.merge(wt.processEnv(),a),args:o||[],userDataDir:te,connection:u||(d?0:"pipe"),launchUnelevated:m,ignoreDefaultArgs:!n,includeLaunchArgs:i,killBehavior:y,url:l,inspectUri:d,promisedPort:Q})}getFilterForTarget(e){return qa(ro(e,["about:blank"]))}async doLaunch(e,t){let n;try{n=await this.launchBrowser(e,t.dap,t.cancellationToken,t.telemetryReporter)}catch(u){throw new O(Xb(u))}let i=new pt(this._terminatedCts.token);n.process.onExit(()=>this.fireTerminatedEvent());let o=()=>n.canReconnect&&!i.token.isCancellationRequested,s=async u=>{if(this._targetManager?.dispose(),this._targetManager=void 0,this._onTargetListChangedEmitter.fire(),o()&&(await ae(1e3),o())){t.dap.output({category:"stderr",output:KN.t("Browser connection failed, will retry: {0}",u?.message||"Connection closed")});try{return await ae(2e3),await a()}catch{}}n.process.kill(),this.fireTerminatedEvent()},a=async()=>{if(!i.token.isCancellationRequested)try{let u=await n.createConnection(i.token),l=await this.launchCdp(e,n,u,{...t,cancellationToken:i.token});await this.finishLaunch(l,e),u.onDisconnected(()=>s())}catch(u){if(o())return s(u);throw n.process.kill(),new O(Xb(u))}},c=t.cancellationToken.onCancellationRequested(()=>i.cancel());try{await a()}finally{c.dispose()}}async launchCdp(e,t,n,i){if(this._connectionForTest=n,this._targetManager=await Do.connect(n,t.process,this.pathResolver,e,this.logger,i.telemetryReporter,i.targetOrigin),!this._targetManager)throw new O(Zu());this._targetManager.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),this._targetManager.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),this._disposables.push(this._targetManager),this._targetManager.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),this._targetManager.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire()});let o=this.getFilterForTarget(e),s=await Zn(this._targetManager.waitForMainTarget(o),i.cancellationToken,"Could not attach to main target");if(!s)throw new O(of());return s}async finishLaunch(e,t){if("skipNavigateForTest"in t)return;let n;if(t.file){let i=Zc.resolve(t.webRoot||t.rootPath||"",t.file),o=Math.min(i.includes("#")?i.indexOf("#"):1/0,i.includes("?")?i.indexOf("?"):1/0);isFinite(o)&&!await zi(this.fs,i)?n=ye(i.slice(0,o))+i.slice(o):n=ye(i)}else n=t.url;n&&await e.cdp().Page.navigate({url:n})}async launch(e,t){let n=this.resolveParams(e);return n?(await this.doLaunch(n,t),{blockSessionTermination:!0}):{blockSessionTermination:!1}}async terminate(){this._targetManager?await this._targetManager.closeBrowser():this.fireTerminatedEvent()}async restart(){for(let e of this.targetList())e.type()==="page"&&e.restart()}async findBrowserByExe(e,t){return t==="*"?(await e.findWhere(i=>i.quality==="stable")||(await e.findAll())[0])?.path:(0,zN.isQuality)(t)?(await e.findWhere(n=>n.quality===t))?.path:t}targetList(){let e=this._targetManager;return e?e.targetList():[]}connectionForTest(){return this._connectionForTest}fireTerminatedEvent(){this._terminatedCts.token.isCancellationRequested||(this._terminatedCts.cancel(),this._onTerminatedEmitter.fire({code:0,killed:!0}))}};si=C([(0,Fo.injectable)(),g(0,(0,Fo.inject)(zn)),g(1,(0,Fo.inject)(q)),g(2,(0,Fo.inject)(Pe)),g(3,(0,Fo.inject)(or)),g(4,(0,Fo.inject)(Ae))],si);var Ks=class extends si{constructor(t,n,i,o,s,a){super(t,n,s,a,o);this.browserFinder=i}resolveParams(t){return t.type==="pwa-chrome"&&t.request==="launch"&&t.browserLaunchLocation==="workspace"?t:void 0}async findBrowserPath(t){let n=await this.findBrowserByExe(this.browserFinder,t);if(!n||!await Ta(this.fs,n))throw new O(nf("Chrome",t,(await this.browserFinder.findAll()).map(i=>i.quality)));return n}};Ks=C([(0,fn.injectable)(),g(0,(0,fn.inject)(zn)),g(1,(0,fn.inject)(q)),g(2,(0,fn.inject)(_s)),g(2,(0,fn.tagged)("browser","chrome")),g(3,(0,fn.inject)(Ae)),g(4,(0,fn.inject)(Pe)),g(5,(0,fn.inject)(or))],Ks);var JN=require("crypto"),hn=S($()),YN=require("net"),XN=require("os"),QN=require("path");var lY=["--do-not-de-elevate"],eu=class extends si{constructor(t,n,i,o,s,a){super(t,n,s,a,o);this.browserFinder=i}resolveParams(t){return t.type==="pwa-msedge"&&t.request==="launch"&&t.browserLaunchLocation==="workspace"?t:void 0}launchBrowser(t,n,i,o){return super.launchBrowser({...t,runtimeArgs:t.runtimeArgs??lY},n,i,o,t.useWebView?this.getWebviewPort(t,o):void 0)}getFilterForTarget(t){return t.useWebView&&t.urlFilter?qa(ro(t)):super.getFilterForTarget(t)}async getWebviewPort(t,n){let i=ge();if(!t.runtimeExecutable)return i.resolve(t.port),i.promise;let o=t.runtimeExecutable.split(/\\|\//).pop(),s=`VSCode_${(0,JN.randomBytes)(12).toString("base64")}`,a=`\\\\.\\pipe\\WebView2\\Debugger\\${o}\\${s}`,c=(0,YN.createServer)(u=>{u.on("data",async l=>{let p=JSON.parse(l.toString()),d=p.devtoolsActivePort||"",f=parseInt(d.split(`
`).shift()||""),h=t.port||f;i.resolve(h);let m=`ws://${t.address}:${h}/devtools/${p.type}/${p.id}`,y=await Xt.create(m,Ut),w=new ot(y,this.logger,n);await w.rootSession().Runtime.runIfWaitingForDebugger({}),w.close()})});return c.on("error",i.reject),c.on("close",()=>i.resolve(t.port)),c.listen(a),t.userDataDir=t.userDataDir||(0,QN.join)((0,XN.tmpdir)(),`vscode-js-debug-userdatadir_${t.port}`),t.env=t.env||{},t.env.WEBVIEW2_USER_DATA_FOLDER=t.userDataDir.toString(),t.env.WEBVIEW2_ADDITIONAL_BROWSER_ARGUMENTS=`--remote-debugging-port=${t.port}`,t.env.WEBVIEW2_WAIT_FOR_SCRIPT_DEBUGGER="true",t.env.WEBVIEW2_PIPE_FOR_SCRIPT_DEBUGGER=s,i.promise}async findBrowserPath(t){let n=await this.findBrowserByExe(this.browserFinder,t);if(!n||!await Ta(this.fs,n))throw new O(nf("Edge",t,(await this.browserFinder.findAll()).map(i=>i.quality)));return n}};eu=C([(0,hn.injectable)(),g(0,(0,hn.inject)(zn)),g(1,(0,hn.inject)(q)),g(2,(0,hn.inject)(_s)),g(2,(0,hn.tagged)("browser","edge")),g(3,(0,hn.inject)(Ae)),g(4,(0,hn.inject)(Pe)),g(5,(0,hn.inject)(or))],eu);var Bi=S($());var ZN=require("crypto"),Sg=S($());var pY=0,ai=class{constructor(e){this.portLeaseTracker=e;this.teardown=new WeakMap}async launch(e,t,n){this.server&&this.server.close();let i=`/${(0,ZN.randomBytes)(20).toString("hex")}`,o=this.server=await kh(this.portLeaseTracker,{perMessageDeflate:!0,host:"127.0.0.1",path:i}),s=++pY;e.launchBrowserInCompanion({...n,serverPort:o.address().port,path:i,launchId:s});let a=await Zn(new Promise((u,l)=>{o.once("connection",u),o.once("error",l)}),t,"Timed out waiting for browser connection"),c=new Xt(a);return this.teardown.set(c,()=>e.killCompanionBrowser({launchId:s})),c}close(e){this.teardown.get(e)?.()}dispose(){this.server?.close(),this.server=void 0}};ai=C([(0,Sg.injectable)(),g(0,(0,Sg.inject)(sr))],ai);var tu=class extends Xr{constructor(t,n,i,o){super(n,i,o);this.helper=t}resolveParams(t){return t.request==="attach"&&(t.type==="pwa-chrome"||t.type==="pwa-msedge")&&t.browserAttachLocation==="ui"}async acquireConnectionForBrowser(t,n){let i=await this.helper.launch(t.dap,t.cancellationToken,{type:n.type==="pwa-chrome"?"chrome":"edge",params:n,attach:{host:n.address,port:n.port}});return new ot(i,this.logger,t.telemetryReporter)}};tu=C([(0,Bi.injectable)(),g(0,(0,Bi.inject)(ai)),g(1,(0,Bi.inject)(q)),g(2,(0,Bi.inject)(Pe)),g(3,(0,Bi.optional)()),g(3,(0,Bi.inject)(Kn))],tu);var Ui=S($());var ru=class extends si{constructor(t,n,i,o,s,a){super(t,n,i,o,s);this.helper=a}resolveParams(t){return(t.type==="pwa-chrome"||t.type==="pwa-msedge")&&t.request==="launch"&&t.browserLaunchLocation==="ui"?t:void 0}async launchBrowser(t,n,i,o){let s=await this.helper.launch(n,i,{type:t.type==="pwa-chrome"?"chrome":"edge",browserArgs:eI(new Oo(t.runtimeArgs||[]),{hasUserNavigation:!!t.url,ignoreDefaultArgs:!t.includeDefaultArgs}).setConnection(t.port||"pipe").toArray(),params:t});return{canReconnect:!1,createConnection:()=>Promise.resolve(new ot(s,this.logger,o)),process:{onExit:new A().event,onError:new A().event,transport:()=>Promise.resolve(s),kill:()=>this.helper.close(s)}}}async findBrowserPath(){throw new Error("not implemented")}};ru=C([(0,Ui.injectable)(),g(0,(0,Ui.inject)(zn)),g(1,(0,Ui.inject)(q)),g(2,(0,Ui.inject)(Pe)),g(3,(0,Ui.inject)(or)),g(4,(0,Ui.inject)(Ae)),g(5,(0,Ui.inject)(ai))],ru);var Bo=S($()),iF=require("net"),oF=require("path");var dY=ne(()=>{if(process.arch==="arm64")return Promise.resolve().then(()=>S(tF()));if(process.arch==="x64")return Promise.resolve().then(()=>S(nF()));throw new Error(`Unsupported architecture ${process.arch}`)});function Ig(){if(process.platform!=="win32")throw new Error("Not running on Windows");return dY()}var nu=class extends Xr{constructor(e,t,n){super(e,t,n)}resolveParams(e){return e.request==="attach"&&e.type==="pwa-msedge"&&typeof e.useWebView=="object"}async acquireConnectionForBrowser(e,t){let{getAppContainerProcessTokens:n}=await Ig(),i=n().map(c=>(0,oF.join)(c,t.useWebView.pipeName));if(!i)throw new O(_T());let o=i.map(c=>(0,iF.connect)(c)),s;try{s=await Zn(pa(o.map(c=>new Promise(u=>c.on("error",()=>u(void 0)).on("connect",()=>u(c))))),e.cancellationToken)}finally{for(let c of o)c!==s&&c.destroy()}if(!s)throw new O(ST());let a=new oi(this.logger,s);return new ot(a,this.logger,e.telemetryReporter)}};nu=C([(0,Bo.injectable)(),g(0,(0,Bo.inject)(q)),g(1,(0,Bo.inject)(Pe)),g(2,(0,Bo.optional)()),g(2,(0,Bo.inject)(Kn))],nu);var au=S($());var Tr=S($());var tI=Symbol("ILinkedBreakpointLocation");var dF=S(require("path"));var Sp=S($()),qo=S(require("path")),pF=require("url");var sF=require("fs"),ji=S(require("path"));function xg(r,e){return r?(r.endsWith("/")||(r+="/"),r+e):e}async function Cg(r,e,t,n,i){e=He(e)||e;let o;if(r){if(Lr(r))o=He(r);else if(Bt(r))o=await n(r,t,i)||r;else if(ji.isAbsolute(e))o=mY(e,r);else{let s=fv(e)||"/",a=await n(s,t,i),c=ji.dirname(a);o=Ki(c,r)}i.verbose("sourcemap.parsing","resolved sourceRoot",{sourceRoot:r,absSourceRoot:o})}else if(ji.isAbsolute(e))o=ji.dirname(e),i.verbose("sourcemap.parsing","no sourceRoot specified, using script dirname",{absSourceRoot:o});else{let s=fv(e)||"/placeholder.js",a=await n(s,t,i);o=a?ji.dirname(a):"",i.verbose("sourcemap.parsing","no sourceRoot specified, using webRoot + script path dirname",{absSourceRoot:o})}return o=uE(o),o=Ve(o),o}var wp=async(r,e,t)=>{if(!r||!r.startsWith("/"))return"";let n=Object.keys(e).sort((i,o)=>o.length-i.length);for(let i of n){if(!i)continue;let o=e[i];if(i[0]!=="/"&&(t.verbose("sourcemap.parsing",`Keys should be absolute: ${i}`),i="/"+i),fY(i,r))return hY(i,o,r)}return""},aF=(r,e)=>async(t,n,i)=>{if(process.platform==="win32"&&/^[a-z]:/i.test(t))return t;let o=await Pf(r,ji.dirname(e),"package.json");if(!o)return wp(t,n,i);let s=await wp(t,dP(n,a=>a.length>=o.length),i);return process.platform!=="win32"&&t!=="/"&&!s&&(await sF.promises.stat(t).catch(()=>{}))?.isDirectory()?t:s||o};function fY(r,e){return r===e?!0:(r.endsWith("/")||(r+="/"),e.startsWith(r))}function hY(r,e,t){let n=decodeURIComponent(t.substring(r.length));return n?Ki(e,n):e}function mY(r,e){return hr(ji.dirname(r),e)}var lF=S(gl()),Uo=S(require("path"));var Eg="*",cF=new RegExp(zt(Eg),"g"),Pg="?:"+Eg,gY=new RegExp(zt(Pg),"g"),rI=(r,e)=>{let t=e.match(r);return r.lastIndex=0,t?t.length:0},uF=new RegExp(`${zt(Pg)}|${zt(Eg)}`,"g"),Tg=class{constructor(e,t){this.logger=t;this.replacers=[];let n=Object.keys(e).sort((i,o)=>o.replace(Pg,"*").length-i.replace(Pg,"*").length);for(let i of n){let o=e[i];if(!o.includes("*")&&/\$[0-9'`&]/.test(o)){this.replacers.push([new RegExp(`^${i}$`,"i"),o]);continue}let s=Be(i),a=`"${s}": "${o}"`,c=rI(cF,s)-rI(gY,s);if(c>1){t.warn("runtime.sourcemap",`Warning: only one asterisk allowed in a sourceMapPathOverrides entry - ${a}`);continue}if(rI(cF,o)>c){t.warn("runtime.sourcemap",`The right side of a sourceMapPathOverrides entry must have 0 or 1 asterisks - ${a}}`);continue}let u="^",l=0;for(uF.lastIndex=0;;){let p=uF.exec(s);if(u+=zt(s.slice(l,p?.index),"/"),!p)break;p[0]===Eg?u+="(.*?)":u+=".*?",l=p.index+p[0].length}c===0&&(u+="([\\/\\\\].*)?",o+="*"),this.replacers.push([new RegExp(u+"$","i"),o.replace(/\$/g,"$$$$").replace(/\*/,"$1")])}}apply(e){let t=Be(e);for(let[n,i]of this.replacers){let o=t.replace(n,i);if(o!==t)return this.logger.verbose("runtime.sourcemap",`SourceMap: mapping ${e} => ${o}, via sourceMapPathOverrides entry - ${n.toString()}`),Ki(o)}return e}};var yY=/\x00/,iu=class{constructor(e,t){this.options=e;this.logger=t;this.sourceMapOverrides=new Tg(this.options.sourceMapOverrides,this.logger);this.resolvePatterns=this.options.resolveSourceMapLocations?.map(e=>{let t=e.startsWith("!")?"!":"",n=e.slice(t.length).replace(/(?<!\.)\.[^./\\]+$/,".*");if(!Bt(n))return Be(e);n=Be(hr(n));let i=Ub(this.options.workspaceFolder),o=Ub(n),s=0;for(let a=0;a<i.length&&a<o.length&&o[a].toLowerCase()===i[a].toLowerCase();a++)s+=i[a].length+1;return n=n.slice(0,s).replace(/[\[\]\(\)\{\}\!\*]/g,"\\$&")+n.slice(s),t+n})}shouldResolveSourceMap({sourceMapUrl:e,compiledPath:t}){if(t.startsWith(on))return!1;if(!this.resolvePatterns||this.resolvePatterns.length===0)return!0;let n=He(e)||Tt(e)&&t||e;if(n.startsWith("webpack-internal:///"))return!0;let i=Jd(e)?!1:lv(),o=this.rebaseRemoteToLocal(n);return(0,lF.default)((o!==n?[n,o]:[n]).map(Be),this.resolvePatterns,{dot:!0,nocase:!i}).length>0}rebaseRemoteToLocal(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return Ea(Uo.isAbsolute(e)?Uo.resolve(e):e);let t=Ju(this.options.remoteRoot,e);if(t.startsWith(".."))return"";let n=Ki(this.options.localRoot,t);return n=Ea(n),this.logger.verbose("runtime.sourcemap",`Mapped remoteToLocal: ${e} -> ${n}`),hr(n)}rebaseLocalToRemote(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return e;let t=Ju(this.options.localRoot,e),n=Ki(this.options.remoteRoot,t);return n=Ve(n,!0),this.logger.verbose("runtime.sourcemap",`Mapped localToRemote: ${e} -> ${n}`),n}normalizeSourceMapUrl(e){e=e.replace(yY,"");let t=e.lastIndexOf("?");return t!==-1&&e.slice(t-4,t)!==".vue"&&(e=e.slice(0,t)),e}canMapPath(e){return Uo.posix.isAbsolute(e)||Uo.win32.isAbsolute(e)||Lr(e)}};var nI="https?:\\/\\/[^\\/]+\\/",jo=class extends iu{constructor(t,n,i,o){super(i,o);this.vueMapper=t;this.fsUtils=n}absolutePathToUrlPath(t){t=qo.normalize(t);let{baseUrl:n,pathMapping:i}=this.options,o=["/",i["/"]],s=Object.entries(i).sort(([u,l],[p,d])=>d.length-l.length||p.length-u.length).find(([,u])=>Kd(u,t))||o;if(!s)return{url:ye(t),needsWildcard:!1};if(n&&Lr(n))return{url:ja(t),needsWildcard:!1};let a=to(qo.relative(s[1],t)),c=s[0].replace(/\/$|^\//g,"");return c&&(a=c+"/"+a),!n&&!Tf(a)?{url:a,needsWildcard:!0}:{url:mf(n,a),needsWildcard:!1}}async urlToAbsolutePath({url:t,map:n}){let i=t.indexOf("?");return i!==-1&&t.slice(i-4,i)!==".vue"&&(t=t.slice(0,i)),n?this.sourceMapSourceToAbsolute(t,n):this.simpleUrlToAbsolute(t)}async simpleUrlToAbsolute(t){if(!t)return;if(t=this.sourceMapOverrides.apply(t),Lr(t)){let s=He(t);if(await this.fsUtils.exists(s))return s;let a=lE(t);return await this.fsUtils.exists(a)?a:s}let n;try{let s=new pF.URL(t);if(!s.pathname||s.pathname==="/"?n="index.html":n=s.pathname,s.protocol==="webpack-internal:")return}catch{n=t}let i=qo.extname(n),o=n.replace(/^\//,"").split(/[\/\\]/);for(;o.length>0;){let s="/"+o.join("/"),a=await wp(s,this.options.pathMapping,this.logger);if(a){if(!i&&await this.fsUtils.exists(a+".html"))return a+".html";if(await this.fsUtils.exists(a))return a}o.shift()}}async sourceMapSourceToAbsolute(t,n){if(!this.shouldResolveSourceMap(n.metadata))return;switch(this.vueMapper.getVueHandling(t)){case 2:return;case 1:let a=await this.vueMapper.lookup(t);if(a)return Ve(a);break;default:}t=this.normalizeSourceMapUrl(t);let{pathMapping:i}=this.options,o=xg(n.sourceRoot,t),s=this.sourceMapOverrides.apply(o);if(s!==o){s=Ve(s);let a=hr(i["/"],"..","ClientApp",Ju(i["/"],s));return this.options.clientID==="visualstudio"&&o.startsWith("webpack:///")&&!await this.fsUtils.exists(s)&&await this.fsUtils.exists(a)?a:s}return Lr(t)?He(t):qo.isAbsolute(t)?Ve(t):hr(await Cg(n.sourceRoot,n.metadata.compiledPath,i,wp,this.logger),t)}absolutePathToUrlRegexp(t){let n=this.absolutePathToUrlPath(t),i=n.url,o=i.length;i.endsWith("index.html")?(o=i.length-10-1,i=i.slice(0,o)+"\\/?($|index(\\.html)?)"):i.endsWith(".html")&&(o=i.length-5,i=i.slice(0,o)+"(\\.html)?");let s=0;n.needsWildcard&&(i=nI+i,s=nI.length,o+=nI.length);let a=Mr(i,[s,o]);return n.needsWildcard?`${Mr(ye(t))}|${a}`:a}};jo=C([(0,Sp.injectable)(),g(0,(0,Sp.inject)($c)),g(1,(0,Sp.inject)(tr))],jo);var Rg=class extends jo{constructor(t,n,i,o){super(t,n,i,o);this.blazorInCodespacesRegexpSubstitution="$1:\\$2";if(this.options.remoteFilePrefix){let s=`\\${dF.default.sep}`,a=this.options.remoteFilePrefix.replace(new RegExp(s,"g"),s);this.blazorInCodespacesRegexp=new RegExp(`^${a}${s}([A-z])\\$${s}(.*)$`)}else this.blazorInCodespacesRegexp=new RegExp("")}absolutePathToUrlRegexp(t){if(this.options.remoteFilePrefix){let n=t.replace(this.blazorInCodespacesRegexp,this.blazorInCodespacesRegexpSubstitution),o=to(n).replace(/^(\w):(.*)$/,"$1$2"),s=Mr(o);if(s){let a=`dotnet://.*\\.dll/${s}`;return this.logger.verbose("runtime.breakpoints","absolutePathToUrlRegexp.blazor.remoteFs",{absolutePath:t,dotnetUrlRegexp:a}),a}}else{let n=ye(t),i=Mr(n),o=super.absolutePathToUrlRegexp(t);return i.includes(o)?i:`${i}|${o}`}return super.absolutePathToUrlRegexp(t)}};var fF=require("url");function hF(r){if("file"in r&&r.file)return ja(r.file);if(r.url)try{let e=new fF.URL(r.url);return e.pathname="/",e.search="",e.hash="",e.protocol==="data:"?void 0:e.href}catch{}}var Js=S(require("path")),gF=require("url");var mF="node:",qi=class r extends iu{constructor(t,n,i,o){super(i,o);this.fsUtils=t;this.linkedBp=n;this.options=i;this.logger=o}static shouldWarnAboutSymlinks(t){return"runtimeArgs"in t&&!t.runtimeArgs?.includes("--preserve-symlinks")}static getOptions(t){return{workspaceFolder:t.__workspaceFolder,resolveSourceMapLocations:t.resolveSourceMapLocations,basePath:t.cwd,sourceMapOverrides:t.sourceMapPathOverrides,remoteRoot:t.remoteRoot,localRoot:t.localRoot}}derive(t){return new r(this.fsUtils,this.linkedBp,{...this.options,...t},this.logger)}get resolutionOptions(){return this.options}async urlToAbsolutePath({url:t,map:n}){t=this.normalizeSourceMapUrl(t);let i=this.sourceMapOverrides.apply(t),o=i!==t;if(t=i,t.startsWith(mF)&&this.options.basePath)return t=Js.join(this.options.basePath,"lib",t.slice(mF.length)),t.endsWith(".js")||(t+=".js"),t;if(n)return this.sourceMapSourceToAbsolute(t,n,o);let s=He(t);if(s)return this.rebaseRemoteToLocal(s);if(Tf(t))t=o?i:new gF.URL(t).pathname.slice(1);else if(Js.isAbsolute(t))t=this.sourceMapOverrides.apply(t);else return`${yi}/${t}`;let a=hr(this.options.basePath??"",t);return this.rebaseRemoteToLocal(a)}absolutePathToUrl(t){return ye(this.rebaseLocalToRemote(Js.normalize(t)))}async absolutePathToUrlRegexp(t){let n=t;try{n=await this.fsUtils.realPath(t)}catch{}return Cf(n,t)?Mr(this.absolutePathToUrl(t)):(this.linkedBp?.warn(),Mr(this.absolutePathToUrl(t))+"|"+Mr(this.absolutePathToUrl(n)))}async sourceMapSourceToAbsolute(t,n,i){if(!this.shouldResolveSourceMap(n.metadata))return;if(i)return Ea(t);let o=xg(n.sourceRoot,t),s=this.sourceMapOverrides.apply(o);return s!==o?Ve(s):Lr(t)?this.rebaseRemoteToLocal(He(t)):!Js.isAbsolute(t)&&this.options.basePath?hr(await Cg(this.options.remoteRoot&&Bt(n.sourceRoot)&&this.rebaseRemoteToLocal(n.sourceRoot)||n.sourceRoot,n.metadata.compiledPath,{"/":this.options.basePath},aF(this.fsUtils,n.metadata.compiledPath),this.logger),t):this.rebaseRemoteToLocal(t)||t}};var mn=Symbol("ISourcePathResolverFactory"),ou=class{constructor(e,t){this.fsUtils=e;this.linkedBp=t}create(e,t){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new qi(this.fsUtils,qi.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,qi.getOptions(e),t);throw new Error(`Not usable for type ${e.type}`)}};ou=C([(0,Tr.injectable)(),g(0,(0,Tr.inject)(tr)),g(1,(0,Tr.optional)()),g(1,(0,Tr.inject)(tI))],ou);var su=class{constructor(e,t,n,i){this.initializeParams=e;this.vueMapper=t;this.fsUtils=n;this.linkedBp=i}create(e,t){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new qi(this.fsUtils,qi.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,qi.getOptions(e),t);{let n=!!e.inspectUri;return new(n?Rg:jo)(this.vueMapper,this.fsUtils,{workspaceFolder:e.__workspaceFolder,resolveSourceMapLocations:e.resolveSourceMapLocations,baseUrl:hF(e),localRoot:null,remoteRoot:null,pathMapping:{"/":e.webRoot,...e.pathMapping},sourceMapOverrides:e.sourceMapPathOverrides,clientID:this.initializeParams.clientID,remoteFilePrefix:e.__remoteFilePrefix},t)}}};su=C([(0,Tr.injectable)(),g(0,(0,Tr.inject)(or)),g(1,(0,Tr.inject)($c)),g(2,(0,Tr.inject)(tr)),g(3,(0,Tr.optional)()),g(3,(0,Tr.inject)(tI))],su);var yF=require("url");var Ag=class extends Do{constructor(){super(...arguments);this.baseFilter=ro(this.launchParams);this.filter=t=>{let{debugWebWorkerExtHost:n,debugWebviews:i}=this.launchParams;return!!(n&&(t.type==="worker"&&t.title.startsWith("DebugExtensionHostWorker")||t.type==="page"&&t.title.includes("[Extension Development Host]"))||i&&t.type==="iframe"&&this.baseFilter(t))}}static async connectRenderer(t,n,i,o,s,a){let u=await t.rootSession().Target.attachToBrowserTarget({});if(!u)return;let l=t.createSession(u.sessionId);return new this(t,void 0,l,n,o,s,i,a)}waitForMainTarget(t){let n=this.launchParams;return n.debugWebWorkerExtHost&&this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(async({targetInfo:i})=>{if(!i.url.includes(n.__sessionId))return;let o=await this._browser.Target.attachToTarget({targetId:i.targetId,flatten:!0});o&&this.attachedToTarget(i,o.sessionId,!1)})),super.waitForMainTarget(t)}attachedToTarget(t,n,i,o){let s=super.attachedToTarget(t,n,i||this.filter(t),o,!1);return t.type==="iframe"&&s.setComputeNameFn(bY),s}},bY=r=>{let e;try{e=new yF.URL(r.targetInfo.url)}catch{return}switch(e.searchParams.get("purpose")){case"customEditor":return`${e.searchParams.get("extensionId")} editor: ${e.host}`;case"notebookRenderer":return`Notebook Renderer: ${e.host}`;default:let t=e.searchParams.get("extensionId");return`Webview: ${t?t+" ":""} ${e.host}`}};var gn=class extends Xr{constructor(t,n,i){super(t,n);this.pathResolverFactory=i;this.closeWhenTargetsEmpty=!1}async launch(t,n){if(t.type!=="pwa-extensionHost"||t.request!=="attach")return{blockSessionTermination:!1};let i=gn.debugIdTorendererDebugAddr.get(t.__sessionId);if(!i)return{blockSessionTermination:!1};let o=Pa({name:"Webview",type:"pwa-chrome",request:"attach",address:i,__workspaceFolder:t.__workspaceFolder,timeout:0,urlFilter:"",resolveSourceMapLocations:t.resolveSourceMapLocations,...t.rendererDebugOptions});return o.__sessionId=t.__sessionId,o.debugWebWorkerExtHost=t.debugWebWorkerHost,o.debugWebviews=t.debugWebviews,super.launch(o,n).catch(s=>this.logger.error("runtime.exception","Error in webview attach",{err:s})),{blockSessionTermination:!1}}async acquireConnectionInner(t,n,i){return new ot(await Xt.create(n.address,i),this.logger,t)}async getTargetFilter(t){return t.filter}async createTargetManager(t,n,i){return new Ag(t,void 0,t.rootSession(),this.pathResolverFactory.create(n,this.logger),this.logger,i.telemetryReporter,n,i.targetOrigin)}};gn.debugIdTorendererDebugAddr=new Map,gn=C([(0,au.injectable)(),g(0,(0,au.inject)(q)),g(1,(0,au.inject)(Pe)),g(2,(0,au.inject)(mn))],gn);var vF=S($());var kg=class r{constructor(){this.target={queue:[]}}connectTo(e){this.target={logger:e}}info(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:1})}verbose(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:0})}warn(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:2})}error(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:3})}fatal(e,t,n){this.log({tag:e,timestamp:Date.now(),message:t,metadata:n,level:4})}log(e){this.target&&("queue"in this.target?this.target.queue.push(e):this.target.logger.log(e))}getRecentLogs(){return this.target?"queue"in this.target?this.target.queue:this.target.logger.getRecentLogs():[]}assert(e,t){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",t,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(t);debugger;return!1}return!0}setup(){throw new Error("A ProxyLogger cannot be setup()")}dispose(){this.target=void 0}forTarget(){return new r}};var bF=Symbol("ITargetOrigin"),Dg=class{constructor(e){this.id=e}},Og=class{constructor(e){this.id=e}};var Mg=class{constructor(e,t){this.parentList=e;this.logger=t;this.targets=new ii;this.onTerminatedEmitter=new A;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;e.onAdd(([,n])=>{n.parent&&this.targets.get(n.parent.id)&&this.targets.add(n.id,n.target)}),e.onRemove(([n])=>{this.targets.remove(n)&&!this.targets.size&&this.onTerminatedEmitter.fire({killed:!0,code:0})})}async launch(e,t){if(e.type!=="node-terminal"||e.request!=="attach")return{blockSessionTermination:!1};let n=this.parentList.get(e.delegateId);if(n===void 0)return setTimeout(()=>this.onTerminatedEmitter.fire({killed:!0,code:0}),1),{blockSessionTermination:!0};let i=n.target.targetOrigin();if(!(i instanceof Og))throw new Error("Expected delegate session to have a mutable target origin");let o=n.target.logger;if(!(o instanceof kg))throw new Error("Expected delegate session to have a proxy logger");return i.id=t.targetOrigin.id,o.connectTo(this.logger),setTimeout(()=>{this.targets.add(e.delegateId,n.target),n.dap.connect(t.dap)},0),{blockSessionTermination:!0}}terminate(){for(let e of this.targets.value())e.stop();return Promise.resolve()}restart(){for(let e of this.targets.value())e.restart();return Promise.resolve()}targetList(){return[...this.targets.value()]}dispose(){this.terminate()}};var vY=0,Ys=class{constructor(){this.delegateSessions=new ii;this.refsByTarget=new WeakMap}createLauncher(e){return new Mg(this.delegateSessions,e)}addDelegate(e,t,n){let i={id:vY++,target:e,dap:t,parent:n&&this.refsByTarget.get(n)};return this.refsByTarget.set(e,i),this.delegateSessions.add(i.id,i),i.id}removeDelegate(e){let t=this.refsByTarget.get(e);t&&this.delegateSessions.remove(t.id)}};Ys=C([(0,vF.injectable)()],Ys);var BF=S($());var be=class r{constructor(e,t,n){this.major=e;this.minor=t;this.patch=n}static parse(e){let t=e.split(".").map(Number);if(t.length!==3||t.some(isNaN))throw new SyntaxError(`Input string '${e}' is not a semver`);return new r(t[0],t[1],t[2])}static min(e,t){return e.lt(t)?e:t}compare(e){return this.major-e.major||this.minor-e.minor||this.patch-e.patch}gt(e){return this.compare(e)>0}gte(e){return this.compare(e)>=0}lt(e){return this.compare(e)<0}lte(e){return this.compare(e)<=0}toString(){return`${this.major}.${this.minor}.${this.patch}`}};var MF=S($());var DF=S(IF()),ui=S(require("fs")),Qs=S($()),OF=S(require("net")),cI=S(require("os")),uI=S(require("path"));var Fg=class{constructor(e,t){this.sessionId=e;this.sink=t;this.onMessageEmitter=new A;this.onEndEmitter=new A;this.disposables=new Te;this.onMessage=this.onMessageEmitter.event;this.onEnd=this.onEndEmitter.event;this.disposables.push(t.NodeWorker.on("detachedFromWorker",n=>{n.sessionId===e&&(this.onEndEmitter.fire(),this.dispose())}),t.NodeWorker.on("receivedMessageFromWorker",n=>{n.sessionId===e&&this.onMessageEmitter.fire([n.message,new Vr])}))}send(e){this.sink.NodeWorker.sendMessageToWorker({message:e,sessionId:this.sessionId})}dispose(){this.disposables.isDisposed||(this.disposables.dispose(),this.onEndEmitter.fire())}};var xF=":::";var sI=require("path"),rwe=(0,sI.join)(__dirname,"watchdog.js"),CF=(0,sI.join)(__dirname,"bootloader.js");var Pp=S(Ge()),ur=S($()),lr=require("path");var Ip=S($()),PF=require("path");var Xs=Symbol("IPackageJsonProvider");var cu=class{constructor(e,t){this.fs=e;this.config=t;this.getPath=ne(async()=>{if(this.config.type!=="pwa-node"||this.config.request!=="launch")return;let e=await Pf(this.fs,this.config.cwd,"package.json");return e?(0,PF.join)(e,"package.json"):void 0});this.getContents=ne(async()=>{let e=await this.getPath();if(e)try{let t=await this.fs.readFile(e);return JSON.parse(t.toString())}catch{return}})}};cu=C([(0,Ip.injectable)(),g(0,(0,Ip.inject)(tr)),g(1,(0,Ip.inject)(le))],cu);var Wo=Symbol("INodeBinaryProvider");function TF(r,e){return r.has(1)?e.addNodeOption("--inspect-publish-uid=http"):e}var NY=new Set(["npm","yarn","pnpm","tnpm","cnpm"]),EF=r=>NY.has((0,lr.basename)(r,(0,lr.extname)(r))),RF=(r,e)=>{if(!(!r||!EF(r)))return e.find(t=>!t.startsWith("-")&&t!=="run"&&t!=="run-script")},aI=new be(12,0,0),FY=new be(8,0,0),BY=[{inclusiveMin:new be(16,0,0),inclusiveMax:new be(16,3,99),message:Pp.t("Some breakpoints might not work in your version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes. Details: https://aka.ms/AAcsvqm")},{inclusiveMin:new be(7,0,0),inclusiveMax:new be(8,99,99),message:Pp.t("You're running an outdated version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes.")}],cr=class{constructor(e,t){this.path=e;this.version=t;this.capabilities=new Set;t===void 0&&(t=aI),t.gte(new be(12,0,0))&&this.capabilities.add(0),t.gte(new be(12,6,0))&&this.capabilities.add(1),t.gte(new be(22,14,0))&&t.lt(new be(24,0,0))&&UY.includes(pv(e))&&this.capabilities.add(2)}get isPreciselyKnown(){return this.version!==void 0}get warning(){if(this.version){for(let e of BY)if(e.inclusiveMax.gte(this.version)&&e.inclusiveMin.lte(this.version))return e}}has(e,t){return!this.isPreciselyKnown&&t!==void 0?t:this.capabilities.has(e)}},Cp=class extends O{constructor(t,n){super(gT(t.toString(),n));this.version=t;this.location=n}},AF=["node","node64","electron"],UY=[...AF,"npx","npm"],jY=new Map([[11,new be(12,0,0)],[10,new be(12,0,0)],[9,new be(12,0,0)],[8,new be(12,0,0)],[7,new be(12,0,0)],[6,new be(12,0,0)],[5,new be(10,0,0)],[4,new be(10,0,0)],[3,new be(10,0,0)],[2,new be(8,0,0)],[1,new be(8,0,0)]]),xp=class{constructor(e,t,n,i){this.logger=e;this.fs=t;this.packageJson=n;this.launchConfig=i;this.knownGoodMappings=new Map}async resolveAndValidate(e,t="node",n,i){try{return await this.resolveAndValidateInner(e,t,n,i)}catch(o){if(!(o instanceof Cp))throw o;if(await this.shouldTryDebuggingAnyway(o))return new cr(o.location,o.version instanceof be?o.version:void 0);throw o}}shouldTryDebuggingAnyway(e){return Promise.resolve(!1)}async resolveNodeModulesLocation(e,t,n){if(!n||(0,lr.isAbsolute)(t)||!(0,lr.isAbsolute)(n))return;let i=this.launchConfig.__workspaceFolder;if(i)return dv(n,o=>Kd(i,o)?Bb(this.fs,(0,lr.join)(o,"node_modules",".bin",t),e):Promise.resolve(void 0))}async resolveAndValidateInner(e,t,n,i){let o=await this.resolveBinaryLocation(t,e);if(o||(o=await this.resolveNodeModulesLocation(e,t,i)),this.logger.info("runtime.launch","Using binary at",{location:o,executable:t}),!o)throw new O(Jb(t,Pp.t("path does not exist")));if(n)return new cr(o,new be(n,0,0));let s=pv(o);if(s==="deno")return new cr(o,new be(20,0,0));if(!AF.includes(s)){if(EF(o)){let m=await this.packageJson.getPath();m&&(e=e.addToPath((0,lr.resolve)((0,lr.dirname)(m),"node_modules/.bin"),"prepend"))}try{let m=await this.resolveAndValidateInner(e,"node",void 0,i);return new cr(o,m.version)}catch(m){if(CT(m,9230))throw m;return new cr(o,void 0)}}if(o.startsWith("/snap/"))return new cr(o,void 0);let a=this.knownGoodMappings.get(o);if(a)return a;let c=await this.getVersionText(o,i);if(!c)return new cr(o,void 0);this.logger.info("runtime.launch","Discovered version",{version:c});let u=/v([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(c);if(!u)throw new Cp(c,o);let[,l,p,d]=u.map(Number),f=new be(l,p,d);if(s==="electron"){let m=await this.resolveAndValidate(e);f=be.min(jY.get(f.major)??aI,m.version??aI)}if(f.lt(FY))throw new Cp(f,o);let h=new cr(o,f);return this.knownGoodMappings.set(o,h),h}async resolveBinaryLocation(e,t){return e&&(0,lr.isAbsolute)(e)?await Bb(this.fs,e,t):await zd(this.fs,e,t.value)}async getVersionText(e,t){try{let{stdout:n}=await fg(e,["--version"],{env:wt.processEnv().defined(),cwd:t});return n.trim()}catch(n){throw t&&!(await zi(this.fs,t))?.isDirectory()?new O(mT(t)):new O(Jb(e,n.message))}}};xp=C([(0,ur.injectable)(),g(0,(0,ur.inject)(q)),g(1,(0,ur.inject)(Ae)),g(2,(0,ur.inject)(Xs)),g(3,(0,ur.inject)(le))],xp);var uu=class extends xp{constructor(t,n,i,o,s){super(t,n,i,o);this.vscode=s}async shouldTryDebuggingAnyway({message:t}){if(!this.vscode)return!1;let n=Pp.t("Yes");return await this.vscode.window.showErrorMessage(t,n)===n}};uu=C([g(0,(0,ur.inject)(q)),g(1,(0,ur.inject)(Ae)),g(2,(0,ur.inject)(Xs)),g(3,(0,ur.inject)(le)),g(4,(0,ur.optional)()),g(4,(0,ur.inject)(Kn))],uu);var kF=require("path");var Bg=class{constructor(e,t,n,i,o,s,a={},c){this.launchConfig=e;this.targetOriginValue=t;this.connection=n;this.targetInfo=o;this.logger=s;this.lifecycle=a;this._parent=c;this._serialize=Promise.resolve(void 0);this._attached=!1;this._onNameChangedEmitter=new A;this._onDisconnectEmitter=new A;this.entryBreakpoint=void 0;this.onDisconnect=this._onDisconnectEmitter.event;this.onNameChanged=this._onNameChangedEmitter.event;this.connection=n,this._cdp=i,i.pause(),this._waitingForDebugger=o.type==="waitingForDebugger",o.title?this._targetName=`${(0,kF.basename)(o.title)} [${o.processId}]`:this._targetName=`[${o.processId}]`,i.Target.on("targetDestroyed",()=>this.connection.close()),n.onDisconnected(()=>this._disconnected())}id(){return this.targetInfo.targetId}processId(){return this.targetInfo.processId}name(){return this._targetName}fileName(){return this.targetInfo.title}type(){return"node"}targetOrigin(){return this.targetOriginValue}parent(){return this._parent}async initialize(){this.lifecycle.initialized&&(this.entryBreakpoint=await this.lifecycle.initialized(this)||void 0)}waitingForDebugger(){return this._waitingForDebugger}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?ye(e):e}supportsCustomBreakpoints(){return!1}supportsXHRBreakpoints(){return!1}executionContextName(){return this._targetName}hasParent(){return!!this._parent}async runIfWaitingForDebugger(){await this._cdp.Runtime.runIfWaitingForDebugger({})}async _disconnected(){this._onDisconnectEmitter.fire()}canAttach(){return!this._attached}async attach(){return this._serialize=this._serialize.then(async()=>{if(!this._attached)return this._doAttach()}),this._serialize}async _doAttach(){this._waitingForDebugger=!1,this._attached=!0;let e=await this._cdp.Target.attachToTarget({targetId:this.targetInfo.targetId});if(!e){this.logger.info("runtime.launch","Failed to attach to target",{targetId:this.targetInfo.targetId});return}this._cdp.NodeWorker.enable({waitForDebuggerOnStart:!0}),e&&"__dynamicAttach"in e&&(await this._cdp.Runtime.enable({}),await this._cdp.Debugger.enable({}));let t;return this._cdp.Runtime.on("executionContextCreated",n=>{n.context.auxData&&n.context.auxData.isDefault&&(t=n.context.id)}),this._cdp.Runtime.on("executionContextDestroyed",n=>{n.executionContextId===t&&this.connection.close()}),this._cdp}async afterBind(){this._cdp.resume()}canDetach(){return this._attached}async detach(){this._serialize=this._serialize.then(async()=>{this._waitingForDebugger&&await(await this._doAttach())?.Runtime.runIfWaitingForDebugger({}),this._attached&&this._doDetach()})}async _doDetach(){await Promise.all([this._cdp.Target.detachFromTarget({targetId:this.targetInfo.targetId}),this._cdp.NodeWorker.disable({})]),this.connection.close(),this._attached=!1}canRestart(){return!1}restart(){}canStop(){return!0}stop(){try{this.lifecycle.close&&this.lifecycle.close(this)}finally{this.connection.close()}}};var ci=class{constructor(e,t,n,i){this.pathProvider=e;this.logger=t;this.portLeaseTracker=n;this.pathResolverFactory=i;this.serverConnections=new Set;this.targets=new ii;this.onTerminatedEmitter=new A;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;this.bootloaderFile=ne(this.getBootloaderFile.bind(this));this.seenOpeners=new Map}async launch(e,t){let n=this.resolveParams(e);if(!n)return{blockSessionTermination:!1};this._stopServer();let{server:i,pipe:o}=await this._startServer(t.telemetryReporter),s=this.logger.forTarget(),a=this.run={server:i,serverAddress:o,params:n,context:t,logger:s,pathResolver:this.pathResolverFactory.create(n,this.logger)};return await this.launchProgram(a),{blockSessionTermination:!0}}async terminate(){this.program?await this.program.stop():this.onProgramTerminated({code:0,killed:!0})}async restart(e){if(!this.run)return;let t=this.program;t&&(this.program=void 0,await t.stop(),await Promise.race([ae(2e3).then(()=>!1),Promise.all([...this.serverConnections].map(i=>new Promise(o=>i.onDisconnected(o))))])||(this.logger.warn("runtime.launch","Timeout waiting for server connections to close"),this.closeAllConnections())),await this.launchProgram({...this.run,params:e?this.resolveParams(e)??this.run.params:this.run.params,context:{...this.run.context,cancellationToken:this.run.params.timeout>0?pt.withTimeout(this.run.params.timeout).token:Ut}})}targetList(){return[...this.targets.value()]}dispose(){this._stopServer()}onProgramTerminated(e){this.onTerminatedEmitter.fire(e),this._stopServer(),this.program=void 0}resolveNodePath(e,t="node"){return this.pathProvider.resolveAndValidate(wt.merge(wt.processEnv(),this.getConfiguredEnvironment(e)),t,e.nodeVersionHint,e.cwd)}getConfiguredEnvironment(e){let t=wt.empty;if(e.envFile)try{t=t.merge(WY(e.envFile))}catch(n){throw new O(hT(n.message))}return t.merge(e.env)}async resolveEnvironment({params:e,serverAddress:t},n,i){let o=this.getConfiguredEnvironment(e),s=await this.bootloaderFile(e.cwd,n),a={inspectorIpc:t,deferredMode:!1,waitForDebugger:"",execPath:await zd(ui.promises,"node",process.env),onlyEntrypoint:!e.autoAttachChildProcesses,verbose:e.trace===!0||typeof e.trace=="object"&&e.trace.stdio?!0:void 0,autoAttachMode:"always",mandatePortTracking:this.portLeaseTracker.isMandated?!0:void 0,...i},c={NODE_OPTIONS:` --require ${s.interpolatedPath} `,VSCODE_INSPECTOR_OPTIONS:xF+JSON.stringify(a),ELECTRON_RUN_AS_NODE:null},u=o.lookup("NODE_OPTIONS");u&&(c.NODE_OPTIONS+=` ${u} `);let l=wt.processEnv().lookup("NODE_OPTIONS");return l&&(c.NODE_OPTIONS+=` ${l}`),o.merge({...c})}createLifecycle(e,t,n){return{}}async _startServer(e){let t=Gd(),n=await new Promise((i,o)=>{let s=OF.createServer(a=>this._startSession(a,e)).on("error",o).listen(t,()=>i(s))});return{pipe:t,server:n}}_stopServer(){this.run?.server.close(),this.run=void 0,this.bootloaderFile.value?.then(e=>e.dispose()),this.bootloaderFile.forget(),this.closeAllConnections()}closeAllConnections(){this.serverConnections.forEach(e=>e.close()),this.serverConnections.clear()}async _startSession(e,t){if(!this.run)return;let{connection:n,cdp:i,targetInfo:o}=await this.acquireTarget(e,t,this.run.logger);if(!this.run){e.destroy();return}o.processId===void 0&&(o.processId=Number(o.targetId));let s=o.openerId;for(;s&&!this.targets.get(s)&&this.seenOpeners.has(s);)s=this.seenOpeners.get(s)?.openedBy;let a=new Bg(this.run.params,this.run.context.targetOrigin,n,i,o,this.run.logger,this.createLifecycle(i,this.run,o),s?this.targets.get(s):void 0);this.seenOpeners.set(o.targetId,{openedBy:o.openerId}),this.listenToWorkerDomain(i,t,a),this.targets.add(o.targetId,a),a.onDisconnect(()=>this.targets.remove(o.targetId))}async listenToWorkerDomain(e,t,n){e.NodeWorker.on("attachedToWorker",i=>{let o=new Fg(i.sessionId,e),s=new Sc(n.launchConfig,{attached:!0,canAccessOpener:!1,type:"node-worker",targetId:`${n.id()}-${i.sessionId}`,title:i.workerInfo.title,url:i.workerInfo.url,openerId:n.id()},n,n.targetOrigin(),new ot(o,n.logger,t).rootSession(),n.logger),a=new Te;a.push(o),a.push(n.onDisconnect(()=>a.dispose())),a.push(o.onEnd(()=>a.dispose())),a.callback(()=>this.targets.remove(s.id())),this.targets.add(s.id(),s)})}async acquireTarget(e,t,n){let i=new ot(new oi(n,e),n,t);this.serverConnections.add(i),i.onDisconnected(()=>this.serverConnections.delete(i));let o=i.rootSession(),{targetInfo:s}=await new Promise(u=>o.Target.on("targetCreated",u)),a=s,c=this.portLeaseTracker.register(a.processInspectorPort);return i.onDisconnected(()=>c.dispose()),{targetInfo:a,cdp:o,connection:i,logger:n}}async getBootloaderFile(e,t){let n=Be(CF);if(!n.includes(" "))return{interpolatedPath:n,dispose:()=>{}};if(t.has(0))return{interpolatedPath:`"${n}"`,dispose:()=>{}};let i=`require(${JSON.stringify(n)})`;if(!cI.tmpdir().includes(" ")||!e){let a=uI.join(cI.tmpdir(),"vscode-js-debug-bootloader.js");return await ui.promises.writeFile(a,i),{interpolatedPath:a,dispose:()=>{}}}let o=".vscode-js-debug-bootloader.js",s=uI.join(e,o);return await ui.promises.writeFile(s,i),{interpolatedPath:`./${o}`,dispose:()=>ui.unlinkSync(s)}}async gatherTelemetryFromCdp(e,t){for(let n=0;n<8;n++){let i=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:"typeof process === 'undefined' || process.pid === undefined ? 'process not defined' : ({ processId: process.pid, nodeVersion: process.version, architecture: process.arch })"+$e()});if(!this.program)return;if(!i||!i.result.value){this.logger.error("runtime.target","Undefined result getting telemetry");return}if(typeof i.result.value!="object"){this.logger.info("runtime.target","Process not yet defined, will retry"),await ae(50*2**n);continue}let o=i.result.value;return t.context.telemetryReporter.report("nodeRuntime",{version:o.nodeVersion,arch:o.architecture}),this.program.gotTelemetery(o),o}}};ci=C([(0,Qs.injectable)(),g(0,(0,Qs.inject)(Wo)),g(1,(0,Qs.inject)(q)),g(2,(0,Qs.inject)(sr)),g(3,(0,Qs.inject)(mn))],ci);function WY(r){if(!ui.existsSync(r))return{};let e=VY(ui.readFileSync(r,"utf8"));return DF.parse(Buffer.from(e))}function VY(r){return r&&r[0]==="\uFEFF"&&(r=r.substr(1)),r}var $Y=["NODE_OPTIONS","VSCODE_INSPECTOR_OPTIONS"],Vo=class extends ci{async appendEnvironmentVariables(e,t){let n="typeof Deno==='object'?'deno':typeof process==='undefined'||process.pid===undefined?'process not defined':(()=>{"+Object.entries(t.defined()).map(([i,o])=>{let s=JSON.stringify(i);return $Y.includes(i)?`process.env[${s}]=(process.env[${s}]||'')+${JSON.stringify(o)}`:`process.env[${s}]=${JSON.stringify(o)}`}).join(";")+"})()"+$e();for(let i=0;i<200;i++){let o=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:n});if(!o){this.logger.error("runtime.target","Undefined result setting child environment vars");return}if(!o.exceptionDetails&&o.result.value!=="process not defined")return;this.logger.error("runtime.target","Error setting child environment vars",o),await ae(50)}}};Vo=C([(0,MF.injectable)()],Vo);var Ug=class{constructor(e,t){this.a=e;this.b=t;this.stopped=Promise.race([this.a.stopped.then(async e=>await this.b.stop()&&e),this.b.stopped.then(async e=>await this.a.stop()&&e)])}gotTelemetery(e){this.a.gotTelemetery(e),this.b.gotTelemetery(e)}async stop(){return(await Promise.all([this.a.stop(),this.b.stop()]))[0]}},jg=class{constructor(e,t,n){this.child=e;this.logger=t;this.killBehavior=n;this.killed=!1;this.stopped=new Promise((i,o)=>{e.once("exit",s=>i({killed:this.killed,code:s||0})),e.once("error",s=>o({killed:this.killed,code:1,error:s}))})}gotTelemetery(){}stop(){return this.killed=!0,dn(this.child.pid,this.logger,this.killBehavior),this.stopped}},Zs=class{constructor(){this.stopped=new Promise(e=>this.stopDefer=e)}gotTelemetery(e){this.telemetry=e}stop(){return this.stopDefer({code:0,killed:!0}),this.stopped}},$o=class extends Zs{constructor(t){super();this.wd=t;t.onEnd(n=>{this.stopDefer(n),this.wd.dispose()})}stop(){return this.wd.dispose(),this.stopped}},lu=class r{constructor(e,t,n){this.terminalResult=e;this.logger=t;this.killBehavior=n;this.didStop=!1;this.stopped=new Promise(e=>this.onStopped=t=>{this.didStop=!0,e({code:0,killed:t})});e.processId&&(this.liveness=new Lo(e.processId,this.onStopped,r.terminationPollInterval))}static{this.terminationPollInterval=1e3}static{this.killConfirmInterval=200}gotTelemetery({processId:e}){if(this.didStop){dn(e,this.logger,this.killBehavior);return}this.liveness??=new Lo(e,this.onStopped,1e3)}stop(){return this.didStop?this.stopped:(this.didStop=!0,this.liveness?(dn(this.liveness.pid,this.logger,this.killBehavior),this.liveness.updateInterval(r.killConfirmInterval)):this.terminalResult.shellProcessId?(dn(this.terminalResult.shellProcessId,this.logger,this.killBehavior),this.liveness=new Lo(this.terminalResult.shellProcessId,this.onStopped,r.killConfirmInterval)):this.onStopped(!0),this.stopped)}};var FF=S(require("net"));var LF=require("crypto"),NF=()=>(0,LF.randomBytes)(12).toString("hex");var li=class r{constructor(e,t){this.info=e;this.server=t;this.onEndEmitter=new A;this.cts=new pt;this.gracefulExit=!1;this.targetAlive=!1;this.targetInfo={targetId:this.info.ownId??NF(),processId:Number(this.info.pid)||0,type:this.info.waitForDebugger?"waitingForDebugger":"",title:this.info.scriptName,url:"file://"+this.info.scriptName,openerId:this.info.openerId,attached:!0,canAccessOpener:!1,processInspectorPort:Number(new URL(this.info.inspectorURL).port)};this.onEnd=this.onEndEmitter.event;this.listenToServer()}get isTargetAlive(){return this.targetAlive}static async attach(e){let t=await new Promise((i,o)=>{let s=FF.createConnection(e.ipcAddress,()=>i(s));s.on("error",o)}),n=new oi(Jr.null,t);return new r(e,n)}listenToServer(){let{server:e,targetInfo:t}=this;e.send(JSON.stringify({method:"Target.targetCreated",params:{targetInfo:t}})),e.onMessage(async([n])=>{if(this.target&&!n.includes("Target.attachToTarget")&&!n.includes("Target.detachFromTarget")){this.target.send(n);return}let i=await this.execute(n);i&&e.send(JSON.stringify(i))}),e.onEnd(()=>{this.disposeTarget(),this.onEndEmitter.fire({killed:this.gracefulExit,code:this.gracefulExit?0:1})})}dispose(){this.gracefulExit=!0,this.cts.dispose(!0),this.disposeTarget(),this.server.dispose()}async execute(e){let t=JSON.parse(e);switch(t.method){case"Target.attachToTarget":return this.target&&this.disposeTarget(),this.target=await this.createTarget(),{id:t.id,result:{sessionId:this.targetInfo.targetId,__dynamicAttach:this.info.dynamicAttach?!0:void 0}};case"Target.detachFromTarget":return this.gracefulExit=!0,this.disposeTarget(),{id:t.id,result:{}};default:this.target?.send(t);return}}async createTarget(){this.gracefulExit=!1;let e=await Xt.create(this.info.inspectorURL,this.cts.token,this.info.remoteHostHeader);return e.onMessage(([t])=>this.server.send(t)),e.onEnd(()=>{e&&this.server.send(JSON.stringify({method:"Target.targetDestroyed",params:{targetId:this.targetInfo.targetId,sessionId:this.targetInfo.targetId}})),this.targetAlive=!1,this.server.dispose()}),e}disposeTarget(){this.target&&(this.target.dispose(),this.target=void 0)}};var lI=class extends $o{constructor(t,n){super(t);this.logger=n;this.stopped.then(()=>{this.telemetry&&dn(this.telemetry.processId,this.logger,"polite")})}},pu=class extends Vo{constructor(){super(...arguments);this.restarting=!1}async restart(){this.restarting=!0,this.onProgramTerminated({code:0,killed:!0,restart:!0}),this.program?.stop()}resolveParams(t){return t.type==="pwa-extensionHost"&&t.request==="attach"?t:void 0}async launchProgram(t){let n=await Qc(`http://localhost:${t.params.port}`,t.context.cancellationToken,this.logger),i=await li.attach({ipcAddress:t.serverAddress,scriptName:"Extension Host",inspectorURL:n,waitForDebugger:!0,dynamicAttach:!0}),o=this.program=new lI(i,this.logger);this.program.stopped.then(s=>{o===this.program&&this.onProgramTerminated(s)})}createLifecycle(t,n,i){return i.openerId?{}:{initialized:()=>this.onFirstInitialize(t,n,i)}}async onFirstInitialize(t,n,i){this.setEnvironmentVariables(t,n,i.targetId);let o=await this.gatherTelemetryFromCdp(t,n),s=this.program;if(o&&s){let a=new lu({processId:o.processId},this.logger,"forceful");a.stopped.then(()=>s.stop()),s.stopped.then(()=>{this.restarting||a.stop()})}}async setEnvironmentVariables(t,n,i){if(!n.params.autoAttachChildProcesses)return;let o=await this.resolveEnvironment(n,new cr("node",be.parse(process.versions.node)),{openerId:i});return this.appendEnvironmentVariables(t,o.update("ELECTRON_RUN_AS_NODE",null))}};pu=C([(0,BF.injectable)()],pu);var Tp=require("fs"),UF=S($());var du=class extends ci{resolveParams(e){return e.type==="pwa-extensionHost"&&e.request==="launch"?e:void 0}async launchProgram(e){let t=e.params.port||await kl(),n=await e.context.dap.launchVSCodeRequest({args:HY(e.params,t),env:this.getConfiguredEnvironment(e.params).defined(),debugRenderer:e.params.debugWebviews||e.params.debugWebWorkerHost});n.rendererDebugAddr&&gn.debugIdTorendererDebugAddr.set(e.params.__sessionId,n.rendererDebugAddr),this.program=new Zs,this.program.stop()}};du=C([(0,UF.injectable)()],du);var HY=(r,e)=>{let t=r.args.map(n=>{if(n.startsWith("-")){let i=n.split("=",2);return i.length===2&&((0,Tp.existsSync)(i[1])||(0,Tp.existsSync)(i[1]+".js"))?{prefix:i[0]+"=",path:i[1]}:{prefix:n}}else{try{let i=(0,Tp.lstatSync)(n);if(i.isDirectory())return{prefix:"--folder-uri=",path:n};if(i.isFile())return{prefix:"--file-uri=",path:n}}catch{}return{path:n}}});return r.noDebug||t.unshift({prefix:`--inspect-brk-extensions=${e}`}),t.unshift({prefix:`--debugId=${r.__sessionId}`}),t};var XF=S(Ge()),ea=S($());var jF=require("crypto"),Ep=require("fs"),qF=require("os"),WF=S(require("path")),qg=class r{constructor(){this.disposed=!1;this.path=WF.join((0,qF.tmpdir)(),`node-debug-callback-${(0,jF.randomBytes)(8).toString("hex")}`);this.file=Ep.promises.open(this.path,"w")}static{this.updateInterval=1e3}static{this.recencyDeadline=2e3}static isValid(e){try{let t=(0,Ep.readFileSync)(e);return t.length?t.readDoubleBE()>Date.now()-r.recencyDeadline:!1}catch{return!1}}async startTouchLoop(){await this.touch(),this.disposed||(this.updateInterval=setInterval(()=>this.touch(),r.updateInterval))}async touch(e=()=>Date.now()){let t=await this.file,n=Buffer.alloc(8);n.writeDoubleBE(e()),await t.write(n,0,n.length,0)}async dispose(){if(!this.disposed){this.disposed=!0,this.updateInterval&&clearInterval(this.updateInterval);try{await(await this.file).close(),await Ep.promises.unlink(this.path)}catch{}}}};var GF=require("fs");var $F=require("path");var VF=require("child_process");var Wg=class{constructor(e=VF.spawn){this.spawn=e}lookup(e,t){return new Promise((n,i)=>{let o=this.createProcess(),s=this.createParser();o.on("error",i),o.stderr.on("error",a=>i(`Error finding processes: ${a.toString()}`)),o.stdout.pipe(new Mo(`
`)).on("data",a=>{let c=s(a.toString());c&&(t=e(c,t))}),o.on("close",(a,c)=>{a===0?n(t):c?i(new Error(`process terminated with signal: ${c}`)):a&&i(new Error(`process terminated with exit code: ${a}`))})})}};var fu=class extends Wg{constructor(t){super();this.fsUtils=t}async getWorkingDirectory(t){try{let{stdout:n}=await fg("lsof",["-a","-dcwd","-Fn",`-p${t}`]),i=n.trim().split(`
`).pop().slice(1);return i&&(0,$F.isAbsolute)(i)&&await this.fsUtils.exists(i)?i:void 0}catch(n){if(n instanceof yp)return;throw n}}createProcess(){return this.spawn("ps",["-xo",`pid=PID,ppid=PPID,comm=${"a".repeat(256)},command=COMMAND`])}createParser(){let t;return n=>{if(!t){t=n.indexOf("COMMAND");return}let i=/^\W*([0-9]+)\W*([0-9]+)\W*/.exec(n);if(i)return{pid:Number(i[1]),ppid:Number(i[2]),command:n.slice(i[0].length,t).trim(),args:n.slice(t).trim()}}}};var Vg=class extends fu{createProcess(){return this.spawn("ps",["-axo","pid=PID,ppid=PPID,comm:30,command=COMMAND"])}createParser(){let e=super.createParser();return t=>{let n=e(t);if(!n)return;let i=n.args.indexOf(n.command);if(i===-1)return n;for(i=i+n.command.length;i<n.args.length&&n.args[i]!==" ";)i++;return n.command=n.args.substr(0,i),n.args=n.args.substr(i+1),n}}};var $g=class{async getWorkingDirectory(){}async lookup(e,t){let n=await Ig();for(let i of n.getProcessInfo()){let o="",s,a=i.commandLine.indexOf('" ');if(a===-1){let c=i.commandLine.indexOf(" ");c===-1?s=i.commandLine:(s=i.commandLine.slice(0,c),o=i.commandLine.slice(c+1))}else s=i.commandLine.slice(1,a),o=i.commandLine.slice(a+2);t=e({args:o,command:s,date:i.creationDate*1e3,pid:i.processId,ppid:i.parentProcessId},t)}return t}};var HF=new sn(GF.promises),zF=process.platform==="win32"?new $g:process.platform==="darwin"?new fu(HF):new Vg(HF),GY=ne(()=>{let r=["--inspect(?:-brk)?","(?:=",["(?:",["(?:","(?<address>\\[[0-9a-f:]*\\]|[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+|(?:[a-z][a-z0-9\\.]*))","(?::(?<port1>\\d+))?",")"],"|",["(?:",":?","(?<port2>\\d+)?",")"],")"],")?"].flat(1/0).join("");return new RegExp(r,"i")});function KF(r){let e=/--inspect-port=(\d+)/,t,n,i=GY().exec(r);if(i?.groups){let o=i.groups.port1||i.groups.port2;n=o?Number(o):9229,t=i.groups.address??"127.0.0.1"}return i=e.exec(r),i&&i.length===2&&(t||="127.0.0.1",n=parseInt(i[1])),{address:t,port:n}}async function JF(r,e,t,n=Ut){let i=await zY(r.pid,t);if(!i)return[];let o=[],s=i.children.slice();for(;s.length;){let a=s.pop();s=s.concat(a.children);let{port:c}=KF(a.args);c&&o.push(QS(`http://${r.hostname}:${c}`,n,t,!0).then(u=>li.attach({ipcAddress:r.ipcAddress,scriptName:"Child Process",inspectorURL:u,waitForDebugger:!0,dynamicAttach:!0,pid:String(a.pid),openerId:e})).catch(u=>t.info("internal","Could not spawn WD for child process",{err:u,port:c,child:a})))}return(await Promise.all(o)).filter(a=>!!a)}async function zY(r,e){let t=new Map;t.set(0,{children:[],pid:0,ppid:0,command:"",args:""});try{await zF.lookup(({pid:i,ppid:o,command:s,args:a})=>(i!==o&&t.set(i,{pid:i,ppid:o,command:s,args:a,children:[]}),t),null)}catch(i){e.warn("internal","Error getting child process tree",i);return}let n=t.values();for(let i of n){let o=t.get(i.ppid);o&&o!==i&&o.children.push(i)}return!isNaN(r)&&r>0?t.get(r):t.get(0)}var YF=S($());var pi=class{create(e){return e===!1?new pI:e===!0?new Hg({maxAttempts:1/0,delay:1e3}):new Hg({maxAttempts:e.maxAttempts??1/0,delay:e.delay??1e3})}};pi=C([(0,YF.injectable)()],pi);var Hg=class r{constructor(e,t=0){this.options=e;this.attempt=t}get delay(){return this.options.delay}next(){return this.attempt===this.options.maxAttempts?void 0:new r(this.options,this.attempt+1)}reset(){return this.attempt?new r(this.options):this}},pI=class{constructor(){this.delay=-1}next(){}reset(){return this}};var hu=class extends Vo{constructor(t,n,i,o,s=new pi){super(t,n,o,i);this.restarters=s}resolveParams(t){return t.type==="pwa-node"&&t.request==="attach"?t:void 0}async launchProgram(t){let n=async(o,s)=>{let a=this.program,c;try{t.params.websocketAddress?c=t.params.websocketAddress:c=await Qc(`http://${t.params.address}:${t.params.port}`,s&&t.params.timeout>0?pt.withTimeout(t.params.timeout).token:t.context.cancellationToken,this.logger,t.params.remoteHostHeader)}catch(p){if(a&&a===s)return i(o,a,{killed:!1,code:1});throw p}let u=await li.attach({ipcAddress:t.serverAddress,scriptName:"Remote Process",inspectorURL:c,remoteHostHeader:t.params.remoteHostHeader,waitForDebugger:!0,dynamicAttach:!0}),l=this.program=new $o(u);l.stopped.then(p=>i(o.reset(),l,p))},i=async(o,s,a)=>{if(this.program!==s)return;if(a.killed){this.onProgramTerminated(a);return}let c=o.next();if(!c){this.onProgramTerminated(a);return}t.context.dap.output({output:XF.t(`Lost connection to debugee, reconnecting in {0}ms\r
`,c.delay)});let u=new Zs;this.program=u;let l=await Promise.race([ae(c.delay),u.stopped]);this.program===u&&(l?this.onProgramTerminated(a):n(c,u))};return n(this.restarters.create(t.params.restart))}async terminate(t){await super.terminate(),t&&this.telemetry&&dn(this.telemetry.processId,this.logger)}createLifecycle(t,n,i){if(i.openerId)return{};let o;return{initialized:async()=>{o=this.onFirstInitialize(t,n,i),await o},close:()=>{this.targetList().length&&this.program?.stop(),o?.then(s=>s.dispose())}}}async onFirstInitialize(t,n,i){let o=new qg;await o.startTouchLoop();let s=new cr("node",void 0);try{s=await this.resolveNodePath(n.params)}catch{}let[a]=await Promise.all([this.gatherTelemetryFromCdp(t,n),this.setEnvironmentVariables(t,n,o.path,i.targetId,s)]);return this.telemetry=a,a&&n.params.attachExistingChildren&&JF({pid:a.processId,nodePath:s.path,hostname:n.params.address,ipcAddress:n.serverAddress},i.targetId,this.logger).catch(c=>this.logger.warn("internal","Error watching child processes",{err:c})),o}async setEnvironmentVariables(t,n,i,o,s){if(!n.params.autoAttachChildProcesses)return;if(!await Ua(n.params.address)){this.logger.warn("runtime.target","Cannot attach to children of remote process");return}let a=await this.resolveEnvironment(n,s,{requireLease:i,openerId:o});return this.appendEnvironmentVariables(t,a)}};hu=C([(0,ea.injectable)(),g(0,(0,ea.inject)(Wo)),g(1,(0,ea.inject)(q)),g(2,(0,ea.inject)(mn)),g(3,(0,ea.inject)(sr))],hu);var Er=S($()),yu=require("path");function QF(r){if(!r.runtimeArgs||r.attachSimplePort)return;let e=[];for(let t of r.runtimeArgs)/^--inspect-brk(=|$)/.test(t)?r.stopOnEntry=r.stopOnEntry||!0:e.push(t);r.runtimeArgs=e}var ZF=require("crypto"),mu=require("fs"),eB=require("os"),tB=S(require("path")),Gg=class r{constructor(){this.path=tB.join((0,eB.tmpdir)(),`node-debug-callback-${(0,ZF.randomBytes)(8).toString("hex")}`);this.disposed=!1}static{this.pollInterval=200}read(e=r.pollInterval){return this.readPromise?this.readPromise:(this.readPromise=new Promise((t,n)=>{let i=setInterval(()=>{if(this.disposed){clearInterval(i),t(void 0);return}if((0,mu.existsSync)(this.path)){try{t(JSON.parse((0,mu.readFileSync)(this.path,"utf-8")))}catch(o){n(o)}finally{this.dispose()}clearInterval(i)}},e)}),this.readPromise)}dispose(){if(!this.disposed){this.disposed=!0;try{(0,mu.unlinkSync)(this.path)}catch{}}}};var ta=S(require("path"));var Rp=Symbol("IProgramLauncher"),zg=r=>{let e=r.program;if(e&&ta.isAbsolute(e)){let t=ta.relative(r.cwd,e);e=ta.isAbsolute(t)?t:`.${ta.sep}${t}`}return e?[...r.runtimeArgs,e,...ol(r.args)]:[...r.runtimeArgs,...ol(r.args)]};var KY=async(r,e)=>{if(typeof e.stopOnEntry=="string")return(0,yu.resolve)(e.cwd,e.stopOnEntry);if(e.program)return(0,yu.resolve)(e.cwd,e.program);for(let t of ol(e.args)){if(t.startsWith("-"))continue;let n=(0,yu.resolve)(e.cwd,t);if(await r.exists(n))return n}},gu=class extends ci{constructor(t,n,i,o,s,a,c,u,l){super(t,n,l,u);this.bpPredictor=i;this.launchers=o;this.restarters=s;this.fsUtils=a;this.packageJson=c}resolveParams(t){let n;if(t.type==="pwa-node"&&t.request==="launch"?n={...t}:"server"in t&&t.server&&"program"in t.server&&(n={...t.server}),!!n)return QF(n),n}async launchProgram(t){t.params.program&&(t.params.program=await this.tryGetCompiledFile(t.params.program)),this.attachSimplePort=await this.getSimpleAttachPortIfAny(t.params);let n=async i=>{this.program&&this.program.stop();let o=await this.resolveNodePath(t.params,t.params.runtimeExecutable||void 0),s=o.warning;s&&t.context.dap.output({category:"stderr",output:s.message});let a=new Gg,c=await this.resolveEnvironment(t,o,{fileCallback:a.path});this.attachSimplePort?(t.params.attachSimplePort||t.context.dap.output({category:"stderr",output:"Using legacy attach mode for --inspect-brk in npm scripts. We recommend removing --inspect-brk, and using `stopOnEntry` in your launch.json if you need it."}),c=c.merge({NODE_OPTIONS:null})):c=TF(o,c);let u={...t.params,env:c.value},l="--experimental-network-inspection";t.params.experimentalNetworking==="off"||(o.has(2)||t.params.experimentalNetworking==="on")&&(u.runtimeArgs=[l,...u.runtimeArgs]);let p=this.launchers.find(f=>f.canLaunch(u));if(!p)throw new Error("Cannot find an appropriate launcher for the given set of options");let d=await p.launchProgram(o.path,u,t.context);if(this.attachSimplePort){let f=await li.attach({ipcAddress:t.serverAddress,scriptName:"Remote Process",inspectorURL:await Qc(`http://127.0.0.1:${this.attachSimplePort}`,t.context.cancellationToken,this.logger),waitForDebugger:!0,dynamicAttach:!0});d=new Ug(d,new $o(f))}else a.read().then(f=>{f&&d.gotTelemetery(f)});this.program=d,d.stopped.then(async f=>{if(a.dispose(),this.program!==d)return;if(f.killed||f.code===0){this.onProgramTerminated(f);return}let h=i.next();if(!h){this.onProgramTerminated(f);return}await ae(h.delay),this.program===d&&n(h)})};return n(this.restarters.create(t.params.restart))}async getSimpleAttachPortIfAny(t){if(t.attachSimplePort)return t.attachSimplePort;let n=RF(t.runtimeExecutable,t.runtimeArgs);if(!(!n||!(await this.packageJson.getContents())?.scripts?.[n]?.includes("--inspect-brk")))return t.port??9229}createLifecycle(t,n,{targetId:i}){return{initialized:async()=>{if(this.attachSimplePort&&await this.gatherTelemetryFromCdp(t,n),!n.params.stopOnEntry)return;let o=await KY(this.fsUtils,n.params);if(!o){this.logger.warn("runtime","Could not resolve program entrypointfrom args");return}let s="(?:entryBreakpoint){0}",a=ye(o),c=Mr(a)+s,u=await t.Debugger.setBreakpointByUrl({urlRegex:c,lineNumber:0,columnNumber:0});return u?.breakpointId?{cdpId:u?.breakpointId,path:a}:void 0},close:()=>{let o=Number(i);if(o>0)try{process.kill(o)}catch{}}}}async tryGetCompiledFile(t){t=Ve(t);let n=(0,yu.extname)(t);if(!n||n===".js")return t;let i=await this.bpPredictor.getPredictionForSource(t);if(!i||i.size===0)return t;let o=Fa(i.values());return o?(this.logger.info("runtime.launch","Updating entrypoint to compiled file",{from:t,to:o.compiledPath,candidates:i.size}),o.compiledPath):t}};gu=C([(0,Er.injectable)(),g(0,(0,Er.inject)(Wo)),g(1,(0,Er.inject)(q)),g(2,(0,Er.inject)(ls)),g(3,(0,Er.multiInject)(Rp)),g(4,(0,Er.inject)(pi)),g(5,(0,Er.inject)(tr)),g(6,(0,Er.inject)(Xs)),g(7,(0,Er.inject)(mn)),g(8,(0,Er.inject)(sr))],gu);var vu=S(require("fs")),rB=require("fs"),Kg=S($()),nB=S(require("os")),at=S(require("path"));var iB=Symbol("INvmResolver");var bu=class{constructor(e=new sn(rB.promises),t=process.env,n=process.arch,i=process.platform,o=nB.homedir()){this.fsUtils=e;this.env=t;this.arch=n;this.platform=i;this.homedir=o}async resolveNvmVersionPath(e){let t,n=[],i=this.parseVersionString(e),o=this.env.NVS_HOME;if(!o){let s=this.platform==="win32"?at.join(this.env.LOCALAPPDATA||"","nvs"):at.join(this.env.HOME||"",".nvs");vu.existsSync(s)&&(o=s)}if(i.nvsFormat||o){if(t=await this.resolveNvs(o,i),!t&&i.nvsFormat)throw new O(Kb(e,"nvs"));n.push("nvs")}if(!t)if(this.platform==="win32")this.env.NVM_HOME&&(t=await this.resolveWindowsNvm(e),n.push("nvm-windows"));else{let s=this.env.NVM_DIR||at.join(this.homedir,".nvm");await this.fsUtils.exists(s)&&(t=await this.resolveUnixNvm(e),n.push("nvm"))}if(!t){let s=this.platform==="win32"?this.env.FNM_DIR||at.join(this.env.APPDATA||"","fnm"):this.env.FNM_DIR||at.join(this.homedir,".fnm");await this.fsUtils.exists(s)&&(t=await this.resolveFnm(e,s),n.push("fnm"))}if(!n.length)throw new O(zb());if(!t||!await this.fsUtils.exists(t))throw new O(Kb(e,n.join("/")));return{directory:t,binary:await this.getBinaryInFolder(t)}}async getBinaryInFolder(e){return await pa(["node64.exe","node64"].map(t=>this.fsUtils.exists(at.join(e,t))))?"node64":"node"}async resolveNvs(e,{remoteName:t,semanticVersion:n,arch:i}){if(!e)throw new O(pT());let o=this.findBinFolderForVersion(at.join(e,t),n,s=>vu.existsSync(at.join(s,i)));if(o)return this.platform!=="win32"?at.join(o,i,"bin"):at.join(o,i)}async resolveUnixNvm(e){let t=this.env.NVM_DIR;if(!t){let i=at.join(this.env.HOME||"",".nvm");await this.fsUtils.exists(i)&&(t=i)}if(!t)throw new O(zb());let n=this.findBinFolderForVersion(at.join(t,"versions","node"),`v${e}`);return n?at.join(n,"bin"):void 0}async resolveWindowsNvm(e){let t=this.env.NVM_HOME;if(!t)throw new O(dT());return this.findBinFolderForVersion(t,`v${e}`)}async resolveFnm(e,t){let n=this.findBinFolderForVersion(at.join(t,"node-versions"),`v${e}`);if(n)return this.platform==="win32"?at.join(n,"installation"):at.join(n,"installation","bin")}findBinFolderForVersion(e,t,n){if(!vu.existsSync(e))return;let i=vu.readdirSync(e);if(i.includes(t))return at.join(e,t);let o=i.filter(s=>s.startsWith(`${t}.`)).sort(JY).filter(s=>n?n(at.join(e,s)):!0).pop();return o?at.join(e,o):void 0}parseVersionString(e){let n=/^(([\w-]+)\/)?(v?(\d+(\.\d+(\.\d+)?)?))(\/((x86)|(32)|((x)?64)|(arm\w*)|(ppc\w*)))?$/i.exec(e);if(!n)throw new Error("Invalid version string: "+e);let i=!!(n[2]||n[8]),o=n[2]||"node",s=n[4]||"",a=YY(n[8]||this.arch);return{nvsFormat:i,remoteName:o,semanticVersion:s,arch:a}}};bu=C([(0,Kg.injectable)(),g(0,(0,Kg.inject)(tr))],bu);var JY=(r,e)=>{let t=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(r),n=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(e);if(!t||!n)return(n?-1:0)+(t?1:0);let[,i,o,s]=t,[,a,c,u]=n;return Number(i)-Number(a)||Number(o)-Number(c)||Number(s)-Number(u)};function YY(r){switch(r){case"32":case"x86":case"ia32":return"x86";case"64":case"x64":case"amd64":return"x64";case"arm":let e=process.config.variables.arm_version;return e?"armv"+e+"l":"arm";default:return r}}var oB=require("child_process"),Yg=S($());var _u=class{constructor(e){this.logger=e}canLaunch(e){return e.console==="internalConsole"}async launchProgram(e,t,n){let{executable:i,args:o,shell:s,cwd:a}=bp(e,zg(t),t.cwd);n.dap.output({category:"console",output:[i,...o].join(" ")+`
`});let c=(0,oB.spawn)(i,o,{shell:s,cwd:a,env:wt.merge(wt.processEnv(),t.env).defined()});return t.outputCapture==="console"?this.discardStdio(n.dap,c):this.captureStdio(n.dap,c),new jg(c,this.logger,t.killBehavior)}captureStdio(e,t){t.stdout.pipe(new Jg).on("data",n=>e.output({category:"stdout",output:n.toString()})).resume(),t.stderr.pipe(new Jg).on("data",n=>e.output({category:"stderr",output:n.toString()})).resume()}discardStdio(e,t){let n=[],i=()=>{n&&e.output({category:"stderr",output:Buffer.concat(n).toString()})},o=Buffer.from("Debugger attached."),s=a=>{a.includes(o)?(n=void 0,t.stderr.removeListener("data",s)):n&&n.push(a)};t.stderr.on("data",s),t.on("error",a=>{i(),e.output({category:"stderr",output:a.stack||a.message})}),t.on("exit",a=>{a!==null&&a>0&&(i(),e.output({category:"stderr",output:`Process exited with code ${a}\r
`}))}),t.stdout.resume(),t.stderr.resume()}};_u=C([(0,Yg.injectable)(),g(0,(0,Yg.inject)(q))],_u);var Jg=class extends Mo{constructor(){super(3);this.etxSpotted=!1;this.splitSuffix=Buffer.from(`
`)}_transform(t,n,i){return!this.etxSpotted&&t.includes(3)&&(this.etxSpotted=!0),this.etxSpotted?super._transform(t,n,i):(this.push(t),i())}};var Xg=S($());var wu=class{constructor(e){this.logger=e}canLaunch(e){return e.internalConsoleOptions,e.console!=="internalConsole"}async launchProgram(e,t,n){let i={kind:t.console==="integratedTerminal"?"integrated":"external",title:t.name,cwd:t.cwd,args:[e,...zg(t)],env:Ca(t.env),argsCanBeInterpretedByShell:!Array.isArray(t.args)},o;try{o=await this.sendLaunchRequest(i,n)}catch(s){throw new O(fT(s.message))}return new lu(o,this.logger,t.killBehavior)}sendLaunchRequest(e,t){return t.dap.runInTerminalRequest(e)}};wu=C([(0,Xg.injectable)(),g(0,(0,Xg.inject)(q))],wu);var sB=S($());var Su=class{getTreatment(e,t){return Promise.resolve(t)}};Su=C([(0,sB.injectable)()],Su);var aB=S($());var ra=class{constructor(){this.flushEmitter=new A;this.onFlush=this.flushEmitter.event}report(){}reportOperation(){}attachDap(){}flush(){this.flushEmitter.fire()}dispose(){}};ra=C([(0,aB.injectable)()],ra);var cB=r=>{},uB=r=>{};var pB=(r,e,t,n)=>{let i=new ey.Container;return i.parent=r,i.bind(le).toConstantValue(e.launchConfig),i.bind(ac).toConstantValue(i),i.bind(rr).toConstantValue(t),i.bind(je).toConstantValue(n),i.bind(ri).toConstantValue(e),i.bind(bF).toConstantValue(e.targetOrigin()),i.bind(is).to(Us).inSingletonScope(),i.bind(Dl).to(po).inSingletonScope(),i.bind(qn).to(as).inSingletonScope(),i.bind(zf).to(Qa).inSingletonScope(),i.bind(so).toSelf().inSingletonScope(),e.sourcePathResolver&&i.bind(Pe).toConstantValue(e.sourcePathResolver),i.bind(Ds).toSelf(),i.bind(pm).toDynamicValue(o=>o.container.get(Ds).create()).inSingletonScope(),e.parent()&&(i.bind(ls).to(us).inSingletonScope(),i.bind(Wn).to($a).inSingletonScope()),i.bind(yt).to(process.env.DA_TEST_DISABLE_TELEMETRY?ra:Jn).inSingletonScope().onActivation(ze),i.bind(qr).toSelf().inSingletonScope(),i.bind(bt).toSelf().inSingletonScope(),i.bind(_o).toSelf().inSingletonScope(),i.bind(ao).to(ni).inSingletonScope().onActivation(ze),i.bind(mo).toSelf().inSingletonScope(),i.bind(Ac).to(Rc).inSingletonScope(),i.bind(Oh).to(bc).inSingletonScope(),i.bind(Fr).to(Ja).inSingletonScope(),i.bind(im).to(Tc).inSingletonScope(),i.bind(vo).to(Pc).inSingletonScope(),i.bind(hh).to(uc).inSingletonScope().onActivation(ze),i.bind(_t).toSelf(),i.bind(xr).toSelf(),i.bind(Cr).toSelf(),i.bind(mm).to(Oi).inSingletonScope(),i.bind(gm).to(Dc).inSingletonScope(),i.bind(Dh).to(gc).inSingletonScope().onActivation(ze),i},dB=r=>{let e=new ey.Container;e.parent=r,e.bind(ac).toConstantValue(e),e.bind(q).to(Jr).inSingletonScope().onActivation(ze),e.bind(is).to(Us).inSingletonScope(),e.bind(yt).to(process.env.DA_TEST_DISABLE_TELEMETRY?ra:Jn).inSingletonScope().onActivation(ze),e.bind(Ln).to(Ln).inSingletonScope(),e.bind(vi).to(vi).inSingletonScope(),e.bind($c).to(Vc).inSingletonScope(),e.bind(Wa).to(Xc).inSingletonScope(),e.bind(Wo).to(uu),e.bind(ai).toSelf().inSingletonScope().onActivation(ze),e.bind(pi).toSelf(),e.bind(Jt).to(gn).onActivation(ze),e.bind(Jt).to(pu).onActivation(ze),e.bind(Jt).to(du).onActivation(ze),e.bind(Jt).to(gu).onActivation(ze),e.bind(Rp).to(_u),e.bind(Rp).to(wu),e.bind(Xs).to(cu).inSingletonScope(),uB(e),e.bind(Jt).to(hu).onActivation(ze),e.bind(Ks).toSelf().inSingletonScope().onActivation(ze),e.bind(Jt).toService(Ks),e.bind(Jt).to(eu).inSingletonScope().onActivation(ze),e.bind(Jt).to(ru).inSingletonScope().onActivation(ze),e.bind(Jt).to(tu).inSingletonScope().onActivation(ze),e.bind(Jt).to(nu).inSingletonScope().onActivation(ze),e.bind(Jt).to(Xr).onActivation(ze),e.bind(Jt).toDynamicValue(()=>r.get(Ys).createLauncher(e.get(q))).inSingletonScope(),e.isBound(vl)||e.bind(vl).to(Ec).inSingletonScope(),e.bind(Kv).to(cc).inSingletonScope().onActivation(ze);let t=n=>i=>new n(i.container.get(Vv),i.container.get(Ae),i.container.get($v));return e.bind(_s).toDynamicValue(t(Zg.ChromeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","chrome"),e.bind(_s).toDynamicValue(t(Zg.EdgeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","edge"),e},fB=r=>{let e=new ey.Container;return e.bind(ac).toConstantValue(e),e.bind(Ys).toSelf().inSingletonScope(),e.bind(ou).toSelf().inSingletonScope(),e.bind(oh).to(Su).inSingletonScope(),e.bind(ch).toConstantValue(new ii),e.bind(eL).to(Hc).inSingletonScope(),e.bind(zn).toConstantValue(r.storagePath),e.bind(vs).toConstantValue(r.isVsCode),e.bind(iB).to(bu),e.bind(sr).to(mc).inSingletonScope(),e.bind(Vv).toConstantValue(process.env),e.bind($v).toConstantValue(lB.default),e.bind(Ae).toConstantValue(Qg.promises),e.bind(tr).toConstantValue(new sn(Qg.promises)),e.bind(Ei).toConstantValue(r.isRemote?"remote":"local"),r.context&&e.bind(oA).toConstantValue(r.context),cB(e),e},hB=(r,e,t)=>{r.bind(op).toConstantValue(nL(e)),r.bind(le).toService(op),r.bind(mn).to(su).inSingletonScope(),r.bind(Oa).toConstantValue(t),r.bind(Pe).toDynamicValue(n=>n.container.get(mn).create(e,n.container.get(q))).inSingletonScope(),r.bind(tr).toConstantValue(Hd.create(e.__remoteFilePrefix,Qg.promises,t)),r.bind(mv).to(no).inSingletonScope().onActivation(ze),r.bind(oo).to(za).inSingletonScope(),r.bind(qe).toSelf().inSingletonScope().onActivation(ze),r.bind(qn).to(as).inSingletonScope(),r.bind(cs).toSelf().inSingletonScope(),r.bind(ls).to(us).inSingletonScope(),r.bind(Wn).to(Va).inSingletonScope()};var TB=require("fs"),EB=S(require("net"));var mB=`\r
\r
`,XY=0,Ap=class{constructor(e,t,n){this.inputStream=e;this.outputStream=t;this._contentLength=-1;this._connectionId=XY++;this.msgEmitter=new A;this.messageReceived=this.msgEmitter.event;this.endedEmitter=new A;this.closed=this.endedEmitter.event;this._handleData=e=>{let t=new Vr;for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let n=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,n.length>0)try{let i=JSON.parse(n);this.logger?.verbose("dap.receive",void 0,{connectionId:this._connectionId,message:i}),this.msgEmitter.fire({message:i,receivedTime:t})}catch(i){console.error("Error handling data: "+(i&&i.message))}continue}}else{let n=this._rawData.indexOf(mB);if(n!==-1){let o=this._rawData.toString("utf8",0,n).split(`\r
`);for(let s=0;s<o.length;s++){let a=o[s].split(/: +/);a[0]==="Content-Length"&&(this._contentLength=+a[1])}this._rawData=this._rawData.slice(n+mB.length);continue}}break}};this.logger=n,this._rawData=Buffer.alloc(0),e.on("end",()=>this.endedEmitter.fire()),e.on("data",this._handleData)}send(e,t=!0,n){let i=JSON.stringify(e);if(t){let s=e;e.type==="response"&&e.command==="source"&&(s={...e,body:{...e.body,content:"<script source>"}}),this.logger?.verbose("dap.send",void 0,{connectionId:this._connectionId,message:s})}let o=`Content-Length: ${Buffer.byteLength(i,"utf8")}\r
\r
${i}`;if(this.outputStream.destroyed){this.logger?.warn("dap.send","Message not sent. Connection was closed."),n?.();return}this.outputStream.write(o,"utf8",s=>{n?.(),s&&(console.log(e),this.logger?.error("dap.send","Error while writing to output stream",s),this.close())})}close(){this.inputStream.destroy(),this.outputStream.destroy()}setLogger(e){return this.logger=e,this}};var CB=S(Ge()),iy=S(require("os"));var QY={connect:async()=>nc},yB=r=>({async connect(e){return await e.Debugger.setAsyncCallStackDepth({maxDepth:r}),nc}}),ZY=r=>{let e=new A,t=!1,n=()=>{t||(t=!0,e.fire())};return{async connect(i){if(t)return await i.Debugger.setAsyncCallStackDepth({maxDepth:r}),nc;let o=new Te;return o.push(e.event(()=>{o.dispose(),i.Debugger.setAsyncCallStackDepth({maxDepth:r})}),i.Debugger.on("breakpointResolved",n),i.Debugger.on("paused",s=>{s.reason!=="instrumentation"&&n()})),o}}},gB=yB(32),bB=r=>r===!1?QY:r===!0?gB:"onAttach"in r?yB(r.onAttach):"onceBreakpointResolved"in r?ZY(r.onceBreakpointResolved):gB;var Qr=S(Ge());var kp=class r{constructor(e,t,n,i){this.asyncStackPolicy=t;this.launchConfig=n;this._services=i;this._disposables=new Te;this._customBreakpoints=[];this._xhrBreakpoints=[];this._threadDeferred=ge();this.breakpointIdCounter=Vd();this._cdpProxyProvider=this._services.get(Dh);this._configurationDoneDeferred=ge(),this.sourceContainer=i.get(bt),this.breakpointManager=i.get(qr);let o=i.get(pm),s=i.get(yt);s.onFlush(()=>{s.report("breakpointStats",this.breakpointManager.statisticsForTelemetry()),s.report("statistics",this.sourceContainer.statistics())}),this.dap=e,this.dap.on("initialize",a=>this.onInitialize(a)),this.dap.on("setBreakpoints",a=>this._onSetBreakpoints(a)),this.dap.on("setExceptionBreakpoints",a=>this.setExceptionBreakpoints(a)),this.dap.on("configurationDone",()=>this.configurationDone()),this.dap.on("loadedSources",()=>this._onLoadedSources()),this.dap.on("disableSourcemap",a=>this._onDisableSourcemap(a)),this.dap.on("source",a=>this._onSource(a)),this.dap.on("threads",()=>this._onThreads()),this.dap.on("stackTrace",a=>this._withThread(c=>c.stackTrace(a))),this.dap.on("variables",a=>this._onVariables(a)),this.dap.on("readMemory",a=>this._onReadMemory(a)),this.dap.on("writeMemory",a=>this._onWriteMemory(a)),this.dap.on("setVariable",a=>this._onSetVariable(a)),this.dap.on("setExpression",a=>this._onSetExpression(a)),this.dap.on("continue",()=>this._withThread(a=>a.resume())),this.dap.on("pause",()=>this._withThread(a=>a.pause())),this.dap.on("next",()=>this._withThread(a=>a.stepOver())),this.dap.on("stepIn",a=>this._withThread(c=>c.stepInto(a.targetId))),this.dap.on("stepOut",()=>this._withThread(a=>a.stepOut())),this.dap.on("restartFrame",a=>this._withThread(c=>c.restartFrame(a))),this.dap.on("scopes",a=>this._withThread(c=>c.scopes(a))),this.dap.on("evaluate",a=>this.onEvaluate(a)),this.dap.on("completions",a=>this._withThread(c=>c.completions(a))),this.dap.on("exceptionInfo",()=>this._withThread(a=>a.exceptionInfo())),this.dap.on("setCustomBreakpoints",a=>this.setCustomBreakpoints(a)),this.dap.on("toggleSkipFileStatus",a=>this._toggleSkipFileStatus(a)),this.dap.on("toggleSkipFileStatus",a=>this._toggleSkipFileStatus(a)),this.dap.on("prettyPrintSource",a=>this._prettyPrintSource(a)),this.dap.on("locations",a=>this._onLocations(a)),this.dap.on("revealPage",()=>this._withThread(a=>a.revealPage())),this.dap.on("getPerformance",()=>this._withThread(a=>o.retrieve(a.cdp()))),this.dap.on("breakpointLocations",a=>this._breakpointLocations(a)),this.dap.on("createDiagnostics",a=>this._dumpDiagnostics(a)),this.dap.on("requestCDPProxy",()=>this._requestCDPProxy()),this.dap.on("setExcludedCallers",a=>this._onSetExcludedCallers(a)),this.dap.on("saveDiagnosticLogs",({toFile:a})=>this._saveDiagnosticLogs(a)),this.dap.on("setSourceMapStepping",a=>this._setSourceMapStepping(a)),this.dap.on("stepInTargets",a=>this._stepInTargets(a)),this.dap.on("setDebuggerProperty",a=>this._setDebuggerProperty(a)),this.dap.on("setSymbolOptions",a=>this._setSymbolOptions(a)),this.dap.on("networkCall",a=>this._doNetworkCall(a)),this.dap.on("enableNetworking",a=>this._withThread(c=>c.enableNetworking(a))),this.dap.on("getPreferredUILocation",a=>this._getPreferredUILocation(a))}async _getPreferredUILocation(e){let t;if(e.originalUrl&&(t=this.sourceContainer.getSourceByOriginalUrl(e.originalUrl)),!t&&e.source&&(t=this.sourceContainer.source(e.source)),!t){if(e.source)return{column:e.column,line:e.line,source:e.source};throw new O(IT())}let n=await this.sourceContainer.preferredUiLocation({columnNumber:e.column+1,lineNumber:e.line+1,source:t});return{column:n.columnNumber-1,line:n.lineNumber-1,source:await n.source.toDap()}}async _doNetworkCall({method:e,params:t}){return this._thread?this._thread.cdp().Network[e](t):Promise.resolve({})}_setDebuggerProperty(e){return this._thread?.cdp().DotnetDebugger.setDebuggerProperty(e),Promise.resolve({})}_setSymbolOptions(e){return this._thread?.cdp().DotnetDebugger.setSymbolOptions(e),Promise.resolve({})}_breakpointLocations(e){return this._withThread(async t=>{let n=this.sourceContainer.source(e.source);return n?{breakpoints:(await this.breakpointManager.getBreakpointLocations(t,n,new Ue(e.line,e.column||1),new Ue(e.endLine||e.line+1,e.endColumn||e.column||1))).map(o=>o.uiLocations.find(s=>s.source===n)).filter(Ct).map(o=>({line:o.lineNumber,column:o.columnNumber}))}:{breakpoints:[]}})}_stepInTargets(e){return this._withThread(async t=>({targets:await t.getStepInTargets(e.frameId)}))}_setSourceMapStepping({enabled:e}){return this.sourceContainer.doSourceMappedStepping=e,Promise.resolve({})}async _saveDiagnosticLogs(e){let t=this._services.get(q).getRecentLogs();return await this._services.get(Ae).writeFile(e,t.map(n=>JSON.stringify(n)).join(`
`)),{}}async launchBlocker(){await this._configurationDoneDeferred.promise,await this._thread?.debuggerReady.promise,await this._services.get(Ac).launchBlocker,await this.breakpointManager.launchBlocker()}async _onSetExcludedCallers({callers:e}){return(await this._threadDeferred.promise).setExcludedCallers(e),{}}async onInitialize(e){console.assert(e.linesStartAt1),console.assert(e.columnsStartAt1),this._services.get(Dl).value=e;let t=r.capabilities(!0);return setTimeout(()=>this.dap.initialized({}),0),setTimeout(()=>this._thread?.dapInitialized(),0),t}static capabilities(e=!1){return{supportsConfigurationDoneRequest:!0,supportsFunctionBreakpoints:!1,supportsConditionalBreakpoints:!0,supportsHitConditionalBreakpoints:!0,supportsEvaluateForHovers:!0,supportsReadMemoryRequest:!0,supportsWriteMemoryRequest:!0,exceptionBreakpointFilters:[{filter:"all",label:Qr.t("Caught Exceptions"),default:!1,supportsCondition:!0,description:Qr.t("Breaks on all throw errors, even if they're caught later."),conditionDescription:'error.name == "MyError"'},{filter:"uncaught",label:Qr.t("Uncaught Exceptions"),default:!1,supportsCondition:!0,description:Qr.t("Breaks only on errors or promise rejections that are not handled."),conditionDescription:'error.name == "MyError"'}],supportsStepBack:!1,supportsSetVariable:!0,supportsRestartFrame:!0,supportsGotoTargetsRequest:!1,supportsStepInTargetsRequest:!0,supportsCompletionsRequest:!0,supportsModulesRequest:!1,additionalModuleColumns:[],supportedChecksumAlgorithms:[],supportsRestartRequest:!0,supportsExceptionOptions:!1,supportsValueFormattingOptions:!0,supportsExceptionInfoRequest:!0,supportTerminateDebuggee:!0,supportsDelayedStackTraceLoading:!0,supportsLoadedSourcesRequest:!0,supportsLogPoints:!0,supportsTerminateThreadsRequest:!1,supportsSetExpression:!0,supportsTerminateRequest:!1,completionTriggerCharacters:[".","[",'"',"'"],supportsBreakpointLocationsRequest:!0,supportsClipboardContext:!0,supportsExceptionFilterOptions:!0,supportsEvaluationOptions:!!e,supportsDebuggerProperties:!!e,supportsSetSymbolOptions:!!e,supportsANSIStyling:!0}}async _onSetBreakpoints(e){return this.breakpointManager.setBreakpoints(e,e.breakpoints?.map(()=>this.breakpointIdCounter())??[])}async setExceptionBreakpoints(e){return await this._services.get(Ac).setBreakpoints(e),{}}async configurationDone(){return this._configurationDoneDeferred.resolve(),{}}async _onLoadedSources(){return{sources:await this.sourceContainer.loadedSources()}}async _onDisableSourcemap(e){let t=this.sourceContainer.source(e.source);if(!t)return we(Qr.t("Source not found"));if(!(t instanceof Qe))return we(Qr.t("Source not a source map"));for(let n of t.compiledToSourceUrl.keys())this.sourceContainer.disableSourceMapForSource(n,!0);return await this._thread?.refreshStackTrace(),{}}async _onSource(e){e.source||(e.source={sourceReference:e.sourceReference}),e.source.path=Ii(e.source.path);let t=this.sourceContainer.source(e.source);if(!t)return we(Qr.t("Source not found"));let n=await t.content();return n===void 0?(t instanceof Qe&&this.dap.suggestDisableSourcemap({source:e.source}),we(Qr.t("Unable to retrieve source content"))):{content:n,mimeType:t.getSuggestedMimeType}}async _onThreads(){let e=[];return this._thread&&e.push({id:this._thread.id,name:this._thread.name()}),{threads:e}}findVariableStore(e){if(!this._thread)return;let t=this._thread.pausedVariables();if(t&&e(t))return t;if(e(this._thread.replVariables))return this._thread.replVariables}async _onLocations(e){let t=this.findVariableStore(o=>o.hasVariable(e.locationReference));if(!t||!this._thread)throw el();let n=await t.getLocations(e.locationReference),i=await this._thread.rawLocationToUiLocationWithWaiting(this._thread.rawLocation(n));if(!i)throw el();return{source:await i.source.toDap(),line:i.lineNumber,column:i.columnNumber}}async _onVariables(e){return{variables:await this.findVariableStore(n=>n.hasVariable(e.variablesReference))?.getVariables(e)??[]}}async _onReadMemory(e){let t=e.memoryReference,n=await this.findVariableStore(i=>i.hasMemory(t))?.readMemory(t,e.offset??0,e.count);return n?{address:"0",data:n.toString("base64"),unreadableBytes:e.count-n.length}:{address:"0",unreadableBytes:e.count}}async _onWriteMemory(e){let t=e.memoryReference;return{bytesWritten:await this.findVariableStore(i=>i.hasMemory(t))?.writeMemory(t,e.offset??0,Buffer.from(e.data,"base64"))}}async _onSetExpression(e){if(!this._thread)throw new O(Qb());let t=await this._thread.evaluate({expression:`${e.expression} = ${rl(e.value)}`,context:"repl",frameId:e.frameId});return{value:t.result,variablesReference:t.variablesReference,indexedVariables:t.indexedVariables,namedVariables:t.namedVariables,presentationHint:t.presentationHint,type:t.type,memoryReference:t.memoryReference,valueLocationReference:t.valueLocationReference}}async _onSetVariable(e){let t=this.findVariableStore(n=>n.hasVariable(e.variablesReference));return t?(e.value=rl(e.value.trim()),t.setVariable(e)):we(Qr.t("Variable not found"))}_withThread(e){if(!this._thread)throw new O(Qb());return e(this._thread)}async _refreshStackTrace(){if(!this._thread)return;this._thread.pausedDetails()&&await this._thread.refreshStackTrace()}createThread(e,t){this._thread=new Cc(this.sourceContainer,e,this.dap,t,this._services.get(oo),this._services.get(q),this._services.get(Fr),this._services.get(Oh),this.launchConfig,this.breakpointManager,this._services.get(im),this._services.get(Ac),this._services.get(mo),this._services.get(vo),this._services.get(Dl));let n=this._services.get(gm);return n.connect(this.dap,this._thread),"profileStartup"in this.launchConfig&&this.launchConfig.profileStartup&&n.start(this.dap,this._thread,{type:_t.type}),this._thread.updateCustomBreakpoints(this._xhrBreakpoints,this._customBreakpoints),this.asyncStackPolicy.connect(e).then(i=>this._disposables.push(i)).catch(i=>this._services.get(q).error("internal","Error enabling async stacks",i)),this.breakpointManager.setThread(this._thread),this._services.get(qe).attach(e),this._threadDeferred.resolve(this._thread),this._thread}async setCustomBreakpoints({ids:e,xhr:t}){return await this._thread?.updateCustomBreakpoints(t,e),this._customBreakpoints=e,this._xhrBreakpoints=t,{}}async _toggleSkipFileStatus(e){return await this._services.get(ao).toggleSkippingFile(e),await this._refreshStackTrace(),{}}async _prettyPrintSource(e){if(!e.source||!this._thread)return{};e.source.path=Ii(e.source.path);let t=this.sourceContainer.source(e.source);if(!t)return we(Qr.t("Source not found"));let n=await t.prettyPrint();if(!n)return we(Qr.t("Unable to pretty print"));let{map:i,source:o}=n;await this.breakpointManager.moveBreakpoints(this._thread,t,i,o),this.sourceContainer.clearDisabledSourceMaps(t);let s=!!this._thread.pausedDetails();return await this._refreshStackTrace(),{source:await o.toDap(),didReveal:s}}onEvaluate(e){return e.expression===".scripts"?this._dumpDiagnostics({fromSuggestion:!1}).then(this.dap.openDiagnosticTool).then(()=>({result:"Opening diagnostic tool...",variablesReference:0})):this._withThread(t=>t.evaluate(e))}async _dumpDiagnostics(e){let t={file:await this._services.get(_o).generateHtml()};return e.fromSuggestion&&this._services.get(yt).report("diagnosticPrompt",{event:"opened"}),t}async _requestCDPProxy(){return await this._cdpProxyProvider.proxy()}dispose(){this._disposables.dispose(),uh(this._services)}};var vB=require("fs"),_B=require("inspector"),ty=class{constructor(e){this.file=e;this.session=new _B.Session;this.session.connect()}async start(){try{await this.post("Profiler.enable")}catch{}await this.post("Profiler.start")}async stop(){let{profile:e}=await this.post("Profiler.stop");await vB.promises.writeFile(this.file,JSON.stringify(e))}dispose(){this.session.disconnect()}post(e,t){return new Promise((n,i)=>this.session.post(e,t,(o,s)=>{o?i(o):n(s)}))}};var ry=S(require("path"));function SB(r,e,t){let n=wB(r,e,"uncaughtException",t),i=wB(r,e,"unhandledRejection",t);return process.addListener("uncaughtException",n),process.addListener("unhandledRejection",i),{dispose:()=>{process.removeListener("uncaughtException",n),process.removeListener("unhandledRejection",i)}}}var wB=(r,e,t,n=!0)=>i=>{rX(i)&&(e.report("error",{"!error":i,error:n?void 0:i,exceptionType:t}),r.error("runtime.exception","Unhandled error in debug adapter",i))},eX=r=>typeof r=="object"&&!!r&&"stack"in r,tX=ry.dirname(ry.dirname(ry.dirname(__dirname)));function rX(r){return!IB||eX(r)&&!!r.stack?.includes(tX)}var IB=!1;function xB(){IB=!0}var ny=class{constructor(e,t,n,i){this._delegate=e;this._rootServices=n;this._disposables=new Te;this._serviceTree=new WeakMap;this._root=new na(void 0);this.getLaunchers=ne(()=>{let e=new Set(this._rootServices.getAll(Jt));for(let t of e)this._disposables.push(t.onTargetListChanged(()=>{let n=this.targetList();this._attachToNewTargets(n,t),this._terminateOrphanThreads(n)}));return e});this._dap=t.dap(),this._targetOrigin=i,this._disposables.callback(()=>uh(n)),this._disposables.push(SB(n.get(q),n.get(yt),n.get(vs))),t.attachTelemetry(n.get(yt));let o=this._dap,s=0,a;o.on("initialize",async c=>{this._rootServices.bind(or).toConstantValue(c);let u=kp.capabilities();return c.clientID==="vscode"&&xB(),setTimeout(()=>o.initialized({}),0),u}),o.on("setExceptionBreakpoints",async()=>({})),o.on("setBreakpoints",async c=>(c.breakpoints?.length&&n.get(qe).notifyHadBreakpoint(),{breakpoints:c.breakpoints?.map(()=>({id:++s,verified:!1,message:CB.t("Unbound breakpoint")}))??[]})),o.on("configurationDone",async()=>({})),o.on("threads",async()=>({threads:[]})),o.on("loadedSources",async()=>({sources:[]})),o.on("breakpointLocations",()=>Promise.resolve({breakpoints:[]})),o.on("attach",async c=>(await this.boot(c,o),{})),o.on("launch",async c=>(await this.boot(c,o),{})),o.on("pause",async()=>({})),o.on("terminate",()=>this._terminateRoot(!0)),o.on("disconnect",c=>this._disconnectRoot(c)),o.on("restart",async({arguments:c})=>(await this._restart(c),{})),o.on("startSelfProfile",async({file:c})=>(a?.dispose(),a=new ty(c),await a.start(),{})),o.on("stopSelfProfile",async()=>(a&&(await a.stop(),a.dispose(),a=void 0),{})),o.on("enableNetworking",()=>Promise.resolve({}))}async _terminateRoot(e){return this._root.state=1,await Promise.all([...this.getLaunchers()].map(t=>t.terminate(e))),await this._root.waitUntilChildrenAre(2),this._root.state=2,{}}async _disconnectRoot(e){return this._root.state<1&&await this._terminateRoot(e.terminateDebuggee),this._rootServices.get(yt).flush(),await this._root.waitUntilChildrenAre(3),this._root.state=3,{}}async boot(e,t){return this._boot(Pa(e,this._rootServices.get(Ei)),t)}async _boot(e,t){nX(t),this.reportBootTelemetry(e),hB(this._rootServices,e,t),this._rootServices.get(q).setup(FP(t,e.trace));let n=e.timeout>0?pt.withTimeout(e.timeout):new pt;e.rootPath&&(e.rootPath=Ii(e.rootPath)),this._launchParams=e;let i=await Promise.all([...this.getLaunchers()].map(o=>this._launch(o,e,n.token)));return Promise.all(i.map(o=>o.terminated)).then(o=>{let s=o.find(Ct);this._markTargetAsTerminated(this._root,{restart:!!s?.restart})}),{}}reportBootTelemetry(e){let t=Pa({type:e.type,request:e.request,name:"<string>",__workspaceFolder:"<workspace>"}),n=(i,o)=>typeof i=="string"?o&&t[o]===i?i:"<string>":i instanceof Array?i.map(s=>n(s)):i&&typeof i=="object"?gi(i,s=>n(s)):i;this._rootServices.get(yt).report("launch",{type:e.type,request:e.request,os:`${iy.platform()} ${iy.arch()}`,nodeVersion:process.version,adapterVersion:zu,parameters:gi(e,n)})}async _restart(e){let t;if(e){let n=this._rootServices.get(op);t=Pa({__workspaceFolder:n.__workspaceFolder,...e},this._rootServices.get(Ei)),n.update(t)}await Promise.all([...this.getLaunchers()].map(n=>n.restart(t)))}async _launch(e,t,n){return(await this.captureLaunch(e,t,n)).blockSessionTermination?{terminated:new Promise(o=>{let s=this._disposables.push(e.onTerminated(a=>{s.dispose(),o(a)}))})}:{terminated:Promise.resolve(void 0)}}async captureLaunch(e,t,n){let i=e.constructor.name,o;try{o=await e.launch(t,{telemetryReporter:this._rootServices.get(yt),cancellationToken:n,targetOrigin:this._targetOrigin,dap:this._dap})}catch(s){throw this._rootServices.get(q).warn("runtime.launch","Launch returned error",{error:s,wasCancelled:n.isCancellationRequested,name:i}),s}return o.blockSessionTermination&&this._rootServices.get(q).info("runtime.launch","Launched successfully",{name:i}),o}dispose(){this._disposables.dispose(),this._terminateOrphanThreads([])}targetList(){let e=[];for(let t of this.getLaunchers())e.push(...t.targetList());return e}async attach(e,t){if(!this._launchParams)throw new Error("Cannot launch before params have been set");let n=e.value;if(!n.canAttach())return;let i=await n.attach();if(!i)return;let o=await this._delegate.acquireDap(n),s=o.dap(),a=this._launchParams;this._asyncStackPolicy||(this._asyncStackPolicy=bB(a.showAsyncStacks));let c=n.parent(),u=c&&this._serviceTree.get(c)||this._rootServices,l=pB(u,n,s,i);o.attachTelemetry(l.get(yt)),this._serviceTree.set(n,u);let p=new kp(s,this._asyncStackPolicy,a,l),d=p.createThread(i,n);"inspectUri"in a&&!!a.inspectUri&&this.attachDotnetDebuggerEvent(i,this._rootServices.get(yt),this._rootServices.get(vs));let h=async()=>(await p.launchBlocker(),n.runIfWaitingForDebugger(),e.threadData.resolve({thread:d,debugAdapter:p}),{});s.on("disconnect",m=>this._disconnectTarget(e,m)),s.on("terminate",()=>this._terminateTarget(e)),s.on("restart",async()=>(n.canRestart()?n.restart():await this._restart(),Promise.resolve({}))),await this._delegate.initAdapter(p,n,t)?h():(s.on("attach",h),s.on("launch",h)),await n.afterBind()}attachDotnetDebuggerEvent(e,t,n){e.DotnetDebugger.on("reportBlazorDebugException",i=>{t.report("blazorDebugException",{exceptionType:i.exceptionType,"!error":i.exception,error:n?void 0:i.exception})})}_attachToNewTargets(e,t){for(let n of e.values()){if(!n.waitingForDebugger()||na.targetNodes.has(n))continue;let i=n.parent(),o=i?na.targetNodes.get(i):this._root;if(!o)throw new Error(`Got target with unknown parent: ${n.name()}`);let s=new na(n);o.add(s),this.attach(s,t)}}async _terminateOrphanThreads(e,t){let n=[...this._root.all()].filter(i=>!e.includes(i.value));return Promise.all(n.map(i=>this._markTargetAsTerminated(i,t)))}async _markTargetAsTerminated(e,t={}){if(e.state>=1)return await e.waitUntil(2),{};if(e.state=1,PB(e)){let n=await e.threadData.promise;await n.thread.dispose(),n.debugAdapter.dap.terminated(t),n.debugAdapter.dispose()}else this._dap.terminated(t);return await e.waitUntilChildrenAre(2),e.state=2,{}}async _terminateTarget(e){return e.state>=3?{}:(e.value.canStop()?e.value.stop():this._terminateRoot(!0),await e.waitUntil(2),{})}async _disconnectTarget(e,t){if(e.state>=3)return{};e.state<1&&(t.terminateDebuggee!==!0&&e.value.canDetach()?await e.value.detach():e.value.canStop()?e.value.stop():this._terminateRoot(t.terminateDebuggee)),await e.waitUntil(2),await e.waitUntilChildrenAre(3),e.state=3,queueMicrotask(()=>this._delegate.releaseDap(e.value));let n=e.value.parent();return(n?na.targetNodes.get(n):this._root)?.remove(e),{}}};function nX(r){xP&&r.output({category:"console",output:`Note: Using the "preview" debug extension
`})}var PB=r=>!!r.value,na=class r{constructor(e){this.value=e;this.threadData=ge();this._state=0;this._children=new Set;this._stateChangeEmitter=new A;e&&r.targetNodes.set(e,this)}static{this.targetNodes=new WeakMap}get state(){return this._state}set state(e){e>this._state&&(this._state=e,this._stateChangeEmitter.fire(e))}add(e){this._children.add(e)}remove(e){this._children.delete(e)}async waitUntil(e){return this._state>=e?Promise.resolve():new Promise(t=>{let n=this._stateChangeEmitter.event(i=>{i>=e&&(n.dispose(),t())})})}async waitUntilChildrenAre(e){await Promise.all([...this._children].map(t=>t.waitUntil(e)))}*all(){PB(this)&&(yield this);for(let e of this._children)yield*e.all()}};var oy=class{constructor(e,t,n,i,o){this.debugSession=e;this.logger=n;this.sessionStates=i;this.parent=o;this.subscriptions=new Te;t instanceof Da?this.connection=t:(t.setLogger(n),this.connection=new Da(t,this.logger))}listenToTarget(e){this.subscriptions.push(e.onNameChanged(()=>this.setName(e)),this.sessionStates.onAdd(([t])=>t===this.debugSession.id&&this.setName(e)),this.sessionStates.onRemove(([t])=>t===this.debugSession.id&&this.setName(e))),this.setName(e)}dispose(){this.subscriptions.dispose()}setName(e){let t=this.sessionStates.get(this.debugSession.id),n=e.name();this.parent instanceof sy&&(n=`${n} \xAB ${this.parent.debugSession.name}`),this.debugSession.name=t?`${n} (${t})`:n}},sy=class extends oy{constructor(t,n,i){super(t,n,i.get(q),i.get(ch));this.debugSession=t;this.services=i;this.connection.attachTelemetry(i.get(yt))}get binder(){return this._binder}createBinder(t){this._binder=new ny(t,this.connection,this.services,new Dg(this.debugSession.id))}dispose(){super.dispose(),this._binder?.dispose?.()}},ay=class{constructor(e,t){this.globalContainer=e;this.sessionLauncher=t;this._disposables=[];this._sessions=new Map;this._pendingTarget=new Map;this._sessionForTarget=new Map;this._sessionForTargetCallbacks=new Map}terminate(e){let t=this._sessions.get(e.id);this._sessions.delete(e.id),t&&t.dispose()}hasPendingTargetId(e){return this._pendingTarget.has(e)}createNewRootSession(e,t){let n=new sy(e,t,dB(this.globalContainer));return n.createBinder(this),this._sessions.set(e.id,n),n}createNewChildSession(e,t,n){let i=this._pendingTarget.get(t);if(!i)throw new Error(`Cannot find target ${t}`);let{target:o,parent:s}=i,a=new oy(e,n,s.logger,s.sessionStates,s);this._pendingTarget.delete(t),a.debugSession.name=o.name(),a.listenToTarget(o);let c=this._sessionForTargetCallbacks.get(o);return this._sessionForTargetCallbacks.delete(o),c?.fulfill?.(a),this._sessions.set(e.id,a),a}async acquireDap(e){return(await this.getOrLaunchSession(e)).connection}getOrLaunchSession(e){let t=this._sessionForTarget.get(e);if(t)return t;let n=new Promise(async(i,o)=>{let s,a=e.parent();if(a?s=await this.getOrLaunchSession(a):s=this._sessions.get(e.targetOrigin().id),!s)throw new Error("Expected to get a parent debug session for target");this._pendingTarget.set(e.id(),{target:e,parent:s}),this._sessionForTargetCallbacks.set(e,{fulfill:i,reject:o});let c=s.debugSession.configuration,u={type:c.type==="pwa-extensionHost"?"pwa-chrome":c.type,name:e.name(),request:s.debugSession.configuration.request,__pendingTargetId:e.id(),internalConsoleOptions:c.internalConsoleOptions,preRestartTask:c.preRestartTask??c.postDebugTask,postRestartTask:c.postRestartTask??c.preLaunchTask};this.sessionLauncher.launch(s,e,u)});return this._sessionForTarget.set(e,n),n}initAdapter(e,t,n){return Promise.resolve(!1)}releaseDap(e){this._sessionForTarget.delete(e);let t=this._sessionForTargetCallbacks.get(e);t&&t.reject(new Error("Target gone")),this._sessionForTargetCallbacks.delete(e)}dispose(){for(let e of this._sessions.values())e.dispose();this._sessions.clear(),this._pendingTarget.clear(),this._sessionForTarget.clear(),this._sessionForTargetCallbacks.clear();for(let e of this._disposables)e.dispose();this._disposables=[]}};var cy=class{constructor(e,t,n="127.0.0.1"){this.host=n;this.disposables=[];this.servers=new Map;this.sessionManager=new ay(e,t),this.portLeaseTracker=e.get(sr),this.disposables.push(this.sessionManager)}createDebugServer(e,t){return e.configuration.__pendingTargetId?this.createChildDebugServer(e):this.createRootDebugServer(e,t)}createRootDebugServer(e,t){return this.innerCreateServer(e,n=>this.sessionManager.createNewRootSession(e,n),t)}createRootDebugSessionFromStreams(e,t,n){let i=new Ap(t,n);return this.sessionManager.createNewRootSession(e,i)}createChildDebugServer(e,t){return this.innerCreateServer(e,n=>this.sessionManager.createNewChildSession(e,e.configuration.__pendingTargetId,n),t)}async innerCreateServer(e,t,n){let i=ge(),o=a=>{let c=new Ap(a,a),u=t(c);i.resolve(u.connection)},s=n===void 0?await new Promise((a,c)=>{let u=Gd(),l=EB.createServer(o).on("error",c).on("close",()=>TB.promises.unlink(u).catch(()=>{})).listen(u,()=>a(l))}):await Ek(this.portLeaseTracker,o,n,this.host);return this.servers.set(e.id,s),{server:s,connectionPromise:i.promise}}terminate(e){this.sessionManager.terminate(e),this.servers.get(e.id)?.close(),this.servers.delete(e.id)}dispose(){this.sessionManager.dispose()}};cU().install();var WX=uU.mkdtempSync(dU.join(pU.tmpdir(),"vscode-js-debug-"));process.env.L10N_FSPATH_TO_BUNDLE&&vy.config({fsPath:process.env.L10N_FSPATH_TO_BUNDLE});var gy=class{constructor(e,t,n,i){this.id=e;this.childConnection=n;this.configuration=i;this._name=t}set name(e){this._name=e,this.childConnection.then(t=>t.initializedBlocker).then(t=>t.dap().process({name:e}))}get name(){return this._name}},yy=class{constructor(e,t,n){let i=fB({storagePath:WX,isVsCode:!1});this.sessionServer=new cy(i,this,e);let o=ge(),s=new gy("root",vy.t("JavaScript debug adapter"),o.promise,{type:"pwa-chrome",name:"root",request:"launch"});t&&n?this.launchRootFromExisting(o,s,t,n):this.launchRoot(o,s)}launchRootFromExisting(e,t,n,i){let o=this.sessionServer.createRootDebugSessionFromStreams(t,n,i);e.resolve(o.connection)}async launchRoot(e,t){let n=await this.sessionServer.createRootDebugServer(t,by??0);n.connectionPromise.then(i=>e.resolve(i)),console.log(n.server.address().port.toString())}launch(e,t,n){let i={...n,sessionId:t.id,__jsDebugChildServer:""},o=ge(),s=new gy(t.id(),t.name(),o.promise,i);this.sessionServer.createChildDebugServer(s,0).then(({server:a,connectionPromise:c})=>{c.then(u=>o.resolve(u)),i.__jsDebugChildServer=a.address().port.toString(),e.connection._send({seq:0,command:"attachedChildSession",type:"request",arguments:{config:i}})})}},by,my;process.argv.length>=3&&(by=+process.argv[2],process.argv.length>=4&&(my=process.argv[3]));if(by!==void 0){let r=lU.createServer(e=>{new yy(my,e,e)}).listen(by,my);r.on("listening",()=>{console.log(`Listening at ${r.address().address}:${r.address().port}`)})}else new yy(my);
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-windows/index.js:
  (*!
   * is-windows <https://github.com/jonschlinkert/is-windows>
   *
   * Copyright  2015-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
